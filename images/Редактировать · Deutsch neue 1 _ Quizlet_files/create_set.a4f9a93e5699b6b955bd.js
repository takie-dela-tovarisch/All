(window.QJP=window.QJP||[]).push([["create_set","rich_text_editor_lazy","unconfirmed_permission_error_modal_lazy"],{"+L51":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("RVJv");class r extends s.a{}r.URL_BASE="class-sets",r.MODEL_NAME="classSet",r.UNIQUE_KEYS=["setId","classId"]},"+leE":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return a}));var s=i("mEm4"),r=Object(s.a)("CREATE_SET",{DELETE_DIAGRAM_SHAPE_SUCCESS:null,DIAGRAM_IMAGE_CANCEL_EDIT:null,DIAGRAM_IMAGE_DELETE:null,DIAGRAM_IMAGE_DELETE_SUCCESS:null,DIAGRAM_IMAGE_EDIT:null,DIAGRAM_IMAGE_SAVE:null,DIAGRAM_IMAGE_START_EDIT:null,DIAGRAM_IMAGE_UNDO:null,EDIT_DIAGRAM_SHAPE:null,EDIT_TERM:null,LEGACY_SET_STORE_UPDATE:null,LEGACY_TERM_STORE_UPDATE:null,NEW_DIAGRAM_SHAPE:null,NEW_DIAGRAM_SHAPE_CANCEL:null,SEARCH_DIAGRAMS:null,SEARCH_DIAGRAMS_FAILURE:null,SEARCH_DIAGRAMS_RESET:null,SEARCH_DIAGRAMS_SUCCESS:null,UPLOAD_IMAGE:null,UPLOAD_IMAGE_FAILURE:null,UPLOAD_IMAGE_SUCCESS:null,UPSELL_MODAL_CLOSE:null,UPSELL_MODAL_OPEN:null}),a=Object(s.a)("CREATE_SET_DIAGRAM_CONTAINERS",{EDIT:null,UPLOAD:null})},"08aY":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("q1tI"),r=i.n(s);function a(e){var{children:t,prompt:i}=e;return r.a.createElement("div",{className:"TermSidePopover"},r.a.createElement("div",{className:"TermSidePopover-prompt"},i),r.a.Children.map(t,(e=>r.a.createElement("div",{className:"TermSidePopover-action"},e))))}},"0PkO":function(e,t,i){"use strict";i("4mDm"),i("3bBZ"),i("zKZe");var s=i("nmax"),r=i("dEGm"),a=i("RsOY"),n=i.n(a),o=i("vL1h"),l={classSets:{},classSetClassMap:{},classSetSetMap:{},setup(e,t,i){for(var s in void 0===t&&(t={}),void 0===i&&(i={}),e){var a=e[s];this.classSets[s]=a}this.classes=t,this.sets=i,this._generateClassSetClassMap(t),this._generateClassSetSetMap(i),this.bindActions(r.a.actions.BULK_DELETE,this._bulkDelete),this.bindActions(r.a.actions.BULK_UPDATE,this._updateClassSets)},getAll(){return this.classSets},getClassMap(){return this.classSetClassMap},getSetMap(){return this.classSetSetMap},getUnsyncedClassSets(e){var t={};for(var i in this.classSets){var s=this.classSets[i];s.setId||(t[i]={classId:s.classId,setId:e})}return t},_bulkDelete(e){var{luids:t}=e;this.classSets=Object(o.a)(this.classSets,t),this.classSetSetMap=Object(o.a)(this.classSetSetMap,t),this.classSetClassMap=Object(o.a)(this.classSetClassMap,t)},_generateClassSetClassMap(e){var t=this,i=function(i){var s=e[i],r=Object.keys(t.classSets).filter((e=>t.classSets[e].classId===s.id));t._associateClass(i,r)};for(var s in e)i(s)},_generateClassSetSetMap(e){var t=this,i=function(i){var s=e[i],r=Object.keys(t.classSets).filter((e=>t.classSets[e].setId===s.id));t._associateSet(i,r)};for(var s in e)i(s)},_associateSet(e,t){var i={};for(var s of t)this._ensureContains(s),i[s]=e;this.classSetSetMap=n()(this.classSetSetMap,{$merge:i})},_associateClass(e,t){var i={};for(var s of t)this._ensureContains(s),i[s]=e;this.classSetClassMap=n()(this.classSetClassMap,{$merge:i})},_ensureContains(e){if(!this._contains(e))throw new Error("LUID "+e+" not found")},_contains(e){return e in this.classSets},_updateClassSets(e){var{luidToProps:t}=e,i={};for(var s in t){var r=t[s];this.classSets[s]?i[s]={$merge:r}:i[s]={$set:r}}this.classSets=n()(this.classSets,i),this.classSetClassMap={},this.classSetSetMap={},this._generateClassSetClassMap(this.classes),this._generateClassSetSetMap(this.sets)}};(l=Object.assign(l,s.a)).init(),t.a=l},"0j+G":function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var s=i("xaJk"),r=i.n(s),a=i("WjpJ"),n=i.n(a),o=(i("zKZe"),i("4mDm"),i("3bBZ"),i("Junv"),i("ToJy"),i("jE4y")),l=i("pfAI"),u=i("FAB2"),d=i("QMP1"),c=i("9WHe"),h=i("RsOY"),p=i.n(h),g=i("1iNE"),m=i.n(g),f=i("nmax"),v=i("h4pu"),_=i("vL1h");function E(e){var t=typeof e;return"string"===t?"$:"+e:"number"===t?"n"+e:e}i("UxlC"),i("Rm1S"),i("TWNs"),i("JfAA");var b=i("zK28"),S=i("5UaS"),C=i.n(S),T={};function y(e,t){var i=function(e,t){if(void 0===t&&(t=b.a.blackAndWhitelistObfuscatedRegexesByLang),void 0===T[e]){T[e]={};var i=void 0===t[e]?"en":e;Object.keys(t[i]).map((s=>(T[e][s]=t[i][s]?new RegExp(C.a.reverse(t[i][s]),"ig"):null,null)))}return T[e]}(t);if(!i||!i.black)return!1;var s=e;return s&&i.white&&(s=s.replace(i.white," ")),!!(" "+s+" ").match(i.black)}var I=i("T3U7"),A=i("kf70"),O=i("GFZu"),w=i("KD7m"),{hasOwnProperty:D}={},L="en",R="CHANGE_TERMS",x=n.a;function P(e,t){return e?!t||e.length!==t.length||!e.every(((e,i)=>{var s=t[i],{text:r}=e,{text:a}=s;return e.id===s.id&&r.plainText===a.plainText&&r.languageCode===a.languageCode&&Object(A.a)(r.richText,a.richText)})):!!t}var M=Object.assign({terms:{},order:[],wordsToLuids:{},ignoredDuplicateWords:[],termImageMap:{},termWordCustomAudioMap:{},termDefinitionCustomAudioMap:{},imageSearchResults:{},autodefineResults:{},profanityResults:{},wordSideSuggestions:null,definitionSideSuggestions:null,distractorSuggestions:null,distractorSuggestionsSelected:null,phantomRow:null,activeRow:null,activeSide:"word",activeContext:null,setup(e,t,i,s,r){for(var a in void 0===s&&(s={}),e){var n=e[a];this.terms[a]=Object.assign({},n)}this._reorder(),this._generateTermCustomAudioMap(i,t),r||this._createMinRows(),this._ensurePhantomRow();var c=Object.keys(e).filter((t=>null!==e[t].definitionImageId)).map((t=>({[t]:e[t]}))),h=Object.assign({},...c);this._generateTermImageMap(h,s),this._initWordsToLuids(),this.bindActions(d.b.ACTIVATE_ROW,this._activateRow),this.bindActions(d.b.ACTIVATE_SIDE,this._activateSide),this.bindActions(d.b.ACTIVATE_ROW_SIDE,this._activateRowSide),this.bindActions(d.b.ACTIVATE_OFFSET_ROW_CONTEXT,this._activateOffsetRowContext),this.bindActions(d.b.FLIP_COLUMNS,this._flipColumns),this.bindActions(d.b.CONTEXT_TOGGLE,this._contextToggle),this.bindActions(d.b.CONTEXT_RESET,this._contextReset),this.bindActions(d.b.LOCAL_BULK_CREATE,this._bulkCreate),this.bindActions(d.b.UPDATE,this._update),this.bindActions(d.b.UPDATE_SUCCESS,this._updateSuccess),this.bindActions(d.b.DELETE,this._delete),this.bindActions(d.b.MOVE,this._move),this.bindActions(d.b.AUTODEFINE,this._autodefine),this.bindActions(d.b.AUTODEFINE_SUCCESS,this._autodefineSuccess),this.bindActions(d.b.AUTODEFINE_FAILURE,this._autodefineFailure),this.bindActions(u.a.FOCUS_TITLE,this._deactivateRow),this.bindActions(l.a.BULK_CREATE,this._bulkAssociateImage),this.bindActions(l.a.REPLACE,this._associateImage),this.bindActions(l.a.DELETE,this._unassociateImage),this.bindActions(l.a.SEARCH,this._searchImage),this.bindActions(l.a.SEARCH_SUCCESS,this._searchImageSuccess),this.bindActions(l.a.SEARCH_FAILURE,this._searchImageFailure),this.bindActions(d.b.DELETE_IMAGE_SUCCESS,this._unassociateTermImage),this.bindActions(d.b.DELETE_IMAGE_SUCCESS,this._unassociateTermImage),this.bindActions(u.a.SHOW_LANG_SELECT,this._showLangSelect),this.bindActions(d.b.IGNORE_DUPLICATE_WORD,this._ignoreDuplicateWord),this.bindActions(d.b.AUTO_SUGGEST_SUCCESS,this._handleAutosuggestSuccess),this.bindActions(d.b.AUTO_SUGGEST_CLEAR,this._handleAutosuggestClear),this.bindActions(d.b.AUTO_SUGGEST_FAILURE,this._handleAutosuggestFailure),this.bindActions(d.b.CREATE_IMAGE_SUCCESS,this._associateTermImage),this.bindActions(o.a.actions.CREATE_SUCCESS,this._associateCustomAudio),this.bindActions(o.a.actions.DELETE,this._deassociateCustomAudio)},getAll(){return this.terms},getOrder(){return this.order},getTermWordCustomAudioMap(){return this.termWordCustomAudioMap},getTermDefinitionCustomAudioMap(){return this.termDefinitionCustomAudioMap},getImageMap(){return this.termImageMap},getImageSearchResults(){return this.imageSearchResults},getAutodefineResults(){return this.autodefineResults},getProfanityResults(){return this.profanityResults},getWordSideSuggestions(){return this.wordSideSuggestions},getDefinitionSideSuggestions(){return this.definitionSideSuggestions},getDistractorSuggestions(){return this.distractorSuggestions},getPhantomRow(){return this.phantomRow},getActiveRow(){return this.activeRow},getActiveSide(){return this.activeSide},getActiveContext(){return this.activeContext},getWordsToLuids(){return this.wordsToLuids},getIgnoredDuplicateWords(){return this.ignoredDuplicateWords},isBlankDefinitions(){for(var e in this.terms){if(this.terms[e].definition)return!1}return!0},isImagesOnly(){var e=!0;for(var t in this.terms){var i=this.terms[t],[s]=this.termImageMap[t],r=!(!t||!s);if((i.word||i.definition||r)&&(e=!1,i.definition||!r))return!1}return!e},getNumFreeTerms(){for(var e=this.order.length,t=0,i=this.order.length-1;i>=0;i--){var s=this.order[i],{word:r,definition:a}=this.terms[s];if(r||a)break;t++}return u.d.MAX_TERMS-e+t},getNumSyncedTerms(){var e=0;for(var t in this.terms){void 0!==this.terms[t].id&&(e+=1)}return e},getNumTotalTerms(){return m()(this.terms)},getNumUnsyncedTerms(){return this.getNumTotalTerms()-this.getNumSyncedTerms()},getIndicesToAdd(e){var t=u.d.MAX_TERMS-this.order.length;return e.slice(0,t)},getImagelessTermLuids(e,t){var i=this._getIndex(t),s=[];for(var r of Array.from(this.order.slice(i)))if(!this._isPhantomRow(r)){var[,a]=Array.from(this.termImageMap[r]||[null,null]);e[a]||s.push(r)}return s},getImportInfo(){var e,t=[];for(e=this.order.length-2;e>=0;e--){var i=this.order[e],s=this.terms[i];if(s.word||s.definition)break;t.push(i)}return t.reverse(),{startIndex:e+1,luidsToReplace:t}},getUnsavedTermUpdates(e){void 0===e&&(e=!1);var t={},i=this.getAll(),s=[];for(var r in i){var a=i[r];if(!(r in t)){var n=!1;if(v.a.contains(r)){var o=v.a.getModel(r);(o.hasChanges()||void 0!==a.word&&Object(w.a)(a.word)!==o.get("word")||void 0!==a.definition&&Object(w.a)(a.definition)!==o.get("definition")||void 0!==a.wordRichText&&a.wordRichText!==o.get("wordRichText")||void 0!==a.definitionRichText&&a.definitionRichText!==o.get("definitionRichText")||P(a.definitionCustomDistractors,o.get("definitionCustomDistractors")))&&(n=!0,e&&s.push(o.getProperties()))}else n=!0;n&&(e&&c.a.debug("Previous state of models prior to successful syncing",s),t[r]={rank:a.rank,word:a.word,wordRichText:a.wordRichText,definition:a.definition,definitionRichText:a.definitionRichText})}}return t},hasTermLuid(e){return this._contains(e)},hasPhantomRow(){return this._hasPhantomRow()},_showLangSelect(){if(this.activeRow&&this.activeContext)return this.activeContext=null,[this.activeRow]},_activateSide(e){var{luid:t,activeSide:i}=e;return this.activeSide=i,[t]},_activateRowSide(e){var{luid:t,activeSide:i}=e;return this.activeSide=i,this._activateRow({luid:t})},_activateRow(e){var t,{luid:i}=e;this._isPhantomRow(i)&&(this.phantomRow=null),this._isActiveRow(i)||(this.activeRow=i),this.activeContext=null;var s=[i];return(t=this._ensurePhantomRow())&&s.push(t),s},_deactivateRow(){var e=this.activeRow?[this.activeRow]:[];return this.activeRow=null,e},_contextToggle(e){var{luid:t,context:i}=e,s=this._activateRow({luid:t});return this.activeContext=i,this._isActiveRow(t)||(this.activeRow=t),s},_contextReset(e){var{luid:t}=e;return this.activeContext=null,[t]},_activateOffsetRowContext(e){var{fromLuid:t,offset:i,context:s}=e,r=this._getIndex(t)+i,a=r<=this._getLastIndex()?this.order[r]:null;return null===a?[t]:this._contextToggle({luid:a,context:s}).concat([t])},_bulkCreate(e){for(var t,{luids:i,indices:s,activatePhantom:r}=e,a={},n={},o=0;o<i.length;o++){t=i[o];var l=s[o];a[t]={$set:{rank:l}},n[t]=[null,null]}this._setTerms(p()(this.terms,a),a),this.termImageMap=p()(this.termImageMap,{$merge:n});var u={};for(t of Array.from(i))u[t]=this.terms[t];return this._harmonizeRanks(u),r&&this._activateRow({luid:this.phantomRow}),i},_update(e){var t,{luidToProps:i,wordLang:s,defLang:r,checkForProfanity:a=!0}=e,n={},o={},l=Object.keys(i);for(t in i){var u=i[t],d=this.terms[t],{word:c}=u;d?(n[t]={$merge:u},c!==d.word&&l.push(this._detachLuidFromWordAndGetChangingLuids(t))):(n[t]={$set:Object.assign({},u)},o[t]=[null,null])}var h=this._attachLuidsToWordsAndGetChangingLuids(i);h&&(l=l.concat(h)),this._setTerms(p()(this.terms,n),n),this.termImageMap=p()(this.termImageMap,{$merge:o}),a&&(this.profanityResults=p()(this.profanityResults,{$merge:this._detectProfanity(i,s,r)}));var g={};for(t in i)g[t]=this.terms[t];return this._harmonizeRanks(g),l},_flipColumns(e){var{luidToProps:t}=e;return this._deactivateRow(),this._update({luidToProps:t,checkForProfanity:!1})},_ignoreDuplicateWord(e){var{word:t}=e;return this.ignoredDuplicateWords=p()(this.ignoredDuplicateWords,{$push:[E(t)]}),this.wordsToLuids[E(t)]},_updateSuccess(e){var{models:t}=e,i={};for(var s in t){var r=t[s],a=this.terms[s],n=r.get("id"),o=r.get("setId"),l=r.get("_wordTtsUrl"),u=r.get("_definitionTtsUrl"),d=r.get("definitionCustomDistractors");if(a){var c={};n&&!a.id&&(c.id=n),o&&!a.setId&&(c.setId=o),l!==a._wordTtsUrl&&(c._wordTtsUrl=l),u!==a._definitionTtsUrl&&(c._definitionTtsUrl=u),d&&(c.definitionCustomDistractors=d),m()(c)>0&&(i[s]={$merge:c})}}return m()(i)>0&&this._setTerms(p()(this.terms,i),i),Object.keys(i)},_delete(e){var t,{luid:i}=e;this._ensureContains(i),this._isPhantomRow(i)&&(this.phantomRow=null),this._contextReset(i);var s=this._getSiblingRow(i,1),r=this.order.indexOf(i);this.order=p()(this.order,{$splice:[[r,1]]});var a=[i];return a.push(this._detachLuidFromWordAndGetChangingLuids(i)),this._setTerms(Object(_.a)(this.terms,[i]),Object(O.a)(i,{$delete:{}})),this._harmonizeRanks(),s&&!this._isActiveRow(s)&&(this.activeRow=s,a.push(s)),(t=this._ensurePhantomRow())&&a.push(t),a},_move(e){var{luid:t,oldIndex:i,newIndex:s}=e;this._ensureContains(t);var r=this.terms[t].rank,a=this._lookupByIndex(s),n=a?a.rank:r+(s-i),o=Object(O.a)(t,{$merge:{}});o[t].$merge.rank=n,this._setTerms(p()(this.terms,o),o);var l=Object(O.a)(t,this.terms[t]);return this._harmonizeRanks(l),[t]},_deassociateCustomAudio(e){var{termLuid:t,termSide:i}=e;return this._ensureContains(t),"word"===i?delete this.termWordCustomAudioMap[t]:"definition"===i&&delete this.termDefinitionCustomAudioMap[t],[t]},_associateCustomAudio(e){var{customAudioLuid:t,termLuid:i,termSide:s}=e;return this._ensureContains(i),"word"===s?this.termWordCustomAudioMap[i]=t:"definition"===s&&(this.termDefinitionCustomAudioMap[i]=t),[i]},_bulkAssociateImage(e){var t={};for(var i of Array.from(e)){this._ensureContains(i.termLuid);var[s]=Array.from(this.termImageMap[i.termLuid]);t[i.termLuid]=[s,i.imageLuid]}return this.termImageMap=p()(this.termImageMap,{$merge:t}),e.map((e=>e.termLuid))},_associateImage(e){var{luid:t,termLuid:i}=e;return this._bulkAssociateImage([{imageLuid:t,termLuid:i}])},_unassociateImage(e){var{termLuid:t}=e;this._ensureContains(t);var[i]=Array.from(this.termImageMap[t]);return this._setTermImageMapForLuid(t,[i,null]),[t]},_associateTermImage(e){var{luid:t,termLuid:i,imageLuid:s}=e;return this._ensureContains(i),this._setTermImageMapForLuid(i,[t,s]),[i]},_unassociateTermImage(e){var{termLuid:t}=e;return this._ensureContains(t),this._setTermImageMapForLuid(t,[null,null]),[t]},_searchImage(e){var{luid:t,query:i,lang:s}=e;this._ensureContains(t);var r=Object(O.a)(t);return r[t]={results:{},imageLuids:[],lang:s,queryString:i,isLoading:!0,error:null},this.imageSearchResults=p()(this.imageSearchResults,{$merge:r}),[t]},_searchImageSuccess(e){var{luid:t,imageLuids:i}=e;if(this._ensureContains(t),!this.imageSearchResults[t])return[];var s=Object(O.a)(t,{$merge:{}});return s[t].$merge={imageLuids:i,isLoading:!1},this.imageSearchResults=p()(this.imageSearchResults,s),[t]},_searchImageFailure(e){var{luid:t,error:i}=e;if(this._ensureContains(t),!this.imageSearchResults[t])return[];var s=Object(O.a)(t,{$merge:{}});return s[t].$merge={error:i},this.imageSearchResults=p()(this.imageSearchResults,s),[t]},_autodefine(e){var{luid:t,query:i}=e;this._ensureContains(t);var s=Object(O.a)(t);return s[t]={data:[],queryString:i,isLoading:!0,error:null},this.autodefineResults=p()(this.autodefineResults,{$merge:s}),[t]},_autodefineSuccess(e){var{luid:t,autodefineResults:i}=e;if(this._ensureContains(t),!this.autodefineResults[t])return[];var s=Object(O.a)(t,{$merge:{}}),r=i.data.suggestions.suggestions;return 0===r.length?Object(I.a)("new_create_set_select_autodefine_search_results_empty"):Object(I.a)("new_create_set_select_autodefine_search_results_exist"),s[t].$merge={data:r,isLoading:!1},this.autodefineResults=p()(this.autodefineResults,s),[t]},_autodefineFailure(e){var{luid:t,error:i}=e;if(this._ensureContains(t),!this.autodefineResults[t])return[];var s=Object(O.a)(t,{$merge:{}});return s[t].$merge={error:i,isLoading:!1},this.autodefineResults=p()(this.autodefineResults,s),[t]},_handleAutosuggestSuccess(e){var{suggestions:t,side:i}=e;return"word"===i&&(this.wordSideSuggestions=t,this.definitionSideSuggestions=null),"definition"===i&&(this.wordSideSuggestions=null,this.definitionSideSuggestions=t),"distractors"===i&&(this.distractorSuggestions=t),[]},_handleAutosuggestClear(e){return"word"===e&&(this.wordSideSuggestions=null),"definition"===e&&(this.definitionSideSuggestions=null,this.distractorSuggestions=null),"distractors"===e&&(this.distractorSuggestions=null),[]},_handleAutosuggestFailure(e){return c.a.error("Failed to call autouggestion API",e),this.wordSideSuggestions=null,this.definitionSideSuggestions=null,[]},_harmonizeRanks(e){var t;void 0===e&&(e={});var i={},s=0;for(var r in e){for(void 0===(t=e[r].rank)&&(t=2501);i[t];)t++;i[t]=r,t>s&&(s=t)}for(var a of(t=0,this.order))if(!(a in e)){for(;i[t];)t++;i[t]=a}s=Math.max(t,s),t=0;for(var n=0,o=s,l=o>=0;l?n<=o:n>=o;l?n++:n--)if(n in i){var u=i[n];this.terms[u].rank=t,t++}this._reorder()},_generateTermCustomAudioMap(e,t){var i=r()(t,((e,t,i)=>{var{id:s}=t;return e[s]=i,e}),{}),s=r()(e,((e,t,i)=>{var{id:s}=t;return e[s]=i,e}),{});for(var a in this.terms){var{definitionCustomAudioId:n,wordCustomAudioId:o}=this.terms[a];n&&(this.termDefinitionCustomAudioMap[a]=s[n]),o&&(this.termWordCustomAudioMap[a]=i[o])}},_generateTermImageMap(e,t){var i;if(Object.keys(e).length!==Object.keys(t).length)throw new Error("termsWithImage and images must have the same length");var s={};for(var r in t)({id:i}=t[r]),s[i]=r;var a={};for(var n in e){var o=void 0;({id:i,definitionImageId:o}=e[n]);var l=s[o];if(!l)throw new Error("termImage must have corresponding image");a[i]=[n,l]}var u={};for(var d in this.terms)({id:i}=this.terms[d]),u[d]=a[i]||[null,null];this.termImageMap=p()(this.termImageMap,{$merge:u})},_setTermImageMapForLuid(e,t){var i=Object(O.a)(e,t);this.termImageMap=p()(this.termImageMap,{$merge:i})},_reorder(){var e=Object.keys(this.terms);e.sort(((e,t)=>this.terms[e].rank-this.terms[t].rank)),this.order=e},_lookupByIndex(e){return e>=this.order.length||e<0?null:this.terms[this.order[e]]},_ensureContains(e){if(!this._contains(e))throw new Error("LUID "+e+" not found")},_contains(e){return this.order.indexOf(e)>-1&&e in this.terms},_hasPhantomRow(){return null!==this.phantomRow},_isPhantomRow(e){return e===this.phantomRow},_isActiveRow(e){return e===this.activeRow},_getNumTerms(){var e=this.order.length;return this._hasPhantomRow()&&(e-=1),e},_getIndex(e){return this.order.indexOf(e)},_getLastIndex(){return this._getNumTerms()-1},_getSiblingRow(e,t){var i=this._getIndex(e)+t,s=this._getLastIndex();return i<=s?this.order[i]:s>0&&t>0?this.order[s-1]:null},_ensurePhantomRow(){if(!(this.order.length>=u.d.MAX_TERMS||this._hasPhantomRow())){var e=this.order.length,t=v.a.add(e);return this._bulkCreate({luids:[t],indices:[e]}),this.phantomRow=t,t}},_createMinRows(){var e=this.order.length,t=(0===this.order.length?u.d.MIN_TERMS_BLANK_SET:u.d.MIN_TERMS)-e;if(t>0){var i=x(e,e+t),s=Array.from(i).map((e=>v.a.add(e)));this._bulkCreate({luids:s,indices:i})}},_initWordsToLuids(){var e={};for(var t in this.terms){var i=this.terms[t];if(void 0!==i.word&&""!==i.word){var s=E(i.word);e[s]&&e[s].$set?e[s].$set.push(t):e[s]={$set:[t]}}}this.wordsToLuids=p()(this.wordsToLuids,e)},_attachLuidsToWordsAndGetChangingLuids(e){var t={},i=[];for(var s in e){var{word:r}=e[s];if(r&&-1===this.ignoredDuplicateWords.indexOf(E(r))){var a=E(r);if(D.call(this.wordsToLuids,a)){var n=this.wordsToLuids[a];-1===n.indexOf(s)&&(t[a]&&t[a].$push?t[a].$push.push(s):t[a]={$push:[s]}),i=i.concat(n)}else t[a]&&t[a].$set?t[a].$set.push(s):t[a]={$set:[s]}}}return m()(t)>0&&(this.wordsToLuids=p()(this.wordsToLuids,t)),i},_detachLuidFromWordAndGetChangingLuids(e){var{word:t}=this.terms[e],i=E(t),s=this.wordsToLuids[i];if(!D.call(this.wordsToLuids,i)||-1===s.indexOf(e))return[];var r=s.indexOf(e),a=Object(O.a)(i,{$splice:[[r,1]]});return this.wordsToLuids=p()(this.wordsToLuids,a),1===m()(this.wordsToLuids[i])?this.wordsToLuids[i]:void 0},_detectProfanity(e,t,i){var s={};for(var r in e){var{word:a,definition:n}=e[r];s[r]={word:{data:{level:a&&(y(a,t)||t!==L&&y(a,L))?3:0}},definition:{data:{level:n&&(y(n,i)||n!==L&&y(n,L))?3:0}}}}return s},_setTerms(e,t){this.terms=e,this.emit(R,t)}},f.a);M.init();t.b=M},"130X":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return o}));var s=i("vid3"),r=i("PANE"),a=i("q1tI"),n=i.n(a);function o(t){var i=Object(r.a)(),a=t.isAutosuggestionEnabled?"list-add":"night"===i?"list-add-disabled-night":"list-add-disabled",o=t.canShowTooltip&&t.isAutosuggestionEnabled?e("create_set.term_context.tooltips.auto_suggestions_off"):e("create_set.term_context.tooltips.auto_suggestions_on");return n.a.createElement(s.b,{icon:a,isActive:!1,onClick:t.onToggleAutosuggest,tooltip:o})}}).call(this,i("nrsj").default)},"13SJ":function(e,t,i){"use strict";i("5s+n");t.a=function(e,t){return void 0===t&&(t=5e3),new Promise(((i,s)=>{var r=new Image,a=window.setTimeout((()=>{s(new Error("Domain "+e+" timed out"))}),t);r.onabort=()=>{clearTimeout(a),s(new Error("Domain "+e+" aborted"))},r.onerror=()=>{clearTimeout(a),s(new Error("Domain "+e+" errored"))},r.onload=()=>{clearTimeout(a),i()},r.src=e+"/favicon.ico"}))}},"20bE":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return C}));var s=i("TSYQ"),r=i.n(s),a=i("K+TW"),n=i("cE6c"),o=i("47yS"),l=i("5eZy"),u=i("og3H"),d=i("QimK"),c=i("130X"),h=i("vid3"),p=i("800S"),g=i("QLaP"),m=i.n(g),f=i("q1tI"),v=i.n(f),_=i("KlxJ"),E=i("FBfK"),b=i("ttfT"),S=i("mmUd");class C extends v.a.PureComponent{constructor(e){super(e),this.handleToggleHintOrExplanation=()=>{this.props.onToggleHintOrExplanation&&this.props.onToggleHintOrExplanation()},this.handleDeleteItem=()=>{this.props.onDelete&&this.props.onDelete()},this.handleAddVideoClip=()=>{this.props.onAddVideoClip&&this.props.onAddVideoClip()},this.handleMouseDown=e=>{e.preventDefault()},this.handleMouseOver=()=>{this.setState({isActive:!0})},this.handleMouseOut=()=>{this.setState({isActive:!1})},this.handleOnChooseFiles=(e,t)=>{this.props.onImageUpload&&this.props.onImageUpload(e,t)},this.renderEditableToggles=()=>v.a.createElement(v.a.Fragment,null,this.props.canEditRichText?this.renderPMToolbar():this.renderUpsellPMToolbar(),this.props.canEditRichText&&!Object(S.a)()?v.a.createElement(l.a,{bgColor:"gray",key:"contextDivider"}):null,this.renderToolbarContextToggles(),this.props.shouldShowHintToggle?v.a.createElement(v.a.Fragment,null,v.a.createElement(l.a,{bgColor:"gray",key:"contextDivider"}),this.renderMoreContextToggles()):null),this.state={isActive:!1}}renderDragToggle(){var{shouldShowDragToggle:e}=this.props,t=r()("StudiableItemToolbar-dragToggle");return e?v.a.createElement("div",{className:t},v.a.createElement(h.b,{disabled:!this.state.isActive,icon:"drag",isActive:this.props.isDragged,onClick:()=>{}})):null}renderDeleteToggle(){return v.a.createElement(h.b,{disabled:this.props.isDeleteToggleDisabled,icon:"garbage",onClick:this.handleDeleteItem,tooltip:e("create_set.term_context.tooltips.delete_row")})}renderImageUploadContextToggle(){var{imageHelper:t,isImageLoading:i}=this.props,s=null!=t&&t.hasImage()?e("create_set.term_context.tooltips.change_image"):e("create_set.term_context.tooltips.add_image");return i?v.a.createElement("div",{className:"StudiableItemToolBar-spinnerWrapper"},v.a.createElement(o.a,{size:"small"})):v.a.createElement(n.a,{mimeTypes:d.c,onChooseFiles:this.handleOnChooseFiles},(e=>v.a.createElement(h.b,{disabled:!this.props.enableImageUpload,icon:"image",iconProps:{variant:"borderless",size:"medium"},onClick:this.props.onToggleImageContext||e,tooltip:this.props.areTooltipsEnabled?s:void 0})))}renderVoiceRecordingContextToggle(){m()(this.props.onToggleVoiceRecordingContext,"onToggleVoiceRecordingContext should exists at this point");var e=v.a.createElement(p.a,{hasRecording:!!this.props.hasRecording,index:this.props.index,isActiveSide:!0,isRecordingContextOpen:!!this.props.isRecordingContextOpen,onToggleVoiceRecordingContext:this.props.onToggleVoiceRecordingContext,tooltipsEnabled:this.props.areTooltipsEnabled});return 0===this.props.index&&this.props.shouldShowTooltipAudio?v.a.createElement(a.a,{featurePopoverVariant:"audio",isVisible:!0,variant:"rounded"},e):e}renderAutosuggestionContextToggle(){return m()(this.props.onToggleAutosuggest,"onToggleAutosuggest should exists at this point"),v.a.createElement(c.a,{canShowTooltip:!!this.props.areTooltipsEnabled,isAutosuggestionContextOpen:!0,isAutosuggestionEnabled:!!this.props.isAutosuggestionEnabled,onToggleAutosuggest:this.props.onToggleAutosuggest})}renderUpsellPMToolbar(){return v.a.createElement(E.a,{isInCombinedToolbar:!0,shouldHideOuterBadge:!0})}renderPMToolbar(){var e=v.a.createElement(_.a,{editorView:this.props.editorView,isInCombinedToolbar:!0}),t=0===this.props.index&&this.props.shouldShowTooltipRichText?v.a.createElement(a.a,{featurePopoverVariant:"rich-text",isVisible:!0},e):e;return this.props.editorView?t:null}renderToolbarContextToggles(){return v.a.createElement("div",{className:"StudiableItemToolbar-contextToggles",key:"contextToggles"},this.props.isCapableOfVoiceRecording&&!this.props.isMobileWebView?this.renderVoiceRecordingContextToggle():null,this.props.shouldShowImageUploadToggle?this.renderImageUploadContextToggle():null,this.props.shouldShowAutosuggestionToggle?this.renderAutosuggestionContextToggle():null,this.props.shouldShowVideoClipToggle?this.renderVideoClipContextToggle():null)}renderVideoClipContextToggle(){return v.a.createElement(h.b,{disabled:this.props.shouldDisableVideoClipToggle,icon:"video",onClick:this.handleAddVideoClip,tooltip:this.props.shouldDisableVideoClipToggle?e("create_set.term_context.tooltips.add_video_explanation_disabled_text"):e("create_set.term_context.tooltips.add_video_explanation")})}renderMoreContextToggles(){var{enableHint:t,shouldShowHintToggle:i}=this.props,s=this.isTypeExplanation()?e("create_set.term_context.tooltips.add_explanation"):e("create_set.term_context.tooltips.add_hint"),r=this.isTypeExplanation()?"info-inverse":"lightbulb";return v.a.createElement("div",{className:"StudiableItemToolbar-moreToggles"},i?v.a.createElement(h.b,{disabled:!t,icon:r,isActive:!1,onClick:this.handleToggleHintOrExplanation,tooltip:s}):null)}render(){var{isTermActive:e,shouldRenderEditableToggles:t,shouldShowDeleteToggle:i,shouldShowOrder:s,shouldShowMobileToolbar:a}=this.props,n=r()("StudiableItemToolbar-counter",{}),o=r()("StudiableItemToolbar",{"is-term-active":e,"is-mobile-toolbar":a});return v.a.createElement("div",{className:o,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver},s?v.a.createElement("span",{className:n}):null,v.a.createElement("div",{className:"StudiableItemToolbar-editableToggles",onMouseDown:this.handleMouseDown},t||a?this.renderEditableToggles():null,!this.props.canEditRichText&&t?v.a.createElement(b.a,null,(e=>{var{isSelfIdentifiedTeacher:t}=e;return Object(E.b)(t)})):null),this.renderDragToggle(),i?v.a.createElement("div",{className:"StudiableItemToolbar-actionableToggles",onMouseDown:this.handleMouseDown},this.renderDeleteToggle()):null)}isTypeExplanation(){var{hintToggleType:e}=this.props;return void 0!==e&&e===u.Ab.MULTIPLE_CHOICE_OPTION}}}).call(this,i("nrsj").default)},"2fsZ":function(e,t,i){"use strict";var s=i("T3U7"),r=i("sEfC"),a=i.n(r)()(((e,t)=>Object(s.a)(e,t)),1e3);t.a=a},"2pfH":function(e,t,i){"use strict";(function(e){i("4mDm"),i("3bBZ"),i("4Brf");var s=i("1Pxe"),r=i("qKTw"),a=i("TSYQ"),n=i.n(a),o=i("x+ut"),l=i("5OCO"),u=i("mahw"),d=i("lG1/"),c=i("Uudg"),h=i("nXOR"),p=i("8WOz"),g=i("Pxp3"),m=i("bvRJ"),f=i("xqF0"),v=i("a08m"),_=i("KHqc"),E=i("DLQF"),b=i("jvKz"),S=i("vzun"),C=i("nCwC"),T=i("k5kW"),y=i("LEyH"),I=i("elj8"),A=i("yNpj"),O=i("Ee28"),w=i("q1tI"),D=i.n(w),L=i("niBS"),R=i("O10W"),x=i("T3U7"),P=i("YleJ"),M=window.document.querySelector(".SiteHeader")?Object(L.b)(104):Object(L.b)(24),U=Object(L.b)(50);class k extends w.PureComponent{constructor(){var t;super(...arguments),t=this,this.state={description:this.props.set.description,shouldAnimateHeader:!1,title:this.props.set.title},this.handleCloseCreateSet=()=>Object(P.a)("create_set_close"),this.handleMoreMenuClick=()=>Object(P.a)("more_menu"),this.handleKeyboardClick=()=>Object(P.a)("keyboard"),this.handleImportClick=e=>{Object(P.a)("import"),this.props.onOpenImport&&this.props.onOpenImport(e)},this.handleFlipTermsDefinitionsClick=e=>{Object(P.a)("flip_terms_definitions"),this.props.onFlipColumn&&this.props.onFlipColumn(e)},this.handleToggleAutosuggest=()=>{var{isAutosuggestionEnabled:e,onToggleAutosuggest:t}=this.props,i=e?"autosuggest_off":"autosuggest_on";Object(P.a)(i),t()},this.handleLockClick=()=>{Object(P.a)("lock"),this.onOpenViewablePermissions()},this.getSetUrl=()=>"/"+this.props.set.id,this.onChangeDescription=e=>{this.setState({description:e.currentTarget.value})},this.onBlurDescription=e=>{var t=e.currentTarget.value;(t||this.props.set.description)&&t!==this.props.set.description&&(this.updateAction({description:t}),Object(x.a)("create_set_description_added",{description:t,set_id:this.props.set.id}))},this.onFocusTitle=()=>{C.a.focusTitle()},this.onChangeTitle=e=>{this.setState({title:e.currentTarget.value})},this.onBlurTitle=e=>{var t=e.currentTarget.value;if(t||!this.props.set.isPublished())return(t||this.props.set.title)&&t!==this.props.set.title?this.updateAction({title:t}):void 0},this.onOpenViewablePermissions=()=>this.props.onOpenPermissions(y.d.VIEWING),this.onOpenEditingPermissions=()=>this.props.onOpenPermissions(y.d.EDITING),this.onClickEditDescription=e=>(e.preventDefault(),this.props.onOpenSetDescription()),this.renderPageTitle=()=>{if(!this.props.isPublished)return D.a.createElement(c.a,{id:"create_set.header.title"});var t=this.getSetUrl();return this.props.shouldShowAd?D.a.createElement(v.a,{to:t},D.a.createElement(m.a,{className:"CreateSetHeader-backIcon",icon:"wedge-left"}),D.a.createElement("span",{className:"CreateSetHeader-backText"},D.a.createElement(c.a,{id:"create_set.header.back_to_set"}))):D.a.createElement(_.a,{"aria-label":e("create_set.header.back_to_set"),linkTo:t},D.a.createElement(c.a,{id:"create_set.header.back_to_set"}))},this.renderEditPermissionButton=()=>{if(this.props.permissions.viewableBy===y.c.JUST_ME)return null;var t="";return this.props.permissions.editableBy===y.c.EVERYONE?t=e("create_set.permissions.editable_by.everyone"):this.props.permissions.editableBy===y.c.CLASSES?t=e("create_set.permissions.editable_by.certain_classes"):this.props.permissions.editableBy===y.c.PASSWORD?t=e("create_set.permissions.editable_by.password"):this.props.permissions.editableBy===y.c.JUST_ME&&(t=e("create_set.permissions.editable_by.me")),D.a.createElement("div",{className:"CreateSetHeader-permissionWrap"},D.a.createElement("div",{className:"CreateSetHeader-permissionsLink"},t),D.a.createElement(v.a,{onClick:this.onOpenEditingPermissions,tabIndex:0},D.a.createElement(c.a,{id:"create_set.permissions.change_link"})))},this.renderViewPermissionButton=()=>{var t="";return this.props.permissions.viewableBy===y.c.EVERYONE?t=e("create_set.permissions.viewable_by.everyone"):this.props.permissions.viewableBy===y.c.CLASSES?t=e("create_set.permissions.viewable_by.certain_classes"):this.props.permissions.viewableBy===y.c.PASSWORD?t=e("create_set.permissions.viewable_by.password"):this.props.permissions.viewableBy===y.c.JUST_ME&&(t=e("create_set.permissions.viewable_by.me")),D.a.createElement("div",{className:"CreateSetHeader-permissionWrap"},D.a.createElement("div",{className:"CreateSetHeader-permissionsLink"},t),D.a.createElement(v.a,{onClick:this.onOpenViewablePermissions,tabIndex:0},D.a.createElement(c.a,{id:"create_set.permissions.change_link"})))},this.renderDescriptionError=()=>this.hasDescriptionProfanityError()?D.a.createElement(c.a,{id:"create_set.header.set_description.profanity_error"}):null,this.renderTitleError=()=>this.hasTitleError()?this.hasTitleRequiredError()?D.a.createElement(c.a,{id:"create_set.header.set_title_error.missing"}):this.hasTitleProfanityError()?D.a.createElement(c.a,{id:"create_set.header.set_title_error.profane"}):D.a.createElement(c.a,{id:"create_set.header.set_title_error.unknown"}):null,this.renderStatus=()=>{var e;if(this.props.isSyncing)e=D.a.createElement(c.a,{id:"create_set.header.saving"});else{if(!this.props.lastSavedTimestamp)return null;e=Object(I.a)(this.props.setContentType)?D.a.createElement(c.a,{id:"create_set.header.all_changes_saved"}):D.a.createElement(c.a,{id:"create_set.header.last_saved_terms",numTermsSaved:this.props.numTermsSaved,timeAgo:Object(O.a)(Math.floor(this.props.lastSavedTimestamp/1e3))})}return D.a.createElement("div",{className:"CreateSetHeader-status"},e)},this.renderCreateSetValidationErrors=()=>D.a.createElement("div",{className:"CreateSetHeader-setValidationErrors"},D.a.createElement(E.a,{boxed:!0,icon:Object(I.a)(this.props.setContentType)?D.a.createElement(m.a,{icon:"system-report",size:"xlarge"}):null,uppercaseDeprecated:!0,variant:Object(I.a)(this.props.setContentType)?"alertClean":"alert"},this.props.setValidationBoxedErrors,this.hasDiagramImageUploadError()?D.a.createElement("div",null,this.props.diagramImageUploadError):null)),this.updateAction=function(e,i){return void 0===i&&(i=!0),C.a.update(t.props.setLuid,e,i)},this.focusTitleTextarea=()=>{this.titleTextarea.focus()},this.focusDescriptionTextarea=()=>{this.descriptionTextarea&&this.descriptionTextarea.focus()},this.hasDescriptionProfanityError=()=>!!this.props.setProfanityErrors.description,this.hasTitleRequiredError=()=>!!this.props.setValidationErrors.requires_title,this.hasTitleProfanityError=()=>this.props.setProfanityErrors.title,this.hasTitleError=()=>this.hasTitleRequiredError()||this.hasTitleProfanityError(),this.hasDiagramImageUploadError=()=>!!this.props.diagramImageUploadError}componentDidMount(){this.updateLastSyncedTimer=null,this.stickyHeaderRef&&C.a.updateStickyHeaderHeight(Object(R.a)(this.stickyHeaderRef).height)}UNSAFE_componentWillReceiveProps(e){this.setState({shouldAnimateHeader:this.props.isSticky&&this.props.hasFocusedInput&&!e.hasFocusedInput}),e.lastSavedTimestamp&&(null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer),this.updateLastSyncedTimer=window.setInterval((()=>this.forceUpdate()),6e4))}componentWillUnmount(){null!==this.updateLastSyncedTimer&&clearInterval(this.updateLastSyncedTimer)}shouldShowHeaderAd(){return this.props.isSticky}renderCreateSetHeaderStaticAd(){return D.a.createElement(o.a,{id:r.a.CREATE_SET_HEADER})}renderCreateSetHeaderAd(){return D.a.createElement("div",{className:"CreateSetHeader-adz"},D.a.createElement(h.a,{above:"m"},D.a.createElement("div",{className:"CreateSetHeader-adzContainer"},D.a.createElement("div",{className:"CreateSetHeader-adzWrapper"},this.shouldShowHeaderAd()?this.renderCreateSetHeaderStaticAd():null))))}renderHeadingContent(){return D.a.createElement(p.a,null,D.a.createElement("div",{className:"CreateSetHeader-headingContent"},D.a.createElement("div",{className:"CreateSetHeader-textarea CreateSetHeader-title",onClick:this.focusTitleTextarea},Object(I.a)(this.props.setContentType)?this.renderTitleTextFieldWithTooltip():this.renderTitleTextField()),D.a.createElement("div",{className:"CreateSetHeader-textarea CreateSetHeader-description",onClick:this.focusDescriptionTextarea},this.renderDescriptionTextField()),Object(I.a)(this.props.setContentType)?this.renderCleanBottomActionBar():null))}renderHeader(e){return D.a.createElement("div",{className:e,onDragOver:this.props.onDragOver},D.a.createElement("div",{className:"CreateSetHeader-stickyPlaceholder"},D.a.createElement("div",{className:"CreateSetHeader-sticky",ref:e=>{this.stickyHeaderRef=e}},this.renderHeading())),this.renderHeadingContent(),Object(I.a)(this.props.setContentType)?null:this.renderBottomActionBar(),D.a.createElement(p.a,null,D.a.createElement(s.CSSTransitionGroup,{transitionEnterTimeout:500,transitionLeaveTimeout:500,transitionName:"CreateSetHeader-animateSetValidationErrors"},this.props.setValidationBoxedErrors||this.hasDiagramImageUploadError()?this.renderCreateSetValidationErrors():null)))}renderHeading(){return Object(I.a)(this.props.setContentType)?this.renderCleanHeading():this.renderDefaultHeading()}renderMoreMenu(){return D.a.createElement("div",{className:"CreateSetHeader-moreMenu"},D.a.createElement(u.a,{icon:"system-upload",iconSize:"xlarge",key:"import",onClick:this.handleImportClick,text:D.a.createElement(c.a,{id:"create_set.header.actions.more.import"})}),D.a.createElement("div",{className:"CreateSetHeader-menuDivider"}),this.props.shouldShowFlipTermsMenu?D.a.createElement(D.a.Fragment,null,D.a.createElement(u.a,{disabled:!this.props.canFlipColumns,icon:"system-flip",iconSize:"xlarge",key:"flipTerms",onClick:this.handleFlipTermsDefinitionsClick,text:D.a.createElement(c.a,{id:"create_set.header.actions.more.flip_terms"})}),D.a.createElement("div",{className:"CreateSetHeader-menuDivider"})):null,D.a.createElement(u.a,{icon:this.props.isAutosuggestionEnabled?"system-toggle-on":"system-toggle-off",iconSize:"xlarge",key:"autosuggestion",onClick:this.handleToggleAutosuggest,text:this.props.isAutosuggestionEnabled?e("create_set.term_context.tooltips.auto_suggestions_off"):e("create_set.term_context.tooltips.auto_suggestions_on")}))}renderCleanHeading(){return D.a.createElement(p.a,{isFullBleed:!0},D.a.createElement("div",{className:"CreateSetHeader-cleanHeading"},D.a.createElement("div",{className:"CreateSetHeader-cleanHeadingActionsClose"},D.a.createElement(v.a,{onClick:this.handleCloseCreateSet,to:this.props.isPublished?this.getSetUrl():"/",variant:"revert"},D.a.createElement(m.a,{alt:this.props.isPublished?e("create_set.header.back_to_set"):e("create_set.header.close"),icon:"system-x",size:"xlarge"})),this.renderStatus()),this.props.shouldShowAd&&this.renderCreateSetHeaderAd(),D.a.createElement("div",{className:"CreateSetHeader-cleanHeadingActionsControls"},D.a.createElement(l.a,{extraClassNames:"UIPopover--clean",icon:"system-more-vertical",iconProps:{variant:"borderless",size:"xlarge"},isHigherZIndex:!0,menu:this.renderMoreMenu(),menuTriggerActionOn:"click",onClick:this.handleMoreMenuClick,popoverPosition:"bottom right",tooltipText:e("folders.specific_folder.page_header_new.action_tooltips.more")}),D.a.createElement(h.a,{above:"s"},D.a.createElement(l.a,{extraClassNames:"UIPopover--clean",icon:"system-keyboard",iconProps:{variant:"borderless",size:"xlarge"},isHigherZIndex:!0,menu:D.a.createElement(T.a,{canEditRichText:this.props.canEditRichText,isMac:this.props.isMac}),menuTriggerActionOn:"click",onClick:this.handleKeyboardClick,popoverPosition:"bottom right",tooltipText:e("create_set.header.keyboard_shortcuts_tooltip")})),this.props.publishButton)))}renderDefaultHeading(){return D.a.createElement(p.a,null,D.a.createElement("div",{className:"CreateSetHeader-heading"},D.a.createElement("div",{className:"CreateSetHeader-headingText"},D.a.createElement("div",{className:"CreateSetHeader-title"},this.renderPageTitle()),this.renderStatus()),this.props.shouldShowAd?this.renderCreateSetHeaderAd():null,D.a.createElement("div",{className:"CreateSetHeader-infoButtonWrap"},D.a.createElement(h.a,{above:"s"},(e=>e||this.props.isSticky?this.props.publishButton:D.a.createElement(f.a,{icon:"options",onClick:this.props.onOpenMobileOptionsModal}))))))}renderTitleTextFieldWithTooltip(){return D.a.createElement(b.a,{beforeOpen:this.hasTitleRequiredError,overlay:D.a.createElement(S.a,{variant:"microBlack"},D.a.createElement(c.a,{id:"create_set.header.title_tooltip"})),position:"top left",triggerAction:"hover"},this.renderTitleTextField())}renderTitleTextField(){return D.a.createElement(d.a,{autoFocus:!this.props.isPublished&&!this.props.isResumingCreate,disabled:this.props.viewOnly,invalid:this.hasTitleRequiredError()||this.hasTitleProfanityError()||void 0,label:this.renderTitleError()||D.a.createElement(c.a,{id:"create_set.header.set_title"}),languageCodes:[this.props.set.wordLang,this.props.set.defLang],maxLength:255,onBlur:this.onBlurTitle,onChange:this.onChangeTitle,onFocus:this.onFocusTitle,placeholder:Object(I.a)(this.props.setContentType)?e("create_set.header.set_title_placeholder_start_typing"):e("create_set.header.set_title_placeholder"),ref:e=>{e&&(this.titleTextarea=e)},singleLine:!0,tabIndex:5,textAreaVariant:Object(I.a)(this.props.setContentType)?"cleanTextHeading":"default",type:"autoExpand",value:this.state.title})}renderDescriptionTextField(){return D.a.createElement(d.a,{invalid:this.hasDescriptionProfanityError()||void 0,label:this.renderDescriptionError()||D.a.createElement(c.a,{id:"create_set.set_description_modal.title"}),languageCodes:[this.props.set.wordLang,this.props.set.defLang],onBlur:this.onBlurDescription,onChange:this.onChangeDescription,placeholder:e("create_set.header.set_description.placeholder"),ref:e=>{e&&(this.descriptionTextarea=e)},singleLine:!0,tabIndex:6,textAreaVariant:Object(I.a)(this.props.setContentType)?"cleanTextBody":"default",type:"autoExpand",value:this.state.description})}renderCleanBottomActionBar(){var e=this.isSetPrivate()?D.a.createElement(c.a,{id:"create_set.permissions.privacy_state.private"}):D.a.createElement(c.a,{id:"create_set.permissions.privacy_state.public"}),t=this.isSetPrivate()?"system-lock":"system-unlock";return D.a.createElement("div",{className:"CreateSetHeader-cleanBottomActionBar"},D.a.createElement(v.a,{onClick:this.handleLockClick,tabIndex:0,variant:"revert"},D.a.createElement(m.a,{className:"CreateSetHeader-cleanBottomActionBarIcon",icon:t,size:"xlarge"}),D.a.createElement(h.a,{above:"s"},D.a.createElement("span",{className:"CreateSetHeader-cleanBottomActionBarText"},e))))}renderBottomActionBar(){return D.a.createElement(p.a,null,D.a.createElement(g.a,{className:"CreateSetHeader-permissionsAndImport"},"practice-questions"===this.props.setContentType?null:D.a.createElement(v.a,{onClick:this.props.onOpenImport},D.a.createElement(c.a,{id:"create_set.header.import_link"})),D.a.createElement("div",{className:"CreateSetHeader-permissionsWrap"},this.renderViewPermissionButton(),this.renderEditPermissionButton(),D.a.createElement(h.a,{above:"s"},D.a.createElement("div",{className:"CreateSetHeader-permissionWrap"},"practice-questions"===this.props.setContentType?null:D.a.createElement(D.a.Fragment,null,D.a.createElement(l.a,{icon:"switch",iconProps:{disabled:!this.props.canFlipColumns},onClick:this.props.onFlipColumn,tooltipPosition:"bottom right",tooltipText:e("create_set.header.flip_columns_tooltip")}),D.a.createElement(l.a,{icon:"keyboard",menu:D.a.createElement(T.a,{canEditRichText:this.props.canEditRichText,isMac:this.props.isMac}),popoverPosition:"bottom right",tooltipPosition:"bottom right",tooltipText:e("create_set.header.keyboard_shortcuts_tooltip")})))))))}render(){var e=n()("CreateSetHeader",{"is-fadingIn":this.state.shouldAnimateHeader,"is-sticky":this.props.isSticky,"is-cleanDesign":Object(I.a)(this.props.setContentType)}),t=e+" has-adz";return D.a.createElement(h.a,{above:"m"},(i=>i&&this.props.shouldShowAd?this.renderHeader(t):this.renderHeader(e)))}isSetPrivate(){return this.props.permissions.viewableBy!==y.c.EVERYONE}}t.a=Object(A.a)({headerOffsetTop:M,headerOffsetTopMobile:U})(k)}).call(this,i("nrsj").default)},"3OV/":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("E9XD"),i("4mDm"),i("3bBZ"),i("zKZe");function s(e){return e.reduce(((e,t)=>{var[i,s]=t;return Object.assign({},e,{[i]:s})}),{})}},45:function(e,t,i){QWait("Quizlet.Common.i18n",(function(){i("aKFw"),e.exports=i("dOGZ")}))},"5I2x":function(e,t){e.exports=function(){return new Worker("https://quizlet.com/a/j/dist/597edcc1b2742f2919da.worker.js")}},"5OCO":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("UxlC"),i("TSYQ")),n=i.n(a),o=i("xqF0"),l=i("jvKz"),u=i("FJLI"),d=i("vzun"),c=i("q1tI"),h=i.n(c),p=i("EFuM");class g extends h.a.Component{constructor(e){super(e),this.handleClick=e=>{this.props.onClick&&this.props.onClick(e)},this.handleOpenPopover=()=>{this.setState({isPopoverOpen:!0})},this.handleClosePopover=()=>{this.setState({isPopoverOpen:!1})},this.shouldOpenTooltip=()=>!this.state.isPopoverOpen,this.state={isPopoverOpen:!1,menuTriggerActionOn:e.menuTriggerActionOn||(Object(p.j)()?"click":"hover"),tooltipTriggerActionOn:e.tooltipTriggerActionOn||(Object(p.j)()?"click":"hover")}}UNSAFE_componentWillReceiveProps(e){this.props.menuTriggerActionOn!==e.menuTriggerActionOn&&this.setState({menuTriggerActionOn:e.menuTriggerActionOn}),this.props.tooltipTriggerActionOn!==e.tooltipTriggerActionOn&&this.setState({tooltipTriggerActionOn:e.tooltipTriggerActionOn})}renderPopover(e){var t=this,i=h.a.Children.toArray(e.props.children).map((e=>e.props&&e.props.onClick?h.a.cloneElement(e,{onClick:function(){t.popoverTrigger&&t.popoverTrigger.close(),e.props.onClick(...arguments)}}):e));return h.a.createElement(u.a,{arrow:this.props.arrow,extraClassNames:this.props.extraClassNames,includeArrowInBounds:!0,spacing:this.props.popoverSpacing,variant:this.props.popoverVariant},h.a.cloneElement(e,{children:i}))}renderIconButton(){var e,t=n()("MenuIconWithTooltip",{"is-opened":this.state.isPopoverOpen});return e=this.props.linkTo?h.a.createElement(o.a,r()({icon:this.props.icon},this.props.iconProps,{linkTo:this.props.linkTo,title:this.props.tooltipText})):h.a.createElement(o.a,r()({icon:this.props.icon},this.props.iconProps,{onClick:this.handleClick,title:this.props.tooltipText})),h.a.createElement("span",{className:t},e)}renderButton(){var e=n()("MenuIconWithTooltip","is-"+this.props.popoverPosition.replace(/ /g,""),{"MenuIconWithTooltip--isHigherZIndex":this.props.isHigherZIndex}),{menu:t}=this.props;return t?h.a.createElement(l.a,{beforeClose:this.handleClosePopover,beforeOpen:this.handleOpenPopover,className:e,constrainToWindow:!1,overlay:this.renderPopover(t),position:this.props.popoverPosition,ref:e=>{this.popoverTrigger=e},triggerAction:this.state.menuTriggerActionOn},this.renderIconButton()):this.renderIconButton()}render(){var e=Object(p.f)()||Object(p.j)(),t="always"===this.state.tooltipTriggerActionOn,{tooltipText:i}=this.props,s=n()(this.props.tooltipOverlayClassName,{"MenuIconWithTooltip--isHigherZIndex":this.props.isHigherZIndex});return!i||e&&!t?this.renderButton():h.a.createElement(l.a,{afterOpen:this.props.afterOpenTooltip,beforeOpen:this.shouldOpenTooltip,className:s,overlay:h.a.createElement(d.a,null,i),position:this.props.tooltipPosition,ref:e=>{this.tooltipTrigger=e},triggerAction:this.state.tooltipTriggerActionOn},this.renderButton())}}g.defaultProps={arrow:!0,iconProps:{},isHigherZIndex:!1,popoverPosition:"bottom left",popoverSpacing:"regular",popoverVariant:"none",tooltipPosition:"bottom",tooltipTriggerActionOn:"hover"}},"5SfK":function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ");var s=i("mr8R");t.a=Object(s.a)((()=>Promise.all([i.e("common"),i.e("ocr_upsell_modal_lazy")]).then(i.bind(null,"JBDX"))))},"5UaS":function(e,t,i){(function(e,s){var r;i("UxlC"),function(a){var n=t,o=(e&&e.exports,"object"==typeof s&&s);o.global!==o&&o.window;var l=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,u=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,d={version:"0.2.0",reverse:function e(t){for(var i="",s=(t=t.replace(l,(function(t,i,s){return e(s)+i})).replace(u,"$2$1")).length;s--;)i+=t.charAt(s);return i}};void 0===(r=function(){return d}.call(t,i,t,e))||(e.exports=r)}()}).call(this,i("YuTi")(e),i("yLpj"))},"5Vd8":function(e,t,i){"use strict";i("zKZe");var s=i("Oo6B"),r=i("PYQB"),a=Object.assign({},r.a);a.init(s.a),t.a=a},"5bYi":function(e,t,i){"use strict";i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s),a=i("qiyg"),n=i("gkHh"),o=i("nCwC"),l=i("wLt/");class u extends r.a.PureComponent{constructor(){super(...arguments),this.state={shouldShowLangSelect:this.props.isChooseLangSelected},this.onHideLangSelect=()=>o.a.hideLangSelect(),this.renderLanguageSelect=()=>r.a.createElement(n.a,{disableAutofocus:!this.shouldShowLangSelect(),disabled:this.props.viewOnly,lang:this.props.side===l.b?this.props.wordLang:this.props.defLang,onHideLangSelect:this.onHideLangSelect,onSelectLang:this.props.onSelectLang,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,showInvisibleLangs:a.invisibleLanguages.indexOf(this.props.defLang)>=0,side:this.props.side}),this.renderQuestionSubtext=()=>r.a.createElement("div",{className:"LanguagePrompt-questionSubtext"},this.props.questionSubtext),this.shouldShowLangSelect=()=>this.props.isChooseLangSelected||this.state.shouldShowLangSelect}render(){return r.a.createElement("div",{className:"LanguagePrompt"},r.a.createElement("div",null,r.a.createElement("div",{className:"LanguagePrompt-question"},this.props.question),this.props.questionSubtext?this.renderQuestionSubtext():null,r.a.createElement("div",{className:"LanguagePrompt-languageSelect"},this.renderLanguageSelect())))}}t.a=u},"5jMn":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("RVJv");class r extends s.a{}r.URL_BASE="classes",r.MODEL_NAME="class"},"5sr5":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("pVnL"),r=i.n(s),a=i("q1tI"),n=i.n(a),o=i("Nacp");function l(e){return n.a.createElement(o.a,r()({},e,{className:"AssemblyVerticalButton",hasBorder:!0,onPress:e.onClick,topIconInfo:{icon:e.icon}}))}i("6BWV")},"64Hu":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("q1tI"),r=i.n(s),a=i("TSYQ"),n=i.n(a);class o extends r.a.PureComponent{render(){var e=n()("ContextToggleGroup","ContextToggleGroup--"+this.props.variant);return r.a.createElement("div",{className:e},r.a.createElement("div",{className:"ContextToggleGroup-inner"},this.props.children))}}},"6BWV":function(e,t,i){"use strict";i.r(t)},"6DYz":function(e,t,i){"use strict";i("zKZe"),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=d(i("q1tI")),n=d(i("17x9")),o=d(i("jMYa")),l=d(i("qioe")),u=d(i("KVmg"));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s.filterOptions=s.filterOptions.bind(s),s.menuRenderer=s.menuRenderer.bind(s),s.onInputKeyDown=s.onInputKeyDown.bind(s),s.onInputChange=s.onInputChange.bind(s),s.onOptionSelect=s.onOptionSelect.bind(s),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"createNewOption",value:function(){var e=this.props,t=e.isValidNewOption,i=e.newOptionCreator,s=e.onNewOptionClick,r=e.options,a=void 0===r?[]:r;e.shouldKeyDownEventCreateNewOption;if(t({label:this.inputValue})){var n=i({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey});this.isOptionUnique({option:n})&&(s?s(n):(a.unshift(n),this.select.selectValue(n)))}}},{key:"filterOptions",value:function(){var e=this.props,t=e.filterOptions,i=e.isValidNewOption,s=(e.options,e.promptTextCreator),r=(arguments.length<=2?void 0:arguments[2])||[],a=t.apply(void 0,arguments)||[];if(i({label:this.inputValue})){var n=this.props.newOptionCreator,o=n({label:this.inputValue,labelKey:this.labelKey,valueKey:this.valueKey}),l=this.isOptionUnique({option:o,options:r.concat(a)});if(l){var u=s(this.inputValue);this._createPlaceholderOption=n({label:u,labelKey:this.labelKey,valueKey:this.valueKey}),a.unshift(this._createPlaceholderOption)}}return a}},{key:"isOptionUnique",value:function(e){var t=e.option,i=e.options,s=this.props.isOptionUnique;return i=i||this.select.filterOptions(),s({labelKey:this.labelKey,option:t,options:i,valueKey:this.valueKey})}},{key:"menuRenderer",value:function(e){var t=this.props.menuRenderer;return t(s({},e,{onSelect:this.onOptionSelect,selectValue:this.onOptionSelect}))}},{key:"onInputChange",value:function(e){var t=this.props.onInputChange;t&&t(e),this.inputValue=e}},{key:"onInputKeyDown",value:function(e){var t=this.props,i=t.shouldKeyDownEventCreateNewOption,s=t.onInputKeyDown,r=this.select.getFocusedOption();r&&r===this._createPlaceholderOption&&i({keyCode:e.keyCode})?(this.createNewOption(),e.preventDefault()):s&&s(e)}},{key:"onOptionSelect",value:function(e,t){e===this._createPlaceholderOption?this.createNewOption():this.select.selectValue(e)}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this,t=this.props,i=(t.newOptionCreator,t.shouldKeyDownEventCreateNewOption,function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}(t,["newOptionCreator","shouldKeyDownEventCreateNewOption"])),r=this.props.children;return r||(r=h),r(s({},i,{allowCreate:!0,filterOptions:this.filterOptions,menuRenderer:this.menuRenderer,onInputChange:this.onInputChange,onInputKeyDown:this.onInputKeyDown,ref:function(t){e.select=t,t&&(e.labelKey=t.props.labelKey,e.valueKey=t.props.valueKey)}}))}}]),t}(a.default.Component);function h(e){return a.default.createElement(o.default,e)}function p(e){var t=e.option,i=e.options,s=e.labelKey,r=e.valueKey;return 0===i.filter((function(e){return e[s]===t[s]||e[r]===t[r]})).length}function g(e){return!!e.label}function m(e){var t=e.label,i=e.labelKey,s={};return s[e.valueKey]=t,s[i]=t,s.className="Select-create-option-placeholder",s}function f(e){return'Create option "'+e+'"'}function v(e){switch(e.keyCode){case 9:case 13:case 188:return!0}return!1}c.isOptionUnique=p,c.isValidNewOption=g,c.newOptionCreator=m,c.promptTextCreator=f,c.shouldKeyDownEventCreateNewOption=v,c.defaultProps={filterOptions:l.default,isOptionUnique:p,isValidNewOption:g,menuRenderer:u.default,newOptionCreator:m,promptTextCreator:f,shouldKeyDownEventCreateNewOption:v},c.propTypes={children:n.default.func,filterOptions:n.default.any,isOptionUnique:n.default.func,isValidNewOption:n.default.func,menuRenderer:n.default.any,newOptionCreator:n.default.func,onInputChange:n.default.func,onInputKeyDown:n.default.func,onNewOptionClick:n.default.func,options:n.default.array,promptTextCreator:n.default.func,shouldKeyDownEventCreateNewOption:n.default.func},t.default=c},"6MTB":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var s={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},a="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),n="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),o="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),l="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),u="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=a&&(l||+a[1]<57)||o&&l,c=0;c<10;c++)s[48+c]=s[96+c]=String(c);for(c=1;c<=24;c++)s[c+111]="F"+c;for(c=65;c<=90;c++)s[c]=String.fromCharCode(c+32),r[c]=String.fromCharCode(c);for(var h in s)r.hasOwnProperty(h)||(r[h]=s[h]);t.base=s,t.keyName=function(e){var t=!(d&&(e.ctrlKey||e.altKey||e.metaKey)||(n||u)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?r:s)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t},t.shift=r},"6TEZ":function(e,t,i){"use strict";(function(e){i("UxlC"),i("EnZy");t.a=class{constructor(e){void 0===e&&(e=!1),this.isMac=e}getKeyDisplayText(t){switch(t.toLowerCase()){case"command":case"ctrl":case"control":return this.isMac?e("keyboard_keys.mac.command"):e("keyboard_keys.control");case"option":case"alt":return this.isMac?e("keyboard_keys.mac.option"):e("keyboard_keys.alt");case"shift":return e("keyboard_keys.shift");case"tab":return e("keyboard_keys.tab");default:return t.toUpperCase()}}getKeys(e){var t=e;return(t=(t=t.replace(/\s/g,"")).split(",")[0]).split("+").map((e=>this.getKeyDisplayText(e)))}}}).call(this,i("nrsj").default)},"6acW":function(e,t,i){var s=i("dt0z"),r=i("gQMU");e.exports=function(e){return r(s(e).toLowerCase())}},"6rYD":function(e,t,i){"use strict";t.a={studiableItem:{moveUp:"alt+up",moveDown:"alt+down",toggleAutosuggest:"command+shift+a, ctrl+shift+a",toggleImages:"command+shift+i, ctrl+shift+i",toggleUpload:"command+shift+u, ctrl+shift+u",toggleRecord:"command+shift+o, ctrl+shift+o",closeContext:"escape",addItemBelowCurrent:"command+shift+r, ctrl+shift+r",tab:"tab",backspace:"Backspace",delete:"Delete"},richText:{bold:"command+b, ctrl+b",italicize:"command+i, ctrl+i",underline:"command+u, ctrl+u"},autodefine:{prevResult:"up, shift+tab",nextResult:"down, tab",selectResult:"enter"},autosuggestions:{nextItem:"down",previousItem:"up",selectItem:"enter"},imageCarousel:{prevImage:"left",nextImage:"right",nextElement:"tab",prevElement:"shift+tab",selectImage:"enter"},recording:{recordWord:"left",recordDefinition:"right",nextRow:"down",prevRow:"up",playOrRestoreRecording:"enter",deleteRecording:"backspace"},modal:{exit:"esc",tab:"tab"}}},"6y4+":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return f}));i("zKZe"),i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("N5dM"),n=i("bvRJ"),o=i("og3H"),l=i("PuWd"),u=i("9WHe"),d=i("X0lI"),c=i.n(d),h=i("q1tI"),p=i.n(h),g=(e,t)=>{var{media:i}=e;return i.find((e=>e.mediaType===t))||null},m=e=>{var t=g(e,o.C.VIDEO);return t&&t.video?Object.assign({},t.video,{webUrl:Object(a.c)(t.video)}):null};class f extends p.a.PureComponent{constructor(){super(...arguments),this.state={isVideoClipFocused:!1,textValue:this.getText(this.props),videoValue:m(this.props)},this.handleChange=e=>{var t=this.state.textValue,i=c()(t);i&&(i.plainText=e.plain,e.rich&&(i.richText=e.rich)),this.hasTextChanged=!0,this.setState({textValue:i})},this.handleFocus=()=>{var{position:e,onFocus:t}=this.props,i={media:g(this.props,o.C.TEXT),type:this.isExplanation()?o.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION:o.Ab.MULTIPLE_CHOICE_HINT};e&&(i.index=e),t(i)},this.handleBlur=()=>{var{textValue:e}=this.state;if(this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var t=g(this.props,o.C.TEXT);t&&this.props.onDeleteText(t)}else this.props.onBlur&&this.props.onBlur(e);this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=g(this.props,o.C.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.handleVideoClipBlur=()=>{var e,t,{videoValue:i}=this.state,{onBlurVideo:s}=this.props;if(this.hasVideoClipValueHasChanged&&null!=i&&null!=(e=i.webUrl)&&e.length&&s){var r=Object(a.b)(i.webUrl,i.clipEndSeconds);(null==r?void 0:r.provider)===o.gc.VIMEO&&s(r),(null==r?void 0:r.provider)===o.gc.YOUTUBE&&u.a.warning("YouTube not yet supported as video provider from Create Set page"),this.hasVideoClipValueHasChanged=!1}if(0===(null==i||null==(t=i.webUrl)?void 0:t.length)&&this.props.onDeleteVideo){var n=g(this.props,o.C.VIDEO);n&&this.props.onDeleteVideo(n)}this.setState({isVideoClipFocused:!1})},this.handleVideoClipChange=(e,t)=>{var{videoValue:i}=this.state;if(i){var s=Object.assign({},i,{[e]:t});this.setState({videoValue:s},(()=>{this.hasVideoClipValueHasChanged=!0}))}},this.handleVideoClipFocus=()=>{this.setState({isVideoClipFocused:!0})},this.hasTextChanged=!1}getPlaceHolder(){return this.isExplanation()?e("create_set.multiple_choice_questions.placeholder.explanation"):e("create_set.multiple_choice_questions.placeholder.hint")}getText(e){var t=g(e,o.C.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:o.x.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getImage(e){var t=g(e,o.C.IMAGE);return(null==t?void 0:t.image)||null}renderIcon(){var e=this.isExplanation()?"info-inverse":"lightbulb";return p.a.createElement(n.a,{icon:e})}renderMediaInteractives(){var{isVideoClipFocused:e,textValue:t,videoValue:i}=this.state,s=r()({"EditableMcqHintOrExplanation-content":!0,"EditableMcqHintOrExplanation-explanationContent":this.isExplanation()}),a={onDeleteImage:this.handleDeleteImage},n={onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onUpdatePMEditorView:this.props.onUpdatePMEditorView},o={onBlur:this.handleVideoClipBlur,onChange:this.handleVideoClipChange,onFocus:this.handleVideoClipFocus},u={autofocus:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:this.getPlaceHolder(),tabIndex:this.props.tabIndex},d=this.getImage(this.props);return p.a.createElement("div",{className:s},this.renderIcon(),p.a.createElement(l.a,{image:d,imageEvents:a,placeholderImage:this.props.placeholderImage,richTextConfig:u,richTextEvents:n,shouldDisableVideoClipInput:this.props.isVideoInputDisabled,shouldRenderVideoClipPreview:e,text:t,video:i,videoClipEvents:o}))}render(){return p.a.createElement("div",{className:"EditableMcqHintOrExplanation"},this.renderMediaInteractives())}isExplanation(){return this.props.type===o.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION}}f.getDerivedStateFromProps=(e,t)=>{var i;return!t.videoValue&&null!=(i=e.media.find((e=>e.mediaType===o.C.VIDEO)))&&i.video?{videoValue:m(e)}:null}}).call(this,i("nrsj").default)},"7Q9y":function(e,t,i){"use strict";i("zKZe");var s=i("RVJv");class r extends s.a{}r.URL_BASE="multiple-choice-options",r.MODEL_NAME="multipleChoiceOption",r.API_VERSION="3.4";var a=i("PYQB"),n=Object.assign({},a.a);n.init(r);t.a=n},"7n6V":function(e,t,i){"use strict";i("4mDm"),i("3bBZ"),i("5s+n"),i("hByQ");var s=i("nCwC"),r=i("FenW"),a=i("pfAI"),n=i("0j+G"),o=i("YUt4");class l extends(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)){constructor(){super(),this.name="InvalidImageError",this.message="Please try again."}}class u extends(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error)){constructor(e){super(),this.name="InvalidTermError",this.message=e||"Please try again."}}var d=i("FX4X"),c=i("h4pu"),h=i("T3U7"),p=i("3OV/"),g=i("EFuM"),m={bulkCreate(e){var t=[];for(var i of e)i.imageLuid=d.a.add(),t.push({imageLuid:i.imageLuid,termLuid:i.termLuid});for(var s of(o.a.viewAction(a.a.BULK_CREATE,t),e))m.upload(s.file,s.imageLuid,s.setLuid,s.termLuid,s.termImageLuid);return e.map((e=>e.imageLuid))},upload(e,t,i,a,o){void 0===o&&(o=null);var p=d.a.save(t,e,{onProgress:m.createProgress}).then(m.createSuccess).catch(m.createFailure),g=s.a.maybeCreateSet(i).then((e=>r.a.maybeCreateTerm(a,e))),f=null,v=null;return Promise.all([p,g]).then((e=>{var[[t,i],s]=e;return new Promise(((e,r)=>{var a=!1;return null!=i&&i.isValid()?(f=i.get("id"),v=i.get("code"),f&&v||(a=!0)):a=!0,a?(Object(h.a)("new_create_set_bad_uploaded_image",{message:JSON.stringify(i)}),r([new l,t,i])):e([[t,i],s])}))})).then((()=>{if(!n.b.hasTermLuid(a))throw new u("Term LUID "+a+" not found")})).then((()=>{if(o){return c.a.save(a,{definitionImageId:null,definitionImageCode:null},!0)}})).then((()=>{var e={definitionImageId:f,definitionImageCode:v};return c.a.save(a,e,!0)})).then((e=>{var[i]=e;return r.a.createImageSuccess({luid:i,termLuid:a,imageLuid:t})})).catch((e=>{if(!(e instanceof u)){var[i,s]=Array.from(e);if(!(i instanceof l))return r.a.createImageFailure({error:i,luid:s,termLuid:a,imageLuid:t})}})),m.createPlaceholder(t,e)},createSuccess(e){var[t,i]=e;o.a.serverAction(a.a.CREATE_SUCCESS,{luid:t,model:i});var s=new Image;return s.onload=()=>m.createPreload(t),s.src=i.get("_secureLegacyUrlSquare"),[t,i]},createFailure(e){var[t,i,s]=e;return o.a.serverAction(a.a.CREATE_FAILURE,{error:t,luid:i,model:s}),[i,s,t]},createProgress(e){var[t,i]=e;return o.a.serverAction(a.a.CREATE_PROGRESS,{luid:t,progress:i})},createPreload:e=>o.a.viewAction(a.a.PRELOAD,{luid:e}),createPlaceholder(e,t){if(!Object(g.j)()&&["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t))>-1){var i=new FileReader;return i.onload=t=>m.createRichPlaceholder(e,t.target.result),i.readAsDataURL(t)}return o.a.viewAction(a.a.CREATE_PLACEHOLDER,{luid:e})},createRichPlaceholder:(e,t)=>o.a.viewAction(a.a.CREATE_RICH_PLACEHOLDER,{luid:e,placeholderUrl:t}),dropFailure:e=>o.a.viewAction(a.a.DROP_FAILURE,{error:e}),bulkUploadFailure:e=>o.a.viewAction(a.a.BULK_UPLOAD_FAILURE,{error:e}),replace(e,t,i,n){void 0===n&&(n=null),o.a.viewAction(a.a.REPLACE,{luid:e,termLuid:i});var u=d.a.getModel(e),h=u.get("id"),p=u.get("code"),g=c.a.getModel(i);h&&p?s.a.maybeCreateSet(t).then((e=>{r.a.maybeCreateTerm(i,e)})).then((()=>{if(n){return c.a.save(i,{definitionImageId:null,definitionImageCode:null},!0)}})).then((()=>{var e={definitionImageId:h,definitionImageCode:p};return c.a.save(i,e,!0)})).then((t=>{var[s]=t;return r.a.createImageSuccess({luid:s,imageLuid:e,termLuid:i})})).catch((t=>{var[s,a]=t;return r.a.createImageFailure({error:s,luid:a,termLuid:i,imageLuid:e})})):r.a.bulkUpdateFailure([new l,g])},search(e,t,i,s){void 0===i&&(i=null),o.a.viewAction(a.a.SEARCH,{query:t,luid:e,langs:i});var r={perPage:Math.round(1.3*s),languages:null};return i&&(r.languages=i),d.a.search(t,r).then((e=>{var t=Object(p.a)(Object.keys(e).map((t=>[t,e[t].properties])));return o.a.serverAction(a.a.STORE,t),e})).then((t=>o.a.serverAction(a.a.SEARCH_SUCCESS,{luid:e,imageLuids:Object.keys(t)}))).catch((t=>o.a.serverAction(a.a.SEARCH_FAILURE,{luid:e,error:t})))},del(e,t,i,s){if(void 0===s&&(s=null),i&&s){return c.a.save(i,{definitionImageId:null,definitionImageCode:null},!0).then((s=>{var[a]=s;a&&r.a.deleteImageSuccess({luid:e,termLuid:i,imageLuid:t})})).catch((e=>{var[s,a]=e;return r.a.deleteImageFailure({error:s,luid:a,termLuid:i,imageLuid:t})}))}return null}};t.a=m},"7uva":function(e,t,i){"use strict";var s=i("Wv2R"),r=Object(s.a)("ErrorAlertConstants",{actions:{DISMISS:null,CREATE:null},ignoredValidationErrors:{set:{requires_title:null,requires_word_lang:null,requires_def_lang:null,min_diagram_shapes:null,min_terms:null}},permissions:{UNDER_13:null,NOT_CREATOR:null}});t.a=r},"800S":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return n}));var s=i("q1tI"),r=i.n(s),a=i("vid3");class n extends s.PureComponent{render(){var t=this.props.hasRecording?e("create_set.term_context.tooltips.change_voice_recording"):e("create_set.term_context.tooltips.add_voice_recording");return r.a.createElement(a.b,{icon:this.props.hasRecording?"mic":"record",isActive:this.props.isRecordingContextOpen&&this.props.isActiveSide,onClick:this.props.onToggleVoiceRecordingContext,tooltip:this.props.tooltipsEnabled?t:null})}}}).call(this,i("nrsj").default)},"9nCg":function(e,t,i){"use strict";i.r(t)},Aokv:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("4mDm"),i("3bBZ"),i("ToJy"),i("E9XD");var s=i("m4Mj"),r=i("KkDn"),a=i("y571"),n=i("og3H"),o=i("9WHe");function l(e){return e.reduce(((e,t)=>e+(t.isCorrect?1:0)),0)}function u(e,t,i){if(void 0===i&&(i=!1),!e)return[];var{multipleChoiceOptions:u,studiableItems:d}=e,c=function(e,t){var i=new Map;for(var s of e){var a=t&&"studiableItemLuid"in s?s.studiableItemLuid:s.studiableItemId;Object(r.a)(i,a,s)}return i}(u,i),h=d.filter((e=>e.type===n.zb.MULTIPLE_CHOICE_QUESTION)).map((e=>{var r="luid"in e?e.luid:e.id,u=t.getMediaConnectionByMediaOwnerId(r,n.Ab.MULTIPLE_CHOICE_PROMPT);if(!u&&!i)throw new Error("No prompt media found for studiable item "+r);var d=t.getMediaConnectionByMediaOwnerId(r,n.Ab.MULTIPLE_CHOICE_HINT),h=c.get(r)||[];h&&0!==h.length||i||o.a.warning("No multiple choice options found for studiable item "+e.id);var p=function(e,t,i){return i||(null===(t[0]||{rank:1}).rank?Object(a.a)(t):t.sort(((e,t)=>(e.rank||0)-(t.rank||0)))),t.map(((t,s)=>{var r="luid"in t?t.luid:t.id,a=e.getMediaConnectionByMediaOwnerId(r,n.Ab.MULTIPLE_CHOICE_OPTION);if(!a&&!i)throw new Error("No option media found for multiple choice option "+t.id);return{explanationConnectionMedia:e.getMediaConnectionByMediaOwnerId(r,n.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION),id:t.id,isCorrect:t.isCorrect||!1,luid:"luid"in t?t.luid:void 0,optionConnectionMedia:a,rank:t.rank||1+s}}))}(t,h,i),g=l(p);return 0!==g||i||o.a.warning("No correct options found for studiable item "+e.id),{hasMultipleCorrectOptions:g>1,hintConnectionMedia:d,id:e.id,luid:"luid"in e?e.luid:void 0,options:p,promptConnectionMedia:u,questionType:Object(s.a)().multipleChoice,rank:e.rank||1,studiableItemType:e.type}}));return i?h:h.filter((e=>e.options.length>0&&l(e.options)>0))}},BOZ9:function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r=i("MMJ4"),a=i("jE4y"),n=Object.assign({error:null,errorCode:null,implementation:null,initialized:!1,permissions:r.d.NEEDED,status:r.e.STOPPED,volume:0,blockingUpsellDismissed:!1,setup(){this.bindActions(a.a.actions.INIT,this._initialize),this.bindActions(a.a.actions.PERMISSION_UPDATE,this._updatePermissions),this.bindActions(a.a.actions.IMPLEMENTATION_UPDATE,this._updateRecorderImplementation),this.bindActions(a.a.actions.RECORD,this._startRecording),this.bindActions(a.a.actions.STOP_SUCCESS,this._stopRecording),this.bindActions(a.a.actions.CREATE_SUCCESS,this._saveRecording),this.bindActions(a.a.actions.CANCEL_SUCCESS,this._cancelRecording),this.bindActions(a.a.actions.UPLOAD_FINISH,this._uploadFinished),this.bindActions(a.a.actions.ERROR,this._recordingError),this.bindActions(a.a.actions.GET_VOLUME,this._setVolume),this.bindActions(a.a.actions.DISMISS_UPSELL,this._dismissUpsell)},getError(){return this.error},getErrorCode(){return this.errorCode},getImplementation(){return this.implementation},isInitialized(){return this.initialized},getPermissions(){return this.permissions},getStatus(){return this.status},getVolume(){return this.volume},hasBlockingUpsellBeenDismissed(){return this.blockingUpsellDismissed},_initialize(){this.initialized=!0},_updatePermissions(e){var{status:t}=e;this.permissions=t,t===r.d.GRANTED&&(this.status=r.e.STOPPED,this.error=null,this.errorCode=null)},_updateRecorderImplementation(e){var{implementation:t}=e;this.implementation=t},_startRecording(){this.status=r.e.RECORDING},_stopRecording(){this.status=r.e.UPLOADING},_uploadFinished(){this.status=r.e.SAVING},_saveRecording(){this.status=r.e.STOPPED},_cancelRecording(){this.status=r.e.STOPPED},_recordingError(e){var{code:t,data:i}=e;this.status=r.e.ERROR,this.error=i,this.errorCode=t},_setVolume(e){var{volume:t}=e;this.volume=t},_dismissUpsell(){this.blockingUpsellDismissed=!0}},s.a);n.init(),t.a=n},"Ch/O":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return k}));i("UxlC");var s=i("TSYQ"),r=i.n(s),a=i("wLt/"),n=i("Uudg"),o=i("nXOR"),l=i("JxFz"),u=i("Pxp3"),d=i("FFEN"),c=i("bvRJ"),h=i("a08m"),p=i("MMJ4"),g=i("fwul"),m=i("FenW"),f=i("6rYD"),v=i("QMP1"),_=i("kPvk"),E=i("6Vsr"),b=i("TX86"),S=i.n(b),C=i("Ilu8"),T=i("goAZ"),y=i("q1tI"),I=i.n(y),A=i("TtcH"),O=i("yckm"),w=i("T3U7"),D=i("fihg"),L=i("sp+2"),R=v.e.RECORDING,{MAX_DURATION:x}=p.c,P=Object(A.n)("recording_new"),M=I.a.createElement(c.a,{icon:"mic"}),U=e=>window.setTimeout(e,100);class k extends I.a.PureComponent{constructor(e){super(e),this.recorderHelper=new _.a(this.props),this.onSideChanged=()=>{this.stopPlayingRecording(),this.hideUndoNotice(),this.hideError(),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onRecordingAdded=()=>{this.playRecording(),this.hideUndoNotice()},this.onRecordingDeleted=()=>{null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onVolumeTick=()=>{if(!this.recorderHelper.isRecording()&&(!this.canRecord()||this.hasRecording()||!this._isMounted))return this.stopVolumeTick();g.a.getVolume(),U(this.onVolumeTick)},this.onNeedsPermission=()=>{this.waitForPermissionsTimeout=window.setTimeout((()=>{this.openPermissions()}),1e3)},this.onDeniedPermission=()=>{null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()},this.onGrantedPermission=()=>{null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()},this.onSwitchActiveSide=(e,t)=>{t.preventDefault(),this.switchToSide(e)},this.onRecordingTick=()=>{if(!this.recorderHelper.isRecording()||!this._isMounted)return this.stopRecordingTick();this.forceUpdate(),U(this.onRecordingTick)},this.onPlayTtsAudio=(e,t)=>{t.preventDefault(),e&&(g.a.stopAllAudio(),g.a.playAudio(e))},this.onKeyDown=e=>{e.which===E.KEY_SPACE&&(e.preventDefault(),!this.state.spaceHeldDown&&this.canRecord()&&(this.setState({spaceHeldDown:!0}),this.startRecording()))},this.onKeyUp=e=>{e.which===E.KEY_SPACE&&(e.preventDefault(),this.state.spaceHeldDown&&this.recorderHelper.isRecording()&&(this.setState({spaceHeldDown:!1}),this.stopRecording()))},this.onMouseDown=e=>{e.preventDefault(),this.startRecording()},this.onMouseUp=e=>{e.preventDefault(),this.stopRecording()},this.onTouchStart=e=>{e.preventDefault(),this.startRecording()},this.onTouchEnd=e=>{e.preventDefault(),this.stopRecording()},this.onStopPlayingRecording=e=>{e.preventDefault(),this.stopPlayingRecording()},this.onPlayRecording=(e,t)=>{t.preventDefault(),this.playRecording(e)},this.onOpen=()=>{this.keyDownListener=O.a.listen(window.document,"keydown",this.onKeyDown),this.keyUpListener=O.a.listen(window.document,"keyup",this.onKeyUp),S.a.setScope(this.props.termLuid),S()(f.a.recording.recordWord,this.props.termLuid,(()=>(this.switchToSide(a.b),!1))),S()(f.a.recording.recordDefinition,this.props.termLuid,(()=>(this.switchToSide(a.a),!1))),S()(f.a.recording.nextRow,this.props.termLuid,(()=>(this.switchToOffsetRow(1)&&this.props.onScrollToOffset(1),!1))),S()(f.a.recording.prevRow,this.props.termLuid,(()=>(this.switchToOffsetRow(-1)&&this.props.onScrollToOffset(-1),!1))),S()(f.a.recording.playOrRestoreRecording,this.props.termLuid,(()=>(this.hasRecording()?this.togglePlayingRecording():this.hasUndo()&&this.undoDelete(),!1))),S()(f.a.recording.deleteRecording,this.props.termLuid,(()=>(this.deleteRecording(),!1)))},this.onReload=e=>{e.preventDefault(),window.location.reload()},this.onClickCloseBlockingUpsell=e=>{e.preventDefault(),g.a.dismissUpsell()},this.onClose=()=>{this.recorderHelper.isRecording()&&g.a.cancel(),this.stopPlayingRecording(),this.stopRecordingTick(),this.stopVolumeTick(),this.keyDownListener&&this.keyDownListener.remove(),this.keyUpListener&&this.keyUpListener.remove(),S.a.unbind(f.a.recording.recordWord,this.props.termLuid),S.a.unbind(f.a.recording.recordDefinition,this.props.termLuid),S.a.unbind(f.a.recording.nextRow,this.props.termLuid),S.a.unbind(f.a.recording.prevRow,this.props.termLuid),S.a.unbind(f.a.recording.playOrRestoreRecording,this.props.termLuid),S.a.unbind(f.a.recording.deleteRecording,this.props.termLuid),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout)},this.onUndoDelete=e=>{e.preventDefault(),this.undoDelete()},this.onError=()=>{switch(this.recorderHelper.getErrorCode()){case p.a.TOO_SHORT:this.showError(),null!==this.tooShortTimeout&&clearTimeout(this.tooShortTimeout),this.tooShortTimeout=window.setTimeout((()=>this.hideError()),2e3);break;case p.a.SAVE_ERROR:this.showError();break;case p.a.MIC_MUTED:null!==this.waitForPermissionsTimeout&&clearTimeout(this.waitForPermissionsTimeout),this.closePermissions()}},this.onDeleteRecording=(e,t)=>{t.preventDefault(),this.deleteRecording(e)},this.volumeTick=null,this.isUnmounting=!1,this.recordingTick=null,this.waitForPermissionsTimeout=null,this.tooShortTimeout=null,this.keyUpListener=null,this.keyDownListener=null,this.state={hideError:!0,lastDeletedCustomAudioLuid:null,playbackPercentage:0,recordingStarted:0,spaceHeldDown:!1}}componentDidMount(){this.props.enabled&&(this._isMounted=!0,this.onOpen(),this.startVolumeTick(),this.recorderHelper.isPermissionNeeded()&&this.onNeedsPermission(),this.recorderHelper.isPermissionGranted()&&this.onGrantedPermission(),this.recorderHelper.isPermissionDenied()&&this.onDeniedPermission())}componentDidUpdate(e){var t=!e.enabled&&this.props.enabled,i=e.enabled&&!this.props.enabled,s=e.activeSide!==this.props.activeSide,r=!e.canUseVoiceRecording&&this.props.canUseVoiceRecording,n=e.recorderState.status!==this.props.recorderState.status,o=e.recorderState.errorCode!==this.props.recorderState.errorCode,l=e.recorderState.implementation!==this.props.recorderState.implementation,u=e.recorderState.permissions!==this.props.recorderState.permissions,d=e.recorderState.volume!==this.props.recorderState.volume;(n||o||l||u||d)&&(this.recorderHelper=new _.a(this.props));var c=e.wordCustomAudioLuid!==this.props.wordCustomAudioLuid,h=c&&!!this.props.wordCustomAudioLuid,p=c&&!!this.props.wordCustomAudioLuid,m=e.definitionCustomAudioLuid!==this.props.definitionCustomAudioLuid,f=m&&!!this.props.definitionCustomAudioLuid,v=m&&!!this.props.definitionCustomAudioLuid,E=p&&this.props.activeSide===a.b||v&&this.props.activeSide===a.a,b=h&&this.props.activeSide===a.b||f&&this.props.activeSide===a.a;this.startVolumeTick(),r&&window.setTimeout((()=>{g.a.init()}),0),t&&this.onOpen(),i&&this.onClose(),this.recorderHelper.hasError()&&(n||o)&&this.onError(),s&&this.onSideChanged(),E&&this.onRecordingAdded(),b&&this.onRecordingDeleted(),l&&this.recorderHelper.isPermissionNeeded()&&this.onNeedsPermission(),u&&this.recorderHelper.isPermissionDenied()&&this.onDeniedPermission(),u&&this.recorderHelper.isPermissionGranted()&&this.onGrantedPermission(),!s&&!n||b||this.hideUndoNotice()}componentWillUnmount(){this.isUnmounting=!0,this._isMounted=!1,this.onClose()}getRecordingDuration(){return 0===this.state.recordingStarted?0:Object(D.a)()-this.state.recordingStarted}getRecording(e){return void 0===e&&(e=this.props.activeSide),e===a.b?this.props.wordCustomAudio:this.props.definitionCustomAudio}getRecordingUrl(e){var t=this.getRecording(e);return null!=t&&t._url?t._url.replace("http://","https://"):null}getRecordingLuid(e){return void 0===e&&(e=this.props.activeSide),e===a.b?this.props.wordCustomAudioLuid:this.props.definitionCustomAudioLuid}getTtsUrl(e){return void 0===e&&(e=this.props.activeSide),e===a.b?this.props.wordTtsAudioUrl:this.props.definitionTtsAudioUrl}getInactiveSide(){return this.props.activeSide===a.b?a.a:a.b}renderMicMuted(){if(!this.recorderHelper.isMicMuted())return null;var e=I.a.createElement(h.a,{newTab:!0,to:"/help/2444123/faq-is-my-mic-not-working"},I.a.createElement(n.a,{id:"create_set.term_context.voice.muted.faq_link"})),t=[I.a.createElement(c.a,{icon:"mic",key:"mic"}),I.a.createElement(c.a,{icon:"x",key:"x"})],i=I.a.createElement(n.a,{id:"create_set.term_context.voice.muted.title"}),s=I.a.createElement(n.a,{faqLink:e,id:"create_set.term_context.voice.muted.subtitle"});return this.renderIconView(t,i,s)}renderIconView(e,t,i){return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},I.a.createElement("div",{className:"VoiceRecordingContext-iconWrap"},e),I.a.createElement("div",{className:"VoiceRecordingContext-headline"},t),i?I.a.createElement("div",{className:"VoiceRecordingContext-subheadline"},i):null)}renderRecordingMicrophone(e){var t=e===this.props.activeSide,i={boxShadow:"0 0 0 "+(t?5+15*Math.round(100*this.recorderHelper.getVolume())/100:5)+"px currentColor"},s=r()("VoiceRecordingContext-micWrap",{"has-error":this.recorderHelper.getErrorCode()>=0&&!this.state.hideError,"is-activeSide":t,"is-recording":this.recorderHelper.isRecording()});return I.a.createElement("div",{className:s},t?I.a.createElement("div",{className:"VoiceRecordingContext-micBubble",onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd,onTouchStart:this.onTouchStart,style:i},I.a.createElement(c.a,{icon:"mic",size:"large"})):I.a.createElement("div",{className:"VoiceRecordingContext-micBubble",style:i},I.a.createElement(c.a,{icon:"mic",size:"large"})))}renderRecordPrompt(){if(!this.canUseVoiceRecording())return null;var e=this.renderError(),t=this.renderRecordingMicrophone(this.props.activeSide);return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},I.a.createElement(o.a,{above:"s"},(i=>i?I.a.createElement(I.a.Fragment,null,t,I.a.createElement("div",{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{id:"create_set.term_context.voice.start_recording_instructions",micIcon:M,spaceBar:I.a.createElement("kbd",null,I.a.createElement(n.a,{id:"create_set.term_context.voice.start_recording_instructions_spacebar"}))})),e):I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{id:"create_set.term_context.voice.start_recording_instructions_mobile",micIcon:M})),e,t))))}renderMicPermissionsDenied(){if(!this.recorderHelper.isPermissionDenied())return null;var e=[I.a.createElement(c.a,{icon:"mic",key:"mic"}),I.a.createElement(c.a,{icon:"x",key:"x"})],t=I.a.createElement(n.a,{id:"create_set.term_context.voice.error.permission_denied"});return this.renderIconView(e,t)}renderNoPlugin(){if(!this.recorderHelper.isLackingRecordingPlugin())return null;var e=I.a.createElement(h.a,{newTab:!0,to:"https://www.google.com/chrome/"},I.a.createElement(n.a,{id:"create_set.term_context.voice.not_supported.chrome_link"})),t=I.a.createElement(n.a,{id:"create_set.term_context.voice.not_supported.title"}),i=I.a.createElement(n.a,{chromeLink:e,id:"create_set.term_context.voice.not_supported.subtitle"}),s=[I.a.createElement(c.a,{icon:"mic",key:"mic"}),I.a.createElement(c.a,{icon:"x",key:"x"})];return this.renderIconView(s,t,i)}renderNoRecording(e){return this.hasRecording(e)?null:this.canUseVoiceRecording()?this.renderRecordPrompt():this.renderUpsell()}renderError(){if(this.state.hideError)return null;var e=null;return this.recorderHelper.getErrorCode()===p.a.TOO_SHORT?e=I.a.createElement("div",{className:"VoiceRecordingContext-errorMessage"},I.a.createElement(n.a,{id:"create_set.term_context.voice.error.too_short"})):this.recorderHelper.getErrorCode()!==p.a.SAVE_ERROR&&this.recorderHelper.getErrorCode()!==p.a.BAD_SAMPLE_RATE||(e=I.a.createElement("div",{className:"VoiceRecordingContext-errorMessage"},I.a.createElement(n.a,{id:"create_set.term_context.voice.error.unknown"}))),e?I.a.createElement("div",{className:"VoiceRecordingContext-error"},e):null}renderWaitingForMic(){if(!this.recorderHelper.isWaitingForMic())return null;var e=I.a.createElement(c.a,{className:"VoiceRecordingContext-icon",icon:"info"}),t=I.a.createElement(n.a,{id:"create_set.term_context.voice.waiting_for_microphone"});return this.renderIconView(e,t)}renderExistingRecording(e){if(!this.hasRecording(e)||this.recorderHelper.isRecording())return null;var t=this.isPlayingRecording()?I.a.createElement("div",{className:"VoiceRecordingContext-stopButton",onClick:this.onStopPlayingRecording},I.a.createElement(c.a,{icon:"stop",size:"large"})):I.a.createElement("div",{className:"VoiceRecordingContext-playButton",onClick:this.onPlayRecording.bind(null,e)},I.a.createElement(c.a,{icon:"play",size:"large"})),i=this.canRecord()||this.isPlayingRecording()?I.a.createElement(n.a,{id:"create_set.term_context.voice.rerecord_instructions"}):I.a.createElement(h.a,{newTab:!0,to:P},I.a.createElement(n.a,{id:"create_set.term_context.voice.upsell.rerecord"})),s=this.isPlayingRecording()?I.a.createElement("div",{className:"VoiceRecordingContext-playbackFill",style:{right:Math.max(0,100-this.state.playbackPercentage)+"%"}}):null;return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},I.a.createElement("div",{className:"VoiceRecordingContext-existingRecordingActionsWrap"},I.a.createElement("div",{className:"VoiceRecordingContext-existingRecordingActions"},t,this.canRecord()||this.isPlayingRecording()?I.a.createElement("div",{className:"VoiceRecordingContext-garbageButton",onClick:this.onDeleteRecording.bind(null,e)},I.a.createElement(c.a,{icon:"garbage",size:"large"})):null)),I.a.createElement(o.a,{above:"s"},I.a.createElement("div",{className:"VoiceRecordingContext-headline"},i)),this.renderError(),s)}renderUpsell(){return this.canUseVoiceRecording()?null:I.a.createElement("div",{className:"VoiceRecordingContext-workspace VoiceRecordingContext-workspace--upsell"},I.a.createElement("div",{className:"VoiceRecordingContext-workspaceWrap"},I.a.createElement("div",{className:"VoiceRecordingContext-workspaceCell"},I.a.createElement(u.a,{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{id:"create_set.term_context.voice.upsell.headline"})),I.a.createElement(u.a,null,I.a.createElement(l.a,{linkTo:P,linkToNewTab:!0},this.renderText())))))}renderCurrentlyRecording(){if(!this.recorderHelper.isRecording())return null;var e=this.getRecordingDuration(),t=x-e<=1e4,i=Math.floor(e/1e3)+Math.floor(e%1e3/10)/100,s=t?I.a.createElement("h6",{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{duration:x/1e3,id:"create_set.term_context.voice.approaching_max_seconds"})):null,r=this.renderRecordingMicrophone(this.props.activeSide),a=I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{id:"create_set.term_context.voice.recording_in_progress",numberOfSeconds:i}),I.a.createElement("span",{className:"VoiceRecordingContext-recordingStopwatch"},I.a.createElement(n.a,{formats:{number:{stopwatch:{minimumFractionDigits:1,maximumFractionDigits:1}}},id:"create_set.term_context.voice.number_of_seconds",seconds:i})," ",I.a.createElement(n.a,{id:"create_set.term_context.voice.number_of_seconds_unit",seconds:i}))),s?I.a.createElement("div",{className:"VoiceRecordingContext-headline"},s):null);return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},I.a.createElement(o.a,{above:"s"},(e=>e?I.a.createElement(I.a.Fragment,null,r,a):I.a.createElement(I.a.Fragment,null,a,r))))}renderSwitchSidesRecordingArea(e){return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},this.renderRecordingMicrophone(e),this.renderSwitchSidesLink(e))}renderSwitchSidesLink(e){return I.a.createElement(h.a,{onClick:this.onSwitchActiveSide.bind(null,e)},I.a.createElement(o.a,{below:"s"},I.a.createElement(c.a,{icon:"switch"})),e===a.b?I.a.createElement(n.a,{id:"create_set.term_context.voice.switch_to_term_side"}):I.a.createElement(n.a,{id:"create_set.term_context.voice.switch_to_definition_side"}))}renderRecordingArea(e){return e!==this.props.activeSide?this.renderSwitchSidesRecordingArea(e):this.recorderHelper.isRecording()?this.renderCurrentlyRecording():this.recorderHelper.isLackingRecordingPlugin()?this.renderNoPlugin():this.recorderHelper.isPermissionDenied()?this.renderMicPermissionsDenied():this.recorderHelper.isMicMuted()?this.renderMicMuted():this.recorderHelper.isWaitingForMic()?this.renderWaitingForMic():this.recorderHelper.isSavingRecording()||this.recorderHelper.isUploadingRecording()?this.renderSavingRecording():this.hasRecording(e)?this.renderExistingRecording(e):this.renderNoRecording(e)}renderText(){return Object(A.u)()?I.a.createElement(I.a.Fragment,null,Object(A.f)()):I.a.createElement(n.a,{id:"create_set.term_context.voice.upsell.learn_more_link"})}renderBlockingUpsell(){return this.canUseVoiceRecording()||this.recorderHelper.hasBlockingUpsellBeenDismissed()?null:I.a.createElement("div",{className:"VoiceRecordingContext-blockingUpsell"},I.a.createElement("div",{className:"VoiceRecordingContext-blockingUpsellWrap"},I.a.createElement("div",{className:"VoiceRecordingContext-blockingUpsellCell VoiceRecordingContext-blockingUpsellCell--image"},I.a.createElement("img",{role:"presentation",src:this.props.voiceRecordingUpsellImage})),I.a.createElement("div",{className:"VoiceRecordingContext-blockingUpsellCell VoiceRecordingContext-blockingUpsellCell--text"},I.a.createElement(d.a,{deprecatedStyle:!0,size:4},I.a.createElement(n.a,{id:"create_set.term_context.voice.upsell.headline"})),I.a.createElement(u.a,null,I.a.createElement(l.a,{linkTo:P,linkToNewTab:!0},this.renderText())))),I.a.createElement("div",{className:"VoiceRecordingContext-blockingUpsellClose",onClick:this.onClickCloseBlockingUpsell},I.a.createElement(h.a,{onClick:this.onClickCloseBlockingUpsell},I.a.createElement(n.a,{id:"create_set.term_context.voice.upsell.close_link"}))))}renderSide(e){return I.a.createElement("div",{className:"VoiceRecordingContext-sideWrap","data-testid":"VoiceRecordingContext-sideWrap"},I.a.createElement(o.a,{above:"s"},(t=>t?I.a.createElement(I.a.Fragment,null,this.renderRecordingArea(e),e===this.props.activeSide?this.renderTtsLink(e):null):I.a.createElement(I.a.Fragment,null,this.renderRecordingArea(e),I.a.createElement("div",{className:"VoiceRecordingContext-secondaryActions"},I.a.createElement("div",{className:"VoiceRecordingContext-secondaryAction"},this.renderSwitchSidesLink(this.getInactiveSide())),I.a.createElement("div",{className:"VoiceRecordingContext-secondaryAction"},this.renderTtsLink(this.props.activeSide)))))))}renderTtsLink(e){var t=this.getTtsUrl(e),i=e===a.b?I.a.createElement(n.a,{id:"create_set.term_context.voice.no_quizlet_term_audio"}):I.a.createElement(n.a,{id:"create_set.term_context.voice.no_quizlet_definition_audio"}),s=t?I.a.createElement(n.a,{id:"create_set.term_context.voice.listen_to_quizlet_audio_link"}):i;return I.a.createElement(h.a,{disabled:!t,onClick:this.onPlayTtsAudio.bind(null,t)},I.a.createElement(o.a,{above:"s"},(e=>e?I.a.createElement(I.a.Fragment,null,s):I.a.createElement(I.a.Fragment,null,I.a.createElement(c.a,{icon:"play"}),s))))}renderSavingRecording(){if(!this.recorderHelper.isSavingRecording()&&!this.recorderHelper.isUploadingRecording())return null;var e=I.a.createElement("div",{className:"VoiceRecordingContext-headline"},I.a.createElement(n.a,{id:"create_set.term_context.voice.saving"})),t=this.renderRecordingMicrophone(this.props.activeSide);return I.a.createElement("div",{className:"VoiceRecordingContext-workspace"},I.a.createElement(o.a,{above:"s"},(i=>i?I.a.createElement(I.a.Fragment,null,t,e):I.a.createElement(I.a.Fragment,null,e,t))))}render(){var e=r()("VoiceRecordingContext-helpLinkWrap",{"VoiceRecordingContext-helpLinkWrap--cleanDesign":this.props.shouldUseCleanDesign}),t=this.renderSide(a.b),i=this.renderSide(a.a),s=this.canUseVoiceRecording()?I.a.createElement(h.a,{newTab:!0,to:"/help/2444119/recording-custom-audio"},I.a.createElement(n.a,{id:"create_set.term_context.voice.faq_link"})):null,l=this.renderBlockingUpsell();return I.a.createElement("div",{className:"VoiceRecordingContext"},I.a.createElement("div",{className:"VoiceRecordingContext-wrapper"},I.a.createElement("div",{className:"VoiceRecordingContext-main"},I.a.createElement(o.a,{above:"s"},(e=>e?I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"VoiceRecordingContext-side VoiceRecordingContext-side--word"},t),I.a.createElement("div",{className:"VoiceRecordingContext-side VoiceRecordingContext-side--definition"},i)):I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"VoiceRecordingContext-recordingArea"},this.props.activeSide===a.b?t:i)))))),I.a.createElement("div",{className:e},s),l)}undoDelete(){g.a.updateTermCustomAudio(this.state.lastDeletedCustomAudioLuid,this.props.setLuid,this.props.termLuid,this.props.activeSide),this.setState({lastDeletedCustomAudioLuid:null})}startVolumeTick(){this.volumeTick||(this.stopVolumeTick(),this.volumeTick=U(this.onVolumeTick))}openPermissions(){this.props.onOpenVoiceRecordingPermissionsModal()}closePermissions(){this.props.onCloseVoiceRecordingPermissionsModal()}startRecording(){this.canRecord()&&(g.a.record(this.props.setLuid,this.props.termLuid,this.props.activeSide),this.setState({recordingStarted:Object(D.a)()},this.onRecordingTick))}stopRecording(){this.recorderHelper.isRecording()&&(Object(w.a)("new_create_set_recording_stopped"),g.a.stop())}playRecording(e){if(this.hasRecording(e)){var t=this.getRecordingUrl(e);g.a.preloadAudio(t,{onError(){},onLoad:e=>{if(this._isMounted&&!this.isUnmounting){this.stopPlayingRecording();var i=new L.a({playbackPercentage:0});i.to({playbackPercentage:105}).duration(1e3*e).update((e=>{this._isMounted&&!this.isUnmounting&&this.setState(e)})).on("end",(()=>{this._isMounted&&!this.isUnmounting&&this.setState({playbackPercentage:0})})).start();var s=()=>null==i?void 0:i.stop();g.a.playAudio(t,{onStop:s,onError:s,onFinish:s})}}})}}stopPlayingRecording(){g.a.stopAllAudio()}togglePlayingRecording(){this.isPlayingRecording()?this.stopPlayingRecording():this.playRecording()}deleteRecording(t){if(this.hasRecording(t)){this.stopPlayingRecording();var i=this.getRecordingLuid(t);g.a.delete(this.props.termLuid,this.props.activeSide,i),this.setState({lastDeletedCustomAudioLuid:i}),Object(C.a)({duration:T.a.DEFAULT,isDismissible:!0,message:e("create_set.term_context.voice.error.recording_deleted"),onClickSecondaryAction:this.onUndoDelete,secondaryActionLabel:e("create_set.term_context.voice.error.undo_link")})}}startRecordingTick(){this.recordingTick||(this.stopRecordingTick(),this.recordingTick=U(this.onRecordingTick))}stopRecordingTick(){null!==this.recordingTick&&clearTimeout(this.recordingTick),this.recordingTick=null}stopVolumeTick(){null!==this.volumeTick&&clearTimeout(this.volumeTick),this.volumeTick=null}hideUndoNotice(){this.state.lastDeletedCustomAudioLuid&&this.setState({lastDeletedCustomAudioLuid:null})}hideError(){this.setState({hideError:!0})}showError(){this.setState({hideError:!1})}hasTts(e){return!!this.getTtsUrl(e)}hasRecording(e){return!!this.getRecording(e)}isPlayingRecording(){return this.state.playbackPercentage>0}canUseVoiceRecording(){return this.props.canUseVoiceRecording}canRecord(){return this.canUseVoiceRecording()&&this.recorderHelper.isPermissionGranted()&&!this.isPlayingRecording()&&(this.recorderHelper.isStopped()||this.recorderHelper.hasNonUIBlockingError())}switchToOffsetRow(e){return!!this.canRecord()&&(m.a.activateOffsetRowContext(this.props.termLuid,e,R),!0)}switchToSide(e){e===this.props.activeSide||this.recorderHelper.isRecording()||m.a.activateSide(this.props.termLuid,e)}hasUndo(){return!!this.state.lastDeletedCustomAudioLuid}}}).call(this,i("nrsj").default)},DJCe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}})};var s,r=i("q1tI"),a=(s=r)&&s.__esModule?s:{default:s}},DKK0:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("4Brf");var s=i("j8WY"),r=i("shtt"),a=i("KD7m"),n=i("FuVJ");class o extends n.a{isPublished(){return!!(this.publishedTimestamp&&this.publishedTimestamp>0)}displayTitle(){return Object(r.a)(this.title)}displayDescription(){return Object(a.a)(Object(r.a)(this.description))}getModePath(e){return"/"+this.id+"/"+e}static fromJson(e){return Object(s.a)(o,e)}}},DNQV:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("cMu9"),r=i("q1tI"),a=i.n(r);class n extends r.PureComponent{render(){var{autoplay:e,height:t,videoId:i,width:r}=this.props;return a.a.createElement(s.a,{aspectRatio:this.props.aspectRatio},a.a.createElement("iframe",{allowFullScreen:!0,frameBorder:"0",height:t,scrolling:"no",src:"https://player.vimeo.com/video/"+i+"?autoplay="+String(e)+"&muted="+String(e),title:n.titleGenerator.next().value,width:r}))}}n.titleGenerator=function*(){for(var e=0;;e+=1)yield"vimeo-"+e}(),n.defaultProps={aspectRatio:[16,9],autoplay:!1,height:"100%",width:"100%"}},DQwC:function(e,t,i){"use strict";i("zKZe");var s=i("RVJv");class r extends s.a{}r.URL_BASE="diagram-shapes",r.MODEL_NAME="diagramShape",r.PARTITION_COLUMN="termId",r.REQUIRED_FIELDS=["setId"];var a=i("PYQB"),n=Object.assign({},a.a);n.init(r);t.a=n},"DS/l":function(e,t,i){"use strict";(function(e){i("zKZe"),i("FZtP");var s=i("nmax"),r=i("0j+G"),a=i("yJYf"),n=i("FAB2"),o=i("QMP1"),l=i("DKK0"),u=i("RsOY"),d=i.n(u),c=i("GFZu"),h=i("vL1h"),p=i("RrEx"),g=i("fdo3"),m=i("T3U7"),f=i("LwoS"),v=Object.assign({detectLanguageResults:{},discardDisabled:!1,hideTerms:!1,luid:null,openLangSelectSide:null,profanityErrors:{},publishDisabled:!1,redirecting:!1,set:{},setValidationErrors:{requires_def_lang:"",requires_word_lang:""},stickyHeaderHeight:0,validationErrors:{},wasPreviouslyPublished:!1,setup(e,t){this.luid=e,this.set=new l.a(t),this.wasPreviouslyPublished=this.set.isPublished(),this.bindActions(n.a.UPDATE,this._update),this.bindActions(n.a.UPDATE_SUCCESS,this._updateSuccess),this.bindActions(n.a.PUBLISH,this._publish),this.bindActions(n.a.PUBLISH_SUCCESS,this._publishSuccess),this.bindActions(n.a.PUBLISH_FAILURE,this._publishFailure),this.bindActions(n.a.DISCARD,this._discard),this.bindActions(n.a.DISCARD_SUCCESS,this._discardSuccess),this.bindActions(n.a.DISCARD_FAILURE,this._discardFailure),this.bindActions(n.a.DETECT_LANGUAGE,this._detectLanguage),this.bindActions(n.a.DETECT_LANGUAGE_FAILURE,this._detectLanguageFailure),this.bindActions(n.a.DETECT_PROFANITY_SUCCESS,this._detectProfanitySuccess),this.bindActions(n.a.SHOW_LANG_SELECT,this._showLangSelect),this.bindActions(n.a.HIDE_LANG_SELECT,this._hideLangSelect),this.bindActions(n.a.SHOW_TERMS,this._showTerms),this.bindActions(n.a.HIDE_TERMS,this._hideTerms),this.bindActions(n.a.UPDATE_STICKY_HEADER_HEIGHT,this._updateStickyHeaderHeight),this.waitFor(r.b),this.bindActions(o.b.UPDATE_SUCCESS,this._termUpdateSuccess)},get(){return this.set},getLuid(){return this.luid},getDetectLanguageResults(){return this.detectLanguageResults},getValidationErrors(){return this.validationErrors},getProfanityErrors(){return this.profanityErrors},isRedirecting(){return this.redirecting},isPublishDisabled(){return this.publishDisabled},isDiscardDisabled(){return this.discardDisabled},shouldHideTerms(){return this.hideTerms},getOpenLangSelectSide(){return this.openLangSelectSide},getStickyHeaderHeight(){return this.stickyHeaderHeight},_update(e){var{props:t}=e;this.set=d()(this.set,{$merge:t})},_updateSuccess(e){var{model:t}=e,i=t.get("id");i&&(this.set=d()(this.set,{$merge:{id:i}}))},_publish(){this.publishDisabled=!0},_publishSuccess(e){var{model:t}=e;this._logIfStuck(),this.redirecting=!0;var i=this.wasPreviouslyPublished?"":"?new";Object(g.a)(""+t.get("_webUrl")+i)},_publishFailure(t){var{error:i,model:s}=t;this.publishDisabled=!1,i instanceof f.a&&(this.validationErrors=Object(p.a)(s.getValidationErrors()),!("min_terms"in this.validationErrors)&&r.b.getNumSyncedTerms()<2&&(this.validationErrors.min_terms=e("create_set.validation_errors.not_enough_terms_error"))),Object.keys(this.validationErrors).forEach((e=>{var t=this.validationErrors[e];Object(m.a)("new_create_set_publish_error",{identifier:e,message:t})}))},_termUpdateSuccess(){r.b.getNumSyncedTerms()>=2&&"min_terms"in this.validationErrors&&(this.validationErrors=Object(h.a)(this.validationErrors,["min_terms"]))},_discard(){this.discardDisabled=!0},_discardSuccess(){this.redirecting=!0,Object(g.a)("/create-set")},_discardFailure(){this.discardDisabled=!1},_detectLanguage(e){var{side:t,text:i}=e,s=Object(c.a)(t);s[t]={queryString:i,isLoading:!0,error:null},this.detectLanguageResults[t]&&Array.isArray(this.detectLanguageResults[t].data)?s[t].data=this.detectLanguageResults[t].data:s[t].data=null,this.detectLanguageResults=d()(this.detectLanguageResults,{$merge:s})},_detectLanguageFailure(e){var{side:t,error:i}=e;if(this.detectLanguageResults[t]){var s=Object(c.a)(t,{$merge:{}});s[t].$merge={data:[],error:i,isLoading:!1},this.detectLanguageResults=d()(this.detectLanguageResults,s)}},_detectProfanitySuccess(e){var{field:t,results:i}=e,s={[t]:i.data&&i.data.detectProfanity&&i.data.detectProfanity.level>=2};this.profanityErrors=d()(this.profanityErrors,{$merge:s})},_showLangSelect(e){var{side:t,row:i,triggerAutodefine:s}=e;this.openLangSelectSide={side:t,row:i,triggerAutodefine:s}},_hideLangSelect(){this.openLangSelectSide=null},_showTerms(){this.hideTerms=!1},_hideTerms(){this.hideTerms=!0},_logIfStuck(){window.setTimeout((function(){var e=a.a.getAllSyncing(),t={};t.syncing=e.length?e:"none",Object(m.a)("new_create_set_stuck_saving",t)}),25e3)},_updateStickyHeaderHeight(e){this.stickyHeaderHeight=e.heightInPx}},s.a);v.init(),t.a=v}).call(this,i("nrsj").default)},EKn5:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return f}));i("4mDm"),i("3bBZ");var s=i("1Pxe"),r=i("cRhH"),a=i("Uudg"),n=i("bvRJ"),o=i("a08m"),l=i("og3H"),u=i("tYUx"),d=i("Gh6S"),c=i("S16J"),h=i("q1tI"),p=i("vm/G"),g=i("qxWM"),m=i("EFuM");class f extends h.Component{constructor(){super(...arguments),this.onNextTick=e=>window.setTimeout(e,0),this.handleCustomDistractorChange=(e,t)=>{this.props.onCustomDistractorChange&&this.props.onCustomDistractorChange(e,t)},this.onDistractorSuggestionChosen=e=>{this.isClickingSuggestion=!0;var{activeDistractor:t}=this.props;null!==t&&this.props.onCustomDistractorSelectSuggestion(e,t),this.activeDistractorInput.current&&this.onNextTick((()=>{this.activeDistractorInput.current&&this.activeDistractorInput.current.focus(),this.isClickingSuggestion=!1}))},this.handleCustomDistractorFocus=e=>{this.props.onCustomDistractorRichTextEditorFocus(e)},this.handleCustomDistractorRemoveClick=()=>{this.props.onCustomDistractorRemoveClick&&this.props.onCustomDistractorRemoveClick()},this.handleCustomDistractorRichTextEditorBlur=(e,t)=>{!this.isClickingSuggestion&&this.props.onCustomDistractorRichTextEditorBlur&&this.props.onCustomDistractorRichTextEditorBlur(e,t)},this.handleUpdatePMEditorView=e=>{this.props.onUpdatePMEditorView&&this.props.onUpdatePMEditorView(e)},this.languageContainsAccentCharacters=()=>g.a.containsAccentLanguage(this.props.languageCode),this.activeDistractorInput=h.createRef(),this.isClickingSuggestion=!1}renderImage(){return h.createElement("span",{className:"CardSideCustomDistractors-distractorRowImage"},h.createElement(c.a,{image:null,onDeleteImage:()=>{},placeholderImage:null}))}renderImageContainer(){var e;return null!=(e=this.props.imageHelper)&&e.hasImageOrPlaceholder()?h.createElement("div",{className:"CardSideCustomDistractors-distractorRowImageContainer"},this.renderImage()):h.createElement("div",{className:"CardSideCustomDistractors-distractorRowImageContainer"},h.createElement(d.a,{canUseImageUpload:!1,disabled:!0,onToggleImageContext:()=>{},onUploadImage:()=>{},showMenu:!1}))}renderDistractorRow(t,i,r){var{activeDistractor:a}=this.props,n=!((null==a?void 0:a.luid)!==t.luid);return h.createElement("div",{className:"CardSideCustomDistractors-distractorRow",key:t.luid},h.createElement("div",{className:"CardSideCustomDistractors-distractorRowTop"},h.createElement(p.default,{canEditRichText:!0,isFocused:n,label:e("create_set.term_context.custom_distractors.field_label"),labelId:"custom-distractor",lang:i,languageCodes:i?[i]:[],onBlur:this.handleCustomDistractorRichTextEditorBlur.bind(this,t),onChange:this.handleCustomDistractorChange.bind(this,t),onFocus:this.handleCustomDistractorFocus.bind(this,t),onUpdatePMEditorView:this.handleUpdatePMEditorView,placeholder:e("create_set.term_context.custom_distractors.multiple_choice_option_placeholder",{number:r+1}),plainText:t.text.plainText,pmJson:t.text.richText,ref:n?this.activeDistractorInput:null,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex})),h.createElement(s.CSSTransitionGroup,{disableTransition:Object(m.j)(),transitionName:"TermContent-animateContext"},this.shouldRenderSuggestions(n)?h.createElement("div",{className:"Autosuggest"},h.createElement(u.a,{extraTopPadding:this.languageContainsAccentCharacters(),onSuggestionChosen:this.onDistractorSuggestionChosen,suggestionsData:this.props.distractorSuggestions,termSide:l.Sb.DEFINITION})):null))}renderDistractorFields(){var{distractors:e,languageCode:t}=this.props;return(e||[]).map(((e,i)=>this.renderDistractorRow(e,t,i)))}render(){return h.createElement("div",{className:"CardSideCustomDistractors"},h.createElement("div",{className:"CardSideCustomDistractors-distractorFields"},this.renderDistractorFields()),h.createElement("div",{className:"CardSideCustomDistractors-content"},h.createElement("div",{className:"CardSideCustomDistractors-header"},h.createElement(a.a,{id:"create_set.term_context.custom_distractors.description.header"}),h.createElement(r.b,{isMerch:!0,productType:r.a.BETA})),h.createElement("div",{className:"CardSideCustomDistractors-description"},h.createElement(a.a,{id:"create_set.term_context.custom_distractors.description.paragraph_one"})),h.createElement("div",{className:"CardSideCustomDistractors-description"},h.createElement(a.a,{id:"create_set.term_context.custom_distractors.description.paragraph_two"})),h.createElement("div",{className:"CardSideCustomDistractors-removeContext"},h.createElement(o.a,{onClick:this.handleCustomDistractorRemoveClick,tabIndex:this.props.tabIndex,variant:"revert"},h.createElement(n.a,{icon:"garbage"}),h.createElement("span",{className:"CardSideCustomDistractors-removeCTA"},h.createElement(a.a,{id:"create_set.term_context.custom_distractors.description.remove_cta"}))))))}shouldRenderSuggestions(e){var{isAutosuggestionEnabled:t,isTermActive:i,distractorSuggestions:s}=this.props,r=!!(i&&t&&e);return r&&null!=s&&s.suggestions.length&&this.props.onCustomDistractorSuggestionsShow(),r}}}).call(this,i("nrsj").default)},Ee28:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return a}));var s=i("3YfB"),r=i("sLV1");function a(t,i){void 0===i&&(i=!1);var a=Object(r.a)();if(!t)return e("human_time.blank_timestamp");var n=t<=a;if(!n&&!i)return e("human_time.past.almost_now");var o=Math.abs(a-t),l=30*s.b;if(o<10)return e(n?"human_time.past.almost_now":"human_time.future.almost_now");if(o<s.f)return e(n?"human_time.past.under_one_min":"human_time.future.under_one_min");if(o<s.d){var u=Math.round(o/s.f);return e(n?"human_time.past.under_one_hour":"human_time.future.under_one_hour",{minutes:u})}if(o<s.b&&o>=s.d){var d=Math.round(o/s.d);return e(n?"human_time.past.under_one_day":"human_time.future.under_one_day",{hours:d})}if(o<s.i&&o>=s.b){var c=Math.round(o/s.b);return e(n?"human_time.past.under_one_week":"human_time.future.under_one_week",{days:c})}if(o<l&&o>=s.i){var h=Math.round(o/s.i);return e(n?"human_time.past.under_one_month":"human_time.future.under_one_month",{weeks:h})}if(o<s.j&&o>=l){var p=Math.round(o/l);return e(n?"human_time.past.under_one_year":"human_time.future.under_one_year",{months:p})}var g=Math.round(o/s.j);return e(n?"human_time.past.years":"human_time.future.years",{years:g})}}).call(this,i("nrsj").default)},EzPt:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("Mn35"),r=i.n(s);i("4mDm"),i("3bBZ");function a(e,t){var[i,s]=r()(e,(e=>function(e,t){var{type:i}=e;return t.indexOf(i)>-1}(e,t)));return{matching:i,nonMatching:s,numTotal:i.length+s.length}}},FAB2:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"b",(function(){return u})),i.d(t,"f",(function(){return l}));var s,r=i("Wv2R"),a=Object(r.a)("SetConstants",{actions:{BLUR_TITLE:null,DETECT_LANGUAGE_FAILURE:null,DETECT_LANGUAGE:null,DETECT_PROFANITY_FAILURE:null,DETECT_PROFANITY_SUCCESS:null,DISCARD_FAILURE:null,DISCARD_SUCCESS:null,DISCARD:null,FOCUS_TITLE:null,HIDE_LANG_SELECT:null,HIDE_TERMS:null,PUBLISH_FAILURE:null,PUBLISH_SUCCESS:null,PUBLISH:null,SHOW_LANG_SELECT:null,SHOW_TERMS:null,UPDATE_FAILURE:null,UPDATE_STICKY_HEADER_HEIGHT:null,UPDATE_SUCCESS:null,UPDATE:null}}).actions,n={UP:-1,DOWN:1},o={MAX_TERMS:2e3,MIN_TERMS:2,MIN_TERMS_BLANK_SET:5};!function(e){e[e.UNLOCKED=0]="UNLOCKED",e[e.DMCA=1]="DMCA",e[e.PROPRIETARY=2]="PROPRIETARY",e[e.TESTBANK=3]="TESTBANK",e[e.TESTBANK_RELAXED=4]="TESTBANK_RELAXED",e[e.REVIEW=5]="REVIEW"}(s||(s={}));var l,u={CONFIDENCE_THRESHOLD:.99,DEBOUNCE_TIME:400,MIN_LENGTH:1};!function(e){e[e.HEADER=0]="HEADER",e[e.FOOTER=1]="FOOTER"}(l||(l={}))},FBfK:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return S})),i.d(t,"a",(function(){return C}));i("zKZe"),i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("bvRJ"),n=i("og3H"),o=i("zK28"),l=i("X0lI"),u=i.n(l),d=i("q1tI"),c=i.n(d),h=i("JhTn"),p=i("TtcH"),g=i("yckm"),m=i("2fsZ"),f=i("y2oz"),v="consolidated_format_icon",_="consolidated_highlighter",E=Object.assign({},h.c,{[v]:"text-format"}),b=Object.assign({},h.d,{[_]:"PMToolbar--consolidatedHighlighterSwirl"}),S=t=>{var i=r()("badge","UpsellPMToolbar-upsellBadge",{plus:!t,teacher:t}),s=e(t?"global.user_badges.teacher":"global.user_badges.plus");return c.a.createElement("span",{className:i},c.a.createElement("a",{href:Object(p.n)("rich_text_premium_badge"),onClick:()=>{return e=s,void Object(f.a)({action:n.Ob.CLICK,cta:e,fullActionName:"premium_badge_in_toolbar_clicked"});var e},target:"upgrade"},s))};class C extends c.a.PureComponent{constructor(){super(...arguments),this.handleMouseDown=e=>{e.preventDefault()},this.onColorClick=e=>{this.onMarkClick(e,"rich_text_highlight")},this.onMarkClick=(e,t)=>{var i=u()(e.currentTarget.getAttribute("id"));Object(m.a)("rich_text_upsell_in_toolbar_clicked",i),Object(f.a)({action:n.Ob.CLICK,additional_info:{markName:i},fullActionName:"rich_text_upsell_in_toolbar_clicked"}),window.open(Object(p.n)(t),"_blank")},this.onFormattingClick=e=>{this.onMarkClick(e,"rich_text_formatting")},this.renderToolbarIcon=(e,t)=>c.a.createElement("div",{className:"PMToolbar-icon",id:e,key:"inlinestyle-"+e,onClick:t},c.a.createElement(a.a,{icon:E[e]})),this.renderHighlighterIcon=(e,t)=>{var i=r()("PMToolbar-highlighter",[b[e]]);return c.a.createElement("div",{className:i,id:e,key:"inlinestyle-"+e,onClick:t},c.a.createElement(a.a,{icon:"check-rounded"}))},this.renderCondensedIcons=()=>c.a.createElement(c.a.Fragment,null,this.renderToolbarIcon(v,this.onFormattingClick),this.renderHighlighterIcon(_,this.onColorClick)),this.isSelfIdentifiedTeacher=()=>{var e;return(null==(e=o.a.user)?void 0:e.selfIdentifiedTeacherStatus)===n.qb.TEACHER},this.toolbarRef=c.a.createRef()}componentDidMount(){!this.toolbarMouseDownListener&&this.toolbarRef.current&&(this.toolbarMouseDownListener=g.a.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}render(){var e=r()("PMToolbar",{"PMToolbar-combinedToolbar":this.props.isInCombinedToolbar});return c.a.createElement("div",{className:e,ref:this.toolbarRef},this.renderCondensedIcons(),this.props.shouldHideOuterBadge?null:S(this.isSelfIdentifiedTeacher()))}}}).call(this,i("nrsj").default)},FQ3H:function(e,t,i){"use strict";(function(e){i("hByQ");var s=i("TSYQ"),r=i.n(s),a=i("wLt/"),n=i("Uudg"),o=i("a08m"),l=i("FJLI"),u=i("vzun"),d=i("og3H"),c=i("qiyg"),h=i("fwul"),p=i("7n6V"),g=i("nCwC"),m=i("FenW"),f=i("5bYi"),v=i("Ty2s"),_=i("08aY"),E=i("pfAI"),b=i("6rYD"),S=i("FAB2"),C=i("QMP1"),T=i("rKZd"),y=i("N7sa"),I=i("TX86"),A=i.n(I),O=i("q1tI"),w=i.n(O),D=i("mmUd"),L=i("T3U7"),R=i("y2oz"),x=i("W6SY"),P=e=>window.setTimeout(e,0);class M extends w.a.Component{constructor(e){var t;super(e),t=this,this.onSelectLang=()=>{this.props.shouldTriggerAutodefine?P((()=>this.onToggleContext(C.e.AUTODEFINE))):this.props.onFocusActiveRow()},this.onMoveUp=e=>{0!==this.props.index&&this.props.onMoveUp(this.props.termLuid,e)},this.onMoveDown=e=>{this.props.index!==this.props.totalCount-1&&this.props.onMoveDown(this.props.termLuid,e)},this.onAddRow=()=>{this.props.totalCount<S.d.MAX_TERMS&&this.props.onAddRow(this.props.termLuid)},this.handleDeleteRow=()=>{this.props.totalCount>S.d.MIN_TERMS&&this.props.onDeleteRow(this.props.termLuid)},this.onToggleContext=(e,t)=>{"function"==typeof t&&P(t),e!==this.props.activeContext?this.canOpenContext(e)&&this.openContext(e):this.closeContext(e)},this.onMouseLeave=()=>{this.props.onMouseLeave()},this.onViewDuplicate=()=>{this.props.onViewDuplicate(this.props.termLuid)},this.onIgnoreDuplicates=()=>{m.a.ignoreDuplicates(this.props.term.word),this.props.onFocusActiveRow()},this.onDragStart=e=>{this.props.isPhantom||this.props.viewOnly?e.preventDefault():this.props.onDragStart(this.props.termLuid,e)},this.onDragEnd=e=>{this.props.isPhantom||this.props.viewOnly?e.preventDefault():this.props.onDragEnd(this.props.termLuid)},this.onDragOver=e=>{this.props.onDragOver(this.props.termLuid,e)},this.onMouseEnter=()=>{this.props.onMouseEnter(this.props.termLuid)},this.bindKeymaps=()=>{A.a.setScope(this.props.termLuid),A()(b.a.studiableItem.moveUp,this.props.termLuid,(()=>(this.saveTermThen((()=>{this.onMoveUp({shouldCenter:!0}),this.focus()})),!1))),A()(b.a.studiableItem.moveDown,this.props.termLuid,(()=>(this.saveTermThen((()=>{this.onMoveDown({shouldCenter:!0}),this.focus()})),!1))),A()(b.a.studiableItem.toggleUpload,this.props.termLuid,(()=>{if(!this.canOpenContext(C.e.IMAGE))return!1;var e=()=>{this.termContent.current&&this.termContent.current.openUploadDialog()};return this.props.activeContext===C.e.IMAGE?e():this.onToggleContext(C.e.IMAGE,e),!1})),A()(b.a.studiableItem.toggleImages,this.props.termLuid,(()=>(this.onToggleContext(C.e.IMAGE),!1))),A()(b.a.studiableItem.toggleRecord,this.props.termLuid,(()=>(this.onToggleContext(C.e.RECORDING),!1))),A()(b.a.studiableItem.toggleAutosuggest,this.props.termLuid,(()=>(this.props.onToggleAutosuggest(),!1))),A()(b.a.studiableItem.closeContext,this.props.termLuid,(()=>{if(this.props.activeContext)return this.onToggleContext(this.props.activeContext),!1})),A()(b.a.studiableItem.addItemBelowCurrent,this.props.termLuid,(()=>(this.onAddRow(),!1)))},this.unbindKeymaps=()=>{A.a.unbind(b.a.studiableItem.moveUp,this.props.termLuid),A.a.unbind(b.a.studiableItem.moveDown,this.props.termLuid),A.a.unbind(b.a.studiableItem.toggleImages,this.props.termLuid),A.a.unbind(b.a.studiableItem.toggleAutosuggest,this.props.termLuid),A.a.unbind(b.a.studiableItem.toggleRecord,this.props.termLuid),A.a.unbind(b.a.studiableItem.closeContext,this.props.termLuid),A.a.unbind(b.a.studiableItem.addItemBelowCurrent,this.props.termLuid)},this.openContext=e=>{if(e===C.e.IMAGE){Object(R.a)({action:d.Ob.VIEW,fullActionName:"new_create_set_open_image_context"}),this.blurWord(),m.a.toggleContext(this.props.termLuid,C.e.IMAGE);var{queryString:t,lang:i}=this.props.imageSearchMeta||{};if(this.props.term.word&&(t!==this.props.term.word||i!==this.props.wordLang)){var s=this.props.wordLang&&this.props.defLang?[this.props.wordLang,this.props.defLang]:null,r=this.props.canUseImageUpload?E.b.MAX_NUM_IMAGES_UPGRADED:E.b.MAX_NUM_IMAGES_FREE;p.a.search(this.props.termLuid,this.props.term.word,s,r)}}else e===C.e.AUTODEFINE?(Object(L.a)("new_create_set_open_autodefine_context"),this.blurWord(),this.blurDefinition(),this.props.wordLang?this.props.defLang?this.props.term.word&&(m.a.toggleContext(this.props.termLuid,C.e.AUTODEFINE),m.a.autodefine(this.props.termLuid,this.props.term.word,this.props.wordLang,this.props.defLang,this.props.user?this.props.user.id:null)):g.a.showLangSelect(this.props.setLuid,a.a,this.props.termLuid,!0):g.a.showLangSelect(this.props.setLuid,a.b,this.props.termLuid,!0)):e===C.e.RECORDING?(Object(L.a)("new_create_set_open_recording_context"),this.blurWord(),this.blurDefinition(),m.a.toggleContext(this.props.termLuid,C.e.RECORDING),this.props.canUseVoiceRecording&&h.a.init()):e===C.e.CUSTOM_DISTRACTORS&&(this.blurDefinition(),m.a.toggleContext(this.props.termLuid,C.e.CUSTOM_DISTRACTORS))},this.closeContext=function(e){void 0===e&&(e=null),null!==e&&e!==t.props.activeContext||(e!==C.e.AUTODEFINE&&e!==C.e.IMAGE||P((()=>t.focusDefinition())),m.a.resetContext(t.props.termLuid))},this.termContent=w.a.createRef(),this.imageHelper=new T.a({placeholderImage:e.placeholderImage,image:e.image})}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new T.a({placeholderImage:e.placeholderImage,image:e.image})),e.dragDropEvent&&this.onDragEnd(e.dragDropEvent)}shouldComponentUpdate(e,t){var i;return!Object(x.a)(this.state,t)||(!(null==(i=this.termContent)||!i.current.shouldUpdateOnProps(this.props,e))||(this.props.langPromptSide!==e.langPromptSide||this.props.isNotSynced!==e.isNotSynced||this.props.isDragged!==e.isDragged||this.props.isDraggedActive!==e.isDraggedActive||this.props.defLang!==e.defLang||this.props.duplicateStatus!==e.duplicateStatus||this.props.activeContext!==e.activeContext&&this.props.isActive||this.props.profanityResults!==e.profanityResults||this.props.isAutosuggestionEnabled!==e.isAutosuggestionEnabled||this.props.wordSideSuggestions!==e.wordSideSuggestions||this.props.definitionSideSuggestions!==e.definitionSideSuggestions))}componentDidUpdate(e){this.props.isActive&&!e.isActive?this.bindKeymaps():!this.props.isActive&&e.isActive&&this.unbindKeymaps(),this.props.dragEnterEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(this.props.termLuid,this.props.dragEnterEvent),e.isDropTarget&&!this.props.isDropTarget&&this.props.onDragLeaveEnd()}renderDuplicatePopover(){return this.props.duplicateStatus===C.h.ACTIVE_DUPLICATE&&this.props.isActive?w.a.createElement(l.a,null,w.a.createElement(_.a,{prompt:w.a.createElement(n.a,{id:"create_set.term_duplicate_warning.title"})},w.a.createElement(o.a,{onClick:this.onIgnoreDuplicates},w.a.createElement(n.a,{id:"create_set.term_duplicate_warning.ignore_link"})),w.a.createElement(o.a,{onClick:this.onViewDuplicate},w.a.createElement(n.a,{id:"create_set.term_duplicate_warning.view_others_link"})))):null}renderLanguagePrompt(){var{langPromptSide:t}=this.props;if(!t)return null;var i=this.props.shouldTriggerAutodefine?e("create_set.language_prompt.autodefine_hint"):void 0;return w.a.createElement(l.a,null,w.a.createElement(f.a,{defLang:this.props.defLang,isChooseLangSelected:this.props.isChooseLangSelected,onSelectLang:this.onSelectLang,question:e("create_set.language_prompt.what_language_for_suggestions"),questionSubtext:i,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,side:t,viewOnly:this.props.viewOnly,wordLang:this.props.wordLang}))}renderProfanityPopover(){return this.props.langPromptSide?null:this.props.isActive&&this.hasProfanity()?w.a.createElement(u.a,null,w.a.createElement(n.a,{id:"create_set.term_profanity_warning.tooltip"})):null}renderWordPopover(){return this.hasWordProfanity()?this.renderProfanityPopover():this.props.shouldTriggerAutodefine&&this.props.wordLang&&this.props.langPromptSide===a.b?this.renderLanguagePrompt():this.renderDuplicatePopover()}renderDefinitionPopover(){return this.hasDefinitionProfanity()&&!this.hasWordProfanity()?this.renderProfanityPopover():this.props.shouldTriggerAutodefine&&this.props.defLang&&this.props.langPromptSide===a.a?this.renderLanguagePrompt():null}renderTermContent(){return w.a.createElement(v.a,{activeContext:this.props.activeContext,activeSide:this.props.activeSide,autodefineResults:this.props.autodefineResults,canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,createSetImageUploadCtaTestVariant:this.props.createSetImageUploadCtaTestVariant,definitionCustomAudio:this.props.definitionCustomAudio,definitionCustomAudioLuid:this.props.definitionCustomAudioLuid,definitionLang:this.props.defLang,definitionPopover:this.shouldRenderPopover()?this.renderDefinitionPopover():null,definitionSideSuggestions:this.props.definitionSideSuggestions,distractorSuggestions:this.props.distractorSuggestions,hasDefLangError:this.props.hasDefLangError,hasDefProfanity:this.hasDefinitionProfanity(),hasMinTermsError:this.props.hasMinTermsError,hasWordLangError:this.props.hasWordLangError,hasWordProfanity:this.hasWordProfanity(),image:this.props.image,imageHelper:this.imageHelper,imageLuid:this.props.imageLuid,imageSearchMeta:this.props.imageSearchMeta,imageSearchResults:this.props.imageSearchResults,index:this.props.index,innerRef:this.termContent,isActive:this.props.isActive,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isNotSynced:this.props.isNotSynced,isPhantom:this.props.isPhantom,isReordering:this.props.isReordering,isReportingFlowBlocked:this.props.isReportingFlowBlocked,isSetContentTypeDiagrams:this.props.isSetContentTypeDiagrams,onActive:this.props.onActive,onAddRow:this.onAddRow,onBulkImageUpload:this.props.onBulkImageUpload,onCloseContext:this.closeContext,onCloseVoiceRecordingPermissionsModal:this.props.onCloseVoiceRecordingPermissionsModal,onDeleteRow:this.handleDeleteRow,onDragEnd:this.onDragEnd,onDragStart:this.onDragStart,onMoveDown:this.onMoveDown,onMoveUp:this.onMoveUp,onOpenVoiceRecordingPermissionsModal:this.props.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.props.onScrollToOffset,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleContext:this.onToggleContext,placeholderImage:this.props.placeholderImage,recorderState:this.props.recorderState,setLuid:this.props.setLuid,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowAutosuggest:!0,shouldShowCustomDistractorsToggle:this.props.shouldShowTeacherCustomDistractorCreation,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowRichTextUpsell:!this.props.canEditRichText&&Object(D.a)(),shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:this.props.term,termImageLuid:this.props.termImageLuid,termLuid:this.props.termLuid,terms:this.props.terms,totalCount:this.props.totalCount,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:this.props.wordCustomAudio,wordCustomAudioLuid:this.props.wordCustomAudioLuid,wordLang:this.props.wordLang,wordPopover:this.shouldRenderPopover()?this.renderWordPopover():null,wordSideSuggestions:this.props.wordSideSuggestions})}renderBareRow(){var e=r()("TermRow-bareSide TermRow-bareSide--word TermText",{"is-rtl":c.rightToLeftLanguages.indexOf(this.props.wordLang)>-1,["lang-"+(this.props.wordLang?this.props.wordLang:"")]:this.props.wordLang}),t=r()("TermRow-bareSide TermRow-bareSide--definition TermText",{"is-rtl":c.rightToLeftLanguages.indexOf(this.props.defLang)>-1,["lang-"+(this.props.defLang?this.props.defLang:"")]:this.props.defLang});return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:e},this.props.term.word||" "),w.a.createElement("div",{className:t},this.props.term.definition||" "))}render(){var e=this.props.isSetContentTypeDiagrams&&!this.props.isPhantom||this.props.shouldUseCleanDesign&&!this.props.isSetContentTypeDiagrams,t=r()("TermRow",{"TermRow--box":e,"has-activeContext":this.props.activeContext,"has-image":this.imageHelper.hasImage(),"is-active":this.props.isActive,"is-disabled":this.props.viewOnly,"is-dragged":this.props.isDragged,"is-draggedActive":this.props.isDraggedActive,"is-duplicate":!!this.props.duplicateStatus,"is-notSynced":this.props.isNotSynced,"is-phantom":this.props.isPhantom});return w.a.createElement("div",{className:t,key:this.props.termLuid+"-row",onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDragOver:this.onDragOver,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.forceBareRow?this.renderBareRow():w.a.createElement(w.a.Fragment,null,this.renderBareRow(),this.renderTermContent()))}saveTermThen(e){this.blur(),P(e)}hasProfanity(){return this.hasWordProfanity()||this.hasDefinitionProfanity()}hasWordProfanity(){var e,t=this.props.profanityResults,i=this.props.user&&this.props.user.isVerified;return!(null==t||null==(e=t.word)||!e.data||3!==t.word.data.level||i)}canOpenContext(e){switch(e){case C.e.AUTODEFINE:return this.termContent.current.canShowAutodefine();case C.e.IMAGE:return!this.imageHelper.isImageUploading();default:return!0}}shouldRenderPopover(){return!(this.props.activeContext||this.props.viewOnly)}focus(){this.termContent.current&&this.termContent.current.focus()}focusWord(){this.termContent.current&&this.termContent.current.focusWord()}focusDefinition(){this.termContent.current&&this.termContent.current.focusDefinition()}blur(){this.termContent.current&&this.termContent.current.blur()}blurWord(){this.termContent.current&&this.termContent.current.blurWord()}blurDefinition(){this.termContent.current&&this.termContent.current.blurDefinition()}hasDefinitionProfanity(){var e,t,i,s=this.props.profanityResults,r=null==(e=this.props.user)?void 0:e.isVerified;return!(3!==(null==s||null==(t=s.definition)||null==(i=t.data)?void 0:i.level)||r)}}M.defaultProps={forceBareRow:!1,isSetContentTypeDiagrams:!1,shouldUseCleanDesign:!1,isReportingFlowBlocked:!1},t.a=Object(y.a)()(M)}).call(this,i("nrsj").default)},FRoV:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return E}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("nXOR"),n=i("a08m"),o=i("jvKz"),l=i("FJLI"),u=i("qiyg"),d=i("hmZ7"),c=i("gkHh"),h=i("ifSZ"),p=i("QLaP"),g=i.n(p),m=i("q1tI"),f=i.n(m),v=i("EFuM");function _(e){e.stopPropagation()}class E extends m.PureComponent{constructor(){super(...arguments),this.handleOpenLanguageSelect=()=>{g()(this.languageSelect,"Missing languageSelect in LanguageBarSide"),this.languageSelect.openSelect()},this.handleHideLangSelect=()=>{this.selectLanguageTrigger&&this.selectLanguageTrigger.close()},this.handleSelectLang=(e,t)=>{t.preventDefault(),this.props.shouldUpdateStore&&d.a.updateLang(this.props.setLuid,this.props.side,e,this.props.otherSideLang),this.props.onSelectLang&&this.props.onSelectLang(this.props.side,e)}}renderQuickSwitch(){return this.props.recentLanguages.filter((e=>u.invisibleLanguages.indexOf(e)<0)).slice(0,2).map((e=>{var t=this.handleSelectLang.bind(this,e);return f.a.createElement("span",{className:"LanguageBarSide-quickSwitch",key:e},f.a.createElement(n.a,{onClick:t},Object(h.a)(e)))}))}renderSelectLanguageLink(){var t=this.props.lang?Object(h.a)(this.props.lang):e("create_set.language_bar.choose_language");return f.a.createElement(o.a,{afterOpen:this.handleOpenLanguageSelect,constrainToWindow:!1,overlay:f.a.createElement(l.a,null,this.renderLanguageSelect()),position:"bottom right",ref:e=>{this.selectLanguageTrigger=e?e.overlay:null},triggerAction:"click"},f.a.createElement(n.a,{onClick:_,tabIndex:-1},t))}renderLanguageSelect(){var e=u.invisibleLanguages.indexOf(this.props.lang)>=0;return f.a.createElement("div",{className:"LanguageBarSide-languageSelect"},f.a.createElement(c.a,{disabled:this.props.viewOnly,lang:this.props.lang,onHideLangSelect:this.handleHideLangSelect,onSelectLang:this.props.onSelectLang,otherSideLang:this.props.otherSideLang,recentLanguages:this.props.recentLanguages,ref:e=>{this.languageSelect=e},setLuid:this.props.setLuid,shouldUpdateStore:this.props.shouldUpdateStore,showInvisibleLangs:e,side:this.props.side}))}render(){var e=r()("LanguageBarSide",{"has-error":this.props.hasError});return f.a.createElement("div",{className:e},!this.props.lang&&0!==this.props.recentLanguages.length&&this.props.hasCreatedSets?this.renderQuickSwitch():null,f.a.createElement(a.a,{below:"m"},(e=>e||Object(v.j)()?this.renderLanguageSelect():this.renderSelectLanguageLink())))}}E.defaultProps={shouldUpdateStore:!0}}).call(this,i("nrsj").default)},FUBA:function(e,t,i){"use strict";i("zKZe"),i("JfAA"),i("E9XD"),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i("q1tI"),n=l(a),o=l(i("17x9"));function l(e){return e&&e.__esModule?e:{default:e}}var u={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},d=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],c=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},h=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),p=function(){return h?"_"+Math.random().toString(36).substr(2,12):void 0},g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.inputRef=function(e){i.input=e,"function"==typeof i.props.inputRef&&i.props.inputRef(e)},i.placeHolderSizerRef=function(e){i.placeHolderSizer=e},i.sizerRef=function(e){i.sizer=e},i.state={inputWidth:e.minWidth,inputId:e.id||p()},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||p()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(c(e,this.sizer),this.placeHolderSizer&&c(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return h&&e?n.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=s({},this.props.style);t.display||(t.display="inline-block");var i=s({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),r=function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}(this.props,[]);return function(e){d.forEach((function(t){return delete e[t]}))}(r),r.className=this.props.inputClassName,r.id=this.state.inputId,r.style=i,n.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),n.default.createElement("input",s({},r,{ref:this.inputRef})),n.default.createElement("div",{ref:this.sizerRef,style:u},e),this.props.placeholder?n.default.createElement("div",{ref:this.placeHolderSizerRef,style:u},this.props.placeholder):null)}}]),t}(a.Component);g.propTypes={className:o.default.string,defaultValue:o.default.any,extraWidth:o.default.oneOfType([o.default.number,o.default.string]),id:o.default.string,injectStyles:o.default.bool,inputClassName:o.default.string,inputRef:o.default.func,inputStyle:o.default.object,minWidth:o.default.oneOfType([o.default.number,o.default.string]),onAutosize:o.default.func,onChange:o.default.func,placeholder:o.default.string,placeholderIsMinWidth:o.default.bool,style:o.default.object,value:o.default.any},g.defaultProps={minWidth:1,injectStyles:!0},t.default=g},FX4X:function(e,t,i){"use strict";i("5s+n"),i("hByQ"),i("zKZe");var s=i("LwoS"),r=i("RVJv");class a extends r.a{static searchDiagrams(e,t,i){return void 0===t&&(t=1),void 0===i&&(i={}),a.search(e,t,Object.assign({},i,{diagrams:!0}))}}a.URL_BASE="images",a.MODEL_NAME="image",a.CAN_BE_SEARCHED=!0,a.MERGE_CONFLICTING_MODELS=!0;var n=i("PYQB"),o=i("U4jO"),l={uploadIndexMap:{},uploader:null,init(e){this.MODEL=e,n.a.init.call(this,this.MODEL);var t=Object(o.a)({url:a._getBaseUrl()});t.on("before",(()=>this.emit("sync:begin"))),t.on("complete",(()=>this.emit("sync:end"))),this.uploader=t},save(e,t,i){return void 0===i&&(i={}),new Promise(((r,n)=>{this.uploader.upload(e,t,{onProgress(e){var{luid:t,progress:s}=e,{onProgress:r}=i;"function"==typeof r&&r([t,s])}}).then((e=>{var{luid:t,response:i}=e,o=this.getModel(t),l=a._checkServerResponse(i);if(l)n([l,t,o]);else if(a._updateModelsWithServerResponse([o],i),o.isValid())r([t,o]);else{var u=new s.a("Validation errors while saving image: id="+o.get("id"));n([u,t,o])}})).catch((e=>{var{luid:t,error:i}=e,s=this.getModel(t);n([i,t,s])}))}))},search(e,t,i){return void 0===t&&(t=null),void 0===i&&(i={}),this.MODEL.search(e,t,i).then(this.bulkAdd.bind(this))},searchDiagrams(e,t,i){return void 0===t&&(t=null),void 0===i&&(i={}),this.MODEL.searchDiagrams(e,t,i).then(this.bulkAdd.bind(this))}},u=Object.assign({},n.a,l);u.init(a);t.a=u},FdmV:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("peh1");function r(e,t){return Object(s.createSelector)((t=>t.get(e)),((e,t)=>t),(e=>e),Object(s.createStructuredSelector)(t))}},FenW:function(e,t,i){"use strict";var s=i("6acW"),r=i.n(s),a=(i("5s+n"),i("p532"),i("zKZe"),i("4mDm"),i("3bBZ"),i("UxlC"),i("FZtP"),i("nCwC")),n=i("QMP1"),o=i("0j+G"),l=i("YUt4"),u=i("9WHe"),d=i("1iNE"),c=i.n(d),h=i("SQJ4");class p extends h.a{}p.URL_BASE="suggestions/definition",p.API_VERSION="3.2";var g=p,m=i("zK28"),f=e=>e[0]&&e[0].data?e[0].data.suggestions:null;class v extends h.a{static autosuggest(e){return this.get(Object.assign({clientId:m.a.uid},e)).then(f)}}v.URL_BASE="suggestions/definition",v.API_VERSION="3.2";class _ extends h.a{static autosuggest(e){return this.get(Object.assign({clientId:m.a.uid},e)).then(f)}}_.URL_BASE="suggestions/distractors",_.API_VERSION="3.2";class E extends h.a{static autosuggest(e){return this.get(Object.assign({clientId:m.a.uid},e)).then(f)}}E.URL_BASE="suggestions/word",E.API_VERSION="3.2";var b=i("h4pu"),S=i("GFZu"),C=/[\.,;!#\$\/:\'\(\)\[\]_\\\"¡]/g;var T=i("vl7F"),y=i("KD7m");t.a=new class{constructor(){var e=this;this.termSyncer=b.a,this.previousWordSuggestionQueryString=null,this.previousWordSuggestionResult=null,this.previousDefinitionSuggestionQueryString=null,this.previousDefinitionSuggestionResult=null,this.shouldLogForRichTextDebugging=!1,this.activateRow=e=>{l.a.viewAction(n.b.ACTIVATE_ROW,{luid:e})},this.activateSide=(e,t)=>{l.a.viewAction(n.b.ACTIVATE_SIDE,{luid:e,activeSide:t})},this.activateRowSide=(e,t)=>{l.a.viewAction(n.b.ACTIVATE_ROW_SIDE,{luid:e,activeSide:t})},this.activateOffsetRowContext=(e,t,i)=>{l.a.viewAction(n.b.ACTIVATE_OFFSET_ROW_CONTEXT,{fromLuid:e,offset:t,context:i})},this.toggleContext=(e,t)=>{l.a.viewAction(n.b.CONTEXT_TOGGLE,{luid:e,context:t})},this.resetContext=e=>{l.a.viewAction(n.b.CONTEXT_RESET,{luid:e})},this.bulkCreate=e=>{var t;if(!e.length)return[];var i=o.b.getIndicesToAdd(e),s=i.map((()=>this.termSyncer.add({}))),r=o.b.hasPhantomRow()&&i.length<e.length;return r&&(t=o.b.getPhantomRow()),l.a.viewAction(n.b.LOCAL_BULK_CREATE,{luids:s,indices:i,activatePhantom:r}),r&&s.push(t),this.harmonizeRanks(),s},this.update=e=>{var{setLuid:t,luid:i,props:s,wordLang:r,defLang:a,persist:n=!0,syncDelayOverride:o=!1,shouldLogForRichTextDebugging:l=!1}=e,u=Object(S.a)(i,s);return this.shouldLogForRichTextDebugging=l,this.bulkUpdate({setLuid:t,luidToProps:u,wordLang:r,defLang:a,persist:n,syncDelayOverride:o})},this.bulkUpdate=e=>{var{setLuid:t,luidToProps:i,wordLang:s,defLang:r,persist:a=!0,syncDelayOverride:o=!1}=e;return l.a.viewAction(n.b.UPDATE,{luidToProps:i,wordLang:s,defLang:r}),a?this.saveUpdates(t,i,o):Promise.resolve()},this.saveUpdates=function(t,i,s){return void 0===s&&(s=!1),e._saveUpdatesWithoutChain(t,i,s).then(e.bulkUpdateSuccess).catch(e.bulkUpdateFailure).finally(e.harmonizeRanks)},this._saveUpdatesWithoutChain=function(t,i,s){return void 0===s&&(s=!1),a.a.maybeCreateSet(t).then((t=>{for(var r in i){var a=i[r];Object.assign(a,{setId:t})}return e.termSyncer.bulkSave(i,s)}))},this.bulkUpdateSuccess=e=>{var[t]=e;if(this.shouldLogForRichTextDebugging){var i=[];for(var s in t){var r=t[s];i.push({id:r.get("id"),setId:r.get("setId"),wordRichText:r.get("wordRichText"),definitionRichText:r.get("definitionRichText")})}u.a.debug("[RT debug]: term models in server response in TermActionCreators.bulkUpdateSuccess",i)}l.a.serverAction(n.b.UPDATE_SUCCESS,{models:t})},this.bulkUpdateFailure=e=>{if(e instanceof Array){var[t,i]=e;l.a.serverAction(n.b.UPDATE_FAILURE,{models:i,error:t})}else u.a.error("TermActionCreators: Error with update",e)},this.flipColumns=(e,t)=>(l.a.viewAction(n.b.FLIP_COLUMNS,{luidToProps:t}),this.saveUpdates(e,t,!0)),this.import=e=>{var{setLuid:t,luidToPropsToReplace:i,arrayOfPropsToAdd:s,wordLang:r,defLang:a}=e,o=this.termSyncer.bulkAdd(s);return Object.assign(o,i),l.a.viewAction(n.b.UPDATE,{luidToProps:o,wordLang:r,defLang:a}),this.saveUpdates(t,o,!0)},this.del=e=>(l.a.viewAction(n.b.DELETE,{luid:e}),this.termSyncer.del(e).then(this.deleteSuccess).catch(this.deleteFailure).finally(this.harmonizeRanks)),this.deleteSuccess=e=>{var[t,i]=e;l.a.serverAction(n.b.DELETE_SUCCESS,{luid:t,model:i})},this.deleteFailure=e=>{var[t,i,s]=e;l.a.serverAction(n.b.DELETE_FAILURE,{luid:i,model:s,error:t})},this.ignoreDuplicates=e=>{l.a.viewAction(n.b.IGNORE_DUPLICATE_WORD,{word:e})},this.move=(e,t,i,s)=>(l.a.viewAction(n.b.MOVE,{luid:t,oldIndex:i,newIndex:s}),this._saveUpdatesWithoutChain(e,Object(S.a)(t,{rank:s}),!0).then(this.moveSuccess).catch(this.moveFailure).finally(this.harmonizeRanks)),this.moveSuccess=e=>{var[t,i]=e;l.a.serverAction(n.b.MOVE_SUCCESS,{luid:t,model:i})},this.moveFailure=e=>{var[t,i,s]=e;l.a.serverAction(n.b.MOVE_FAILURE,{luid:i,model:s,error:t})},this.maybeCreateTerm=(e,t)=>new Promise(((i,s)=>{var r=this.termSyncer.getModel(e);if(!r.isNewRecord())return i(r.get("id"));var a=Object(S.a)(e,{setId:t});return this.termSyncer.bulkSave(a,!0).then((t=>{var[s]=t,r=s[e].get("id");return i(r),this.bulkUpdateSuccess([s])})).catch((e=>{var[t,i]=e;return s(t),this.bulkUpdateFailure([t,i])}))})),this.autodefine=(e,t,i,s,r)=>{var a=Object(y.a)(t.replace(/[\*]/g,"").replace(C,"")),o=a.length?a:t;l.a.viewAction(n.b.AUTODEFINE,{term:o,luid:e});var u={corroboration:n.c.MIN_CORROBORATION,defLang:s,limit:n.c.RESULT_LIMIT,localTermId:-1,userId:r,word:t,wordLang:i};return g.get(u).then((t=>l.a.serverAction(n.b.AUTODEFINE_SUCCESS,{luid:e,autodefineResults:t[0]}))).catch((t=>l.a.serverAction(n.b.AUTODEFINE_FAILURE,{luid:e,error:t})))},this.shouldSendNextAutosuggestionRequest=(e,t,i)=>!t||!i||(i.suggestions.length>0||0!==e.indexOf(t)),this.autosuggestWord=e=>e.prefix?e.prefix.length>n.d.PAYLOAD_LIMIT?this.autosuggestClear():this.shouldSendNextAutosuggestionRequest(e.prefix,this.previousWordSuggestionQueryString,this.previousWordSuggestionResult)?E.autosuggest(Object.assign({limit:n.d.RESULTS_LIMIT},e)).then((t=>{this.previousWordSuggestionQueryString=e.prefix,this.previousWordSuggestionResult=t,l.a.serverAction(n.b.AUTO_SUGGEST_SUCCESS,{suggestions:t,side:"word"})})).catch((e=>l.a.serverAction(n.b.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear():this.autosuggestClear(),this.autosuggestDistractors=e=>{if(!e.definition)return this.autosuggestClear("distractor");if(e.definition.length>n.d.PAYLOAD_LIMIT)return this.autosuggestClear("distractor");var t=e.definition;return this.shouldSendNextAutosuggestionRequest(t,this.previousDefinitionSuggestionQueryString,this.previousDefinitionSuggestionResult)?_.autosuggest({limit:n.d.RESULTS_LIMIT,definition:e.definition}).then((i=>{this.previousDefinitionSuggestionQueryString=t,this.previousDefinitionSuggestionResult=i;var s=i;null!=s&&s.suggestions.length&&r()(e.definition)===e.definition&&(s.suggestions=s.suggestions.map((e=>(e.text=r()(e.text),e)))),l.a.serverAction(n.b.AUTO_SUGGEST_SUCCESS,{suggestions:s,side:"distractors"})})).catch((e=>l.a.serverAction(n.b.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear("distractor")},this.autosuggestDefinition=e=>{if(!e.word)return this.autosuggestClear();if(e.word=e.word||"",e.prefix=e.prefix||"",e.word.length>n.d.PAYLOAD_LIMIT||e.prefix.length>n.d.PAYLOAD_LIMIT)return this.autosuggestClear();var t=e.word+"//"+e.prefix;return this.shouldSendNextAutosuggestionRequest(t,this.previousDefinitionSuggestionQueryString,this.previousDefinitionSuggestionResult)?v.autosuggest(Object.assign({limit:n.d.RESULTS_LIMIT},e)).then((e=>{this.previousDefinitionSuggestionQueryString=t,this.previousDefinitionSuggestionResult=e,l.a.serverAction(n.b.AUTO_SUGGEST_SUCCESS,{suggestions:e,side:"definition"})})).catch((e=>l.a.serverAction(n.b.AUTO_SUGGEST_FAILURE,e))):this.autosuggestClear()},this.autosuggestClear=e=>{l.a.serverAction(n.b.AUTO_SUGGEST_CLEAR,e)},this.transformAllTermsText=(e,t,i)=>{var s={},r=o.b.getAll();for(var a of Object.keys(r)){var n=r[a],l=Object(T.a)(n.word,t,i),u=Object(T.a)(n.definition,i,t);l===n.word&&u===n.definition||(s[a]={word:l,definition:u})}if(c()(s)>0)return this.bulkUpdate({setLuid:e,luidToProps:s,wordLang:t,defLang:i})},this.harmonizeRanks=()=>{o.b.getOrder().forEach(((e,t)=>{this.termSyncer.models[e].properties.rank=t}))}}deleteImageSuccess(e){var{luid:t,termLuid:i,imageLuid:s}=e;l.a.serverAction(n.b.DELETE_IMAGE_SUCCESS,{luid:t,termLuid:i,imageLuid:s})}createImageSuccess(e){var{luid:t,termLuid:i,imageLuid:s}=e;l.a.serverAction(n.b.CREATE_IMAGE_SUCCESS,{luid:t,termLuid:i,imageLuid:s})}createImageFailure(e){var{error:t,luid:i,termLuid:s,imageLuid:r}=e;l.a.serverAction(n.b.CREATE_IMAGE_FAILURE,{error:t,luid:i,termLuid:s,imageLuid:r})}deleteImageFailure(e){var{error:t,luid:i,termLuid:s,imageLuid:r}=e;l.a.serverAction(n.b.DELETE_IMAGE_FAILURE,{error:t,luid:i,termLuid:s,imageLuid:r})}}},FuVJ:function(e,t,i){"use strict";i("zKZe");var s=class{constructor(e){Object.assign(this,e)}};t.a=s},Gh6S:function(e,t,i){"use strict";var s=i("nXOR"),r=i("vid3"),a=(i("4mDm"),i("3bBZ"),i("jvKz")),n=i("FJLI"),o=i("iU5h"),l=i("q1tI"),u=i.n(l),d=i("Uudg"),c=i("bvRJ");class h extends u.a.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick(e)}}render(){return u.a.createElement("div",{className:"ImageUploadProminentContextToggle","data-testid":"ImageUploadProminentContextToggle",onClick:this.onClick},u.a.createElement(c.a,{icon:"image",size:"large"}),u.a.createElement("div",{className:"ImageUploadProminentContextToggle-IconExplanation"},u.a.createElement(d.a,{id:"create_set.term_context.image.add_image"})))}}var p=e=>{var t,{canUseImageUpload:i,disabled:s,onSearchForImage:r,onUploadImage:d}=e,[c,p]=Object(l.useState)(!1),g=()=>{p(!1),t&&t.close()},m=u.a.createElement(n.a,{extraClassNames:"UIPopover--clean",includeArrowInBounds:!0},u.a.createElement(o.a,{onSearchForImage:e=>{r(e),g()},onUploadImage:d,onUploadImageClick:g,showUpsell:!i}));return u.a.createElement(a.a,{className:"CreateSetImageMenuDesktop",constrainToWindow:!1,overlay:m,position:"bottom right",ref:e=>{t=e},triggerAction:"click"},u.a.createElement(h,{disabled:s||!1,onClick:()=>c?g():p(!0)}))},g=i("dxfC"),m=e=>{var{canUseImageUpload:t,disabled:i,onSearchForImage:s,onUploadImage:r}=e,[a,n]=Object(l.useState)(!1),d=()=>{n(!1)};return u.a.createElement("div",{className:"CreateSetImageMenuMobile"},u.a.createElement("div",{className:"CreateSetImageMenuMobile-imageContainer","data-testid":"CreateSetImageMenuMobile"},u.a.createElement(h,{disabled:i||!1,onClick:()=>a?d():n(!0)})),u.a.createElement(g.a,{className:"CreateSetImageMenuMobile-modal",fullWidthBody:!0,includeCloseButton:!1,isOpen:a,onClose:()=>n(!1)},u.a.createElement(o.a,{onSearchForImage:e=>{d(),s(e)},onUploadImage:(e,t)=>{d(),r(e,t)},showUpsell:!t})))};t.a=e=>{var{canUseImageUpload:t,disabled:i,onToggleImageContext:a,onUploadImage:n,showMenu:o}=e;return u.a.createElement("div",{className:"ImageUploadComponent"},o&&u.a.createElement(s.a,{above:"s"},(e=>e?u.a.createElement("div",{"data-testid":"ImageUploadComponent-createSetImageMenuDesktop"},u.a.createElement(p,{canUseImageUpload:t,disabled:i,onSearchForImage:a,onUploadImage:n})):u.a.createElement("div",{"data-testid":"ImageUploadComponent-createSetImageMenuMobile"},u.a.createElement(m,{canUseImageUpload:t,disabled:i,onSearchForImage:a,onUploadImage:n})))),!o&&u.a.createElement("div",{"data-testid":"ImageUploadComponent-contextToggle"},u.a.createElement(r.b,{disabled:i,icon:"image",onClick:a},((e,t)=>u.a.createElement(h,{disabled:e,onClick:t})))))}},H0AD:function(e,t,i){"use strict";i("zKZe"),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=i("q1tI"),n=d(a),o=d(i("17x9")),l=d(i("jMYa")),u=d(i("YAV2"));function d(e){return e&&e.__esModule?e:{default:e}}var c={autoload:o.default.bool.isRequired,cache:o.default.any,children:o.default.func.isRequired,ignoreAccents:o.default.bool,ignoreCase:o.default.bool,loadOptions:o.default.func.isRequired,loadingPlaceholder:o.default.oneOfType([o.default.string,o.default.node]),multi:o.default.bool,noResultsText:o.default.oneOfType([o.default.string,o.default.node]),onChange:o.default.func,onInputChange:o.default.func,options:o.default.array.isRequired,placeholder:o.default.oneOfType([o.default.string,o.default.node]),searchPromptText:o.default.oneOfType([o.default.string,o.default.node]),value:o.default.any},h={},p={autoload:!0,cache:h,children:function(e){return n.default.createElement(l.default,e)},ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",options:[],searchPromptText:"Type to search"},g=function(e){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return s._cache=e.cache===h?{}:e.cache,s.state={inputValue:"",isLoading:!1,options:e.options},s.onInputChange=s.onInputChange.bind(s),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){this.props.autoload&&this.loadOptions("")}},{key:"componentWillReceiveProps",value:function(e){e.options!==this.props.options&&this.setState({options:e.options})}},{key:"componentWillUnmount",value:function(){this._callback=null}},{key:"loadOptions",value:function(e){var t=this,i=this.props.loadOptions,s=this._cache;if(s&&Object.prototype.hasOwnProperty.call(s,e))this.setState({options:s[e]});else{var r=function i(r,a){if(i===t._callback){t._callback=null;var n=a&&a.options||[];s&&(s[e]=n),t.setState({isLoading:!1,options:n})}};this._callback=r;var a=i(e,r);a&&a.then((function(e){return r(0,e)}),(function(e){return r()})),this._callback&&!this.state.isLoading&&this.setState({isLoading:!0})}}},{key:"onInputChange",value:function(e){var t=this.props,i=t.ignoreAccents,s=t.ignoreCase,r=t.onInputChange,a=e;return i&&(a=(0,u.default)(a)),s&&(a=a.toLowerCase()),r&&r(a),this.setState({inputValue:e}),this.loadOptions(a),e}},{key:"noResultsText",value:function(){var e=this.props,t=e.loadingPlaceholder,i=e.noResultsText,s=e.searchPromptText,r=this.state,a=r.inputValue;return r.isLoading?t:a&&i?i:s}},{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this,t=this.props,i=t.children,r=t.loadingPlaceholder,a=(t.multi,t.onChange,t.placeholder),n=(t.value,this.state),o=n.isLoading,l=n.options,u={noResultsText:this.noResultsText(),placeholder:o?r:a,options:o&&r?[]:l,ref:function(t){return e.select=t}};return i(s({},this.props,u,{isLoading:o,onInputChange:this.onInputChange}))}}]),t}(a.Component);t.default=g,g.propTypes=c,g.defaultProps=p},HjX1:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));i("4Brf");var s=i("Uudg"),r=i("dxfC"),a=i("wi8F"),n=i("q1tI"),o=i.n(n);class l extends o.a.PureComponent{render(){return o.a.createElement(r.a,{headerContent:o.a.createElement(s.a,{id:"create_set.set_description_modal.title"}),isOpen:this.props.isOpen,onClose:this.props.onClose},!!this.props.isOpen&&o.a.createElement(a.a,{defLang:this.props.defLang,description:this.props.description,hasProfanityError:this.props.hasProfanityError,onClose:this.props.onClose,setLuid:this.props.setLuid,wordLang:this.props.wordLang}))}}},HlzF:function(e,t,i){(function(s){var r;i("UxlC"),i("Rm1S"),i("EnZy"),i("5s+n"),i("4mDm"),i("rOQg"),i("XMab"),i("s5qe"),i("FZtP"),
/*!
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||a;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||p(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,a.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var s=t._howls[i]._getSoundIds(),r=0;r<s.length;r++){var n=t._howls[i]._soundById(s[r]);n&&n._node&&(n._node.volume=n._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||p(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,a.ctx.currentTime);for(var i=0;i<t._howls.length;i++)if(!t._howls[i]._webAudio)for(var s=t._howls[i]._getSoundIds(),r=0;r<s.length;r++){var n=t._howls[i]._soundById(s[r]);n&&n._node&&(n._node.muted=!!e||n._muted)}return t},stop:function(){for(var e=this||a,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,p()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(n){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),s=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),r=s&&parseInt(s[0].split("/")[1],10)<33;return e._codecs={mp3:!(r||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||a;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(i){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var s=new Audio;s._unlocked=!0,e._releaseHtml5Audio(s)}catch(i){e.noAudio=!0;break}for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var a=e._howls[r]._getSoundIds(),n=0;n<a.length;n++){var o=e._howls[r]._soundById(a[n]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var i=0;i<e._howls.length;i++)e._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||a;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||a;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var i=0;i<e._howls[t]._sounds.length;i++)if(!e._howls[t]._sounds[i]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new i,n=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var t=this;return a.ctx||p(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,void 0!==a.ctx&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(a.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var s,r;if(e._format&&e._format[i])s=e._format[i];else{if("string"!=typeof(r=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(r))||(s=/\.([^.]+)$/.exec(r.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&a.codecs(s)){t=e._src[i];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new o(e),e._webAudio&&u(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var i=this,s=null;if("number"==typeof e)s=e,e=null;else{if("string"==typeof e&&"loaded"===i._state&&!i._sprite[e])return null;if(void 0===e&&(e="__default",!i._playLock)){for(var r=0,n=0;n<i._sounds.length;n++)i._sounds[n]._paused&&!i._sounds[n]._ended&&(r++,s=i._sounds[n]._id);1===r?e=null:s=null}}var o=s?i._soundById(s):i._inactiveSound();if(!o)return null;if(s&&!e&&(e=o._sprite||"__default"),"loaded"!==i._state){o._sprite=e,o._ended=!1;var l=o._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(s&&!o._paused)return t||i._loadQueue("play"),o._id;i._webAudio&&a._autoResume();var u=Math.max(0,o._seek>0?o._seek:i._sprite[e][0]/1e3),d=Math.max(0,(i._sprite[e][0]+i._sprite[e][1])/1e3-u),c=1e3*d/Math.abs(o._rate),h=i._sprite[e][0]/1e3,p=(i._sprite[e][0]+i._sprite[e][1])/1e3;o._sprite=e,o._ended=!1;var g=function(){o._paused=!1,o._seek=u,o._start=h,o._stop=p,o._loop=!(!o._loop&&!i._sprite[e][2])};if(!(u>=p)){var m=o._node;if(i._webAudio){var f=function(){i._playLock=!1,g(),i._refreshBuffer(o);var e=o._muted||i._muted?0:o._volume;m.gain.setValueAtTime(e,a.ctx.currentTime),o._playStart=a.ctx.currentTime,void 0===m.bufferSource.start?o._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,d):o._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,d),c!==1/0&&(i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c)),t||setTimeout((function(){i._emit("play",o._id),i._loadQueue()}),0)};"running"===a.state&&"interrupted"!==a.ctx.state?f():(i._playLock=!0,i.once("resume",f),i._clearTimer(o._id))}else{var v=function(){m.currentTime=u,m.muted=o._muted||i._muted||a._muted||m.muted,m.volume=o._volume*a.volume(),m.playbackRate=o._rate;try{var s=m.play();if(s&&"undefined"!=typeof Promise&&(s instanceof Promise||"function"==typeof s.then)?(i._playLock=!0,g(),s.then((function(){i._playLock=!1,m._unlocked=!0,t||(i._emit("play",o._id),i._loadQueue())})).catch((function(){i._playLock=!1,i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):t||(i._playLock=!1,g(),i._emit("play",o._id),i._loadQueue()),m.playbackRate=o._rate,m.paused)return void i._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||o._loop?i._endTimers[o._id]=setTimeout(i._ended.bind(i,o),c):(i._endTimers[o._id]=function(){i._ended(o),m.removeEventListener("ended",i._endTimers[o._id],!1)},m.addEventListener("ended",i._endTimers[o._id],!1))}catch(r){i._emit("playerror",o._id,r)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=i._src,m.load());var _=window&&window.ejecta||!m.readyState&&a._navigator.isCocoonJS;if(m.readyState>=3||_)v();else{i._playLock=!0;m.addEventListener(a._canPlayEvent,(function e(){v(),m.removeEventListener(a._canPlayEvent,e,!1)}),!1),i._clearTimer(o._id)}}return o._id}i._ended(o)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var i=t._getSoundIds(e),s=0;s<i.length;s++){t._clearTimer(i[s]);var r=t._soundById(i[s]);if(r&&!r._paused&&(r._seek=t.seek(i[s]),r._rateSeek=0,r._paused=!0,t._stopFade(i[s]),r._node))if(t._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),t._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||t._emit("pause",r?r._id:null)}return t},stop:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(e)}}),i;for(var s=i._getSoundIds(e),r=0;r<s.length;r++){i._clearTimer(s[r]);var a=i._soundById(s[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,i._stopFade(s[r]),a._node&&(i._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),i._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&i._clearSound(a._node))),t||i._emit("stop",a._id))}return i},mute:function(e,t){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(e,t)}}),i;if(void 0===t){if("boolean"!=typeof e)return i._muted;i._muted=e}for(var s=i._getSoundIds(t),r=0;r<s.length;r++){var n=i._soundById(s[r]);n&&(n._muted=e,n._interval&&i._stopFade(n._id),i._webAudio&&n._node?n._node.gain.setValueAtTime(e?0:n._volume,a.ctx.currentTime):n._node&&(n._node.muted=!!a._muted||e),i._emit("mute",n._id))}return i},volume:function(){var e,t,i,s=this,r=arguments;if(0===r.length)return s._volume;if(1===r.length||2===r.length&&void 0===r[1]){var n=s._getSoundIds(),o=n.indexOf(r[0]);o>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(i=t?s._soundById(t):s._sounds[0])?i._volume:0;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,r)}}),s;void 0===t&&(s._volume=e),t=s._getSoundIds(t);for(var l=0;l<t.length;l++)(i=s._soundById(t[l]))&&(i._volume=e,r[2]||s._stopFade(t[l]),s._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e,a.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=e*a.volume()),s._emit("volume",i._id));return s},fade:function(e,t,i,s){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(e,t,i,s)}}),r;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),i=parseFloat(i),r.volume(e,s);for(var n=r._getSoundIds(s),o=0;o<n.length;o++){var l=r._soundById(n[o]);if(l){if(s||r._stopFade(n[o]),r._webAudio&&!l._muted){var u=a.ctx.currentTime,d=u+i/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,d)}r._startFadeInterval(l,e,t,i,n[o],void 0===s)}}return r},_startFadeInterval:function(e,t,i,s,r,a){var n=this,o=t,l=i-t,u=Math.abs(l/.01),d=Math.max(4,u>0?s/u:s),c=Date.now();e._fadeTo=i,e._interval=setInterval((function(){var r=(Date.now()-c)/s;c=Date.now(),o+=l*r,o=Math.round(100*o)/100,o=l<0?Math.max(i,o):Math.min(i,o),n._webAudio?e._volume=o:n.volume(o,e._id,!0),a&&(n._volume=o),(i<t&&o<=i||i>t&&o>=i)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,n.volume(i,e._id),n._emit("fade",e._id))}),d)},_stopFade:function(e){var t=this,i=t._soundById(e);return i&&i._interval&&(t._webAudio&&i._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(i._interval),i._interval=null,t.volume(i._fadeTo,e),i._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,i,s=this,r=arguments;if(0===r.length)return s._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=s._soundById(parseInt(r[0],10)))&&i._loop;e=r[0],s._loop=e}else 2===r.length&&(e=r[0],t=parseInt(r[1],10));for(var a=s._getSoundIds(t),n=0;n<a.length;n++)(i=s._soundById(a[n]))&&(i._loop=e,s._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=e,e&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return s},rate:function(){var e,t,i,s=this,r=arguments;if(0===r.length)t=s._sounds[0]._id;else if(1===r.length){var n=s._getSoundIds(),o=n.indexOf(r[0]);o>=0?t=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),t=parseInt(r[1],10));if("number"!=typeof e)return(i=s._soundById(t))?i._rate:s._rate;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,r)}}),s;void 0===t&&(s._rate=e),t=s._getSoundIds(t);for(var l=0;l<t.length;l++)if(i=s._soundById(t[l])){s.playing(t[l])&&(i._rateSeek=s.seek(t[l]),i._playStart=s._webAudio?a.ctx.currentTime:i._playStart),i._rate=e,s._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,a.ctx.currentTime):i._node&&(i._node.playbackRate=e);var u=s.seek(t[l]),d=(s._sprite[i._sprite][0]+s._sprite[i._sprite][1])/1e3-u,c=1e3*d/Math.abs(i._rate);!s._endTimers[t[l]]&&i._paused||(s._clearTimer(t[l]),s._endTimers[t[l]]=setTimeout(s._ended.bind(s,i),c)),s._emit("rate",i._id)}return s},seek:function(){var e,t,i=this,s=arguments;if(0===s.length)t=i._sounds[0]._id;else if(1===s.length){var r=i._getSoundIds(),n=r.indexOf(s[0]);n>=0?t=parseInt(s[0],10):i._sounds.length&&(t=i._sounds[0]._id,e=parseFloat(s[0]))}else 2===s.length&&(e=parseFloat(s[0]),t=parseInt(s[1],10));if(void 0===t)return i;if("number"==typeof e&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,s)}}),i;var o=i._soundById(t);if(o){if(!("number"==typeof e&&e>=0)){if(i._webAudio){var l=i.playing(t)?a.ctx.currentTime-o._playStart:0,u=o._rateSeek?o._rateSeek-o._seek:0;return o._seek+(u+l*Math.abs(o._rate))}return o._node.currentTime}var d=i.playing(t);d&&i.pause(t,!0),o._seek=e,o._ended=!1,i._clearTimer(t),i._webAudio||!o._node||isNaN(o._node.duration)||(o._node.currentTime=e);var c=function(){i._emit("seek",t),d&&i.play(t,!0)};if(d&&!i._webAudio){var h=function e(){i._playLock?setTimeout(e,0):c()};setTimeout(h,0)}else c()}return i},playing:function(e){var t=this;if("number"==typeof e){var i=t._soundById(e);return!!i&&!i._paused}for(var s=0;s<t._sounds.length;s++)if(!t._sounds[s]._paused)return!0;return!1},duration:function(e){var t=this,i=t._duration,s=t._soundById(e);return s&&(i=t._sprite[s._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,i=0;i<t.length;i++)t[i]._paused||e.stop(t[i]._id),e._webAudio||(e._clearSound(t[i]._node),t[i]._node.removeEventListener("error",t[i]._errorFn,!1),t[i]._node.removeEventListener(a._canPlayEvent,t[i]._loadFn,!1),t[i]._node.removeEventListener("ended",t[i]._endFn,!1),a._releaseHtml5Audio(t[i]._node)),delete t[i]._node,e._clearTimer(t[i]._id);var s=a._howls.indexOf(e);s>=0&&a._howls.splice(s,1);var r=!0;for(i=0;i<a._howls.length;i++)if(a._howls[i]._src===e._src||e._src.indexOf(a._howls[i]._src)>=0){r=!1;break}return l&&r&&delete l[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,i,s){var r=this["_on"+e];return"function"==typeof t&&r.push(s?{id:i,fn:t,once:s}:{id:i,fn:t}),this},off:function(e,t,i){var s=this,r=s["_on"+e],a=0;if("number"==typeof t&&(i=t,t=null),t||i)for(a=0;a<r.length;a++){var n=i===r[a].id;if(t===r[a].fn&&n||!t&&n){r.splice(a,1);break}}else if(e)s["_on"+e]=[];else{var o=Object.keys(s);for(a=0;a<o.length;a++)0===o[a].indexOf("_on")&&Array.isArray(s[o[a]])&&(s[o[a]]=[])}return s},once:function(e,t,i){return this.on(e,t,i,1),this},_emit:function(e,t,i){for(var s=this,r=s["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,i)}.bind(s,r[a].fn),0),r[a].once&&s.off(e,r[a].fn,r[a].id));return s._loadQueue(e),s},_loadQueue:function(e){var t=this;if(t._queue.length>0){var i=t._queue[0];i.event===e&&(t._queue.shift(),t._loadQueue()),e||i.action()}return t},_ended:function(e){var t=this,i=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var s=!(!e._loop&&!t._sprite[i][2]);if(t._emit("end",e._id),!t._webAudio&&s&&t.stop(e._id,!0).play(e._id),t._webAudio&&s){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var r=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),r)}return t._webAudio&&!s&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),a._autoSuspend()),t._webAudio||s||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var i=t._soundById(e);i&&i._node&&i._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,i=0;i<t._sounds.length;i++)if(e===t._sounds[i]._id)return t._sounds[i];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new o(e)},_drain:function(){var e=this,t=e._pool,i=0,s=0;if(!(e._sounds.length<t)){for(s=0;s<e._sounds.length;s++)e._sounds[s]._ended&&i++;for(s=e._sounds.length-1;s>=0;s--){if(i<=t)return;e._sounds[s]._ended&&(e._webAudio&&e._sounds[s]._node&&e._sounds[s]._node.disconnect(0),e._sounds.splice(s,1),i--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],i=0;i<this._sounds.length;i++)t.push(this._sounds[i]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,a.ctx.currentTime),this},_cleanBuffer:function(e){var t=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(a._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=a._scratchBuffer}catch(i){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(e){this._parent=e,this.init()};o.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,i=a._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),e._node.gain.setValueAtTime(i,a.ctx.currentTime),e._node.paused=!0,e._node.connect(a.masterGain)):a.noAudio||(e._node=a._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(a._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=i*a.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++a._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(a._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var l={},u=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),s=new Uint8Array(i.length),r=0;r<i.length;++r)s[r]=i.charCodeAt(r);c(s.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){a.setRequestHeader(t,e._xhr.headers[t])})),a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?c(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},d(a)}},d=function(e){try{e.send()}catch(t){e.onerror()}},c=function(e,t){var i=function(){t._emit("loaderror",null,"Decoding audio data failed.")},s=function(e){e&&t._sounds.length>0?(l[t._src]=e,h(t,e)):i()};"undefined"!=typeof Promise&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(e).then(s).catch(i):a.ctx.decodeAudioData(e,s,i)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},p=function(){if(a.usingWebAudio){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(r){a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=t?parseInt(t[1],10):null;if(e&&i&&i<9){var s=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());a._navigator&&!s&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}};void 0===(r=function(){return{Howler:a,Howl:n}}.apply(t,[]))||(e.exports=r),t.Howler=a,t.Howl=n,void 0!==s?(s.HowlerGlobal=i,s.Howler=a,s.Howl=n,s.Sound=o):"undefined"!=typeof window&&(window.HowlerGlobal=i,window.Howler=a,window.Howl=n,window.Sound=o)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.1
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var i=t._howls.length-1;i>=0;i--)t._howls[i].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,i){var s=this;return s.ctx&&s.ctx.listener?(t="number"!=typeof t?s._pos[1]:t,i="number"!=typeof i?s._pos[2]:i,"number"!=typeof e?s._pos:(s._pos=[e,t,i],void 0!==s.ctx.listener.positionX?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]),s)):s},HowlerGlobal.prototype.orientation=function(e,t,i,s,r,a){var n=this;if(!n.ctx||!n.ctx.listener)return n;var o=n._orientation;return t="number"!=typeof t?o[1]:t,i="number"!=typeof i?o[2]:i,s="number"!=typeof s?o[3]:s,r="number"!=typeof r?o[4]:r,a="number"!=typeof a?o[5]:a,"number"!=typeof e?o:(n._orientation=[e,t,i,s,r,a],void 0!==n.ctx.listener.forwardX?(n.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),n.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),n.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),n.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),n.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),n.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):n.ctx.listener.setOrientation(e,t,i,s,r,a),n)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var i=this;return i._orientation=t.orientation||[1,0,0],i._stereo=t.stereo||null,i._pos=t.pos||null,i._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},i._onstereo=t.onstereo?[{fn:t.onstereo}]:[],i._onpos=t.onpos?[{fn:t.onpos}]:[],i._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,i){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"stereo",action:function(){s.stereo(e,i)}}),s;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0]}for(var a=s._getSoundIds(i),n=0;n<a.length;n++){var o=s._soundById(a[n]);if(o){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||t(o,r),"spatial"===r?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(e,0,0):o._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),s._emit("stereo",o._id)}}return s},Howl.prototype.pos=function(e,i,s,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,i,s,r)}}),a;if(i="number"!=typeof i?0:i,s="number"!=typeof s?-.5:s,void 0===r){if("number"!=typeof e)return a._pos;a._pos=[e,i,s]}for(var n=a._getSoundIds(r),o=0;o<n.length;o++){var l=a._soundById(n[o]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,i,s],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):l._panner.setPosition(e,i,s)),a._emit("pos",l._id)}}return a},Howl.prototype.orientation=function(e,i,s,r){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,i,s,r)}}),a;if(i="number"!=typeof i?a._orientation[1]:i,s="number"!=typeof s?a._orientation[2]:s,void 0===r){if("number"!=typeof e)return a._orientation;a._orientation=[e,i,s]}for(var n=a._getSoundIds(r),o=0;o<n.length;o++){var l=a._soundById(n[o]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,i,s],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):l._panner.setOrientation(e,i,s)),a._emit("orientation",l._id)}}return a},Howl.prototype.pannerAttr=function(){var e,i,s,r=this,a=arguments;if(!r._webAudio)return r;if(0===a.length)return r._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(s=r._soundById(parseInt(a[0],10)))?s._pannerAttr:r._pannerAttr;e=a[0],void 0===i&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:r._panningModel})}else 2===a.length&&(e=a[0],i=parseInt(a[1],10));for(var n=r._getSoundIds(i),o=0;o<n.length;o++)if(s=r._soundById(n[o])){var l=s._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=s._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(s._pos||(s._pos=r._pos||[0,0,-.5]),t(s,"spatial"))}return r},Sound.prototype.init=function(e){return function(){var t=this,i=t._parent;t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,e.call(this),t._stereo?i.stereo(t._stereo):t._pos&&i.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,i=t._parent;return t._orientation=i._orientation,t._stereo=i._stereo,t._pos=i._pos,t._pannerAttr=i._pannerAttr,t._stereo?i.stereo(t._stereo):t._pos?i.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,i._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,i("yLpj"))},"I/ry":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));var s=i("1Pxe"),r=i("KHqc"),a=i("og3H"),n=i("lFws"),o=i("TL93"),l=i("q1tI"),u=i.n(l),d=i("EFuM"),c=i("+RhX");class h extends l.Component{constructor(e){super(e),this.handleAddOption=e=>{var{addOptionsForStudiableItem:t}=this.props;t&&e.luid&&t(e.luid,1)},this.handleDeleteStudiableItem=e=>{this.props.removeStudiableItem(e)},this.handleDeleteImageMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:i}=this.props;i&&i(e,a.C.IMAGE,t)},this.handleDeleteTextMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:i}=this.props;i&&i(e,a.C.TEXT,t)},this.handleDeleteVideoMediaConnection=(e,t)=>{var{deleteStudiableMediaConnection:i}=this.props;i&&i(e,a.C.VIDEO,t)},this.handleDragEnd=e=>{var{draggedOverStudiableItem:t}=this.state,{moveStudiableItem:i}=this.props;t&&i({id:e,idAtNewPosition:t.id})},this.handleDragOver=e=>{this.setState({draggedOverStudiableItem:e})},this.handleImageUpload=e=>{var{uploadImageMedia:t}=this.props;t&&t(e)},this.handleUpdateActiveStudiableItem=e=>{var{activeQuestion:t}=this.state;null!==t&&t.luid===e.luid||this.setState({activeQuestion:e})},this.handleClickAddCard=()=>{var{createStudiableItem:e}=this.props;e(),c.a.scrollToBottom()},this.state={activeQuestion:null,draggedOverStudiableItem:null}}getTabIndex(e){return(2*o.a.multipleChoiceOptions.MAX_ITEMS+2)*e+o.a.studiableItems.FIRST_TAB_INDEX}renderAddStudiableItemsButton(){var{studiableMultipleChoiceQuestions:t}=this.props;return t&&t.length<o.a.studiableItems.MAX_ITEMS?u.a.createElement("div",{className:"CreateSetPage-addStudiableItem",onClick:this.handleClickAddCard},u.a.createElement(r.a,{"aria-label":e("create_set.term_context.tooltips.add_row")},e("create_set.term_context.tooltips.add_row"))):null}renderMcqs(){var{addOrUpdateStudiableMediaConnectionWithMedia:e,deleteMultipleChoiceOption:t,imageUploadStatus:i,saveMultipleChoiceOption:s,selectedMediaConnection:r,studiableMultipleChoiceQuestions:a,toggleExplanation:l,toggleHint:d,updateExplanationMedia:c,updateHintMedia:h,updateOptionMedia:p,updateQuestionMedia:g,updateSelectedMediaConnection:m,setLuid:f,shouldShowVideoExplanationCreation:v}=this.props;if(!(t&&i&&s&&a&&l&&d&&c&&h&&p&&g&&m))return null;var _=a.length<=o.a.studiableItems.MIN_ITEMS_FOR_PUBLISH;return u.a.createElement(u.a.Fragment,null,a.map(((a,o)=>u.a.createElement(n.a,{addOrUpdateStudiableMediaConnectionWithMedia:e,imageUploadStatus:i,isActive:this.isQuestionActive(a),isDeleteDisabled:_,item:a,key:a.luid,onDelete:this.handleDeleteStudiableItem,onDeleteImage:this.handleDeleteImageMediaConnection,onDeleteOption:t,onDeleteText:this.handleDeleteTextMediaConnection,onDeleteVideo:this.handleDeleteVideoMediaConnection,onDragEnd:this.handleDragEnd,onDragOver:this.handleDragOver,onExplanationMediaChange:c,onHintMediaChange:h,onImageUpload:this.handleImageUpload,onOptionAdded:this.handleAddOption,onOptionChange:s,onOptionMediaChange:p,onQuestionMediaChange:g,onUpdateActiveStudiableItem:this.handleUpdateActiveStudiableItem,onUpdateSelectedMediaConnection:m,selectedMediaConnection:r,shouldShowVideoExplanationCreation:v,studiableContainerLuid:f,tabIndex:this.getTabIndex(o),toggleExplanation:l,toggleHint:d}))))}render(){var e=!Object(d.f)();return u.a.createElement(u.a.Fragment,null,u.a.createElement(s.CSSTransitionGroup,{component:"div",transitionEnter:e,transitionLeave:e,transitionName:"CreateSetPage-multipleChoiceQuestions--animateItem"},u.a.createElement("div",{"data-testid":"EditableMcqItemsContainer"},this.renderMcqs())),this.renderAddStudiableItemsButton())}isQuestionActive(e){var{activeQuestion:t}=this.state;return null!==t&&e.luid===t.luid}}}).call(this,i("nrsj").default)},IpYc:function(e,t,i){"use strict";var s=i("q1tI"),r=i.n(s),a=i("N7sa"),n=i("QMP1"),o=i("sp+2"),l=i("niBS"),u=Object(l.b)(n.i.TERM_ROW_MIN_HEIGHT);class d extends s.PureComponent{constructor(e){super(e),this.state={height:e.height}}UNSAFE_componentWillMount(){this.tween=new o.a({height:this.props.height}).ease("linear").to({height:u}).duration(150).update((e=>this.setState(e)))}componentDidMount(){this.tween.start()}componentDidUpdate(e){this.props.dragDropEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(this.props.termLuid,this.props.dragDropEvent)}componentWillUnmount(){this.tween.stop()}render(){return r.a.createElement("div",{className:"TermRowDragPlaceholder",onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,style:{height:this.state.height+"px"}})}}t.a=Object(a.a)()(d)},"J+oH":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("TSYQ"),r=i.n(s),a=i("q1tI"),n=i.n(a);class o extends n.a.PureComponent{render(){var e=r()("UIFloatedCard","UIFloatedCard--"+this.props.background);return n.a.createElement("div",{className:e},this.props.children)}}o.defaultProps={background:"white"}},J2m7:function(e,t,i){var s=i("XKAG")(i("UfWW"));e.exports=s},JjXd:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return v}));i("4mDm"),i("3bBZ");var s=i("Uudg"),r=i("JxFz"),a=i("Pxp3"),n=i("a08m"),o=i("ZlgO"),l=i("fkqS"),u=i("dxfC"),d=i("DLQF"),c=i("o/00"),h=i("zK28"),p=i("QLaP"),g=i.n(p),m=i("q1tI"),f=i.n(m);class v extends m.PureComponent{constructor(){super(...arguments),this.onRefresh=()=>window.location.reload(),this.onDismiss=()=>{this.getIsFatal()||c.a.dismiss()},this.onShowFeedback=e=>(e.preventDefault(),this.onDismiss(),g()(h.a.openContactUsModal,"Missing Quizlet.openContactUsModal"),h.a.openContactUsModal())}getIsFatal(){return!!this.props.activeError&&this.props.activeError.fatal}getMessages(){return this.props.activeError?this.props.activeError.messages:[]}getSecondaryMessages(){return this.props.activeError?this.props.activeError.secondaryMessages:[]}getIsOpen(){return!!this.props.activeError}renderRefreshButton(){return f.a.createElement(r.a,{"aria-label":e("create_set.error_alert.refresh_button"),onClick:this.onRefresh,tabIndex:0},f.a.createElement(s.a,{id:"create_set.error_alert.refresh_button"}))}renderDismissButton(){return f.a.createElement(r.a,{"aria-label":e("create_set.error_alert.dismiss_button"),onClick:this.onDismiss,tabIndex:0},f.a.createElement(s.a,{id:"create_set.error_alert.dismiss_button"}))}renderSecondaryMessages(){var e=this.getSecondaryMessages().map(((e,t)=>f.a.createElement("div",{key:"message"+t},e)));if(e.length)return f.a.createElement(d.a,{boxed:!0,uppercaseDeprecated:!0},e)}renderGeneralError(){var e=this.getMessages().map(((e,t)=>{var i=e;return"object"==typeof e&&(i=e.message),f.a.createElement(l.a,{key:"error"+t},i)})),t=this.getIsFatal()?this.renderRefreshButton():this.renderDismissButton();return f.a.createElement("div",null,f.a.createElement(o.a,null,e),this.renderSecondaryMessages(),f.a.createElement(a.a,null,t),f.a.createElement(a.a,null,f.a.createElement(n.a,{onClick:this.onShowFeedback,tabIndex:0},f.a.createElement(s.a,{id:"create_set.error_alert.contact_us_link"}))))}render(){var e;return this.props.activeError&&(e=this.props.activeError.title),e||(e=f.a.createElement(s.a,{id:"create_set.error_alert.titles.unknown"})),f.a.createElement(u.a,{headerContent:e,includeCloseButton:!1,isOpen:this.getIsOpen(),onClose:this.onDismiss},this.renderGeneralError())}}}).call(this,i("nrsj").default)},Juyg:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return n}));i("Rm1S");function s(e){var{ignoreCase:t}=e;this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32,this.ignoreCase=t}var r=-1,a=1,n=0;s.Diff,s.prototype.diff_main=function(e,t,i,s){void 0===i&&(i=!0),void 0===s&&(s=void 0),void 0===s&&(s=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=s;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[n,e]]:[];var a=this.diff_commonPrefix(e,t),o=e.substring(0,a);e=e.substring(a),t=t.substring(a),a=this.diff_commonSuffix(e,t);var l=e.substring(e.length-a);e=e.substring(0,e.length-a),t=t.substring(0,t.length-a);var u=this.diff_compute_(e,t,i,r);return o&&u.unshift([n,o]),l&&u.push([n,l]),this.diff_cleanupMerge(u),u},s.prototype.diff_compute_=function(e,t,i,s){var o;if(!e)return[[a,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,u=e.length>t.length?t:e,d=l.indexOf(u);if(-1!=d)return o=[[a,l.substring(0,d)],[n,u],[a,l.substring(d+u.length)]],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==u.length)return[[r,e],[a,t]];l=u=null;var c=this.diff_halfMatch_(e,t);if(c){var h=c[0],p=c[1],g=c[2],m=c[3],f=c[4],v=this.diff_main(h,g,i,s),_=this.diff_main(p,m,i,s);return v.concat([[n,f]],_)}return this.diff_bisect_(e,t,s)},s.prototype.diff_bisect_=function(e,t,i){for(var s=e.length,n=t.length,o=Math.ceil((s+n)/2),l=o,u=2*o,d=new Array(u),c=new Array(u),h=0;h<u;h++)d[h]=-1,c[h]=-1;d[l+1]=0,c[l+1]=0;for(var p=s-n,g=p%2!=0,m=0,f=0,v=0,_=0,E=0;E<o&&!((new Date).getTime()>i);E++){for(var b=-E+m;b<=E-f;b+=2){for(var S=l+b,C=(O=b==-E||b!=E&&d[S-1]<d[S+1]?d[S+1]:d[S-1]+1)-b;O<s&&C<n&&e.charAt(O)==t.charAt(C);)O++,C++;if(d[S]=O,O>s)f+=2;else if(C>n)m+=2;else if(g){if((I=l+p-b)>=0&&I<u&&-1!=c[I])if(O>=(y=s-c[I]))return this.diff_bisectSplit_(e,t,O,C,i)}}for(var T=-E+v;T<=E-_;T+=2){for(var y,I=l+T,A=(y=T==-E||T!=E&&c[I-1]<c[I+1]?c[I+1]:c[I-1]+1)-T;y<s&&A<n&&e.charAt(s-y-1)==t.charAt(n-A-1);)y++,A++;if(c[I]=y,y>s)_+=2;else if(A>n)v+=2;else if(!g){if((S=l+p-T)>=0&&S<u&&-1!=d[S]){var O;C=l+(O=d[S])-S;if(O>=(y=s-y))return this.diff_bisectSplit_(e,t,O,C,i)}}}}return[[r,e],[a,t]]},s.prototype.diff_bisectSplit_=function(e,t,i,s,r){var a=e.substring(0,i),n=t.substring(0,s),o=e.substring(i),l=t.substring(s),u=this.diff_main(a,n,!1,r),d=this.diff_main(o,l,!1,r);return u.concat(d)},s.prototype.diff_commonPrefix=function(e,t){var i=this.ignoreCase?e.charAt(0).toLowerCase()!=t.charAt(0).toLowerCase():e.charAt(0)!=t.charAt(0);if(!e||!t||i)return 0;for(var s=0,r=Math.min(e.length,t.length),a=r,n=0;s<a;){var o=e.substring(n,a),l=t.substring(n,a);this.ignoreCase&&(o=o.toLowerCase(),l=l.toLowerCase()),o==l?n=s=a:r=a,a=Math.floor((r-s)/2+s)}return a},s.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1).toLowerCase()!=t.charAt(t.length-1).toLowerCase())return 0;for(var i=0,s=Math.min(e.length,t.length),r=s,a=0;i<r;){var n=e.substring(e.length-r,e.length-a),o=t.substring(t.length-r,t.length-a);this.ignoreCase&&(n=n.toLowerCase(),o=o.toLowerCase()),n==o?a=i=r:s=r,r=Math.floor((s-i)/2+i)}return r},s.prototype.diff_commonOverlap_=function(e,t){var i=e.length,s=t.length;if(0==i||0==s)return 0;i>s?e=e.substring(i-s):i<s&&(t=t.substring(0,i));var r=Math.min(i,s);if(e==t)return r;for(var a=0,n=1;;){var o=e.substring(r-n),l=t.indexOf(o);if(-1==l)return a;n+=l,0!=l&&e.substring(r-n)!=t.substring(0,n)||(a=n,n++)}},s.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var i=e.length>t.length?e:t,s=e.length>t.length?t:e;if(i.length<4||2*s.length<i.length)return null;var r=this;function a(e,t,i){for(var s,a,n,o,l=e.substring(i,i+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(l,u+1));){var c=r.diff_commonPrefix(e.substring(i),t.substring(u)),h=r.diff_commonSuffix(e.substring(0,i),t.substring(0,u));d.length<h+c&&(d=t.substring(u-h,u)+t.substring(u,u+c),s=e.substring(0,i-h),a=e.substring(i+c),n=t.substring(0,u-h),o=t.substring(u+c))}return 2*d.length>=e.length?[s,a,n,o,d]:null}var n,o,l,u,d,c=a(i,s,Math.ceil(i.length/4)),h=a(i,s,Math.ceil(i.length/2));return c||h?(n=h?c&&c[4].length>h[4].length?c:h:c,e.length>t.length?(o=n[0],l=n[1],u=n[2],d=n[3]):(u=n[0],d=n[1],o=n[2],l=n[3]),[o,l,u,d,n[4]]):null},s.prototype.diff_cleanupSemantic=function(e){for(var t=!1,i=[],s=0,o=null,l=0,u=0,d=0,c=0,h=0;l<e.length;)e[l][0]==n?(i[s++]=l,u=c,d=h,c=0,h=0,o=e[l][1]):(e[l][0]==a?c+=e[l][1].length:h+=e[l][1].length,null!==o&&o.length<=Math.max(u,d)&&o.length<=Math.max(c,h)&&(e.splice(i[s-1],0,[r,o]),e[i[s-1]+1][0]=a,s--,l=--s>0?i[s-1]:-1,u=0,d=0,c=0,h=0,o=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==r&&e[l][0]==a){var p=e[l-1][1],g=e[l][1],m=this.diff_commonOverlap_(p,g);m&&(e.splice(l,0,[n,g.substring(0,m)]),e[l-1][1]=p.substring(0,p.length-m),e[l+1][1]=g.substring(m),l++),l++}l++}},s.prototype.diff_cleanupSemanticLossless=function(e){var t=/[^a-zA-Z0-9]/,i=/\s/,s=/[\r\n]/,r=/\n\r?\n$/,a=/^\r?\n\r?\n/;function o(e,n){if(!e||!n)return 5;var o=0;return(e.charAt(e.length-1).match(t)||n.charAt(0).match(t))&&(o++,(e.charAt(e.length-1).match(i)||n.charAt(0).match(i))&&(o++,(e.charAt(e.length-1).match(s)||n.charAt(0).match(s))&&(o++,(e.match(r)||n.match(a))&&o++))),o}for(var l=1;l<e.length-1;){if(e[l-1][0]==n&&e[l+1][0]==n){var u=e[l-1][1],d=e[l][1],c=e[l+1][1],h=this.diff_commonSuffix(u,d);if(h){var p=d.substring(d.length-h);u=u.substring(0,u.length-h),d=p+d.substring(0,d.length-h),c=p+c}for(var g=u,m=d,f=c,v=o(u,d)+o(d,c);d.charAt(0)===c.charAt(0);){u+=d.charAt(0),d=d.substring(1)+c.charAt(0),c=c.substring(1);var _=o(u,d)+o(d,c);_>=v&&(v=_,g=u,m=d,f=c)}e[l-1][1]!=g&&(g?e[l-1][1]=g:(e.splice(l-1,1),l--),e[l][1]=m,f?e[l+1][1]=f:(e.splice(l+1,1),l--))}l++}},s.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,i=[],s=0,o="",l=0,u=!1,d=!1,c=!1,h=!1;l<e.length;)e[l][0]==n?(e[l][1].length<this.Diff_EditCost&&(c||h)?(i[s++]=l,u=c,d=h,o=e[l][1]):(s=0,o=""),c=h=!1):(e[l][0]==r?h=!0:c=!0,o&&(u&&d&&c&&h||o.length<this.Diff_EditCost/2&&u+d+c+h==3)&&(e.splice(i[s-1],0,[r,o]),e[i[s-1]+1][0]=a,s--,o="",u&&d?(c=h=!0,s=0):(l=--s>0?i[s-1]:-1,c=h=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},s.prototype.diff_cleanupMerge=function(e){e.push([n,""]);for(var t,i=0,s=0,o=0,l="",u="";i<e.length;)switch(e[i][0]){case a:o++,u+=e[i][1],i++;break;case r:s++,l+=e[i][1],i++;break;case n:s+o>1?(0!==s&&0!==o&&(0!==(t=this.diff_commonPrefix(u,l))&&(i-s-o>0&&e[i-s-o-1][0]==n?e[i-s-o-1][1]+=u.substring(0,t):(e.splice(0,0,[n,u.substring(0,t)]),i++),u=u.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(u,l))&&(e[i][1]=u.substring(u.length-t)+e[i][1],u=u.substring(0,u.length-t),l=l.substring(0,l.length-t))),0===s?e.splice(i-s-o,s+o,[a,u]):0===o?e.splice(i-s-o,s+o,[r,l]):e.splice(i-s-o,s+o,[r,l],[a,u]),i=i-s-o+(s?1:0)+(o?1:0)+1):0!==i&&e[i-1][0]==n?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,o=0,s=0,l="",u=""}""===e[e.length-1][1]&&e.pop();var d=!1;for(i=1;i<e.length-1;)e[i-1][0]==n&&e[i+1][0]==n&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),d=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),d=!0)),i++;d&&this.diff_cleanupMerge(e)},t.d=s},"K+TW":function(e,t,i){"use strict";i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("Ju1h"),n=i("jvKz"),o=i("q1tI"),l=i.n(o);t.a=e=>{var{children:t,featurePopoverVariant:i,isVisible:s,shouldShowOverlay:u,variant:d}=e,[c,h]=Object(o.useState)(s),p=r()("FeatureHighlightPopoverBackdrop",{"is-hidden":!c,"has-overlay":u}),g=r()("FeatureHighlightPopoverBackdrop-content",{["FeatureHighlightPopoverBackdrop-content--"+d]:void 0!==d});return l.a.createElement("div",{className:p},l.a.createElement(n.a,{overlay:l.a.createElement(a.a,{includeArrowInBounds:!0,onClick:()=>h(!1),position:"bottom left",variant:i}),position:"bottom center",tetherOptions:{offset:"0 91px"},triggerAction:c?"always":"never"},l.a.createElement("div",{className:g},t)),u?l.a.createElement("div",{className:"FeatureHighlightPopoverBackdrop-overlay"}):null)}},"K+uX":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("TWNs"),i("JfAA"),i("4mDm"),i("3bBZ"),i("gOCb"),i("UxlC"),i("4Brf"),i("E9XD");var s=i("7W2i"),r=i.n(s),a=(i("a1gu"),i("Nsbk"),i("oShl")),n=i.n(a);i("LKBx");function o(e,t){o=function(e,t){return new l(e,void 0,t)};var i=n()(RegExp),s=RegExp.prototype,a=new WeakMap;function l(e,t,s){var r=i.call(this,e,t);return a.set(r,s||a.get(e)),r}function u(e,t){var i=a.get(t);return Object.keys(i).reduce((function(t,s){return t[s]=e[i[s]],t}),Object.create(null))}return r()(l,i),l.prototype.exec=function(e){var t=s.exec.call(this,e);return t&&(t.groups=u(t,this)),t},l.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var i=a.get(this);return s[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+i[t]})))}if("function"==typeof t){var r=this;return s[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(u(e,r)),t.apply(this,e)}))}return s[Symbol.replace].call(this,e,t)},o.apply(this,arguments)}var l=o(/Quizlet term [0-9]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(.*) \{[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+=(.*)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+\}/,{word:1,definition:2});function u(e){var t=l.exec(e);return null==t?void 0:t.groups}},KQWO:function(e,t,i){"use strict";i("zKZe");var s=i("RVJv");class r extends s.a{}r.URL_BASE="diagram-shapes",r.MODEL_NAME="diagramShape",r.PARTITION_COLUMN="termId";var a=i("PYQB"),n=Object.assign({},a.a);n.init(r);t.a=n},KVmg:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(i("TSYQ")),r=a(i("q1tI"));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.focusedOption,i=e.instancePrefix,a=(e.labelKey,e.onFocus),n=e.onSelect,o=e.optionClassName,l=e.optionComponent,u=e.optionRenderer,d=e.options,c=e.valueArray,h=e.valueKey,p=e.onOptionRef,g=l;return d.map((function(e,l){var d=c&&c.indexOf(e)>-1,m=e===t,f=(0,s.default)(o,{"Select-option":!0,"is-selected":d,"is-focused":m,"is-disabled":e.disabled});return r.default.createElement(g,{className:f,instancePrefix:i,isDisabled:e.disabled,isFocused:m,isSelected:d,key:"option-"+l+"-"+e[h],onFocus:a,onSelect:n,option:e,optionIndex:l,ref:function(e){p(e,m)}},u(e,l))}))}},KkDn:function(e,t,i){"use strict";function s(e,t,i){var s=e.get(t);s||(s=[],e.set(t,s)),s.push(i)}i.d(t,"a",(function(){return s}))},KlxJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s),a=i("TSYQ"),n=i.n(a),o=i("yckm"),l=i("aOoi"),u=i("2fsZ"),d=i("JhTn"),c=i("RCw7"),h=i("bvRJ");class p extends r.a.PureComponent{constructor(){super(...arguments),this.getActiveMarks=()=>{var{view:e}=this.props.editorView,{state:t}=e,i=l.b.getState(t),s=i?i.activeMarks:[];return new Set(s.map((e=>{var t;return null==e||null==(t=e.type)?void 0:t.name})))},this.handleMouseDown=e=>{e.preventDefault()},this.renderToolbarIcon=(e,t)=>{var i=n()("PMToolbar-icon",{"PMToolbar-icon--active":t});return r.a.createElement("div",{className:i,id:e,key:"inlinestyle-"+e,onClick:this.toggleMarkofType},r.a.createElement(h.a,{icon:d.c[e]}))},this.renderHighlighterIcon=(e,t)=>{var i=n()("PMToolbar-highlighter",[d.d[e]],{"PMToolbar-highlighter--active":t});return r.a.createElement("div",{className:i,id:e,key:"inlinestyle-"+e,onClick:this.toggleMarkofType},r.a.createElement(h.a,{icon:"check-rounded"}))},this.toggleMarkofType=e=>{var t=e.currentTarget.getAttribute("id"),{view:i}=this.props.editorView,{state:s,dispatch:r}=i,a=s.schema.marks[t];Object(c.toggleMark)(a)(s,r),Object(u.a)("rich_text_in_toolbar_clicked",t)},this.toolbarRef=r.a.createRef()}componentDidUpdate(){!this.toolbarMouseDownListener&&this.toolbarRef.current&&(this.toolbarMouseDownListener=o.a.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}render(){if(!this.props.editorView.view)return null;var e=this.getActiveMarks(),t=n()("PMToolbar",{"PMToolbar-combinedToolbar":this.props.isInCombinedToolbar}),i=[d.f.BOLD,d.f.ITALIC,d.f.UNDERLINE],s=this.props.isEmbeddedInline?[d.f.BG_YELLOW]:[d.f.BG_YELLOW,d.f.BG_BLUE,d.f.BG_PINK];return r.a.createElement("div",{className:t,ref:this.toolbarRef},i.map((t=>this.renderToolbarIcon(t,this.isActiveMark(t,e)))),s.map((t=>this.renderHighlighterIcon(t,this.isActiveMark(t,e)))))}isActiveMark(e,t){return 0!==t.size&&t.has(e)}}},L2X5:function(e,t,i){"use strict";i("zKZe");var s=i("N6cx"),r=i("PYQB"),a={};Object.assign(a,r.a),a.init(s.a),t.a=a},LEyH:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"b",(function(){return l}));var s=i("Wv2R"),r=Object(s.a)("SetPermissionConstants",{actions:{TOGGLE_CLASS:null,TOGGLE_CLASS_PERMISSIONS:null,CHANGE_PERMISSION:null},permissions:{EVERYONE:null,CLASSES:null,PASSWORD:null,JUST_ME:null},sides:{VIEWING:null,EDITING:null}}),a=r.actions,n=r.permissions,o=r.sides,l={PASSWORD_EMPTY_ERROR:{identifier:"password_empty_error",message:e("create_set.permissions.password_empty_error")},CLASSES_EMPTY_ERROR:{identifier:"classes_empty_error",message:e("create_set.permissions.classes_empty_error")},EDITABLE_BY_CLASSES_EMPTY_ERROR:{identifier:"editable_by_classes_empty_error",message:e("create_set.permissions.classes_empty_error")}}}).call(this,i("nrsj").default)},LGYb:function(e,t,i){var s=i("1hJj"),r=i("jbM+"),a=i("Xt/L"),n=i("xYSL"),o=i("dQpi"),l=i("rEGp");e.exports=function(e,t,i){var u=-1,d=r,c=e.length,h=!0,p=[],g=p;if(i)h=!1,d=a;else if(c>=200){var m=t?null:o(e);if(m)return l(m);h=!1,d=n,g=new s}else g=t?[]:p;e:for(;++u<c;){var f=e[u],v=t?t(f):f;if(f=i||0!==f?f:0,h&&v==v){for(var _=g.length;_--;)if(g[_]===v)continue e;t&&g.push(v),p.push(f)}else d(g,v,i)||(g!==p&&g.push(v),p.push(f))}return p}},MMJ4:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return u}));var s=i("Wv2R"),r=i("xnxL");i.d(t,"a",(function(){return r.b}));var a=Object(s.a)("RecorderConstants",{permissions:{DENIED:null,GRANTED:null,NEEDED:null},states:{RECORDING:null,UPLOADING:null,SAVING:null,STOPPED:null,ERROR:null}}),n=a.permissions,o=a.states,l={MAX_DURATION:3e4,MIN_DURATION:400},u={NONE:!1,HTML5:"html5"}},MZeg:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("TSYQ"),r=i.n(s),a=i("q1tI"),n=i.n(a);class o extends n.a.PureComponent{render(){var{className:e,children:t}=this.props;return n.a.createElement(n.a.Fragment,null,this.props.children?n.a.createElement("div",{className:r()("StudiableItems",e)},t):null)}}},Mn35:function(e,t,i){var s=i("UMY1")((function(e,t,i){e[i?0:1].push(t)}),(function(){return[[],[]]}));e.exports=s},MwSb:function(e,t,i){"use strict";i.d(t,"c",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return g})),i.d(t,"e",(function(){return m})),i.d(t,"d",(function(){return f}));var s=i("Mn35"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("Rm1S"),i("QimK")),n=(i("E9XD"),i("N4t/")),o="string";function l(e){return Array.from(e)}function u(e){return l(e).reduce(((e,t)=>e.concat(Object(n.a)(t.getAsFile()))),[])}var d=i("EzPt"),c=i("uBNa");function h(e){var{types:t}=e;return!t||Array.from(t).some((e=>a.d.indexOf(e)>-1))}function p(e){var t=g(e);if(e.items){var i=l(e.items),[s,a]=r()(i,(e=>{var{kind:t}=e;return t===o}));return!!function(e){return e.some((e=>{var{type:t}=e;return"text/rtf"===t}))}(s)||!function(e,t){if(1!==e.length)return!1;var i=e[0].getAsFile();return!!i&&i.name===t}(a,t)&&0===a.length}return e.files?0===e.files.length:!!t}function g(e){for(var t=0;t<a.d.length;t++)try{var i=e.getData(a.d[t]);if(i)return i}catch(s){continue}return""}function m(e,t){return Object(d.a)(function(e){var{files:t,items:i}=e;return i?u(i):t?Object(c.a)(t):[]}(e),t)}function f(e){var t=null==e||null==e.getData?void 0:e.getData("text/html");return null==t?void 0:t.match(/src\s*=\s*".+?"/)}},N5dM:function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return h}));i("UxlC"),i("JTJg"),i("zKZe"),i("4mDm"),i("3bBZ");var s=i("hzdC"),r=i.n(s),a=i("cMu9"),n=i("og3H"),o=i("q1tI"),l=i.n(o),u=i("lGCb"),d=(e,t)=>{if(!e)return null;var i={clipEndSeconds:t||1,clipStartSeconds:0},s=Object(u.a)(e),r=s.pathname.replace("/","");return r?s.host.includes(n.gc.VIMEO)?Object.assign({},i,{provider:n.gc.VIMEO,providerVideoId:r,code:null}):s.host.includes(n.gc.YOUTUBE)?Object.assign({},i,{provider:n.gc.YOUTUBE,providerVideoId:r.replace("watch?v=",""),code:null}):null:null},c=e=>{switch(e.provider){case n.gc.VIMEO:return"https://vimeo.com/"+e.providerVideoId;case n.gc.YOUTUBE:return"https://www.youtube.com/watch?v="+e.providerVideoId;default:return""}};class h extends l.a.PureComponent{constructor(){super(...arguments),this.currentTimeData={seconds:0,percent:0}}componentDidMount(){var{provider:e}=this.props.media;e===n.gc.VIMEO&&this.setupVimeoPlayer(),e===n.gc.YOUTUBE&&this.setupYouTubePlayer()}componentDidUpdate(e){e.media.providerVideoId!==this.props.media.providerVideoId&&this.setupVimeoPlayer()}componentWillUnmount(){this.videoPlayer&&this.videoPlayer.destroy(),this.props.onUnmount&&this.props.onUnmount(this.currentTimeData)}render(){return l.a.createElement("div",{className:"MediaVideo"},l.a.createElement(a.a,{aspectRatio:[16,9]},l.a.createElement("div",{className:"MediaVideo-player",id:""+this.props.media.providerVideoId})))}setupVimeoPlayer(){var{isPreview:e,media:t}=this.props;this.videoPlayer&&this.videoPlayer.destroy(),null!==t.providerVideoId&&(this.videoPlayer=new r.a(t.providerVideoId,{autoplay:!1,loop:!1,controls:!e,id:Number(t.providerVideoId)}),this.videoPlayer.on("play",(()=>{this.props.onVideoPlaybackStart&&this.props.onVideoPlaybackStart()})),this.videoPlayer.on("loaded",(()=>{var{onGetDuration:e}=this.props;this.props.isPreview&&e&&this.videoPlayer.getDuration().then((t=>{e(t)}))})),this.videoPlayer.on("ended",(()=>{this.props.onVideoPlaybackEnd&&this.props.onVideoPlaybackEnd(this.currentTimeData),document.exitFullscreen()})),this.videoPlayer.on("timeupdate",(e=>{var{seconds:t,percent:i}=e;this.currentTimeData={seconds:t,percent:i}})),this.props.isPreview||(this.videoPlayer.getVideoTitle().then((e=>{e&&this.props.onGetVideoTitle&&this.props.onGetVideoTitle(e)})),this.videoPlayer.setColor("#3ccfcf")))}setupYouTubePlayer(){throw new Error("Support for YouTube not yet implemented")}}h.defaultProps={isPreview:!1}},N6cx:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("RVJv");class r extends s.a{}r.URL_BASE="folder-sets",r.MODEL_NAME="folderSet",r.UNIQUE_KEYS=["setId","folderId"]},N7sa:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("pVnL"),r=i.n(s),a=i("8OQS"),n=i.n(a),o=(i("4mDm"),i("3bBZ"),i("q1tI")),l=i.n(o),u=i("XcqQ"),d=i("eAdg");function c(){return e="DragDrop",t=e=>class extends l.a.Component{constructor(){super(...arguments),this.state={dragDropEvent:null,dragEnterEvent:null,isDropTarget:!1},this.handleDrop=e=>{e.persist(),this.setState({dragDropEvent:e,isDropTarget:!1},(()=>this.setState({dragDropEvent:null})))},this._dragCollection=[],this._onDragEnter=e=>{0===this._dragCollection.length&&(e.persist(),this.setState({isDropTarget:!0,dragEnterEvent:e},(()=>this.setState({dragEnterEvent:null})))),this._dragCollection=this._dragCollection.concat([e.target])},this._onDragLeave=e=>{this._dragCollection=this._dragCollection.filter((t=>t!==e.target)),0===this._dragCollection.length&&this.setState({isDropTarget:!1})},this._onDrop=e=>{this._dragCollection=[],this.handleDrop(e)}}render(){var t=this.props,{innerRef:i}=t,s=n()(t,["innerRef"]);return l.a.createElement(e,r()({},s,this.state,{onDragEnter:this._onDragEnter,onDragLeave:this._onDragLeave,onDrop:this._onDrop,ref:i}))}},Object(u.hoistStatics)((i=>{var s=t(i);return d.b?Object(u.setDisplayName)(Object(u.wrapDisplayName)(i,e))(s):s}));var e,t}},O10W:function(e,t,i){"use strict";function s(e){var t=parseInt(e.offsetHeight||0,10),i=parseInt(e.offsetWidth||0,10),s=window.getComputedStyle(e)||{},r=parseInt(s.paddingLeft,10)||0,a=parseInt(s.paddingRight,10)||0;return{height:t-(parseInt(s.paddingTop,10)||0)-(parseInt(s.paddingBottom,10)||0),width:i-r-a}}i.d(t,"a",(function(){return s}))},Oo6B:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return r}));i("FZtP");var s=i("RVJv");class r extends s.a{isPublished(){return this.get("publishedTimestamp")>0}static _postValidationFailed(e){return e.forEach((e=>{e.unset("publishedTimestamp")})),e}static _validations(e){return e.forEach((e=>{e.isPublished()&&(this._validateTitle(e),0===e.get("mcqCount")&&(this._validatesWordLang(e),this._validatesDefinitionLang(e)))})),e}static _validateTitle(t){t.get("title")||t.addClientValidationError({identifier:"requires_title",message:e("errors.model_validation.set.requires_title")})}static _validatesWordLang(t){t.get("wordLang")||t.addClientValidationError({identifier:"requires_word_lang",message:e("errors.model_validation.set.requires_term_lang")})}static _validatesDefinitionLang(t){t.get("defLang")||t.addClientValidationError({identifier:"requires_def_lang",message:e("errors.model_validation.set.requires_def_lang")})}}r.URL_BASE="sets",r.MODEL_NAME="set",r.CAN_BE_SEARCHED=!0}).call(this,i("nrsj").default)},Oyon:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s);class a extends r.a.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{this.props.onClick(this.props.character,e)}}render(){return r.a.createElement("button",{className:"UISpecialCharacterButton UISpecialCharacterButton--"+this.props.variant+" TermText lang-"+this.props.lang,disabled:this.props.disabled,lang:this.props.lang,onClick:this.handleClick,type:"button",value:this.props.character},this.props.character)}}a.defaultProps={disabled:!1,variant:"default"}},PANE:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));i("4mDm"),i("3bBZ");var s=i("zK28"),r=i("q1tI");function a(){var[e,t]=Object(r.useState)(s.a.colorTheme);return Object(r.useEffect)((()=>{var e=e=>t(e);return s.a.addColorThemeListener(e),()=>s.a.removeColorThemeListener(e)})),e}},PjDq:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));i("5s+n");var s=i("13SJ"),r=i("xNal"),a=i("og3H");function n(e){return null===r.b.read(a.l.SIGNUP__HIDE_FB_BUTTON)&&r.b.write(a.l.SIGNUP__HIDE_FB_BUTTON,e,{duration:.020833333333333332}),"1"===e}function o(){try{var e=r.b.read(a.l.SIGNUP__HIDE_FB_BUTTON);return null!==e?Promise.resolve("1"===e):Object(s.a)("https://facebook.com").then((()=>n("0"))).catch((()=>n("1")))}catch(t){return Promise.resolve(!1)}}},Poz8:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return h}));i("5s+n"),i("EnZy"),i("4mDm"),i("rOQg"),i("XMab"),i("s5qe"),i("3bBZ"),i("Kz25");var s=i("X0lI"),r=i.n(s);function a(e){return r()(e.getContext("2d"))}function n(e){return new Promise((t=>{var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=()=>t(i),i.src=e}))}function o(e){return n(e).then((e=>({width:e.naturalWidth,height:e.naturalHeight})))}function l(e){return n(e).then((e=>{var{naturalHeight:t,naturalWidth:i}=e,s=document.createElement("canvas");s.width=i,s.height=t;var r=a(s);return r.fillStyle="white",r.fillRect(0,0,i,t),r.drawImage(e,0,0),s}))}function u(e,t,i){void 0===t&&(t="image/jpeg"),void 0===i&&(i=1);for(var s=this.toDataURL(t,i),r=atob(function(e){var t=e.split(",",2);return null!=t&&t[1]?t[1]:""}(s)),a=r.length,n=new Uint8Array(a),o=0;o<a;o++)n[o]=r.charCodeAt(o);e(new Blob([n],{type:t}))}function d(e){return new Promise((t=>(e.toBlob||u).call(e,t)))}function c(e){return l(e).then(d)}function h(e){return n(function(e){return URL.createObjectURL(e)}(e))}},PuWd:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return m}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("zKZe"),i("N5dM")),n=i("bvRJ"),o=i("vlgG"),l=i("47yS"),u=i("f4H6"),d=i("6rYD"),c=i("q1tI"),h=i.n(c),p=i("vm/G"),g=i("/En6");class m extends h.a.PureComponent{constructor(){super(...arguments),this.handleVideoDurationChange=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onChange("clipEndSeconds",e)},this.handleVideoClipTextChange=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onChange("webUrl",e.target.value)},this.handleVideoClipInputFocus=()=>{this.props.videoClipEvents&&this.props.videoClipEvents.onFocus()},this.handleVideoClipInputBlur=e=>{this.props.videoClipEvents&&this.props.videoClipEvents.onBlur(e)},this.handleClickToZoom=e=>{e.preventDefault(),e.stopPropagation(),this.zoomableImage.current&&this.zoomableImage.current.show()},this.handleDeleteImage=()=>{var{image:e,imageEvents:t}=this.props;e&&t&&t.onDeleteImage&&t.onDeleteImage()},this.handleOnEditorKeyDown=e=>{var{richTextEvents:t,text:i}=this.props;return(i&&0===i.plainText.length&&e.code===d.a.studiableItem.backspace||e.code===d.a.studiableItem.delete)&&t.onDeleteText&&t.onDeleteText(),!1},this.richTextEditor=h.a.createRef(),this.zoomableImage=h.a.createRef()}componentDidMount(){var{autofocus:e}=this.props.richTextConfig;e&&this.richTextEditor.current&&this.richTextEditor.current.focus()}componentDidUpdate(){var{isFocused:e}=this.props.richTextConfig;e&&this.richTextEditor.current&&!this.richTextEditor.current.state.isFocused&&this.richTextEditor.current.focus()}getImageContainerHeightWidth(e){if(e){var t=Math.max(e.height,e.width)/120;return{minHeight:48,minWidth:48,height:e.height/t,width:e.width/t}}return{}}renderImageMedia(){var{image:e}=this.props,t=this.getImageContainerHeightWidth(e);return null!=e&&e.url?h.a.createElement("div",{className:"MediaInteractives-imageWrapper",style:t},h.a.createElement(u.a,{ref:this.zoomableImage,zoomUrl:Object(g.b)(e.url)},h.a.createElement("img",{className:"MediaInteractives-image",onClick:this.handleClickToZoom,src:e.url,style:t})),h.a.createElement("a",{className:"MediaInteractives-imageOverlay",onClick:this.handleDeleteImage},h.a.createElement(n.a,{className:"MediaInteractives-imageOverlayIcon",icon:"garbage"}))):null}renderPlaceholderImage(){var{placeholderImage:e}=this.props,t=this.getImageContainerHeightWidth(e);if(!this.shouldRenderPlaceholderImage())return null;var{url:i}=e;return h.a.createElement("div",{className:"MediaInteractives-placeholderWrapper",style:t},h.a.createElement("div",{className:"MediaInteractives-placeholderImage",style:Object.assign({backgroundImage:"url("+i+")",msFilter:"\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"',sizingMethod='scale')\""},t)}),h.a.createElement("div",{className:"MediaInteractives-placeholderSpinner"},h.a.createElement(l.a,null)))}renderRichTextEditor(){var e,t,{richTextEvents:i,richTextConfig:s,text:a}=this.props;return h.a.createElement(p.default,r()({},i,s,{canEditRichText:!0,onEditorKeyDown:this.handleOnEditorKeyDown,plainText:null!=(e=null==a?void 0:a.plainText)?e:"",pmJson:null!=(t=null==a?void 0:a.richText)?t:null,ref:this.richTextEditor,shouldShowRichTextCombinedToolbar:!0}))}renderVideoClipInput(t){var{shouldRenderVideoClipPreview:i,shouldDisableVideoClipInput:s}=this.props,r=Object(a.b)(t.webUrl);return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"MediaInteractives-videoClipInput"},h.a.createElement(n.a,{icon:"video"}),h.a.createElement(o.a,{disabled:s,onBlur:this.handleVideoClipInputBlur,onChange:this.handleVideoClipTextChange,onFocus:this.handleVideoClipInputFocus,placeholder:e("media_video.edit_url_input_placeholder"),rows:1,value:t.webUrl||""})),i&&r?this.renderVideoClipInputPreview(r):null)}renderVideoClipInputPreview(e){return h.a.createElement(a.a,{isPreview:!0,media:e,onGetDuration:this.handleVideoDurationChange})}render(){return h.a.createElement("div",{className:"MediaInteractives"},this.renderRichTextEditor(),this.shouldRenderPlaceholderImage()?this.renderPlaceholderImage():this.renderImageMedia(),this.props.video?this.renderVideoClipInput(this.props.video):null)}shouldRenderPlaceholderImage(){var{placeholderImage:e}=this.props;return!(null==e||!e.url)}}}).call(this,i("nrsj").default)},PyIS:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=null;function r(){if(null===s){var e=document.createElement("div");e.style.height="100px",e.style.overflow="scroll",e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",document.body&&document.body.appendChild(e),s=e.offsetWidth-e.clientWidth,document.body&&document.body.removeChild(e)}return Number.isNaN(s)?0:s}},QK9X:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("qiyg");function r(e,t){return t.indexOf(e)>=0}function a(e){return r(e,s.notActualLanguages)?"en":r(e,["ja-ro","ja-ka"])?"ja":r(e,s.ttsLanguages)?r(e,["zh-CN","zh-TW"])?"zh":e:null}},QMP1:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"e",(function(){return n})),i.d(t,"h",(function(){return o})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return u})),i.d(t,"i",(function(){return d})),i.d(t,"g",(function(){return c})),i.d(t,"j",(function(){return h})),i.d(t,"c",(function(){return p})),i.d(t,"d",(function(){return g}));var s=i("Wv2R"),r=Object(s.a)("TermConstants",{actions:{ACTIVATE_OFFSET_ROW_CONTEXT:null,ACTIVATE_ROW:null,ACTIVATE_ROW_SIDE:null,ACTIVATE_SIDE:null,AUTODEFINE:null,AUTODEFINE_FAILURE:null,AUTODEFINE_SUCCESS:null,AUTO_SUGGEST_CLEAR:null,AUTO_SUGGEST_FAILURE:null,AUTO_SUGGEST_SUCCESS:null,CONTEXT_RESET:null,CONTEXT_TOGGLE:null,CREATE_IMAGE_FAILURE:null,CREATE_IMAGE_SUCCESS:null,DEACTIVATE_ROW:null,DELETE:null,DELETE_FAILURE:null,DELETE_IMAGE_FAILURE:null,DELETE_IMAGE_SUCCESS:null,DELETE_SUCCESS:null,FLIP_COLUMNS:null,IGNORE_DUPLICATE_WORD:null,LOCAL_BULK_CREATE:null,MOVE:null,MOVE_FAILURE:null,MOVE_SUCCESS:null,UPDATE:null,UPDATE_FAILURE:null,UPDATE_SUCCESS:null},contexts:{IMAGE:null,RECORDING:null,AUTODEFINE:null,CUSTOM_DISTRACTORS:null},PLACEHOLDER_LUID:null,statuses:{INACTIVE_DUPLICATE:null,ACTIVE_DUPLICATE:null},dropLocations:{AFTER:null,BEFORE:null}}),a=r.actions,n=r.contexts,o=r.statuses,l=r.PLACEHOLDER_LUID,u=r.dropLocations,d={TERM_ROW_MIN_HEIGHT:104},c={TAB_INDEX:7},h={DISABLE_TOOLTIPS:5},p={RESULT_LIMIT:10,MIN_CORROBORATION:1},g={DEBOUNCE_TIME:200,RESULTS_LIMIT:3,PAYLOAD_LIMIT:50}},QimK:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return n}));var s=["text/csv"],r=["image/bmp","image/jpeg","image/png"],a=["image/bmp","image/gif","image/jpeg","image/png","image/tiff"],n=["text/plain","Text"]},RkTr:function(e,t,i){"use strict";t.__esModule=!0;var s=i("2NuI"),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]||s(!1),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching||s(!1);for(var t=0;t<e.length;t++){var i=e[t];this._isPending[i]?this._isHandled[i]||s(!1):(this._callbacks[i]||s(!1),this._invokeCallback(i))}},e.prototype.dispatch=function(e){this._isDispatching&&s(!1),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=r},RsOY:function(e,t,i){i("zKZe"),i("FZtP"),i("4mDm"),i("3bBZ");var s=i("QLaP"),r=Object.prototype.hasOwnProperty,a=Array.prototype.splice,n=Object.prototype.toString,o=function(e){return n.call(e).slice(8,-1)},l=Object.assign||function(e,t){return u(t).forEach((function(i){r.call(t,i)&&(e[i]=t[i])})),e},u="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function d(e){if(Array.isArray(e))return l(e.constructor(e.length),e);if("Map"===o(e))return new Map(e);if("Set"===o(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return l(Object.create(t),e)}return e}function c(){var e=l({},h);return t.extend=function(t,i){e[t]=i},t.isEquals=function(e,t){return e===t},t;function t(i,a){"function"==typeof a&&(a={$apply:a}),Array.isArray(i)&&Array.isArray(a)||s(!Array.isArray(a),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),s("object"==typeof a&&null!==a,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(e).join(", "));var n=i;return u(a).forEach((function(s){if(r.call(e,s)){var l=i===n;n=e[s](a[s],n,a,i),l&&t.isEquals(n,i)&&(n=i)}else{var u="Map"===o(i)?t(i.get(s),a[s]):t(i[s],a[s]);t.isEquals(u,n[s])&&(void 0!==u||r.call(i,s))||(n===i&&(n=d(i)),"Map"===o(n)?n.set(s,u):n[s]=u)}})),n}}var h={$push:function(e,t,i){return g(t,i,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,i){return g(t,i,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,i,r){return function(e,t){s(Array.isArray(e),"Expected $splice target to be an array; got %s",e),f(t.$splice)}(t,i),e.forEach((function(e){f(e),t===r&&e.length&&(t=d(r)),a.apply(t,e)})),t},$set:function(e,t,i){return function(e){s(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}(i),e},$toggle:function(e,t){m(e,"$toggle");var i=e.length?d(t):t;return e.forEach((function(e){i[e]=!t[e]})),i},$unset:function(e,t,i,s){return m(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===s&&(t=d(s)),delete t[e])})),t},$add:function(e,t,i,s){return v(t,"$add"),m(e,"$add"),"Map"===o(t)?e.forEach((function(e){var i=e[0],r=e[1];t===s&&t.get(i)!==r&&(t=d(s)),t.set(i,r)})):e.forEach((function(e){t!==s||t.has(e)||(t=d(s)),t.add(e)})),t},$remove:function(e,t,i,s){return v(t,"$remove"),m(e,"$remove"),e.forEach((function(e){t===s&&t.has(e)&&(t=d(s)),t.delete(e)})),t},$merge:function(e,t,i,r){var a,n;return a=t,s((n=e)&&"object"==typeof n,"update(): $merge expects a spec of type 'object'; got %s",n),s(a&&"object"==typeof a,"update(): $merge expects a target of type 'object'; got %s",a),u(e).forEach((function(i){e[i]!==t[i]&&(t===r&&(t=d(r)),t[i]=e[i])})),t},$apply:function(e,t){var i;return s("function"==typeof(i=e),"update(): expected spec of $apply to be a function; got %s.",i),e(t)}},p=c();function g(e,t,i){s(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",i,e),m(t[i],i)}function m(e,t){s(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function f(e){s(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function v(e,t){var i=o(e);s("Map"===i||"Set"===i,"update(): %s expects a target of type Set or Map; got %s",t,i)}e.exports=p,e.exports.default=p,e.exports.newContext=c},S16J:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var s=i("TSYQ"),r=i.n(s),a=i("bvRJ"),n=i("47yS"),o=i("f4H6"),l=i("rKZd"),u=i("QLaP"),d=i.n(u),c=i("q1tI"),h=i.n(c),p=i("EFuM");class g extends c.PureComponent{constructor(e){super(e),this.getImageUrl=()=>{if(!this.imageHelper.hasImage())return"";var{image:e}=this.props;return d()(null==e?void 0:e.getSecurePath,"image should exist!"),Object(p.g)()?e.getSecurePath():e.getSquareSecurePath()},this.getZoomedImageUrl=()=>{if(!this.imageHelper.hasImage())return null;var{image:e}=this.props;return d()(null==e?void 0:e.getSecurePath,"image should exist!"),e.getSecurePath()},this.getImageHeight=()=>(d()(this.props.image,"this.props.image should exist!"),Math.min(60,this.props.image.height)),this.getImageWidth=()=>(d()(this.props.image,"this.props.image should exist!"),Math.min(84,this.props.image.width)),this.getPlaceholderStyles=()=>{if(this.imageHelper.hasRichImagePlaceholder()){d()(this.props.placeholderImage,"this.props.placeholderImage should exist!");var e=this.props.placeholderImage.dataUrl;return{backgroundImage:"url("+e+")",msFilter:"\"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')\""}}},this.handleClickToZoom=e=>{e.preventDefault(),e.stopPropagation(),this.zoomableImage&&this.zoomableImage.show()},this.handleZoomableImage=e=>{e&&(this.zoomableImage=e)},this.imageHelper=new l.a({placeholderImage:e.placeholderImage,image:e.image})}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new l.a({placeholderImage:e.placeholderImage,image:e.image}))}renderPlaceHolder(){return h.a.createElement("div",{className:"UploadedImage-imageWrap UploadedImage-backgroundImage",style:this.getPlaceholderStyles()},h.a.createElement("div",{className:"UploadedImage-spinner"},h.a.createElement(n.a,{size:"small"})))}renderZoomableImage(){return h.a.createElement(o.a,{className:"UploadedImage-image",height:this.getImageHeight(),ref:this.handleZoomableImage,src:this.getImageUrl(),width:this.getImageWidth(),zoomPadding:20,zoomUrl:this.getZoomedImageUrl()})}renderRetinaZoomableImage(){var e={backgroundImage:"url("+this.getImageUrl()+")",height:this.getImageHeight(),width:this.getImageWidth()};return h.a.createElement("div",null,h.a.createElement(o.a,{ref:this.handleZoomableImage,zoomPadding:20,zoomUrl:this.getZoomedImageUrl()},h.a.createElement("div",{className:"UploadedImage-image"},h.a.createElement("span",{className:"UploadedImage-backgroundImage",style:e}))))}renderDeleteIcon(){return d()(this.props.onDeleteImage,"this.props.onDeleteImage should exist!"),h.a.createElement("a",{className:"UploadedImage-imageOverlay",onClick:this.props.onDeleteImage},h.a.createElement(a.a,{className:"UploadedImage-imageOverlayIcon",icon:"garbage"}))}renderImage(){return h.a.createElement("div",{className:"UploadedImage-imageWrap"},Object(p.g)()?this.renderRetinaZoomableImage():this.renderZoomableImage(),h.a.createElement("a",{className:"UploadedImage-overlay",onClick:this.handleClickToZoom}),this.renderDeleteIcon())}render(){if(!this.imageHelper.hasImageOrPlaceholder())return null;var e=r()("UploadedImage",{"is-processing":this.imageHelper.isUploadProcessing(),"is-uploading":this.imageHelper.isImageUploading()});return h.a.createElement("div",{className:e},this.imageHelper.hasImage()?this.renderImage():null,this.imageHelper.hasImagePlaceholder()&&!this.imageHelper.hasImage()?this.renderPlaceHolder():null)}}},SdpW:function(e,t,i){"use strict";function s(e,t){return e&&e!==window.document?t(e)?e:s(e.parentNode,t):null}i.d(t,"a",(function(){return s}))},"Sp+6":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("TSYQ"),r=i.n(s),a=i("q1tI"),n=i.n(a);class o extends n.a.PureComponent{render(){var e=r()("UIUploadTarget",{"UIUploadTarget--small":"small"===this.props.size,"UIUploadTarget--large":"large"===this.props.size});return n.a.createElement("div",{className:e},n.a.createElement("div",{className:"UIUploadTarget-container"},this.props.children))}}},T1Oo:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("ToJy");function s(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}},TL93:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("og3H"),r={studiableItems:{FIRST_TAB_INDEX:7,MIN_ITEMS_FOR_PUBLISH:2,MAX_ITEMS:500,NUM_MULTIPLE_CHOICE_OPTIONS:4},multipleChoiceOptions:{MAX_ITEMS:15,MIN_ITEMS_PER_QUESTION:2},studiableMediaConnections:{SUPPORTED_MEDIA_TYPES:[s.C.TEXT,s.C.IMAGE,s.C.VIDEO]}}},TX86:function(e,t,i){i("EnZy"),i("UxlC"),function(t){var i,s={},r={16:!1,18:!1,17:!1,91:!1},a=[],n={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},o={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57};for(code=function(e){return o[e]||e.toUpperCase().charCodeAt(0)},_downKeys=[],i=1;i<20;i++)o["f"+i]=111+i;function u(e,t){for(var i=e.length;i--;)if(e[i]===t)return i;return-1}function d(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var c={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function h(e){for(i in r)r[i]=e[c[i]]}function p(e,t,i){var r,a;r=_(e),void 0===i&&(i=t,t="all");for(var n=0;n<r.length;n++)a=[],(e=r[n].split("+")).length>1&&(a=E(e),e=[e[e.length-1]]),e=e[0],(e=code(e))in s||(s[e]=[]),s[e].push({shortcut:r[n],scope:t,method:i,key:r[n],mods:a})}for(i in n)p[i]=!1;function g(e){a=e?[e]:[]}function m(){return a.length?a[a.length-1]:"all"}function f(e){a.push(e)}function v(e){var t=m();if(!Array.isArray(t))return!1;var i=t.indexOf(e);i>=0&&(t.splice(i,1),0==t.length?a.pop():a[a.length-1]=t)}function _(e){var t;return""==(t=(e=e.replace(/\s/g,"")).split(","))[t.length-1]&&(t[t.length-2]+=","),t}function E(e){for(var t=e.slice(0,e.length-1),i=0;i<t.length;i++)t[i]=n[t[i]];return t}function b(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,(function(){i(window.event)}))}b(document,"keydown",(function(e){!function(e){var t,i,a,o,d,c;if(t=l[e.keyCode]||e.keyCode,-1==u(_downKeys,t)&&_downKeys.push(t),93!=t&&224!=t||(t=91),t in r)for(a in r[t]=!0,n)n[a]==t&&(p[a]=!0);else if(h(e),p.filter.call(this,e)&&t in s)for(c=m(),o=0;o<s[t].length;o++)if(i=s[t][o],Array.isArray(c)&&c.indexOf(i.scope)>=0||i.scope==c||"all"==i.scope){for(a in d=i.mods.length>0,r)(!r[a]&&u(i.mods,+a)>-1||r[a]&&-1==u(i.mods,+a))&&(d=!1);(0!=i.mods.length||r[16]||r[18]||r[17]||r[91])&&!d||!1===i.method(e,i)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}(e)})),b(document,"keyup",(function(e){var t,i=e.keyCode,s=u(_downKeys,i);if(s>=0&&_downKeys.splice(s,1),93!=i&&224!=i||(i=91),i in r)for(t in r[i]=!1,n)n[t]==i&&(p[t]=!1)})),b(window,"focus",(function(){for(i in r)r[i]=!1;for(i in n)p[i]=!1}));var S=t.key;t.key=p,t.key.setScope=g,t.key.getScope=m,t.key.pushScope=f,t.key.popScope=function(e){newScope=[];for(var t=0;t<a.length&&a[t]!==e;t++)newScope.push(a[t]);a=newScope,v(e)},t.key.deleteScope=function(e){var t,i,r;for(t in s)for(i=s[t],r=0;r<i.length;)i[r].scope===e?i.splice(r,1):r++},t.key.addOverlappingScope=function(e){var t=m(),i=[];"all"!=t?(Array.isArray(t)?i=t:i.push(t),i.indexOf(e)>-1||(i.push(e),Array.isArray(t)?a[a.length-1]=i:f(i))):g(e)},t.key.removeOverlappingScope=v,t.key.filter=function(e){var t,i=(t=(t=e.target||e.srcElement)instanceof HTMLDocument?t.documentElement:t).tagName,s=t.classList;if(!(s instanceof DOMTokenList))throw console.info("Event",e),new Error("Browser does not support classList");var r="INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i,a=s.contains("js-keymaster-allow");return r||a},t.key.isPressed=function(e){return"string"==typeof e&&(e=code(e)),-1!=u(_downKeys,e)},t.key.getPressedKeyCodes=function(){return _downKeys.slice(0)},t.key.noConflict=function(){var e=t.key;return t.key=S,e},t.key.unbind=function(e,t){var i,r,a,n,o,l=[];for(i=_(e),n=0;n<i.length;n++){if((r=i[n].split("+")).length>1&&(l=E(r)),e=r[r.length-1],e=code(e),void 0===t&&(t=m()),!s[e])return;for(a=0;a<s[e].length;a++)(o=s[e][a]).scope===t&&d(o.mods,l)&&(s[e][a]={})}},e.exports=p}(this)},Ty2s:function(e,t,i){"use strict";(function(e){var s=i("pVnL"),r=i.n(s),a=i("J2m7"),n=i.n(a),o=(i("zKZe"),i("UxlC"),i("B6y2"),i("4mDm"),i("3bBZ"),i("SYor"),i("JTJg"),i("hByQ"),i("EnZy"),i("1Pxe")),l=i("LfJA"),u=i("TSYQ"),d=i.n(u),c=i("wLt/"),h=i("RaO8"),p=i("cRhH"),g=i("Uudg"),m=i("nXOR"),f=i("FFEN"),v=i("bvRJ"),_=i("xqF0"),E=i("a08m"),b=i("KHqc"),S=i("jvKz"),C=i("Sp+6"),T=i("og3H"),y=i("QimK"),I=i("7n6V"),A=i("nCwC"),O=i("FenW"),w=i("mmNe"),D=i("tYUx"),L=i("130X"),R=i("EKn5"),x=i("vid3"),P=i("64Hu"),M=i("X0SG"),U=i("uSnV"),k=i("20bE"),N=i("Ch/O"),F=i("xoHW"),j=i("pfAI"),B=i("FAB2"),V=i("QMP1"),H=i("bJ/C"),W=i("9WHe"),G=i("N7sa"),q=i("ifSZ"),K=i("2GHK"),z=i("QLaP"),Q=i.n(z),Y=i("sEfC"),J=i.n(Y),Z=i("bRcl"),X=i("q1tI"),$=i.n(X),ee=i("TtcH"),te=i("qxWM"),ie=i("MwSb"),se=i("uBNa"),re=i("T3U7"),ae=i("y2oz"),ne=i("QK9X"),oe=i("kf70"),le=i("W6SY"),ue=i("K+uX"),de=i("PqR9"),ce=i("EFuM"),{TAB_INDEX:he}=V.g;function pe(e){if(e){if(Object.prototype.hasOwnProperty.call(e,"marks"))return!0;var t=e.content;if(t instanceof Array)for(var i=0;i<t.length;i++)if(pe(t[i]))return!0}return!1}class ge extends $.a.Component{constructor(t){var i;super(t),i=this,this.state={activeDistractor:null,actionsExpanded:!1,definition:this.props.term.definition,definitionCustomDistractors:this.props.term.definitionCustomDistractors?this.props.term.definitionCustomDistractors.map((e=>Object.assign({},e,{luid:e.id}))):null,definitionRichText:this.props.term.definitionRichText,focusedInputContainsAccentLanguage:!1,isAutosuggestVisible:!1,isDraggable:!0,isDraggedOver:!1,isFocused:!1,richTextEditorView:null,termUpdateCounter:0,word:this.props.term.word,wordRichText:this.props.term.wordRichText},this.getOtherSide=e=>e===c.b?c.a:c.b,this.getTtsUrl=function(e){void 0===e&&(e=i.props.activeSide);var t=Object(ne.a)(i.getLang(e));if(!t)return null;var s=e===c.b?i.props.term._wordTtsUrl:i.props.term._definitionTtsUrl;return null==s?void 0:s.replace(/\/\w{2}\.mp3/,"/"+t+".mp3")},this.getActiveComponent=()=>"word"===this.props.activeSide?this.wordSide.current:this.definitionSide.current,this.getInactiveSideLang=()=>this.props[this.props.activeSide===c.b?"definitionLang":"wordLang"],this.getSideLabel=e=>e===c.b?this.getWordSideLabel():this.getDefinitionSideLabel(),this.getDefinitionSideLabel=()=>this.hasCustomDistractors()?e("create_set.term_context.sides.answer"):e("create_set.term_context.sides.definition"),this.getWordSideLabel=()=>this.hasCustomDistractors()?e("create_set.term_context.sides.question"):e("create_set.term_context.sides.term"),this.getSideLabelId=e=>e===c.b?this.getWordSideLabelId():this.getDefinitionSideLabelId(),this.getDefinitionSideLabelId=()=>this.hasCustomDistractors()?"answer-side":"definition-side",this.getWordSideLabelId=()=>this.hasCustomDistractors()?"question-side":"term-side",this.getSidePlaceholder=t=>{if("en"!==K.b)return"";var i=this.getLang(t);return i&&this.props.wordLang!==this.props.definitionLang?e("create_set.term_context.sides.language_prompt",{language:Object(q.a)(i)}):t===c.b?this.getWordSidePlaceholder():this.getDefinitionSidePlaceholder()},this.getWordSidePlaceholder=()=>this.hasCustomDistractors()?e("create_set.term_context.custom_distractors.question_placeholder"):e("create_set.term_context.sides.term_prompt"),this.getDefinitionSidePlaceholder=()=>this.hasCustomDistractors()?e("create_set.term_context.custom_distractors.answer_placeholder"):e("create_set.term_context.sides.definition_prompt"),this.getLang=function(e){return void 0===e&&(e=i.props.activeSide),i.props[e===c.b?"wordLang":"definitionLang"]},this.getAllWords=()=>Object.values(this.props.terms).map((e=>e.word)),this.getAllDefinitions=()=>Object.values(this.props.terms).map((e=>e.definition)),this.onNextTick=e=>window.setTimeout(e,0),this.onImageContextDragEnter=()=>{this.setState({isDraggedOver:!0})},this.onCloseContext=e=>{this.props.onCloseContext(e),this.closeActionsAndRefocus()},this.onToggleAutodefineContext=()=>{this.props.onToggleContext(V.e.AUTODEFINE)},this.onSelectAutodefineResult=e=>{Object(re.a)("new_create_set_select_autodefine_result");var t=this.state.definition?this.state.definition+"\n"+e:e,i={word:this.state.word,definition:t};this.setState(i),this.updateAction(i),this.closeAutodefineContext(),this.closeActionsAndRefocus()},this.onReplaceImage=e=>{I.a.replace(e,this.props.setLuid,this.props.termLuid,this.props.termImageLuid),this.closeActionsAndRefocus()},this.onDeleteImage=()=>{I.a.del(this.props.setLuid,this.props.imageLuid,this.props.termLuid,this.props.termImageLuid),this.props.onCloseContext(V.e.IMAGE),this.focusDefinition()},this.onFormUpload=(t,i)=>{var s=()=>{i.reset(),this.closeImageContext(),this.closeActionsAndRefocus()},{matching:r,nonMatching:a,numTotal:n}=Object(se.b)(t,y.c);if(!n)return I.a.bulkCreate([{file:i,setLuid:this.props.setLuid,termLuid:this.props.termLuid,termImageLuid:this.props.termImageLuid}]),void s();a.length&&I.a.bulkUploadFailure({message:e("create_set.term_context.image.file_format_warning"),files:a}),this.props.onBulkImageUpload(r,this.props.termLuid,1===n),s()},this.onToggleCustomDistractorsContext=()=>{if(this.props.activeContext!==V.e.CUSTOM_DISTRACTORS){var{definitionLang:e,termLuid:t}=this.props,i=e||null;(!this.state.definitionCustomDistractors||this.state.definitionCustomDistractors.length<3)&&this.setState((e=>{var s=e.definitionCustomDistractors||[],r=[{luid:t+"-distractor-1",text:{languageCode:i,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}},{luid:t+"-distractor-2",text:{languageCode:i,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}},{luid:t+"-distractor-3",text:{languageCode:i,plainText:"",richText:null,ttsUrl:null,ttsSlowUrl:null}}];return{definitionCustomDistractors:[...s,...r.slice(0,3-s.length)]}}))}this.props.onToggleContext(V.e.CUSTOM_DISTRACTORS),Object(re.a)("new_create_set_definition_distractors_add_options",{setId:this.props.term.setId,termId:this.props.term.id})},this.handleDistractorUpdate=e=>{var t=e?e.filter((e=>e.text&&e.text.plainText.trim().length>0)):null;this.updateAction({definitionCustomDistractors:t,word:this.state.word,definition:this.state.definition})},this.handleDrop=t=>{if(this.setState({isDraggedOver:!1}),!(this.dropContainsText(t)||this.props.isReordering||this.props.viewOnly))if(this.props.canUseImageUpload){if(void 0!==t.dataTransfer)if(t.preventDefault(),Object(ie.d)(t.dataTransfer))I.a.dropFailure({message:e("create_set.term_context.image.drag_from_other_website")});else{var{matching:i,nonMatching:s,numTotal:r}=Object(ie.e)(t.dataTransfer,y.c);r?(s.length&&this.onImageUploadFailure(s),this.onImageUploadSuccess(i,1===r),this.closeImageContext()):I.a.dropFailure({message:e("create_set.term_context.image.no_images_selected")})}}else window.open(Object(ee.n)("custom_image_upload"),"_blank")},this.handlePaste=e=>{var t;Q()("paste"===e.type,"handlePaste called with non-paste clipboard event");var i=n()(null==(t=e.clipboardData)?void 0:t.items,(e=>"text/plain"===e.type));return i&&i.getAsString((e=>{var t=Object(ue.a)(e);this.setState(t)})),!1},this.onClickMoveUp=()=>{this.props.onMoveUp({shouldCenter:!1})},this.onClickMoveDown=()=>{this.props.onMoveDown({shouldCenter:!1})},this.onDragLeave=()=>{this.state.isDraggedOver&&this.setState({isDraggedOver:!1})},this.onDragEnter=e=>{if(!this.props.isReordering){try{if("move"===e.dataTransfer.effectAllowed||this.dropContainsText(e))return}catch(t){}this.state.isDraggedOver||this.setState({isDraggedOver:!0})}},this.onImageUploadFailure=t=>{I.a.bulkUploadFailure({files:t,message:e("create_set.term_context.image.file_format_warning")})},this.onImageUploadSuccess=(e,t)=>{this.props.onBulkImageUpload(e,this.props.termLuid,t)},this.onInsertRow=()=>{this.state.actionsExpanded&&this.setState({actionsExpanded:!1}),this.props.onAddRow()},this.onToggleActions=()=>{this.props.isActive||this.props.onActive(this.props.termLuid),this.setState((e=>{var{actionsExpanded:t}=e;return{actionsExpanded:!t}}))},this.onWordClick=()=>{this.props.viewOnly||this.focusWord()},this.onAddRowClick=e=>{e.preventDefault(),this.onWordClick()},this.handleEditorValueChange=(e,t)=>{if(!this.props.viewOnly&&this.getActiveComponent()){var i={};this.props.canEditRichText&&"rich"in e&&(i[t+"RichText"]=e.rich);var s=e.plain,r=this.state[t];if(e.plain!==r){var a=!1;this.props.shouldShowAutosuggest?a=!0:t===c.a&&s&&this.isAutodefineContextOpen()&&this.closeAutodefineContext(),a&&this.autosuggestAction(s),i[t]=s,i.isAutosuggestVisible=a,this.setState(i)}else this.setState(i)}},this.onUpdatePMEditorView=e=>{this.setState({richTextEditorView:e})},this.onFocus=(e,t)=>{if(!this.props.viewOnly){var i=this.props.shouldShowAutosuggest&&t===c.a,s=te.a.containsAccentLanguage(t===c.a?this.props.definitionLang:this.props.wordLang);(!this.props.isActive||t!==this.props.activeSide)&&(Object(ce.j)()?this.onNextTick((()=>O.a.activateRowSide(this.props.termLuid,t))):O.a.activateRowSide(this.props.termLuid,t)),t===c.b&&this.closeAutodefineContext(),t===c.a&&this.props.shouldShowAutosuggest&&this.autosuggestAction(this.state.definition),t===c.a&&this.shouldRenderCustomDistractorsLabel()&&(this.onToggleCustomDistractorsContext(),this.onNextTick((()=>this.focusDefinition()))),this.setState({isFocused:!0,focusedInputContainsAccentLanguage:s,isAutosuggestVisible:i})}},this.onBlur=(e,t)=>{if(!this.props.viewOnly){this.props.shouldShowAutosuggest&&O.a.autosuggestClear(t);var i=e.currentTarget.value,s=this.props.term[t],r=null,a=null;this.props.canEditRichText&&(r=this.state[t+"RichText"],a=this.props.term[t+"RichText"]),this.setState({isFocused:!1}),Object(H.a)(s,i,a,r)&&(Object(ce.j)()?this.onNextTick((()=>this.updateBothSidesAndDetectLang(t,i,r))):this.updateBothSidesAndDetectLang(t,i,r))}},this.onSuggestionChosen=e=>{var{activeSide:t}=this.props,i={};if(t===c.b)i.word=e,this.setState(Object.assign({},i,{isAutosuggestVisible:!1}));else{if(t!==c.a)return;i.definition=e,this.onNextTick((()=>{this.focusDefinition(),this.setState(Object.assign({},i))})),this.onNextTick((()=>{this.setState({isAutosuggestVisible:!1})}))}this.updateAction(i),this.getLang(t)||this.detectLangAction(t),t===c.b&&this.onNextTick((()=>this.focusDefinition()))},this.onTextDrop=e=>{this.dropContainsText(e)&&e.stopPropagation()},this.onDragOver=e=>{e&&this.dropContainsText(e)&&e.stopPropagation()},this.onStartOnlyTextDrag=e=>{var t=window.getSelection();t&&"Range"===t.type||(e.stopPropagation(),e.preventDefault())},this.onMouseEnterSide=()=>{this.setState({isDraggable:!1})},this.onMouseLeaveSide=()=>{this.setState({isDraggable:!0})},this.onToggleVoiceRecordingContext=()=>{this.props.canUseVoiceRecording?this.props.onToggleContext(V.e.RECORDING):(window.open(Object(ee.n)("recording_new"),"_blank"),Object(ae.a)({action:T.Ob.CLICK,cta:e("create_set.term_context.tooltips.add_voice_recording"),fullActionName:"create_set_audio_upsell_in_toolbar_click"}))},this.onImageContextDragLeave=()=>{this.setState({isDraggedOver:!1})},this.onToggleImageContext=e=>{e.stopPropagation(),e.preventDefault(),this.props.onToggleContext(V.e.IMAGE)},this.onCustomDistractorChange=(e,t)=>{this.setState((i=>({definitionCustomDistractors:(i.definitionCustomDistractors||[]).map((i=>i.luid===e.luid?Object.assign({},e,{text:{plainText:t.plain,richText:t.rich,languageCode:this.props.definitionLang||null}}):i))})))},this.onCustomDistractorBlur=(e,t)=>{var i,s;if(!this.props.viewOnly){var r=null==(i=this.props.term.definitionCustomDistractors)?void 0:i.find((t=>t.luid===e.luid)),a=null==(s=this.state.definitionCustomDistractors)?void 0:s.find((t=>t.luid===e.luid)),n=t.currentTarget.value,o=null==r?void 0:r.text.plainText,l=null==a?void 0:a.text.richText,u=null==r?void 0:r.text.richText,d=Object(H.a)(o,n,u,l);this.setState({activeDistractor:null}),d&&(Object(ce.j)()?this.onNextTick((()=>this.handleDistractorUpdate(this.state.definitionCustomDistractors))):this.handleDistractorUpdate(this.state.definitionCustomDistractors))}},this.onCustomDistractorSuggestionsShow=()=>{var{distractorSuggestions:e}=this.props;e&&!this.loggedCreateSetSuggestionRequestId.includes(e.requestId)&&(this.logCreateSetSuggestionEvent(T.tb.SUGGESTIONS_SHOWN),this.loggedCreateSetSuggestionRequestId.push(e.requestId))},this.handleRemoveAllDefinitionCustomDistractors=()=>{this.setState({definitionCustomDistractors:null}),this.handleDistractorUpdate(null),this.props.onToggleContext(V.e.CUSTOM_DISTRACTORS),Object(re.a)("new_create_set_definition_distractors_remove_options",{setId:this.props.term.setId,termId:this.props.term.id})},this.onCustomDistractorRichTextEditorFocus=e=>{var t;this.setState({activeDistractor:e}),this.props.shouldShowCustomDistractorsToggle&&!this.props.distractorSuggestions&&null!=(t=this.state.definition)&&t.length&&O.a.autosuggestDistractors({definition:this.state.definition})},this.onCustomDistractorSelectSuggestion=(e,t)=>{var{distractorSuggestions:i}=this.props;if(t&&i){var{definitionCustomDistractors:s}=this.state,r=(s||[]).map((i=>(t.luid&&t.luid===i.luid&&(i.text=Object.assign({},i.text,{plainText:e,richText:null})),i)));this.setState({definitionCustomDistractors:r}),this.logCreateSetSuggestionEvent(T.tb.SUGGESTION_CHOSEN,e)}},this.onCustomDistractorUpsellClick=()=>{Object(ae.a)({action:T.Ob.CLICK,fullActionName:"teacher_mcq_upsell_click"})},this.renderStudiableItemToolbar=()=>{var e={areTooltipsEnabled:this.areTooltipsEnabled(),canEditRichText:this.props.canEditRichText,editorView:this.state.richTextEditorView,enableImageUpload:this.shouldEnableImageUpload(),imageHelper:this.props.imageHelper,index:this.props.index,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isImageContextOpen:this.isImageContextOpen(),isMobileWebView:this.props.isMobileWebView,isRecordingContextOpen:this.isRecordingContextOpen(),isTermActive:this.props.isActive,onDelete:this.props.onDeleteRow,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleImageContext:this.onToggleImageContext,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,shouldRenderEditableToggles:this.props.isActive,shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText};return $.a.createElement(m.a,{below:"s"},(t=>t?$.a.createElement(k.a,r()({},e,{isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),shouldShowAutosuggestionToggle:!0,shouldShowMobileToolbar:!0})):$.a.createElement(k.a,r()({},e,{isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),isDeleteToggleDisabled:!(this.props.totalCount>B.d.MIN_TERMS),shouldShowAutosuggestionToggle:!this.props.shouldUseCleanDesign,shouldShowDeleteToggle:!0,shouldShowDragToggle:!0,shouldShowOrder:!0}))))},this.shouldRenderCustomDistractorTrigger=()=>this.props.shouldShowCustomDistractorsToggle&&this.props.isActive&&!this.isCustomDistractorsContextOpen()&&!this.shouldRenderCustomDistractorsLabel(),this.shouldRenderCustomDistractorUpsell=()=>this.props.shouldShowMCQUpsell&&this.props.isActive&&!this.props.shouldShowCustomDistractorsToggle&&!this.isCustomDistractorsContextOpen()&&!this.shouldRenderCustomDistractorsLabel(),this.shouldRenderCustomDistractors=()=>!this.props.viewOnly&&this.props.isActive&&this.isCustomDistractorsContextOpen(),this.shouldRenderCustomDistractorsLabel=()=>!this.isCustomDistractorsContextOpen()&&this.state.definitionCustomDistractors&&this.hasCustomDistractors(),this.shouldAddExtraPaddingToDistractorTrigger=()=>this.props.activeSide===c.a&&te.a.containsAccentLanguage(this.props.definitionLang),this.shouldEnableImageUpload=()=>!this.props.imageHelper.isImageUploading()&&(this.props.activeSide===c.a||this.props.shouldShowRichTextUpsell),this.shouldUpdateOnProps=(e,t)=>e.term.word!==t.term.word||e.term.definition!==t.term.definition||e.activeSide!==t.activeSide||e.canUseImageUpload!==t.canUseImageUpload||e.canUseVoiceRecording!==t.canUseVoiceRecording||e.definitionCustomAudio!==t.definitionCustomAudio||e.definitionCustomAudioLuid!==t.definitionCustomAudioLuid||e.definitionLang!==t.definitionLang||e.definitionSideSuggestions!==t.definitionSideSuggestions||e.dragDropEvent!==t.dragDropEvent||e.hasDefLangError!==t.hasDefLangError||e.hasDefProfanity!==t.hasDefProfanity||e.hasMinTermsError!==t.hasMinTermsError||e.hasWordLangError!==t.hasWordLangError||e.hasWordProfanity!==t.hasWordProfanity||e.image!==t.image||e.imageLuid!==t.imageLuid||e.index!==t.index||e.isActive!==t.isActive||e.isActive||e.isAutosuggestionEnabled!==t.isAutosuggestionEnabled||e.isDropTarget!==t.isDropTarget||e.isNotSynced!==t.isNotSynced||e.isPhantom!==t.isPhantom||e.isReordering!==t.isReordering||e.placeholderImage!==t.placeholderImage||e.recorderState!==t.recorderState||e.termImageLuid!==t.termImageLuid||e.totalCount!==t.totalCount||e.wordCustomAudio!==t.wordCustomAudio||e.wordCustomAudioLuid!==t.wordCustomAudioLuid||e.wordLang!==t.wordLang||e.wordSideSuggestions!==t.wordSideSuggestions||e.distractorSuggestions!==t.distractorSuggestions,this.searchImages=function(e){void 0===e&&(e=i.props.term.word);var t=i.props.wordLang&&i.props.definitionLang?[i.props.wordLang,i.props.definitionLang]:null,s=i.props.canUseImageUpload?j.b.MAX_NUM_IMAGES_UPGRADED:j.b.MAX_NUM_IMAGES_FREE;I.a.search(i.props.termLuid,e,t,s)},this.isRecordingContextOpen=()=>this.props.activeContext===V.e.RECORDING,this.closeRecordingContext=()=>{this.props.onCloseContext(V.e.RECORDING)},this.blurDefinition=()=>{this.definitionSide.current&&this.definitionSide.current.blur()},this.hasDefinitionRecording=()=>!!this.props.definitionCustomAudio,this.closeActionsAndRefocus=()=>{this.state.actionsExpanded&&this.setState({actionsExpanded:!1},(()=>this.focusDefinition()))},this.canShowAutodefine=()=>!!this.state.word,this.closeAutodefineContext=()=>this.props.onCloseContext(V.e.AUTODEFINE),this.isAutodefineContextOpen=()=>this.props.activeContext===V.e.AUTODEFINE,this.dropContainsText=e=>Object(ie.c)(e.dataTransfer),this.blurWord=()=>{this.wordSide.current&&this.wordSide.current.blur()},this.focusDefinition=()=>{this.definitionSide.current&&this.definitionSide.current.focus()},this.focusWord=()=>{this.wordSide.current&&this.wordSide.current.focus()},this.focus=()=>{var e=this.getActiveComponent();e&&e.focus()},this.openUploadDialog=()=>{var e=this.imageUpload.current;e&&e.openUploadDialog()},this.detectLangAction=e=>{this._detectLang||(this._detectLang=J()((e=>{if(!this.hasLang(e)){var t=e===c.b?this.getAllWords():this.getAllDefinitions();A.a.detectLanguage(this.props.setLuid,e,t)}}),B.b.DEBOUNCE_TIME)),this._detectLang(e)},this.autosuggestAction=e=>{this._autosuggest||(this._autosuggest=J()((e=>{var t,i={defLang:this.props.definitionLang,localTermId:-1,prefix:e,wordLang:this.props.wordLang};this.props.activeSide===c.b?O.a.autosuggestWord(i):(O.a.autosuggestDefinition(Object.assign({word:this.state.word,definition:this.state.definition},i)),this.props.shouldShowCustomDistractorsToggle&&null!=(t=this.state.definition)&&t.length&&O.a.autosuggestDistractors({definition:this.state.definition}))}),V.d.DEBOUNCE_TIME)),this._autosuggest(e)},this.closeImageContext=()=>{this.props.onCloseContext(V.e.IMAGE)},this.updateAction=function(e,t){void 0===t&&(t=!0),t&&(e.rank=i.props.term.rank),O.a.update({setLuid:i.props.setLuid,luid:i.props.termLuid,props:e,wordLang:i.props.wordLang,defLang:i.props.definitionLang,persist:t,shouldLogForRichTextDebugging:i.props.shouldLogForRichTextDebugging})},this.hasCustomDistractors=()=>(this.state.definitionCustomDistractors||[]).some((e=>e.text&&e.text.plainText.trim().length>0)),this.hasWordRecording=()=>!!this.props.wordCustomAudio,this.definitionSide=$.a.createRef(),this.imageUpload=$.a.createRef(),this.wordSide=$.a.createRef(),this.contextProps={disableTransition:Object(ce.j)(),transitionName:"TermContent-animateContext"},this.loggedCreateSetSuggestionRequestId=[]}componentDidMount(){this.createSetSuggestionsEventLogger=new Z.a}UNSAFE_componentWillReceiveProps(e){if(this.props.term.word!==e.term.word||this.props.term.definition!==e.term.definition||!Object(oe.a)(this.props.term.wordRichText,e.term.wordRichText)||!Object(oe.a)(this.props.term.definitionRichText,e.term.definitionRichText)){var{word:t,wordRichText:i,definition:s,definitionRichText:r}=e.term;this.state.isFocused||(this.setState({word:t,wordRichText:i,definition:s,definitionRichText:r}),this.setState((e=>({termUpdateCounter:(e.termUpdateCounter+1)%10}))))}var a=e.term.definitionCustomDistractors;a&&this.setState((t=>{var i=(t.definitionCustomDistractors||[]).map(((e,t)=>{var i=a.find(((i,s)=>e.id===i.id||t===s));return null!=i&&i.id&&!e.id?Object.assign({},e,{id:i.id}):e}));return this.props.definitionLang!==e.definitionLang&&i.map((t=>(t.text.languageCode=e.definitionLang||null,t))),{definitionCustomDistractors:i}})),this.props.isActive&&!e.isActive&&this.setState({actionsExpanded:!1}),e.dragDropEvent&&this.onDrop(e.dragDropEvent)}shouldComponentUpdate(e,t){return!Object(le.a)(this.state,t)||this.shouldUpdateOnProps(this.props,e)}componentDidUpdate(e){this.props.dragEnterEvent&&!e.isDropTarget&&this.props.isDropTarget&&this.onDragEnter(this.props.dragEnterEvent),e.isDropTarget&&!this.props.isDropTarget&&this.onDragLeave()}getIntValueFromLuid(e){return parseInt(e.split("-")[1],10)}getVoiceRecording(e){return void 0===e&&(e=this.props.activeSide),e===c.b?[this.props.wordCustomAudioLuid,this.props.wordCustomAudio]:[this.props.definitionCustomAudioLuid,this.props.definitionCustomAudio]}onDrop(e){this.state.isDraggedOver&&this.setState({isDraggedOver:!1}),this.handleDrop(e)}renderExternalContextToggles(){return $.a.createElement(m.a,{below:"s"},(e=>e?this.renderMobileContextToggles():Object(ce.j)()?this.renderTabletContextToggles():$.a.createElement(m.a,{below:"m"},this.renderTabletContextToggles())))}renderImageDropTarget(){return $.a.createElement("div",{className:"TermContent-imageDropTarget"},$.a.createElement(C.a,{size:"small"},$.a.createElement(f.a,{deprecatedStyle:!0,size:4},$.a.createElement(g.a,{id:"create_set.term_context.drop_to_upload"}))))}renderVoiceRecording(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isRecordingContextOpen())return null;var[e,t]=this.getVoiceRecording(c.b),[i,s]=this.getVoiceRecording(c.a);return $.a.createElement("div",{className:"TermContent-context TermContent-voiceRecordingContext"},$.a.createElement(N.a,{activeSide:this.props.activeSide,canUseVoiceRecording:this.props.canUseVoiceRecording,definitionCustomAudio:s,definitionCustomAudioLuid:i,definitionTtsAudioUrl:this.getTtsUrl(c.a),enabled:this.isRecordingContextOpen(),isMac:this.props.isMac,onClose:this.onCloseContext.bind(null,V.e.RECORDING),onCloseVoiceRecordingPermissionsModal:this.props.onCloseVoiceRecordingPermissionsModal,onOpenVoiceRecordingPermissionsModal:this.props.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.props.onScrollToOffset,recorderState:this.props.recorderState,setLuid:this.props.setLuid,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:this.props.term,termLuid:this.props.termLuid,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:t,wordCustomAudioLuid:e,wordTtsAudioUrl:this.getTtsUrl(c.b)}))}renderAutodefine(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isAutodefineContextOpen()||!this.canShowAutodefine())return null;var{data:e,isLoading:t}=this.props.autodefineResults||{},i=Object(de.a)((e||[]).map((e=>{var{text:t}=e;return t})));return $.a.createElement("div",{className:"TermContent-context TermContent-autodefineContext"},$.a.createElement(w.a,{enabled:this.isAutodefineContextOpen(),isLoading:!!t,onClose:this.onCloseContext.bind(null,V.e.AUTODEFINE),onSelectAutodefineResult:this.onSelectAutodefineResult,resultLang:this.props.definitionLang,results:i,termLuid:this.props.termLuid}))}renderAutosuggest(){var{definitionSideSuggestions:e,wordSideSuggestions:t}=this.props;return this.props.activeSide===c.b?Q()(t,"Missing wordSideSuggestions."):Q()(e,"Missing definitionSideSuggestions."),$.a.createElement("div",{className:"TermContent-autosuggestContext"},$.a.createElement(D.a,{extraTopPadding:this.state.focusedInputContainsAccentLanguage,onSuggestionChosen:this.onSuggestionChosen,suggestionsData:this.props.activeSide===c.b?t:e,termSide:this.props.activeSide===c.b?T.Sb.WORD:T.Sb.DEFINITION}))}renderAddRowButton(){return this.props.isSetContentTypeDiagrams?$.a.createElement("div",{className:"TermContent-addCard",id:"addRow"},$.a.createElement(E.a,{onClick:this.onAddRowClick},$.a.createElement("span",{className:"TermContent-addRowButton"},$.a.createElement(g.a,{id:"create_set.term_context.tooltips.add_row"})))):$.a.createElement("a",{className:"TermContent-addRow",id:"addRow",onClick:this.onAddRowClick},$.a.createElement("span",{className:"TermContent-addRowButton"},$.a.createElement(b.a,{"aria-label":e("create_set.term_context.tooltips.add_row")},$.a.createElement(g.a,{id:"create_set.term_context.tooltips.add_row"}))))}renderExpandableTouchContextToggles(){return this.state.actionsExpanded?[$.a.createElement(x.b,{disabled:!(this.props.totalCount>B.d.MIN_TERMS),icon:"garbage",key:"deleteRow",onClick:this.props.onDeleteRow}),$.a.createElement(x.b,{disabled:0===this.props.index,icon:"up",key:"moveRowUp",onClick:this.onClickMoveUp}),$.a.createElement(x.b,{disabled:this.props.index===this.props.totalCount-1,icon:"wedge-down",key:"moveRowDown",onClick:this.onClickMoveDown}),$.a.createElement(x.b,{disabled:!(this.props.totalCount<B.d.MAX_TERMS),icon:"plus-thin",key:"insertRow",onClick:this.onInsertRow})]:[$.a.createElement(x.a,{key:"spacer"}),this.props.canEditRichText||this.props.shouldShowRichTextUpsell?$.a.createElement(x.b,{className:"TermContent--mobile-expand-icon",icon:"system-more-vertical",iconProps:{variant:"borderless",size:"large"},key:"toggleAll",onClick:this.onToggleActions}):$.a.createElement(x.b,{icon:"more",key:"toggleAll",onClick:this.onToggleActions})]}renderMobileContextToggles(){return this.props.canEditRichText||this.props.shouldShowRichTextUpsell?this.renderMobileRichTextContextToggles():$.a.createElement("div",{className:"TermContent-externalContextToggles"},$.a.createElement(P.a,{variant:"mobile"},this.renderExpandableTouchContextToggles(),this.props.shouldShowAutosuggest&&!this.props.shouldUseCleanDesign?$.a.createElement(L.a,{isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(this.props.activeSide),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,onToggleAutosuggest:this.props.onToggleAutosuggest}):null,$.a.createElement(x.b,{icon:"image",isActive:this.isImageContextOpen(),onClick:this.onToggleImageContext})))}renderMobileRichTextContextToggles(){return $.a.createElement("div",{className:"TermContent-externalContextToggles"},$.a.createElement(P.a,{variant:"mobile"},this.renderExpandableTouchContextToggles()))}renderTabletContextToggles(){return $.a.createElement("div",{className:"TermContent-externalContextToggles"},$.a.createElement(P.a,{variant:"tablet"},this.renderExpandableTouchContextToggles()))}renderImageUpload(){if(this.props.viewOnly)return null;if(!this.props.isActive)return null;if(!this.isImageContextOpen())return null;var e=d()("TermContent-context TermContent-imageUploadContext",{"is-draggedOver":this.state.isDraggedOver});return $.a.createElement("div",{className:e},$.a.createElement(U.a,{canUseImageUpload:this.props.canUseImageUpload,createSetImageUploadCtaTestVariant:this.props.createSetImageUploadCtaTestVariant,enabled:this.isImageContextOpen(),image:this.props.image,innerRef:this.imageUpload,isReportingFlowBlocked:this.props.isReportingFlowBlocked,keyboardScope:this.props.termLuid,onClose:this.closeImageContext,onDragEnterEnd:this.onImageContextDragEnter,onDragLeaveEnd:this.onImageContextDragLeave,onDropEnd:this.handleDrop,onImageSelect:this.onReplaceImage,onRerunSearch:this.searchImages,onUpload:this.onFormUpload,placeholderImage:this.props.placeholderImage,searchMeta:this.props.imageSearchMeta,searchResults:this.props.imageSearchResults,word:this.state.word}))}renderContext(){return $.a.createElement("div",{className:"TermContent-contexts"},$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.renderCustomDistractors()),$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.renderImageUpload()),$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.props.shouldShowAutosuggest?null:this.renderAutodefine()),$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.renderVoiceRecording()))}renderWordSide(){return $.a.createElement(F.a,{canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,hasMinTermsError:this.props.hasMinTermsError,hasRecording:this.hasWordRecording(),hasWordLangError:this.props.hasWordLangError,hideContextToggles:this.props.shouldShowRichTextUpsell,index:this.props.index,isActiveSide:this.props.activeSide===c.b,isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(c.b),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isProfane:this.props.hasWordProfanity,isRecordingContextOpen:this.isRecordingContextOpen(),key:"wordContent-"+this.state.termUpdateCounter,label:this.getSideLabel(c.b),labelId:this.getSideLabelId(c.b),lang:this.props.wordLang,onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onImageUploadFailure:this.onImageUploadFailure,onImageUploadSuccess:this.onImageUploadSuccess,onPaste:this.handlePaste,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,onUpdatePMEditorView:this.onUpdatePMEditorView,otherSideLang:this.props.definitionLang,placeholder:this.getSidePlaceholder(c.b),ref:this.wordSide,shouldRenderAutosuggestionContextToggle:!this.props.shouldUseCleanDesign,shouldShowAutosuggest:this.props.shouldShowAutosuggest,tabIndex:he,termActive:this.props.isActive,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,word:this.state.word,wordRichText:this.state.wordRichText})}renderDefinitionSide(){return $.a.createElement(M.a,{areTooltipsEnabled:this.areTooltipsEnabled(),canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,createSetImageUploadCtaTestVariant:this.props.createSetImageUploadCtaTestVariant,definition:this.state.definition,definitionRichText:this.state.definitionRichText,enableAutodefine:this.canShowAutodefine(),enableImageUpload:!this.props.imageHelper.isImageUploading(),hasDefLangError:this.props.hasDefLangError,hasMinTermsError:this.props.hasMinTermsError,hasRecording:this.hasDefinitionRecording(),hideContextToggles:this.props.shouldShowRichTextUpsell,image:this.props.image,imageHelper:this.props.imageHelper,index:this.props.index,isActiveSide:this.props.activeSide===c.a,isAutodefineContextOpen:this.isAutodefineContextOpen(),isAutosuggestionContextOpen:this.shouldRenderAutosuggestContext(c.a),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isCapableOfVoiceRecording:this.isCapableOfVoiceRecording(),isImageContextOpen:this.isImageContextOpen(),isProfane:this.props.hasDefProfanity,isRecordingContextOpen:this.isRecordingContextOpen(),key:"definitionContent-"+this.state.termUpdateCounter,label:this.getSideLabel(c.a),labelId:this.getSideLabelId(c.a),lang:this.props.definitionLang,onBlur:this.onBlur,onChange:this.handleEditorValueChange,onDeleteImage:this.onDeleteImage,onFocus:this.onFocus,onImageUploadFailure:this.onImageUploadFailure,onImageUploadSuccess:this.onImageUploadSuccess,onPaste:this.handlePaste,onToggleAutodefineContext:this.onToggleAutodefineContext,onToggleAutosuggest:this.props.onToggleAutosuggest,onToggleImageContext:this.onToggleImageContext,onToggleVoiceRecordingContext:this.onToggleVoiceRecordingContext,onUpdatePMEditorView:this.onUpdatePMEditorView,onUploadImage:this.onFormUpload,otherSideLang:this.props.wordLang,placeholder:this.getSidePlaceholder(c.a),placeholderImage:this.props.placeholderImage,ref:this.definitionSide,shouldRenderAutosuggestionContextToggle:!this.props.shouldUseCleanDesign,shouldShowAutosuggest:this.props.shouldShowAutosuggest,shouldShowTooltipImage:this.props.shouldShowTooltipImage,tabIndex:he,termActive:this.props.isActive,viewOnly:this.props.viewOnly})}renderSideOverlay(e,t){return $.a.createElement(S.a,{constrainToWindow:!1,key:"overlay",overlay:e,position:t,triggerAction:"always"},$.a.createElement("div",null))}renderSide(e){var t=[],i=Object(ce.j)(),s=e===c.b?this.props.wordPopover:this.props.definitionPopover;return s&&i&&t.push(this.renderSideOverlay(s,"top left")),t.push(e===c.b?this.renderWordSide():this.renderDefinitionSide()),s&&!i&&t.push(this.renderSideOverlay(s,"bottom left")),t}renderCounter(){var t;return t=this.props.isNotSynced?$.a.createElement(v.a,{className:"TermContent-counterAlertIcon",icon:"alert"}):this.props.isPhantom||this.props.viewOnly?null:$.a.createElement("span",{className:"TermContent-deleteRow"},$.a.createElement(_.a,{disabled:!(this.props.totalCount>B.d.MIN_TERMS),icon:"garbage",onClick:this.props.onDeleteRow,tabIndex:-1,title:e("create_set.term_context.tooltips.delete_row"),variant:"borderless"})),$.a.createElement("span",{className:"TermContent-counter"},t)}renderCustomDistractorUpsell(){var e=d()("TermContent-sideCustomOptionsTrigger",{"TermContent-sideCustomOptionsTrigger--extraPadding":this.shouldAddExtraPaddingToDistractorTrigger()});return $.a.createElement("div",{className:e},$.a.createElement(E.a,{newTab:!0,onClick:this.onCustomDistractorUpsellClick,tabIndex:he,to:"/upgrade?source=teacher_mcq",variant:"revert"},$.a.createElement(v.a,{icon:"options-add"}),$.a.createElement("span",{className:"TermContent-sideCustomOptionsTriggerText"},$.a.createElement(g.a,{id:"create_set.term_context.custom_distractors.cta"})),$.a.createElement("span",{className:"TermContent-sideCustomOptionsTriggerTag"},$.a.createElement(h.a,{styleVariant:l.a.Indigo,type:T.fc.TEACHER}))))}renderCustomDistractorTrigger(){var e=d()("TermContent-sideCustomOptionsTrigger",{"TermContent-sideCustomOptionsTrigger--extraPadding":this.shouldAddExtraPaddingToDistractorTrigger()});return $.a.createElement("div",{className:e},$.a.createElement(E.a,{onClick:this.onToggleCustomDistractorsContext,tabIndex:he,variant:"revert"},$.a.createElement(v.a,{icon:"options-add"}),$.a.createElement("span",{className:"TermContent-sideCustomOptionsTriggerText"},$.a.createElement(g.a,{id:"create_set.term_context.custom_distractors.cta"})),$.a.createElement("span",{className:"TermContent-sideCustomOptionsTriggerTag"},$.a.createElement(p.b,{isMerch:!0,productType:p.a.BETA}))))}renderCustomDistractorLabel(){return $.a.createElement("div",{className:"TermContent-sideCustomOptionsLabel"},$.a.createElement("span",{className:"TermContent-sideCustomOptionsLabelText"},$.a.createElement(g.a,{id:"create_set.term_context.custom_distractors.label"})))}renderCustomDistractors(){var e;if(!this.shouldRenderCustomDistractors())return null;var t=Object.assign({},this.props.distractorSuggestions);t.suggestions=((null==(e=this.props.distractorSuggestions)?void 0:e.suggestions)||[]).filter((e=>!(this.state.definitionCustomDistractors||[]).some((t=>t.text.plainText===e.text))));var i=this.props.definitionLang;return $.a.createElement("div",{className:"TermContent-context TermContent-customDistractorsContext"},$.a.createElement(R.a,{activeDistractor:this.state.activeDistractor,distractors:this.state.definitionCustomDistractors,distractorSuggestions:t,isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isTermActive:this.props.isActive,languageCode:i,onCustomDistractorChange:this.onCustomDistractorChange,onCustomDistractorRemoveClick:this.handleRemoveAllDefinitionCustomDistractors,onCustomDistractorRichTextEditorBlur:this.onCustomDistractorBlur,onCustomDistractorRichTextEditorFocus:this.onCustomDistractorRichTextEditorFocus,onCustomDistractorSelectSuggestion:this.onCustomDistractorSelectSuggestion,onCustomDistractorSuggestionsShow:this.onCustomDistractorSuggestionsShow,onUpdatePMEditorView:this.onUpdatePMEditorView,tabIndex:he,viewOnly:this.props.viewOnly}))}render(){var e=this.props.isSetContentTypeDiagrams&&this.props.isPhantom,t=d()("TermContent-inner",{"TermContent-inner--phantomCleanDesign":e}),i=d()("TermContent-sideWrap",{"TermContent-sideWrap--grid":e}),s=d()("TermContent",{"has-error":this.props.hasWordProfanity||this.props.hasDefProfanity||this.props.hasMinTermsError,"has-expandedActions":this.state.actionsExpanded,"has-image":this.props.imageHelper.hasImageOrPlaceholder(),"has-richTextToolbar":this.shouldShowRTCleanDesign(),"is-dropTarget":this.isDraggedOver(),"is-viewOnly":this.props.viewOnly,"rt-clean-design":this.shouldShowRTCleanDesign(),["is-active-"+this.props.activeSide]:this.props.isActive,"is-autosuggestToggleHidden":this.props.shouldUseCleanDesign});return $.a.createElement("div",{className:s},$.a.createElement("div",{className:t,draggable:this.state.isDraggable,onDragEnd:this.props.onDragEnd,onDragStart:this.props.onDragStart},this.shouldShowRTCleanDesign()&&(this.state.richTextEditorView||this.props.shouldShowRichTextUpsell)&&!this.props.isPhantom?this.renderStudiableItemToolbar():null,$.a.createElement("div",{className:"TermContent-inner-padding"},$.a.createElement("div",{className:"TermContent-sides",draggable:this.state.isDraggable,onDragStart:this.onStartOnlyTextDrag,onMouseEnter:this.onMouseEnterSide,onMouseLeave:this.onMouseLeaveSide},$.a.createElement("div",{className:i,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop},$.a.createElement("div",{className:"TermContent-side TermContent-side--word",onDragOver:this.onDragOver,onDrop:this.onTextDrop},this.renderSide(c.b),$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.shouldRenderAutosuggestContext(c.b)?this.renderAutosuggest():null)),$.a.createElement("div",{className:"TermContent-side TermContent-side--definition",onDragOver:this.onDragOver,onDrop:this.onTextDrop},this.renderSide(c.a),$.a.createElement(o.CSSTransitionGroup,this.contextProps,this.shouldRenderAutosuggestContext(c.a)?this.renderAutosuggest():null),this.shouldRenderCustomDistractorTrigger()?this.renderCustomDistractorTrigger():null,this.shouldRenderCustomDistractorUpsell()?this.renderCustomDistractorUpsell():null,this.shouldRenderCustomDistractorsLabel()?this.renderCustomDistractorLabel():null),this.props.isPhantom?this.renderAddRowButton():null),this.isDraggedOver()?this.renderImageDropTarget():null),this.props.isPhantom?null:this.renderExternalContextToggles(),$.a.createElement(m.a,{below:"s"},(e=>this.shouldHideCounter(e)?null:this.renderCounter())))),this.renderContext())}shouldHideCounter(e){return this.props.isSetContentTypeDiagrams&&this.props.isPhantom||this.shouldShowRTCleanDesign()&&!e&&!this.props.isPhantom}shouldShowRTCleanDesign(){return this.props.canEditRichText||this.props.shouldShowRichTextUpsell}shouldRenderAutosuggestContext(e){return e===this.props.activeSide&&this.props.isActive&&this.props.isAutosuggestionEnabled&&this.props.shouldShowAutosuggest&&this.hasSuggestions()&&this.state.isAutosuggestVisible&&null===this.props.activeContext}hasSuggestions(){return this.props.activeSide===c.b?!!this.props.wordSideSuggestions&&this.props.wordSideSuggestions.suggestions.length>0:!!this.props.definitionSideSuggestions&&this.props.definitionSideSuggestions.suggestions.length>0}updateBothSidesAndDetectLang(e,t,i){var s=this.getOtherSide(e),r={};r[e]=t,r[s]=this.props.term[s];var[a,n]=[e+"RichText",s+"RichText"];if(this.props.canEditRichText){var o=this.props.term[n];r[a]=i,r[n]=o,this.props.shouldLogForRichTextDebugging&&(pe(i)||pe(o))&&W.a.debug("Rich text updates sent for terms",Object.assign({setId:this.props.term.setId},r))}this.updateAction(r),!this.getLang(e)&&t&&this.detectLangAction(e)}hasLang(e){return e===c.b?!!this.props.wordLang:!!this.props.definitionLang}blur(){var e=this.getActiveComponent();e&&e.blur()}isDraggedOver(){return this.state.isDraggedOver&&!this.props.isReordering}isImageContextOpen(){return this.props.activeContext===V.e.IMAGE}isCustomDistractorsContextOpen(){return this.props.activeContext===V.e.CUSTOM_DISTRACTORS}isValidFile(e){return!(null==e||!e.type)&&y.c.indexOf(e.type.toLowerCase())>-1}areTooltipsEnabled(){return this.props.index<V.j.DISABLE_TOOLTIPS}isCapableOfVoiceRecording(){return!Object(ce.b)()}logCreateSetSuggestionEvent(e,t){var{distractorSuggestions:i,term:s,termLuid:r,setLuid:a}=this.props;i&&this.createSetSuggestionsEventLogger.logCreateSetSuggestionEvent(e,{card_side:T.xb.DEFINITION,context_definition_text:(this.state.definition||"").trim(),context_word_text:(this.state.word||"").trim(),suggested_texts:i.suggestions.map((e=>e.text)),server_studiable_container_id:s.setId,client_studiable_container_id:this.getIntValueFromLuid(a),server_studiable_item_id:s.id,client_studiable_item_id:this.getIntValueFromLuid(r),suggestion_type:T.o.CARD_DISTRACTOR_SUGGESTION,studiable_container_type:T.Nb.SET,studiable_item_type:T.zb.N_SIDED_CARD,selected_option_index:t?i.suggestions.findIndex((e=>e.text===t)):null})}}ge.defaultProps={isReportingFlowBlocked:!1},t.a=Object(G.a)()(ge)}).call(this,i("nrsj").default)},UQ0i:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return C}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("baRz")),n=i("6MTt"),o=i("h4KR"),l=i("efxM"),u=i("TAwQ"),d=i("t1Ez"),c=i("dxfC"),h=i("zK28"),p=i("q1tI"),g=i.n(p),m=i("0RqGD"),f=i("zO4m"),v=i("PjDq"),_=i("T3U7"),E=i("dHOp"),b=Object(a.styled)("h2")({name:"Title",class:"t1mrp3o2"}),S=Object(a.styled)("div")({name:"Subtitle",class:"s1tfo7zy"});class C extends g.a.PureComponent{constructor(){super(...arguments),this.state={hideFbButton:!1,submitDisabled:!0,submitLoading:!1},this.handleClose=()=>{var e;this.setState({submitDisabled:!0}),null!=(e=this.props.actions)&&e.onClose&&!this.getIsContinuingOauth()&&this.props.actions.onClose()},this.handleFormComplete=()=>this.setState({submitDisabled:!1}),this.handleFormUpdate=()=>this.setState({submitDisabled:!0}),this.handleFormSubmitError=()=>this.setState({submitLoading:!1}),this.handleFormSubmit=()=>{var e;this.setState({submitLoading:!0}),null==(e=this.form)||e.handleSubmit()},this.handleOpenLogin=()=>{var e;this.setState({submitDisabled:!0}),null!=(e=this.props.actions)&&e.onOpenLogin?this.props.actions.onOpenLogin():QWait("Quizlet.loginModal",(()=>h.a.openLoginModal()))},this.shouldShowFullpageModal=()=>this.props.isOpen&&!this.getIsContinuingOauth()&&!this.props.excludeFromFullpageExperiment&&"experiment"===n.b.getVariationAndEnroll("FullPageSignupV2[default,growth]"),this.shouldShowAssemblifiedModal=()=>this.props.isOpen&&Object(m.b)()}componentDidMount(){this.props.isOpen&&Object(_.a)("sign_up_modal_opened"),Object(v.a)().then((e=>{this.setState({hideFbButton:e})}))}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&Object(_.a)("sign_up_modal_opened")}getSocialLoginParams(){return this.props.signupOrigin?{customParams:{screenName:Object(E.d)(),signupOrigin:this.props.signupOrigin},redirect:this.props.redir}:{}}getIsContinuingOauth(){var e;return null==(e=this.props.signupFormData)?void 0:e.forOauth}getIncludeCloseButton(){return this.props.includeCloseButton&&!this.getIsContinuingOauth()}getPreventCloseOnOverlayClick(){return this.props.preventCloseOnOverlayClick||this.getIsContinuingOauth()}renderCtas(){return g.a.createElement(f.a,{shouldRenderFacebookLoginButton:this.shouldRenderFacebookLoginButton(),socialLoginParams:this.getSocialLoginParams()})}renderSignupForm(e){return g.a.createElement(u.a,r()({couponCode:this.props.couponCode,marketingOptInEnabled:this.props.marketingOptInEnabled,redir:this.props.redir,ref:e=>{this.form=e},screenName:Object(E.d)(),signupMetadata:this.props.signupMetadata,signupOrigin:this.props.signupOrigin},this.props.signupFormData,{onComplete:this.handleFormComplete,onOpenLogin:this.handleOpenLogin,onSubmitError:this.handleFormSubmitError,onValidatableFieldChange:this.handleFormUpdate,withSubmitButton:e.withSubmitButton}))}renderValueProp(){if(this.props.header)return null;var t,i=n.b.getVariationAndEnroll("SignupFormValueProp[default,growth]");if(!i||"control"===i)return null;switch(i){case"v1":t=e("global.sign_up_modal.title_v1");break;case"v2":t=e("global.sign_up_modal.title_v2");break;default:t=null}return g.a.createElement(g.a.Fragment,null,t?g.a.createElement(b,null,t):null,g.a.createElement(S,null,g.a.createElement(d.a,{id:"global.sign_up_modal.subtitle"})))}renderBody(e){return g.a.createElement(g.a.Fragment,null,!this.shouldShowFullpageModal()&&this.renderValueProp(),this.getIsContinuingOauth()?null:this.renderCtas(),this.renderSignupForm(e))}render(){if(this.shouldShowFullpageModal())return g.a.createElement(l.b,{currentTab:l.a.Signup,includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,onClose:this.handleClose,onOpenLoginFromSignup:this.handleOpenLogin,preventCloseOnOverlayClick:this.getPreventCloseOnOverlayClick(),redir:this.props.redir},this.renderBody({withSubmitButton:!0}));if(this.shouldShowAssemblifiedModal()){var t=this.getIsContinuingOauth()?void 0:{text:e("global.sign_up_modal.already_have_account_log_in"),onClick:this.handleOpenLogin};return g.a.createElement(o.a,{body:this.renderBody({withSubmitButton:!1}),includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,limitHeight:!1,onClose:this.handleClose,primaryAction:{text:e("global.sign_up_modal.button_text"),disabled:this.state.submitDisabled,loading:this.state.submitLoading,onClick:this.handleFormSubmit},secondaryAction:t,shouldCloseOnOverlayClick:!this.getPreventCloseOnOverlayClick(),title:this.props.header})}return g.a.createElement("div",{className:"SignupPromptModalNew"},g.a.createElement(c.a,{headerContent:this.props.header,headerContentSize:this.props.header?4:3,headerContentVariant:this.props.header?"thin":null,includeCloseButton:this.getIncludeCloseButton(),isOpen:this.props.isOpen,onClose:this.handleClose,preventCloseOnOverlayClick:this.getPreventCloseOnOverlayClick()},this.renderBody({withSubmitButton:!0})))}shouldRenderFacebookLoginButton(){return!this.state.hideFbButton}}C.defaultProps={includeCloseButton:!0,excludeFromFullpageExperiment:!1},i("buYA")}.call(this,i("nrsj").default)},UfWW:function(e,t,i){var s=i("KwMD"),r=i("ut/Y"),a=i("Sxd8"),n=Math.max;e.exports=function(e,t,i){var o=null==e?0:e.length;if(!o)return-1;var l=null==i?0:a(i);return l<0&&(l=n(o+l,0)),s(e,r(t,3),l)}},UtfR:function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ");var s=i("mr8R");t.a=Object(s.a)((()=>i.e("create_set_tooltip_diagram_modal_lazy").then(i.bind(null,"TYow"))))},VR72:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("Uudg"),n=i("bvRJ"),o=i("6rYD"),l=i("kPvk"),u=i("TX86"),d=i.n(u),c=i("q1tI"),h=i.n(c),p=i("EFuM"),g="VoiceRecordingPermissionsModal";class m extends c.PureComponent{constructor(){super(...arguments),this.onOpen=()=>{d.a.pushScope(g),d()(o.a.modal.exit,g,(()=>(this.props.onClose(),!1)))},this.onClose=()=>{d.a.popScope(g)},this.onClickOverlay=e=>{e.preventDefault(),this.props.onClose()},this.recorderHelper=new l.a(this.props)}componentDidMount(){this.props.isOpen&&this.onOpen()}UNSAFE_componentWillUpdate(e){!this.props.isOpen&&e.isOpen&&this.onOpen(),this.props.isOpen&&!e.isOpen&&this.onClose()}renderHtmlArrow(){return this.props.isOpen&&this.recorderHelper.isUsingHtml5Plugin()?h.a.createElement("div",{className:"VoiceRecordingPermissionsModal-arrow"},h.a.createElement("span",{className:"VoiceRecordingPermissionsModal-arrowFirstLeg"}),h.a.createElement("span",{className:"VoiceRecordingPermissionsModal-arrowSecondLeg"}),h.a.createElement("span",{className:"VoiceRecordingPermissionsModal-arrowPointer"},Object(p.b)()?h.a.createElement(n.a,{icon:"wedge-down"}):h.a.createElement(n.a,{icon:"wedge-up"}))):null}renderOverlay(){return this.props.isOpen?h.a.createElement("div",{className:"VoiceRecordingPermissionsModal-overlay",onClick:this.onClickOverlay}):null}render(){var e=r()({VoiceRecordingPermissionsModal:!0,"is-open":this.props.isOpen});return h.a.createElement("div",{className:e},h.a.createElement("div",{className:"VoiceRecordingPermissionsModal-content"},h.a.createElement("p",null,h.a.createElement(a.a,{id:"create_set.term_context.voice.permissions_instructions"}))),this.renderHtmlArrow(),this.renderOverlay())}}},"Vrs+":function(e,t,i){"use strict";function s(e,t){return(e%t+t)%t}i.d(t,"a",(function(){return s}))},W7Oq:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return g}));i("zKZe");var s=i("TSYQ"),r=i.n(s),a=i("Uudg"),n=i("Vd5f"),o=i("wcmh"),l=i("og3H"),u=i("PuWd"),d=i("X0lI"),c=i.n(d),h=i("q1tI"),p=i.n(h);class g extends p.a.PureComponent{constructor(e){super(e),this.handleChange=e=>{var{optionText:t}=this.state;t&&(t.plainText=e.plain,e.rich&&(t.richText=e.rich),this.hasTextChanged=!0,this.hasDeleted=!1,this.setState({optionText:t}))},this.handleFocus=()=>{this.props.onFocus({media:this.getOptionMediaConnectionByMediaType(this.props,l.C.TEXT),type:l.Ab.MULTIPLE_CHOICE_OPTION,index:this.props.number})},this.handleBlur=()=>{var{optionText:e}=this.state,{option:t}=this.props;if(t&&e&&!this.hasDeleted&&this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var i=this.getOptionMediaConnectionByMediaType(this.props,l.C.TEXT);i&&this.props.onDeleteText(i)}else this.props.onBlur&&this.props.onBlur({option:t,text:e});this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=this.getOptionMediaConnectionByMediaType(this.props,l.C.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.handleDeleteOption=()=>{var{onDeleteOption:e,option:t}=this.props,{optionText:i}=this.state,s=this.getOptionImage(this.props);e&&t&&0===t.explanationConnectionMedia.length&&(0===t.optionConnectionMedia.length||i&&0===i.plainText.length&&!s)&&(this.hasDeleted=!0,e(t))},this.handleOptionSelected=()=>{var{option:e,onOptionChange:t}=this.props;e&&t&&t({luid:c()(e.luid),id:e.id,isCorrect:!e.isCorrect})},this.hasDeleted=!1,this.hasTextChanged=!1;var{isPhantom:t}=e;this.state={isPhantom:t||!1,optionText:this.getOptionText(e)}}getOptionText(e){var t=this.getOptionMediaConnectionByMediaType(e,l.C.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:l.x.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getOptionImage(e){var t=this.getOptionMediaConnectionByMediaType(e,l.C.IMAGE);if(t){var{image:i}=t;if(i&&""!==i.url)return i}return null}getOptionMediaConnectionByMediaType(e,t){var{option:i}=e;return(null==i?void 0:i.optionConnectionMedia.map((e=>e)).find((e=>e.mediaType===t)))||null}renderMediaInteractives(){var{onUpdateRichTextEditorView:t,number:i,tabIndex:s}=this.props,{optionText:r}=this.state,a=e(i>1?"create_set.multiple_choice_questions.placeholder.other_option":"create_set.multiple_choice_questions.placeholder.first_option"),n={onDeleteImage:this.handleDeleteImage},o={onBlur:this.handleBlur,onChange:this.handleChange,onDeleteText:this.handleDeleteOption,onFocus:this.handleFocus,onUpdatePMEditorView:t},l={autofocus:!!this.props.isFocused,isFocused:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:a,tabIndex:s};return p.a.createElement(u.a,{image:this.getOptionImage(this.props),imageEvents:n,placeholderImage:this.props.placeholderImage,richTextConfig:l,richTextEvents:o,text:r})}renderPhantom(){return p.a.createElement("span",{className:"EditableMcqOption-phantom",onClick:this.props.onAddOption},p.a.createElement(a.a,{id:"create_set.multiple_choice_questions.add_option"}))}renderIsCorrectInput(){var t,{isPhantom:i}=this.state,{hasMultipleCorrectOptions:s,option:r,number:a}=this.props,l=!i&&null!=r&&r.optionConnectionMedia.length?null==r||null==(t=r.optionConnectionMedia[0].text)?void 0:t.plainText:null,u={checked:this.props.isCorrect,disabled:i||this.isSelectionDisabled(),label:l?e("create_set.multiple_choice_questions.correct_option_label_text_exists",{optionText:l}):e("create_set.multiple_choice_questions.correct_option_label_text_does_not_exit",{optionIndex:a}),name:this.props.optionGroupName,onChange:this.handleOptionSelected};return s?p.a.createElement(n.a,u):p.a.createElement(o.a,u)}render(){var{isPhantom:e}=this.state,t=r()("EditableMcqOption",{"is-phantom":e});return p.a.createElement("div",{className:t},this.renderIsCorrectInput(),e?this.renderPhantom():this.renderMediaInteractives())}isSelectionDisabled(){var{option:e}=this.props,{optionText:t}=this.state;return!(null!=e&&e.id&&(!t||""!==t.plainText||null!==this.getOptionImage(this.props)))}}}).call(this,i("nrsj").default)},Wldb:function(e,t,i){"use strict";i.r(t)},X0SG:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return p}));i("4mDm"),i("3bBZ");var s=i("K+TW"),r=i("wLt/"),a=i("QimK"),n=i("hAIH"),o=i("Gh6S"),l=i("S16J"),u=i("q1tI"),d=i.n(u),c=i("vm/G"),h=i("MwSb");class p extends d.a.PureComponent{constructor(){super(...arguments),this.onFocus=e=>{this.props.onFocus(e,r.a)},this.onBlur=e=>{this.props.onBlur(e,r.a)},this.handleEditorValueChange=e=>{this.props.onChange(e,r.a)},this.handlePaste=e=>{if(this.props.onPaste&&this.props.onPaste(e))return!0;if(!this.props.canUseImageUpload||Object(h.a)(e.clipboardData))return!1;e.preventDefault();var{matching:t,nonMatching:i,numTotal:s}=Object(h.e)(e.clipboardData,a.c);return i.length&&this.props.onImageUploadFailure(i),t.length&&this.props.onImageUploadSuccess(t,1===s),!0},this.richTextEditorRef=d.a.createRef(),this.focus=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.focus()},this.blur=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.blur()}}getLabel(){return this.props.isProfane?e("create_set.term_profanity_warning.input_label"):this.props.hasMinTermsError?e("create_set.validation_errors.not_enough_terms_error"):this.props.label}renderImage(){return d.a.createElement("span",{className:"DefinitionSide-image"},d.a.createElement(l.a,{image:this.props.image,onDeleteImage:this.props.onDeleteImage,placeholderImage:this.props.placeholderImage}))}renderDefinitionContextToggles(){if(this.props.imageHelper&&this.props.imageHelper.hasImageOrPlaceholder())return d.a.createElement("div",{className:"DefinitionSide-imageContainer"},this.renderImage());var e=d.a.createElement(o.a,{canUseImageUpload:this.props.canUseImageUpload,disabled:!this.props.enableImageUpload,onToggleImageContext:this.props.onToggleImageContext,onUploadImage:this.props.onUploadImage,showMenu:"popoverMenu"===this.props.createSetImageUploadCtaTestVariant}),t=0===this.props.index&&this.props.shouldShowTooltipImage?d.a.createElement(s.a,{featurePopoverVariant:"image",isVisible:!0},e):e;return d.a.createElement("div",{className:"DefinitionSide-imageContainer"},t)}render(){return d.a.createElement("div",{className:"DefinitionSide"},d.a.createElement("div",{className:"DefinitionSide-richTextEditor"},this.renderDefinitionContextToggles(),d.a.createElement(c.default,{canEditRichText:!0,invalid:this.props.isProfane||this.props.hasMinTermsError||this.props.hasDefLangError||void 0,label:this.getLabel(),labelAddOnContent:this.shouldRenderLanguageEditor()?d.a.createElement(n.a,{side:r.a}):null,labelId:this.props.labelId,lang:this.props.lang,languageCodes:this.props.lang?[this.props.lang]:[],onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onPaste:this.handlePaste,onUpdatePMEditorView:this.props.onUpdatePMEditorView,otherLang:this.props.otherSideLang,placeholder:this.props.placeholder,plainText:this.props.definition,pmJson:this.props.definitionRichText,ref:this.richTextEditorRef,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex})))}shouldRenderLanguageEditor(){return this.props.termActive||this.props.hasDefLangError}}}).call(this,i("nrsj").default)},XKAG:function(e,t,i){var s=i("ut/Y"),r=i("MMmD"),a=i("7GkX");e.exports=function(e){return function(t,i,n){var o=Object(t);if(!r(t)){var l=s(i,3);t=a(t),i=function(e){return l(o[e],e,o)}}var u=e(t,i,n);return u>-1?o[l?t[u]:u]:void 0}}},Xfi1:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return I}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("qaYj"),n=i("K+TW"),o=i("Uudg"),l=i("nXOR"),u=i("cE6c"),d=i("FFEN"),c=i("xqF0"),h=i("a08m"),p=i("47yS"),g=i("zt8I"),m=i("Sp+6"),f=i("og3H"),v=i("QimK"),_=i("7n6V"),E=i("rTQ9"),b=i("elj8"),S=i("q1tI"),C=i.n(S),T=i("MwSb"),y=i("fkdw");class I extends S.PureComponent{constructor(){super(...arguments),this.state={isShowingInfoModal:!1},this.handleOpenInfoModal=e=>{e.stopPropagation(),Object(y.a)("create_set_page",f.H.INFO,"diagrams_add_image"),this.setState({isShowingInfoModal:!0})},this.handleClickInfoModalLearnMore=()=>{Object(y.a)("create_set_page_modal",f.H.MLP_REDIRECT,"diagrams_more_info")},this.handleClickInfoModalButton=()=>{Object(y.a)("create_set_page_modal",f.H.CREATE,"diagrams_more_info"),this.setState({isShowingInfoModal:!1})},this.handleCloseInfoModal=()=>{Object(y.a)("create_set_page_modal",f.H.DISMISS,"diagrams_more_info"),this.setState({isShowingInfoModal:!1})},this.handleUploadDiagram=e=>{this.props.actions.uploadImage({fileList:e})},this.handleDrop=t=>{Object(T.d)(t.dataTransfer)?_.a.dropFailure({message:e("create_set.term_context.image.drag_from_other_website")}):this.props.actions.uploadImage({fileList:t.dataTransfer.files})}}UNSAFE_componentWillReceiveProps(e){e.dragDropEvent&&this.handleDrop(e.dragDropEvent)}renderLoadingIndicator(){return C.a.createElement("div",{className:"CreateSetDiagramUploader-bannerLoadingIndicator"},C.a.createElement(p.a,null))}renderBannerContent(){return this.props.isDropTarget?this.renderUploadTargetContent():this.renderBannerText()}renderUploadTargetContent(){return C.a.createElement("div",{className:"CreateSetDiagramUploader-uploadTarget"},C.a.createElement(m.a,{size:"large"},C.a.createElement(d.a,{deprecatedStyle:!0,size:3},C.a.createElement(o.a,{id:"create_set.diagram_header.drop_to_upload"}))))}renderBannerText(){var e=C.a.createElement(h.a,{to:"#"},C.a.createElement(o.a,{id:"create_set.diagram_header.add_diagram_instructions_link"}));return C.a.createElement("div",{className:"CreateSetDiagramUploader-bannerText"},C.a.createElement(d.a,{deprecatedStyle:!0,size:4},C.a.createElement(o.a,{id:"create_set.diagram_header.add_diagram"})),C.a.createElement(g.a,null,C.a.createElement(o.a,{addDiagramInstructionsLink:e,id:"create_set.diagram_header.add_diagram_instructions"})))}renderInfoIcon(e,t){return C.a.createElement(c.a,{icon:e,onClick:this.handleOpenInfoModal,variant:t})}renderInfoIconInverseWhite(){return this.renderInfoIcon("info-inverse","white")}renderInfoIconBorderless(){return this.renderInfoIcon("info","borderless")}renderBanner(){var e=Object(b.a)(this.props.setContentType),t=r()("CreateSetDiagramUploader-banner",{"CreateSetDiagramUploader--cleanDesign":e,"is-dropTarget":this.props.isDropTarget}),i=r()("CreateSetDiagramUploader-bannerImage",{"CreateSetDiagramUploader-bannerImage--cleanDesign":e,"is-dropTarget":this.props.isDropTarget}),s=r()("CreateSetDiagramUploader-bannerInfoIcon",{"CreateSetDiagramUploader-bannerInfoIcon--inverted":!Object(b.a)(this.props.setContentType)});return C.a.createElement(u.a,{mimeTypes:v.b,onChooseFiles:this.handleUploadDiagram},(e=>C.a.createElement("div",{className:t,onClick:e,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop},C.a.createElement("div",{className:s},Object(b.a)(this.props.setContentType)?this.renderInfoIconBorderless():this.renderInfoIconInverseWhite()),C.a.createElement("div",{className:i}),this.props.isUploading?this.renderLoadingIndicator():this.renderBannerContent())))}renderInfoModal(){return C.a.createElement(a.a,{badgeContent:C.a.createElement(o.a,{id:"create_set.diagram_header.discover_diagrams_modal.modal_new_badge"}),buttonContent:C.a.createElement(o.a,{id:"create_set.diagram_header.discover_diagrams_modal.modal_button_text"}),buttonOnClick:this.handleClickInfoModalButton,headingContent:C.a.createElement(o.a,{id:"create_set.diagram_header.discover_diagrams_modal.modal_heading_text"}),isOpen:this.state.isShowingInfoModal,linkContent:C.a.createElement(o.a,{id:"create_set.diagram_header.discover_diagrams_modal.modal_link_text"}),linkOnClick:this.handleClickInfoModalLearnMore,linkTo:"/features/diagrams",onClose:this.handleCloseInfoModal,paragraphContent:C.a.createElement(o.a,{id:"create_set.diagram_header.discover_diagrams_modal.modal_paragraph_text"}),videoId:"229221764"})}render(){var e=r()("CreateSetDiagramUploader");return C.a.createElement(l.a,{above:"m"},C.a.createElement("div",{className:e},C.a.createElement(E.a,{shouldRenderCardBackdrop:!Object(b.a)(this.props.setContentType)},this.props.shouldShowTooltipDiagram?C.a.createElement(n.a,{featurePopoverVariant:"diagram",isVisible:!0},this.renderBanner()):this.renderBanner()),this.renderInfoModal()))}}}).call(this,i("nrsj").default)},YAV2:function(e,t,i){"use strict";i("UxlC"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=0;t<s.length;t++)e=e.replace(s[t].letters,s[t].base);return e};var s=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}]},YJee:function(e,t,i){"use strict";var s=i("Wv2R");t.a=Object(s.a)("FolderSetConstants",{actions:{BULK_UPDATE:null}})},YUt4:function(e,t,i){"use strict";var s=i("rl72"),r=i("Wv2R"),a=Object(r.a)("AppDispatcherConstants",{VIEW_ACTION:null,SERVER_ACTION:null});class n extends s.Dispatcher{viewAction(e,t){this.dispatch({source:a.VIEW_ACTION,actionType:e,payload:t})}serverAction(e,t){this.dispatch({source:a.SERVER_ACTION,actionType:e,payload:t})}}t.a=new n},YleJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("T3U7");function r(e){Object(s.a)("create_set_navigation_"+e+"_click")}},Z23Y:function(e,t,i){"use strict";i("zKZe");var s=i("RVJv");class r extends s.a{}r.URL_BASE="image-refs",r.MODEL_NAME="imageRef";var a=i("PYQB"),n=Object.assign({},a.a);n.init(r);t.a=n},"a/yz":function(e,t,i){"use strict";i.r(t)},a4GN:function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ");var s=i("mr8R");t.a=Object(s.a)((()=>i.e("image_upload_error_modal_lazy").then(i.bind(null,"uydh"))))},aFlI:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return b}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("Uudg")),n=i("JxFz"),o=i("dxfC"),l=i("og3H"),u=i("nCwC"),d=i("oYtC"),c=i("jgNe"),h=i("6rYD"),p=i("LEyH"),g=i("TX86"),m=i.n(g),f=i("q1tI"),v=i.n(f),_=i("T3U7"),E="SetPermissions";class b extends f.PureComponent{constructor(){super(...arguments),this.state=this.getEmptyState(),this.onOpen=()=>{m.a.pushScope(E),m()(h.a.modal.tab,E,(()=>(this.focusViewing(),!1))),this.setState(this.getEmptyState())},this.onClose=()=>{m.a.popScope(E),m.a.unbind(h.a.modal.tab,E),this.setState(this.getEmptyState())},this.handleChangeViewableOption=e=>{Object(_.a)("new_create_set_change_permissions"),d.a.changePermission(p.d.VIEWING,e.currentTarget.value)},this.handleChangeEditableOption=e=>{Object(_.a)("new_create_set_change_permissions"),d.a.changePermission(p.d.EDITING,e.currentTarget.value)},this.handleChangePassword=e=>{this.setState({password:e.currentTarget.value})},this.getValidationErrors=()=>c.b.validate(this.getValidationParams(this.props)),this.hasValidationErrors=()=>this.getValidationErrors().length>0,this.onDoneEditing=()=>{var e=this.getValidationErrors();this.setState({errors:e}),0===e.length&&(this.updateSetPermissions(),d.a.persistClassSetsForPermissions(this.props.setLuid),this.props.onClose())},this.handleToggleClass=e=>{var t=e.currentTarget.value;d.a.toggleClass(t)},this.handleToggleClassPermissions=e=>{var t=e.currentTarget.value;d.a.toggleClassPermissions(t)},this.onDoneClick=e=>{e.preventDefault(),this.onDoneEditing()}}UNSAFE_componentWillReceiveProps(e){!this.props.isOpen&&e.isOpen?this.onOpen():this.props.isOpen&&!e.isOpen&&this.onClose();var t=c.b.validate(this.getValidationParams(e),!0);this.setState({errors:t})}getEmptyState(){return{errors:[],password:this.props.set.password}}getValidationParams(e){return{editableBy:e.permissions.editableBy,errors:this.state.errors,password:this.state.password,passwordEdit:e.set.passwordEdit,passwordUse:e.set.passwordUse,selectedClassLuids:e.selectedClassLuids,selectedEditableByClassLuids:e.selectedEditableByClassLuids,viewableBy:e.permissions.viewableBy}}render(){return v.a.createElement("div",{className:"SetPermissions"},v.a.createElement(o.a,{headerContent:v.a.createElement(a.a,{id:"create_set.permissions.title"}),isOpen:this.props.isOpen,onClose:this.onDoneEditing,preventClose:this.hasValidationErrors()},v.a.createElement(c.a,r()({},this.props,{errors:this.state.errors,onChangeEditableOption:this.handleChangeEditableOption,onChangePassword:this.handleChangePassword,onChangeViewableOption:this.handleChangeViewableOption,onSubmit:this.onDoneClick,onToggleClass:this.handleToggleClass,onToggleClassPermissions:this.handleToggleClassPermissions,password:this.state.password,setPreviouslyHadPassword:c.b.setPreviouslyHadPassword(this.getValidationParams(this.props))}),v.a.createElement(n.a,{"aria-label":e("create_set.permissions.save_button"),disabled:this.hasValidationErrors(),hero:!0,onClick:this.onDoneClick,width:"fill"},v.a.createElement(a.a,{id:"create_set.permissions.save_button"})))))}updateSetPermissions(){var e=this.props.permissions.viewableBy===p.c.EVERYONE?l.rb.PUBLIC_ACCESS:l.rb.NOT_PUBLIC,t=this.props.permissions.viewableBy===p.c.PASSWORD,i=this.props.permissions.editableBy===p.c.PASSWORD,{password:s}=this.state,r={accessType:e,passwordUse:t,passwordEdit:i};s&&(r.password=s),u.a.update(this.props.setLuid,r)}focusViewing(){var e=this.props.permissions.viewableBy,t=window.document.querySelector(".SetPermissions-section--viewing input[value='"+e+"']");t&&t.focus()}focusEditing(){var e=this.props.permissions.editableBy,t=window.document.querySelector(".SetPermissions-section--editing input[value='"+e+"']");t&&t.focus()}blur(){var e=window.document.querySelector(".SetPermissions input:focus");e&&e.blur()}}}).call(this,i("nrsj").default)},aKFw:function(e,t,i){"use strict";i.r(t)},aNXt:function(e,t,i){"use strict";function s(e){var t=t=>{var i=e();if(void 0!==i)return t.preventDefault(),(t||window.event).returnValue=i,i};return window.addEventListener("beforeunload",t,!0),{remove(){window.removeEventListener("beforeunload",t,!0)}}}i.d(t,"a",(function(){return s}))},aOoi:function(e,t,i){"use strict";i.d(t,"b",(function(){return n}));i("4mDm"),i("3bBZ");var s=i("kf70"),r=i("b/sn"),a=i("JhTn"),n=new r.PluginKey(a.h.INLINE),o=e=>{var{selection:t}=e,{$from:i,$to:s}=t,r=[];return t.empty&&(r=[...e.storedMarks||s.marks()]),e.doc.nodesBetween(i.pos,s.pos,(e=>{e.marks&&(r=[...r,...e.marks])})),r},l=new r.Plugin({key:n,state:{init:(e,t)=>({activeMarks:o(t)}),apply:(e,t,i,r)=>((e,t,i)=>e.docChanged||t.selection!==i.selection||!Object(s.a)(t.storedMarks,i.storedMarks))(e,i,r)?{activeMarks:o(r)}:t}});t.a=l},b5AO:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("yXPU"),r=i.n(s),a=(i("5s+n"),i("4mDm"),i("rOQg"),i("ilnZ"),i("s5qe"),i("5I2x")),n=i.n(a);i("E9XD"),i("zKZe"),i("3bBZ");class o{constructor(e){this.value=e}}function l(e){return new o(e)}function u(e){return e instanceof o}function d(e){return e instanceof o?e.value:e}var c,h=(e,t,i,s)=>{var r,a,o,l;return c||(r=n.a,a=0,o={},(l=new r).onmessage=e=>{var{id:t,returnValue:i}=function(e){return e.data}(e),s=o[t];s&&s(i)},c={request(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var r=a++;return new Promise((t=>{o[r]=t;var s=i.map(d),a=i.filter(u).map(d),n={args:s,command:e,id:r},c=a.length?[n,a]:[n];l.postMessage(...c)}))}}),c.request("blur",e,t,i,s)};function p(e,t){return g.apply(this,arguments)}function g(){return(g=r()((function*(e,t){void 0===t&&(t=50);var{height:i,width:s}=e,r=l(yield Promise.resolve(e.data.buffer.slice(0))),a=yield h(r,s,i,t),n=new Uint8ClampedArray(a);return e.data.set(n),e}))).apply(this,arguments)}},"bJ/C":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("kf70");function r(e,t,i,r){return!(!t&&!e)&&t!==e||!(!r&&!i)&&!Object(s.a)(r,i)}},bRcl:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("zKZe");var s=i("X0lI"),r=i.n(s),a=i("og3H"),n=i("P/Ri"),o=i("QR21"),l=i("sLV1"),u=i("zK28");class d{constructor(){this.editPageSessionHelper=new n.a,this.suggestionPageSessionHelper=new n.a}getSuggestionSessionId(){return this.suggestionPageSessionHelper.getPageSessionId()}getEdtSessionId(){return this.editPageSessionHelper.getPageSessionId()}logCreateSetSuggestionEvent(e,t){var i=r()(u.a.user),s=Object.assign({action:e,uid:u.a.uid,user_id:i.id,client_id:null,client_timestamp:Object(l.c)(),platform:a.J.WEB,edit_session_id:this.getEdtSessionId(),suggestion_session_id:this.getSuggestionSessionId()},t,{suggested_texts:JSON.stringify(t.suggested_texts)});Object(o.a)("create_set_suggestions",s)}}},bdmA:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("q1tI"),r=i.n(s);class a extends r.a.PureComponent{render(){return r.a.createElement("div",{className:"Ellipsis"},this.props.children)}}},"bo+9":function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r=i("jE4y"),a=i("RsOY"),n=i.n(a),o=i("GFZu"),l=Object.assign({customAudios:{},setup(e){for(var t in this.customAudios={},e){var i=e[t];this.customAudios[t]=i}this.bindActions(r.a.actions.CREATE,this._create),this.bindActions(r.a.actions.DELETE,this._delete)},getAll(){return this.customAudios},_create(e){var{luid:t,model:i}=e,s=Object(o.a)(t,i.properties);return this.customAudios=n()(this.customAudios,{$merge:s}),[t]},_delete(e){var{customAudioLuid:t}=e;return t in this.customAudios?(delete this.customAudios[t],[t]):[]}},s.a);l.init(),t.a=l},buYA:function(e,t,i){"use strict";i.r(t)},c7zP:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=o(i("q1tI")),a=o(i("17x9")),n=o(i("TSYQ"));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleMouseDown=i.handleMouseDown.bind(i),i.onRemove=i.onRemove.bind(i),i.handleTouchEndRemove=i.handleTouchEndRemove.bind(i),i.handleTouchMove=i.handleTouchMove.bind(i),i.handleTouchStart=i.handleTouchStart.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"handleMouseDown",value:function(e){if("mousedown"!==e.type||0===e.button)return this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation())}},{key:"onRemove",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)}},{key:"handleTouchEndRemove",value:function(e){this.dragging||this.onRemove(e)}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"renderRemoveIcon",value:function(){if(!this.props.disabled&&this.props.onRemove)return r.default.createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"×")}},{key:"renderLabel",value:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?r.default.createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):r.default.createElement("span",{className:e,role:"option","aria-selected":"true",id:this.props.id},this.props.children)}},{key:"render",value:function(){return r.default.createElement("div",{className:(0,n.default)("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}}]),t}(r.default.Component);l.propTypes={children:a.default.node,disabled:a.default.bool,id:a.default.string,onClick:a.default.func,onRemove:a.default.func,value:a.default.object.isRequired},t.default=l},cAhI:function(e,t,i){"use strict";i("4mDm"),i("3bBZ");var s=i("YUt4"),r=i("dEGm"),a={classSetSyncer:i("k36G").a,bulkDel(e){return s.a.viewAction(r.a.actions.BULK_DELETE,{luids:e}),this.classSetSyncer.bulkDel(e).then(a.bulkDeleteSuccess).catch(a.bulkDeleteFailure)},bulkUpdate(e){return s.a.viewAction(r.a.actions.BULK_UPDATE,{luidToProps:e}),this.classSetSyncer.bulkSave(e).then(a.bulkUpdateSuccess).catch(a.bulkUpdateFailure)},bulkUpdateSuccess(e){var[t]=e;s.a.serverAction(r.a.actions.BULK_UPDATE_SUCCESS,{models:t})},bulkUpdateFailure(e){var[t,i]=e;s.a.serverAction(r.a.actions.BULK_UPDATE_FAILURE,{models:i,error:t})},bulkDeleteSuccess(e){var[t]=e;s.a.serverAction(r.a.actions.BULK_DELETE_SUCCESS,{models:t})},bulkDeleteFailure(e){var[t,i]=e;s.a.serverAction(r.a.actions.BULK_DELETE_FAILURE,{error:t,models:i})}};t.a=a},cE6c:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return o}));i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s),a=i("EFuM"),n=1;class o extends r.a.Component{constructor(){super(...arguments),this.handleFileInputChange=e=>{var t,i=e.target.form,s=null==i||null==(t=i[this.name])?void 0:t.files;i&&s&&s.length&&this.props.onChooseFiles(s,i)},this.handleChildrenClick=e=>{e.preventDefault(),e.stopPropagation(),this.handleOpenFileDialog()},this.handleFileInputRef=e=>{this.input=e},this.handleFileInputClick=e=>{e.stopPropagation()},this.handleOpenFileDialog=()=>{this.input.click()},this.name="UIFileChooser"+n++}render(){return r.a.createElement("div",{className:"UIFileChooser"},r.a.createElement("form",{className:"UIFileChooser-form"},r.a.createElement("input",{accept:this.props.mimeTypes.join(",")||"*/*","aria-label":e("global.file_chooser_aria_label"),capture:Object(a.e)()?void 0:"environment",className:"UIFileChooser-input js-keymaster-allow",multiple:this.props.multiple,name:this.name,onChange:this.handleFileInputChange,onClick:this.handleFileInputClick,ref:this.handleFileInputRef,type:"file"})),r.a.createElement("div",{className:"UIFileChooser-contents",onClick:"function"==typeof this.props.children?void 0:this.handleChildrenClick},"function"==typeof this.props.children?this.props.children(this.handleOpenFileDialog):this.props.children))}}o.defaultProps={mimeTypes:[],multiple:!1}}).call(this,i("nrsj").default)},cRhH:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return u}));var s,r=i("TSYQ"),a=i.n(r),n=i("t1Ez"),o=i("q1tI"),l=i.n(o);!function(e){e[e.PRACTICE_TEST=0]="PRACTICE_TEST",e[e.STUDY_GUIDE=1]="STUDY_GUIDE",e[e.NEW=2]="NEW",e[e.TRENDING=3]="TRENDING",e[e.BESTSELLER=4]="BESTSELLER",e[e.TOP_SELLER=5]="TOP_SELLER",e[e.BETA=6]="BETA",e[e.PREVIEW=7]="PREVIEW"}(s||(s={}));class u extends l.a.PureComponent{renderProductType(){switch(this.props.productType){case s.STUDY_GUIDE:return l.a.createElement(n.a,{id:"purchasable_content.product_type.study_guide"});case s.PRACTICE_TEST:return l.a.createElement(n.a,{id:"purchasable_content.product_type.practice_test"});case s.NEW:return l.a.createElement(n.a,{id:"purchasable_content.product_type.new"});case s.TRENDING:return l.a.createElement(n.a,{id:"purchasable_content.product_type.trending"});case s.BESTSELLER:return l.a.createElement(n.a,{id:"purchasable_content.product_type.bestseller"});case s.TOP_SELLER:return l.a.createElement(n.a,{id:"purchasable_content.product_type.top_seller"});case s.BETA:return l.a.createElement(n.a,{id:"purchasable_content.product_type.beta"});case s.PREVIEW:return l.a.createElement(n.a,{id:"purchasable_content.product_type.preview"});default:return l.a.createElement(n.a,{id:"purchasable_content.product_type.generic"})}}render(){var e=a()("PurchasableContentProductTypeTag",{"PurchasableContentProductTypeTag--inline":this.props.isInline,"PurchasableContentProductTypeTag--merch":this.props.isMerch});return l.a.createElement("div",{className:e},this.renderProductType())}}},chz3:function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"default",(function(){return h}));i("4mDm"),i("3bBZ");var s=i("qqKc"),r=i("t1Ez"),a=i("JxFz"),n=i("Pxp3"),o=i("E/Xc"),l=i("dxfC"),u=i("xisi"),d=i("q1tI"),c=i.n(d);class h extends d.Component{constructor(){super(...arguments),this.state={isResendingConfirmation:!1,wasEmailResent:!1},this.getHeaderContent=()=>this.state.wasEmailResent?this.props.isUnderageUser?c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_header"}):c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.check_inbox_header"}):this.props.headerContent,this.getSubheaderContent=()=>this.state.wasEmailResent?this.props.isUnderageUser?c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_underage_subheader"}):c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.email_confirmation_sent_subheader"}):this.props.subheaderContent,this.onEmailResendSuccess=()=>this.setState({wasEmailResent:!0}),this.handleSendEmailConfirmation=()=>{this.setState({isResendingConfirmation:!0}),u.a.post("/settings/resend-confirmation").credentials().end(this.onEmailResendSuccess)}}renderEmailCtas(){var t=this.state.isResendingConfirmation,i=this.props.googleClassroomModalHandler;return c.a.createElement(n.a,{className:"UnconfirmedPermissionErrorModal-Ctas"},c.a.createElement(o.a,{"aria-label":e("classes.page_header_new.permission_error_modal.resend_email_confirmation_cta"),disabled:t,loading:t,onClick:this.handleSendEmailConfirmation,width:"fill"},c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.resend_email_confirmation_cta"})),this.props.googleClassroomModalHandler?c.a.createElement("div",null,c.a.createElement(s.d,{isFullWidth:!0,onClick:i,text:e("classes.page_header_new.permission_error_modal.connect_google_classroom_cta")})):null,this.props.googleClassroomModalHandler||this.props.isUnderageUser?null:c.a.createElement("div",null,c.a.createElement(a.a,{"aria-label":e("classes.page_header_new.permission_error_modal.update_email_address_cta"),onClick:()=>{window.location.href="/settings#email-change-setting"},variant:"basic",width:"fill"},c.a.createElement(r.a,{id:"classes.page_header_new.permission_error_modal.update_email_address_cta"}))))}renderEmailResendSuccess(){return c.a.createElement(n.a,{className:"UnconfirmedPermissionErrorModal-emailSentImage"})}render(){return c.a.createElement(l.a,{headerContent:this.getHeaderContent(),includeCloseButton:!0,isOpen:this.props.isOpen,onClose:this.props.onClose},c.a.createElement(n.a,null,this.getSubheaderContent()),this.state.wasEmailResent?this.renderEmailResendSuccess():this.renderEmailCtas())}}}.call(this,i("nrsj").default)},dEGm:function(e,t,i){"use strict";var s=i("Wv2R");t.a=Object(s.a)("ClassSetConstants",{actions:{BULK_UPDATE:null,BULK_UPDATE_SUCCESS:null,BULK_UPDATE_FAILURE:null,BULK_DELETE:null,BULK_DELETE_SUCCESS:null,BULK_DELETE_FAILURE:null}})},dOGZ:function(e,t,i){"use strict";i.r(t);i("zKZe");var s=i("og3H"),r=i("Vg22"),a=i("RPLW"),n=i.n(a),o=i("xJ/4"),l=i("qPyV"),u=i.n(l),d=(i("FZtP"),i("5s+n"),i("4mDm"),i("3bBZ"),i("EnZy"),i("Rm1S"),i("TL93")),c=(i("JTJg"),i("X0lI")),h=i.n(c);function p(e){var{mediaType:t}=e,i=null;switch(t){case s.C.IMAGE:i=e.image;break;case s.C.VIDEO:i=e.video;break;case s.C.TEXT:i=e.text;break;default:throw new Error("media type "+t+" not supported yet")}return 0===Object.keys(i).length?null:Object.assign({type:t},h()(i))}function g(e,t,i){return i.filter((i=>i.connectionModelId===e&&i.connectionType===t&&(i.text||i.image||i.video))).map(p).filter((e=>e))}function m(e,t){return g(e,s.Ab.MULTIPLE_CHOICE_PROMPT,t)}function f(e,t){return g(e,s.Ab.MULTIPLE_CHOICE_HINT,t)}function v(e,t,i){var r=i.filter((t=>t.studiableItemId===e.id&&t.id)),a=r.map((e=>e.id)),n=t.filter((e=>a.includes(e.connectionModelId)));return r.map((e=>{var{isCorrect:t,rank:i,id:r}=e;return{isCorrect:!!t,optionId:r,rank:i||null,optionMedia:g(r,s.Ab.MULTIPLE_CHOICE_OPTION,n),explanationMedia:g(r,s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION,n)}}))}function _(e,t){return e.map((e=>{var i=Object.assign({},e);return Object.keys(t).forEach((e=>{t[e].id===i.optionId&&(i.isCorrect=!!t[e].isCorrect)})),i}))}function E(e,t){var i={};switch(t.mediaType){case s.C.TEXT:i=t.text;break;case s.C.IMAGE:i=t.image;break;case s.C.VIDEO:i=t.video;break;default:throw new Error("media type not supported yet")}var r=Object.assign({},i,{type:t.mediaType}),a=!1,n=e.map((e=>e.type===t.mediaType?(a=!0,r):e));return a||n.push(r),n}var b=i("YDJX"),S=i("FX4X"),C=i("7Q9y"),T=i("5Vd8"),y=i("RVJv");class I extends y.a{}I.URL_BASE="studiable-item-documents",I.MODEL_NAME="studiableItem",I.API_VERSION="3.4",I.REQUIRED_FIELDS=["studiableContainerId","studiableContainerType"],I.REQUIRES_FULL_MODEL_TO_UPDATE=!0;var A=i("PYQB"),O=Object.assign({},A.a);O.init(I);var w=O;class D extends y.a{}D.URL_BASE="studiable-items",D.MODEL_NAME="studiableItem",D.API_VERSION="3.4";var L=Object.assign({},A.a);L.init(D);var R=L;class x extends y.a{}x.URL_BASE="studiable-media-connections",x.MODEL_NAME="studiableMediaConnection",x.API_VERSION="3.4";var P=Object.assign({},A.a);P.init(x);var M=P,U=i("Poz8"),k=i("mEm4"),N=Object(k.a)("MCQ_CREATION",{ADD_OPTION:null,ADD_STUDIABLE_ITEM:null,ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION:null,DELETE_MULTIPLE_CHOICE_OPTION:null,DELETE_STUDIABLE_MEDIA:null,DELETE_STUDIABLE_ITEM:null,MOVE_STUDIABLE_ITEM:null,SHOW_IMAGE_UPLOAD_ERROR_MODAL:null,SET_IMAGE_UPLOADING_STATUS:null,UPDATE_MEDIA_SAVE_STATUS:null,UPDATE_MULTIPLE_CHOICE_OPTION:null,UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS:null,UPDATE_STUDIABLE_ITEM:null,UPDATE_SELECTED_MEDIA_CONNECTION:null}),F=Object(b.createAction)(N.ADD_OPTION),j=Object(b.createAction)(N.ADD_STUDIABLE_ITEM),B=Object(b.createAction)(N.ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION),V=Object(b.createAction)(N.DELETE_MULTIPLE_CHOICE_OPTION),H=Object(b.createAction)(N.DELETE_STUDIABLE_MEDIA),W=Object(b.createAction)(N.DELETE_STUDIABLE_ITEM),G=Object(b.createAction)(N.MOVE_STUDIABLE_ITEM),q=Object(b.createAction)(N.SHOW_IMAGE_UPLOAD_ERROR_MODAL),K=Object(b.createAction)(N.SET_IMAGE_UPLOADING_STATUS),z=Object(b.createAction)(N.UPDATE_SELECTED_MEDIA_CONNECTION),Q=Object(b.createAction)(N.UPDATE_STUDIABLE_ITEM),Y=Object(b.createAction)(N.UPDATE_MULTIPLE_CHOICE_OPTION),J=Object(b.createAction)(N.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS),Z=Object(b.createAction)(N.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS),X=function(e,t){return void 0===t&&(t=d.a.studiableItems.NUM_MULTIPLE_CHOICE_OPTIONS),(i,r)=>{for(var a=r().get("createSet").get("setLuid"),n=R.getModel(e),{properties:o}=n,l=[],u=[],c=0;c<t;c++){var h={isCorrect:!1,studiableItemLuid:e};n.isNewRecord()||(h.studiableItemId=o.id),l.push(h)}var p=C.a.bulkAdd(l),g=[],m=function(e){d.a.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.forEach((t=>{u.push({studiableContainerType:s.Nb.SET,studiableContainerLuid:a,connectionModelLuid:e,connectionType:s.Ab.MULTIPLE_CHOICE_OPTION,mediaType:t})}))};for(var f in p)m(f);var v=M.bulkAdd(u),_=[];for(var E in p){var b=p[E];g.push(Object.assign({},b,{luid:E}))}for(var S in v)_.push(Object.assign({},v[S],{luid:S}));i(F(g)),i(B(_)),_.length>0&&i(z(_[0]))}};function $(e,t){return function(e){var t=T.a.getModel(e);return t.isNewRecord()?t.save(e):Promise.resolve(t)}(t).then((t=>{var{properties:i}=t,r=w.getModel(e),a=R.getModel(e);return r.setAll({studiableContainerType:s.Nb.SET,studiableContainerId:i.id}),a.setAll({studiableContainerType:s.Nb.SET,studiableContainerId:i.id}),r.isNewRecord()?(r.setAll({promptMedia:[],options:[],hintMedia:[],type:s.zb.MULTIPLE_CHOICE_QUESTION}),r.save(e)):r}))}var ee=()=>(e,t)=>{var i=t().get("createSet").get("setLuid"),r={studiableContainerType:s.Nb.SET,studiableContainerLuid:i,type:s.zb.MULTIPLE_CHOICE_QUESTION,rank:1},a=R.add(r);w.add(r);var n=d.a.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((e=>({studiableContainerType:s.Nb.SET,studiableContainerLuid:i,connectionModelLuid:a,connectionType:s.Ab.MULTIPLE_CHOICE_PROMPT,mediaType:e}))),o=M.bulkAdd(n),{properties:l}=R.getModel(a),u=Object.assign({},l,{luid:a}),c=[];for(var h in o)c.push(Object.assign({},o[h],{luid:h}));e(j(u)),e(B(c)),e(X(a)),c.length>0&&e(z(c[0]))},te=e=>t=>{if(0===e.hintConnectionMedia.length){var i=d.a.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((t=>{var i={connectionType:s.Ab.MULTIPLE_CHOICE_HINT,mediaType:t};return i.connectionModelId=e.id,i.connectionModelLuid=h()(e.luid),i})),r=M.bulkAdd(i),a=[];for(var n in r)a.push(Object.assign({},r[n],{luid:n}));t(B(a)),a.length>0&&t(z(a[0]))}},ie=e=>t=>{if(0===e.explanationConnectionMedia.length){var i=d.a.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.map((t=>{var i={connectionType:s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION,mediaType:t};return i.connectionModelId=e.id,i.connectionModelLuid=h()(e.luid),i})),r=M.bulkAdd(i),a=[];for(var n in r)a.push(Object.assign({},r[n],{luid:n}));t(B(a)),a.length>0&&t(z(a[0]))}},se=e=>t=>{e.luid&&w.del(e.luid).then(t(W(e)))},re=e=>t=>{t(G(e))},ae=(e,t,i)=>r=>{var a=w.getModel(i),n=function(e,t,i){var r=Object.assign({},i),{connectionType:a,connectionModelId:n}=e;switch(a){case s.Ab.MULTIPLE_CHOICE_OPTION:case s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION:r.options=u()(r.options.map((e=>{if(e.optionId===n){var i=Object.assign({},e);return a===s.Ab.MULTIPLE_CHOICE_OPTION&&(i.optionMedia=i.optionMedia.filter((e=>e.type!==t))),a===s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION&&(i.explanationMedia=i.explanationMedia.filter((e=>e.type!==t))),i}return e})),"optionId");break;case s.Ab.MULTIPLE_CHOICE_HINT:r.hintMedia=r.hintMedia.filter((e=>e.type!==t));break;case s.Ab.MULTIPLE_CHOICE_PROMPT:r.promptMedia=r.promptMedia.filter((e=>e.type!==t));break;default:throw new Error("connection type "+a+" is not yet supported")}return r}(e,t,a.properties);w.save(i,n).then((()=>{switch(t){case s.C.TEXT:e.text&&delete e.text;break;case s.C.IMAGE:e.image&&delete e.image;break;case s.C.VIDEO:e.video&&delete e.video;break;default:throw new Error("media type "+t+" is not currently supported")}r(H(e));var i={connectionModelId:e.connectionModelId,connectionModelLuid:e.connectionModelLuid,connectionType:e.connectionType,mediaType:t},a=M.add(i);r(B([Object.assign({},i,{luid:a})]))}))},ne=(e,t)=>i=>{if(null!=e&&e.luid){var s=w.getModel(t),{properties:r}=s,a=Object.assign({},r,{options:[...r.options].filter((t=>t.optionId!==e.id))});s.setAll(a),w.save(t,a,!0).then((()=>{i(V(e))}))}},oe=e=>(t,i)=>{var s=i().get("createSet"),r=s.get("optionSaveStatus").toJS(),a=s.get("mediaSaveStatus").toJS(),{options:n,studiableItemLuid:o}=e;r.promise.then((()=>{a.promise.then((()=>{var e=w.getModel(o),{properties:i}=e,s={};n.forEach((e=>{var t=C.a.getModel(e.luid);t.set("isCorrect",e.isCorrect),s[e.luid]=t.properties})),e.setAll({options:_(i.options,s)}),w.save(o,e.properties,!0).then((()=>{Object.keys(s).forEach((e=>{var i=s[e];t(Y([Object.assign({},i,{luid:e})]))}))}))}))}))},le=(e,t,i)=>(r,a)=>{var n=M.getModel(t),o=a().get("createSet").get("studiableMediaConnections").toJS(),l=a().get("createSet").get("multipleChoiceOptions").toJS(),d=[],{properties:c}=n;for(var h in c)h.match(/[Ll]uid$/)&&d.push(h);d.forEach((e=>{delete c[e]})),n.setAll(Object.assign({},e));var p=w.getModel(i),g=Object.assign({},p.properties,{promptMedia:m(p.properties.id,o),hintMedia:f(p.properties.id,o),options:v(p.properties,o,l)});g=function(e,t){var i=Object.assign({},e),{connectionType:r,connectionModelId:a}=t;switch(r){case s.Ab.MULTIPLE_CHOICE_OPTION:case s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION:i.options=u()(i.options.map((e=>{if(e.optionId===a){var i=Object.assign({},e);return r===s.Ab.MULTIPLE_CHOICE_OPTION&&(i.optionMedia=E(e.optionMedia,t)),r===s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION&&(i.explanationMedia=E(e.explanationMedia,t)),i}return e})),"optionId");break;case s.Ab.MULTIPLE_CHOICE_HINT:i.hintMedia=E(i.hintMedia,t);break;case s.Ab.MULTIPLE_CHOICE_PROMPT:i.promptMedia=E(i.promptMedia,t);break;default:throw new Error("connection type "+r+" is not yet supported")}return i}(g,e),p.setAll(Object.assign({},g));var _=w.save(i,g,!0);r(Z({luid:e.connectionModelLuid,promise:_})),_.then((i=>{var[a,n]=i,{properties:{lastModified:o,timestamp:l}}=n,u=Object.assign({},e,{luid:t,lastModified:o,timestamp:l});r(B([u])),e.connectionType===s.Ab.MULTIPLE_CHOICE_OPTION&&r(J({luid:null,promise:Promise.resolve(!0)})),e.mediaType===s.C.IMAGE&&r(K({image:null,isLoading:!1,connectionLuid:null,connectionType:null})),r(Z({luid:null,promise:Promise.resolve(!0)}))}))},ue=(e,t)=>{var{mediaConnection:i,type:r,value:a,studiableContainerId:n,connectionModelId:o,studiableItemLuid:l}=t,u=i.map((e=>e)).filter((e=>e.mediaType===r)),d=h()(u[0].luid),c={},p=r===s.C.IMAGE?Object.assign({code:a.code},a):{};switch(r){case s.C.TEXT:delete a.ttsUrl,delete a.ttsSlowUrl,c.text=a;break;case s.C.IMAGE:c.image=p;break;case s.C.VIDEO:c.video=Object.assign({},a,{code:a.code||null});break;default:throw new Error("media type not supported yet")}var g=Object.assign({studiableContainerType:s.Nb.SET,studiableContainerId:n,mediaType:r,connectionModelId:o,connectionType:u[0].connectionType},c);e(le(g,d,l))},de=e=>(t,i)=>{var{item:r,option:a,value:n,type:o}=e,l=i().get("createSet").get("setLuid"),d=i().get("createSet").get("studiableMediaConnections").toJS(),c=i().get("createSet").get("multipleChoiceOptions").toJS();$(h()(r.luid),l).then((e=>{R.getModel(h()(r.luid)).setAll({id:e.properties.id,lastModified:e.properties.lastModified});var i=function(e,t,i,r,a){var n=T.a.getModel(e),o=C.a.getModel(i),l=w.getModel(t),{properties:d}=n,{properties:c}=l;if(o.setAll({studiableContainerType:s.Nb.SET,studiableContainerId:d.id,studiableItemId:c.id}),o.properties.id)return Promise.resolve(o);var h=m(c.id,r),p=f(c.id,r),g=v(c,r,a),_=u()([...g,{isCorrect:!1,optionId:parseInt(i.split("-")[1],10),optionMedia:[],explanationMedia:[]}],"optionId");return l.setAll(Object.assign({},c,{promptMedia:h,hintMedia:p,options:_})),l.save(t)}(l,h()(r.luid),h()(a.luid),d,c);return t(J({luid:a.luid,promise:i})),i})).then((e=>{var i=e;if(e.properties.options){var s=e.properties.options[e.properties.options.length-1];(i=C.a.getModel(h()(a.luid))).setAll({id:s.optionId})}var u=T.a.getModel(l),d=R.getModel(h()(r.luid)),{properties:c}=u,{properties:p}=d,{properties:g}=i,{promptConnectionMedia:m,options:f}=r,{optionConnectionMedia:v,explanationConnectionMedia:_}=a;t(Q(Object.assign({},p,{luid:h()(r.luid)})));var E=m.map((e=>Object.assign({},e,{connectionModelId:p.id,studiableContainerId:c.id})));t(B(E));var b=v.map((e=>Object.assign({},e,{studiableContainerId:c.id,connectionModelId:g.id})));t(B(b));var S=f.map((e=>{var{luid:t}=e,i=C.a.getModel(h()(t)),{properties:s}=i,r=Object.assign({},s,{studiableItemId:g.studiableItemId,luid:t});return e.luid===a.luid&&(r=Object.assign({},g,{luid:t})),r}));if(t(Y(S)),_.length>0){var y=_.map((e=>Object.assign({},e,{connectionModelId:g.id})));t(B(y))}ue(t,{mediaConnection:v,type:o,value:n,studiableContainerId:c.id,connectionModelId:g.id,studiableItemLuid:h()(r.luid)})}))},ce=e=>(t,i)=>{var{item:s,value:r,type:a}=e,n=i().get("createSet").get("setLuid");$(h()(s.luid),n).then((e=>{var i=T.a.getModel(n),{properties:o}=i,{properties:l}=e,{promptConnectionMedia:u}=s;R.getModel(h()(s.luid)).setAll({id:e.properties.id,lastModified:e.properties.lastModified}),t(Q(Object.assign({},l,{luid:h()(s.luid)})));var d=u.map((e=>Object.assign({},e,{connectionModelId:l.id,studiableContainerId:o.id})));t(B(d));var{hintConnectionMedia:c}=s;if(c.length>0){var p=c.map((e=>Object.assign({},e,{connectionModelId:l.id})));t(B(p))}ue(t,{mediaConnection:u,type:a,value:r,studiableContainerId:o.id,connectionModelId:l.id,studiableItemLuid:h()(s.luid)});var{options:g}=s,m=g.map((e=>{var{luid:t}=e,i=C.a.getModel(h()(t)),{properties:s}=i;return Object.assign({},s,{studiableItemId:l.id,luid:t})}));t(Y(m))}))},he=e=>(t,i)=>{var{item:s,value:r,type:a}=e,{hintConnectionMedia:n}=s,o=i().get("createSet").get("setLuid"),l=T.a.getModel(o),{properties:u}=l;ue(t,{mediaConnection:n,type:a,value:r,studiableContainerId:u.id,connectionModelId:s.id,studiableItemLuid:h()(s.luid)})},pe=e=>(t,i)=>{var{value:s,type:r,option:a,item:n}=e,{explanationConnectionMedia:o}=a,l=i().get("createSet").get("setLuid"),u=T.a.getModel(l),{properties:d}=u;ue(t,{mediaConnection:o,type:r,value:s,studiableContainerId:d.id,connectionModelId:a.id,studiableItemLuid:h()(n.luid)})},ge=e=>t=>{var{file:i,selectedMediaConnection:r,parentStudiables:a}=e;if(["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e.file))>-1){var n=new FileReader;n.onload=e=>{var i=e.target?e.target.result:null;i&&i.length>0&&Object(U.d)(i).then((e=>{t(K({image:Object.assign({image_url:i},e),isLoading:!0,connectionLuid:r.connectionModelLuid,connectionType:r.connectionType}))}))},n.readAsDataURL(e.file)}var o=S.a.add({});S.a.save(o,i).then((e=>{var[i,n]=e,{properties:o}=n,{item:l,option:u}=a,d={code:o.code,url:o._secureLegacyUrl,width:o.width,height:o.height};switch(r.connectionType){case s.Ab.MULTIPLE_CHOICE_PROMPT:t(ce({item:l,value:Object.assign({},d),type:s.C.IMAGE}));break;case s.Ab.MULTIPLE_CHOICE_OPTION:t(de({item:l,option:h()(u),value:Object.assign({},d),type:s.C.IMAGE}));break;case s.Ab.MULTIPLE_CHOICE_HINT:t(he({item:l,value:Object.assign({},d),type:s.C.IMAGE}));break;case s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION:t(pe({item:l,option:h()(u),value:Object.assign({},d),type:s.C.IMAGE}))}})).catch((()=>{t(K({image:null,isLoading:!1,connectionLuid:null,connectionType:null})),t(q(!0))}))},me=i("h5WM"),fe=i("peh1"),ve=i("Aokv"),_e=Object(fe.createSelector)([e=>e.get("studiableItems"),e=>e.get("multipleChoiceOptions"),e=>e.get("studiableMediaConnections")],((e,t,i)=>{var s={studiableItems:e.toJS(),multipleChoiceOptions:t.toJS(),studiableMediaConnections:i.toJS()};return Object(ve.a)(s,new me.a(s),!0)})),Ee=i("rCsq"),be=i("FdmV"),Se=i("pn57"),Ce=Object(be.a)("createSet",{diagramImage:o.n,imageUploadStatus:e=>e.get("imageUploadStatus"),isEditingDiagramImage:o.u,numDiagramShapes:o.y,selectedMediaConnection:e=>{var t;return null==(t=e.get("selectedMediaConnection"))?void 0:t.toJS()},showImageUploadErrorModal:e=>e.get("showImageUploadErrorModal"),studiableMultipleChoiceQuestions:_e}),Te=Object(r.connect)(Ce,(e=>{var t=Object(Se.bindActionCreators)({addOptionsForStudiableItem:X,addOrUpdateStudiableMediaConnectionWithMedia:B,createStudiableItem:ee,deleteMultipleChoiceOption:ne,deleteStudiableMediaConnection:ae,moveStudiableItem:re,removeStudiableItem:se,saveMultipleChoiceOption:oe,toggleShowImageUploadErrorModal:q,toggleExplanation:ie,toggleHint:te,updateExplanationMedia:pe,updateHintMedia:he,updateOptionMedia:de,updateQuestionMedia:ce,updateSelectedMediaConnection:z,uploadImageMedia:ge},e);return Object.assign({},t)}))(n()(Ee.a)),ye=i("xhj2"),Ie=i("0PkO"),Ae=i("sccr"),Oe=i("bo+9"),we=i("dUl0"),De=i("uSb8"),Le=i("sWWp"),Re=i("BOZ9"),xe=i("iFR9"),Pe=i("DS/l"),Me=i("0j+G"),Ue=i("mCkr"),ke=(i("E9XD"),i("JPcv")),Ne=i("KkDn"),Fe=new Map,je=new Map;function Be(e,t){var{models:i}=R;return(null!==i?Object.keys(i):[]).map((i=>function(e,t,i){var r=R.getModel(t),{properties:a}=r;return Fe.set(a.id,t),i.get(t)||M.bulkAdd([{studiableContainerType:a.studiableContainerType,studiableContainerLuid:a.studiableContainerLuid,connectionModelLuid:a.luid,connectionModelId:a.id,connectionType:s.Ab.MULTIPLE_CHOICE_PROMPT,mediaType:s.C.TEXT}]),Object.assign({},a,{studiableContainerLuid:e,studiableContainerType:s.Nb.SET,luid:t})}(e,i,t)))}var Ve=e=>{var t=function(e){var{models:t}=M,i=new Map;return(null!==t?Object.keys(t):[]).forEach((t=>{var r=M.getModel(t),{properties:a}=r,{connectionModelLuid:n}=a,o=Object.assign({},a,{studiableContainerLuid:e,studiableContainerType:s.Nb.SET,luid:t});Object(Ne.a)(i,n,o)})),i}(e),i=Be(e,t),r=function(e,t){var{models:i}=C.a,r=null!==i?Object.keys(i):[],a=[],n=r.map((i=>{var r=C.a.getModel(i),{properties:n}=r,o=Object.assign({},n,{studiableContainerType:s.Nb.SET,studiableContainerLuid:e,luid:i}),l=Fe.get(n.studiableItemId);return l&&(o.studiableItemLuid=l),je.set(n.id,i),t.get(i)||a.push({studiableContainerType:o.studiableContainerType,studiableContainerLuid:o.studiableContainerLuid,connectionModelLuid:o.luid,connectionModelId:o.id,connectionType:s.Ab.MULTIPLE_CHOICE_OPTION,mediaType:s.C.TEXT}),o}));return a.length>0&&M.bulkAdd(a),n}(e,t),a=function(e){var{models:t}=M,i=new Map;(null!==t?Object.keys(t):[]).forEach((t=>{var r,a=M.getModel(t),{properties:n}=a,{connectionModelId:o,connectionType:l}=n,u=Object.assign({},n,{studiableContainerLuid:e,studiableContainerType:s.Nb.SET,luid:t});switch(l){case s.Ab.MULTIPLE_CHOICE_PROMPT:case s.Ab.MULTIPLE_CHOICE_HINT:r=Fe.get(o);break;case s.Ab.MULTIPLE_CHOICE_OPTION:case s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION:r=je.get(o)}r&&(u.connectionModelLuid=r);var d=n.connectionModelId+"_"+n.connectionType;Object(Ne.a)(i,d,u)}));var r=[],a=function(e,t){var i=t.map((e=>e.mediaType));d.a.studiableMediaConnections.SUPPORTED_MEDIA_TYPES.forEach((e=>{i.includes(e)||r.push({studiableContainerType:t[0].studiableContainerType,studiableContainerLuid:t[0].studiableContainerLuid,connectionModelLuid:t[0].connectionModelLuid,connectionModelId:t[0].connectionModelId,connectionType:t[0].connectionType,mediaType:e})}))};for(var[n,o]of i)a(0,o);var l=Array.from(i.values()).reduce(((e,t)=>e.concat(t)),[]);if(r.length>0){var u=M.bulkAdd(r),c=[];for(var h in u)c.push(Object.assign({},u[h],{luid:h}));return l.concat(c)}return l}(e),n=a&&a.length>0?a[0]:null;return{imageUploadStatus:{image:null,isLoading:!1,connectionLuid:null,connectionType:null},mediaSaveStatus:{luid:null,promise:Promise.resolve(!0)},optionSaveStatus:{luid:null,promise:Promise.resolve(!0)},setLuid:e,studiableItems:i,studiableMediaConnections:a,multipleChoiceOptions:r,selectedMediaConnection:n,showImageUploadErrorModal:!1}},He={[N.ADD_OPTION]:(e,t)=>{var{payload:i}=t;return e.updateIn(["multipleChoiceOptions"],(e=>e.concat(Object(ke.fromJS)(i))))},[N.ADD_OR_UPDATE_STUDIABLE_MEDIA_CONNECTION]:(e,t)=>{var{payload:i}=t,r=e.get("studiableMediaConnections"),a=[],n=r,o=function(e){var t=n.findIndex((t=>t.get("luid")===e.luid));if(t>-1){var i=n.get(t);e.mediaType===s.C.TEXT&&(i=i.set("text",Object(ke.Map)()));var r=i.mergeDeep(e);n=n.set(t,r)}else a.push(e)};for(var l of i)o(l);return e.set("studiableMediaConnections",n.concat(Object(ke.fromJS)(a)))},[N.ADD_STUDIABLE_ITEM]:(e,t)=>{var{payload:i}=t;return e.updateIn(["studiableItems"],(e=>e.push(Object(ke.fromJS)(i))))},[N.DELETE_MULTIPLE_CHOICE_OPTION]:(e,t)=>{var{payload:i}=t,r=e.get("multipleChoiceOptions"),a=e.get("studiableMediaConnections"),n=r.filter((e=>e.get("luid")!==i.luid)),o=a.filter((e=>{var t=e.get("connectionType");return t!==s.Ab.MULTIPLE_CHOICE_OPTION&&t!==s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION||e.get("connectionModelLuid")!==i.luid}));return e.set("multipleChoiceOptions",n).set("studiableMediaConnections",o)},[N.DELETE_STUDIABLE_MEDIA]:(e,t)=>{var{payload:i}=t,s=e.get("studiableMediaConnections"),r=i.luid;return r&&(s=s.filter((e=>e.get("luid")!==r))),e.set("studiableMediaConnections",s)},[N.DELETE_STUDIABLE_ITEM]:(e,t)=>{var{payload:i}=t,r=e.get("studiableItems"),a=e.get("multipleChoiceOptions"),n=e.get("studiableMediaConnections"),o=a.filter((e=>e.get("studiableItemLuid")===i.luid)).map((e=>e.get("luid"))),l=r.filter((e=>e.get("luid")!==i.luid)),u=a.filter((e=>e.get("studiableItemLuid")!==i.luid)),d=n.filter((e=>{var t=e.get("connectionType");if(t===s.Ab.MULTIPLE_CHOICE_PROMPT||t===s.Ab.MULTIPLE_CHOICE_HINT)return e.get("connectionModelLuid")!==i.luid;if(t===s.Ab.MULTIPLE_CHOICE_OPTION||t===s.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION){var r=e.get("connectionModelLuid");return r&&!o.includes(r)}return!0}));return e.set("studiableItems",l).set("multipleChoiceOptions",u).set("studiableMediaConnections",d)},[N.MOVE_STUDIABLE_ITEM]:(e,t)=>{var{payload:i}=t,s=e.get("studiableItems"),r=s.findIndex((e=>e.id===i.id)),a=h()(s.get(r)),n=s.findIndex((e=>e.id===i.idAtNewPosition)),o=s;return o=r<n?s.delete(r).insert(n,a):s.delete(r).insert(n--,a),e.set("studiableItems",o)},[N.SHOW_IMAGE_UPLOAD_ERROR_MODAL]:(e,t)=>{var{payload:i}=t;return e.set("showImageUploadErrorModal",i)},[N.SET_IMAGE_UPLOADING_STATUS]:(e,t)=>{var{payload:i}=t;return e.set("imageUploadStatus",Object(ke.fromJS)(i))},[N.UPDATE_MEDIA_SAVE_STATUS]:(e,t)=>{var{payload:i}=t;return e.set("mediaSaveStatus",Object(ke.fromJS)({luid:i.luid,promise:i.promise}))},[N.UPDATE_MULTIPLE_CHOICE_OPTION]:(e,t)=>{var{payload:i}=t,s=e.get("multipleChoiceOptions"),r=[],a=s,n=function(e){var t=a.findIndex((t=>t.get("luid")===e.luid));if(t>-1){var i=a.get(t).mergeDeep(Object(ke.fromJS)(e));a=a.set(t,i)}else r.push(e)};for(var o of i)n(o);return e.set("multipleChoiceOptions",a.concat(Object(ke.fromJS)(r)))},[N.UPDATE_MULTIPLE_CHOICE_OPTION_SAVE_STATUS]:(e,t)=>{var{payload:i}=t;return e.set("optionSaveStatus",Object(ke.fromJS)({luid:i.luid,promise:i.promise}))},[N.UPDATE_STUDIABLE_ITEM]:(e,t)=>{var{payload:i}=t,s=e.get("studiableItems"),r=s.findIndex((e=>e.get("luid")===i.luid));if(r>=0){var a=s.set(r,Object(ke.fromJS)(i));return e.set("studiableItems",a)}return e},[N.UPDATE_SELECTED_MEDIA_CONNECTION]:(e,t)=>{var{payload:i}=t;return e.set("selectedMediaConnection",Object(ke.fromJS)(i))}};function We(e){var t=[],i=[];return e.forEach((e=>{var r=function(e){var{id:t,lastModified:i,rank:r,studiableContainerId:a,studiableContainerType:n,timestamp:o}=e;return{id:t,lastModified:i,rank:r,studiableContainerId:a,studiableContainerType:n,timestamp:o,type:s.zb.MULTIPLE_CHOICE_QUESTION}}(e);t.push(r),e.options.forEach((t=>{var s=function(e,t,i){var{optionId:s,isCorrect:r,rank:a}=e;return{id:s,isCorrect:r,lastModified:i,rank:a,studiableItemId:t}}(t,e.id,e.lastModified);i.push(s)}))})),{legacyStudiableItems:t,legacyMultipleChoiceOptions:i}}var Ge=i("R7uB"),qe=i.n(Ge),Ke=i("zK28"),ze=i("QLaP"),Qe=i.n(ze),Ye=i("TX86"),Je=i.n(Ye),Ze=i("q1tI"),Xe=i.n(Ze),$e=i("yJYf"),et=i("k36G"),tt=i("5jMn"),it={};Object.assign(it,A.a),it.init(tt.a);var st=it,rt=i("qCfx"),at=i("DQwC"),nt=i("L2X5"),ot=i("Z23Y"),lt=i("h4pu"),ut=i("WHvC");function dt(){Qe()(Ke.a.createSetData,"Create set data object required to load the create set page");var{canEditRichText:e,diagramImage:t,diagramImageRef:i,diagramShapes:a,isDiagramSet:n,isMobileWebView:l,maxAllowedDiagramShapeCount:u,misc:d,setContentType:c,shouldLogForRichTextDebugging:h,shouldShowMCQUpsell:p,shouldShowOCRCreateSetModal:g,shouldShowTeacherCustomDistractorCreation:m,shouldShowVideoExplanationCreation:f,shouldShowTooltipAudio:v,shouldShowTooltipDiagram:_,shouldShowTooltipImage:E,shouldShowTooltipRichText:y,shouldUseStudiableServiceToDeleteDiagramShape:I,signupOrigin:A,user:O}=Ke.a.createSetData,{classSets:D,classes:L,definitionCustomAudios:x,images:P,set:U,studiableMediaConnections:k,studiableItemDocuments:N,termImages:F,terms:j,wordCustomAudios:B}=Ke.a.createSetData,V=!(!U||0!==U.publishedTimestamp),H=!!O,{canEditPermissions:W,canUseDiagramUpload:G,canUseImageUpload:q,canUsePremiumDiagramFeatures:K,canUseVoiceRecording:z,classToAddTo:Q,didJustUpgrade:Y,folderToAddTo:J,hasCreatedSets:Z,hideAutosavePrompt:X,isConfirmed:$,isIOS:ee,isMac:te,isUnderAge:ie,recentLanguages:se,shouldSaveDiagramShapeImmediately:re,shouldSeeDiagramBlurTooltip:ae,shouldShowAd:ne,voiceRecordingConfig:oe,voiceRecordingUpsellImage:le}=d,ue=ie&&!$?s.rb.NOT_PUBLIC:s.rb.PUBLIC_ACCESS;U||(U={accessType:ue}),j||(j=[]),P||(P=[]),F||(F=[]),B||(B=[]),x||(x=[]),L||(L=[]),k||(k=[]),D||(D=[]),Q&&D.push({classId:Q}),N||(N=[]);var de=[];J&&de.push({folderId:J});var ce=T.a.add(U);Pe.a.setup(ce,U),Ue.a.setup(O);var he={[ce]:U},pe=st.bulkAdd(L),ge=et.a.bulkAdd(D),me=nt.a.bulkAdd(de),fe=lt.a.bulkAdd(j),ve=rt.a.bulkAdd(B),_e=rt.a.bulkAdd(x),Ee=S.a.bulkAdd(P),be=at.a.bulkAdd(a||[]),Se=t?S.a.add(t):null,Ce=i?ot.a.add(i):null,{legacyStudiableItems:Ne,legacyMultipleChoiceOptions:Fe}=We(N);R.bulkAdd(Ne),C.a.bulkAdd(Fe),M.bulkAdd(k),w.bulkAdd(N);var je=!!t||"diagrams"===c;rt.a.configure(oe),Ae.a.setup(pe),Ie.a.setup(ge,pe,he),De.a.setup(me),Le.a.setup(Ee),Me.b.setup(fe,ve,_e,Ee,je),Oe.a.setup(Object.assign({},ve,_e)),xe.a.setup(U,pe,ge,Ie.a.getClassMap(),W),we.a.setup(),Re.a.setup(),$e.a.setup({ClassSetSyncer:et.a,ClassSyncer:st,CustomAudioSyncer:rt.a,FolderSetSyncer:nt.a,ImageSyncer:S.a,MultipleChoiceOptionSyncer:C.a,SetSyncer:T.a,StudiableItemSyncer:R,StudiableItemDocumentSyncer:w,StudiableMediaConnectionSyncer:M,TermSyncer:lt.a});var Be={canEditPermissions:W,canEditRichText:e,canUseImageUpload:q,canUsePremiumDiagramFeatures:K,canUseVoiceRecording:z,didJustUpgrade:Y,hasCreatedSets:Z,hideAutosavePrompt:X,isConfirmed:$,isDiagramSet:n,isIOS:ee,isMac:te,isMobileWebView:l,isResumingCreate:V,isSignedIn:H,isUnderAge:ie,recentLanguages:se,setContentType:c,shouldLogForRichTextDebugging:h,shouldShowAd:ne,shouldShowMCQUpsell:p,shouldShowOCRCreateSetModal:g,shouldShowTeacherCustomDistractorCreation:m,shouldShowVideoExplanationCreation:f,shouldShowTooltipAudio:v,shouldShowTooltipDiagram:_,shouldShowTooltipImage:E,shouldShowTooltipRichText:y,signupOrigin:A,voiceRecordingUpsellImage:le},Ge=window.document.querySelector("#SetPageTarget"),qe={canUseDiagramUpload:G,canUseImageUpload:q,canUsePremiumDiagramFeatures:K,canUseVoiceRecording:z,diagramImage:t,diagramImageLuid:Se,diagramImageRefLuid:Ce,diagramShapes:be,isUnderAge:ie,isTeacher:(null==O?void 0:O.selfIdentifiedTeacherStatus)===s.qb.TEACHER,maxAllowedDiagramShapeCount:u,recentLanguages:se,setContentType:c,setLuid:ce,shouldSaveDiagramShapeImmediately:re,shouldSeeDiagramBlurTooltip:ae,shouldShowOCRCreateSetModal:g,shouldShowTooltipDiagram:_,shouldUseStudiableServiceToDeleteDiagramShape:I,terms:fe},ze=Object(b.handleActions)(Object.assign({},o.c,He),Object(ke.fromJS)(Object.assign({},qe,Ve(qe.setLuid))));ye.a.register({createSet:ze}),Pe.a.change(),Object(ut.a)(Xe.a.createElement(r.Provider,{store:ye.b},Xe.a.createElement(Te,Be)),Ge)}Je.a.filter=function(e){var t=e.target||e.srcElement,{tagName:i}=t,s=t.getAttribute("class"),r="INPUT"!==i&&"SELECT"!==i,a=s&&s.indexOf("js-keymaster-allow")>=0;return r||a},qe()((()=>{QWait("Quizlet.createSetData",dt)}))},dQpi:function(e,t,i){var s=i("yGk4"),r=i("vN+2"),a=i("rEGp"),n=s&&1/a(new s([,-0]))[1]==1/0?function(e){return new s(e)}:r;e.exports=n},dUl0:function(e,t,i){"use strict";(function(e){i("zKZe"),i("FZtP");var s=i("7uva"),r=i("pfAI"),a=i("FAB2"),n=i("QMP1"),o=i("IU46"),l=i("LwoS"),u=i("nmax"),d=Object.assign({errorQueue:[],activeError:null,setup(){this.bindActions(s.a.actions.DISMISS,this._dismiss),this.bindActions(s.a.actions.CREATE,this._create),this.bindActions(r.a.CREATE_FAILURE,this._imageUploadError),this.bindActions(r.a.DROP_FAILURE,this._imageDropError),this.bindActions(r.a.BULK_UPLOAD_FAILURE,this._bulkImageUploadError),this.bindActions(a.a.PUBLISH_FAILURE,this._publishFailure),this.bindActions(a.a.UPDATE_FAILURE,this._setUpdateFailure),this.bindActions(a.a.DISCARD_FAILURE,this._discardFailure),this.bindActions(n.b.UPDATE_FAILURE,this._termUpdateFailure),this.bindActions(n.b.CREATE_IMAGE_FAILURE,this._termImageCreateFailure)},getActiveError(){return this.activeError},_create(e){var{title:t,messages:i,fatal:s}=e;this._pushError(t,i,s)},_dismiss(){this.activeError=this.errorQueue.shift()},_discardFailure(t){var{error:i}=t,s=e("create_set.error_alert.titles.discard");i instanceof o.a?this._fatalError(s,i):this._pushError(s,i)},_publishFailure(t){var{error:i,model:r}=t,a=e("create_set.error_alert.titles.publish");if(i instanceof o.a)this._fatalError(a,i);else{var n=[];i instanceof l.a?r.getValidationErrors().filter((e=>!(e.identifier in s.a.ignoredValidationErrors.set))).forEach((e=>n.push(e))):i&&n.push(i.message),n.length>0&&this._pushError(a,n)}},_imageUploadError(t){var{error:i,model:s}=t,r=e("create_set.error_alert.titles.image_upload"),a=e("create_set.error_alert.please_try_again");i instanceof o.a?this._fatalError(r,i):i instanceof l.a?this._pushError(r,s.getValidationErrors()):i&&this._pushError(r,[a])},_imageDropError(t){var{error:i}=t,s=e("create_set.error_alert.titles.image_upload");this._pushError(s,[i.message])},_bulkImageUploadError(t){var{error:i}=t,s=e("create_set.error_alert.titles.bulk_upload"),r=i.files.map((e=>e.name));this._pushError(s,[i.message],!1,r)},_termUpdateFailure(t){var{error:i,models:s}=t,r=e("create_set.error_alert.titles.set_update");if(i instanceof o.a)this._fatalError(r,i);else{var a=[];i instanceof l.a?Object.keys(s).forEach((e=>{s[e].getValidationErrors().forEach((e=>a.push(e)))})):i&&a.push(i.message),a.length>0&&this._pushError(r,a)}},_setUpdateFailure(t){var{error:i,model:r}=t,a=e("create_set.error_alert.titles.set_update"),n=[];i instanceof o.a?this._fatalError(a,i):(i instanceof l.a?r.getValidationErrors().filter((e=>!(e.identifier in s.a.ignoredValidationErrors.set))).forEach((e=>n.push(e))):i&&n.push(i.message),n.length>0&&this._pushError(a,n))},_termImageCreateFailure(t){var{error:i,model:s}=t,r=e("create_set.error_alert.titles.add_image"),a=[];i instanceof o.a?this._fatalError(r,i):(i instanceof l.a?s.getValidationErrors().forEach((e=>a.push(e))):i&&a.push(e("create_set.error_alert.please_try_again")),a.length>0&&this._pushError(r,a))},_fatalError(e,t){this._pushError(e,[t.message],!0)},_pushError(e,t,i,s){void 0===t&&(t=[]),void 0===i&&(i=!1),void 0===s&&(s=[]);var r={title:e,messages:t,fatal:i,secondaryMessages:s};this.activeError?this.errorQueue.push(r):this.activeError=r}},u.a);d.init(),t.a=d}).call(this,i("nrsj").default)},dwfE:function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ");var s=i("mr8R");t.a=Object(s.a)((()=>i.e("report_image_flow_modal_lazy").then(i.bind(null,"PwUS"))))},e6z1:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("FuVJ");class r extends s.a{getPath(){return this._legacyUrl}getSquarePath(){return this._legacyUrlSquare}getSecurePath(){return this._secureLegacyUrl}getSmallSecurePath(){return this._secureLegacyUrlSmall}getSquareSecurePath(){return this._secureLegacyUrlSquare}}},efxM:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return E}));var s,r=i("baRz"),a=i("r7gd"),n=i("LszE"),o=i("dxfC"),l=i("zK28"),u=i("q1tI"),d=i.n(u),c=i("T3U7"),h=i("v+BM"),p=Object(r.styled)("section")({name:"Content",class:"cosdz4w"}),g=Object(r.styled)("div")({name:"Sidebar",class:"s1oaxobu",vars:{"s1oaxobu-0":[e=>e.isLogin?a.g.$100:a.d.$100]}}),m=Object(r.styled)("div")({name:"AuthForm",class:"avsxyiq"}),f=Object(r.styled)("div")({name:"AuthFormContent",class:"a1pcnvbg"}),v=Object(r.styled)("div")({name:"AuthFormTabs",class:"auu3mjs"}),_=Object(r.styled)("h3")({name:"AuthFormTab",class:"a1cdxe01",vars:{"a1cdxe01-1":[e=>e.isActive?a.e.$200:a.f.$500]}});function E(t){var{children:i,currentTab:r,includeCloseButton:a,isOpen:u,onClose:E,onOpenLoginFromSignup:b,preventCloseOnOverlayClick:S,redir:C}=t,T=d.a.createElement("svg",{className:"anqpypq"},d.a.createElement("noscript",null),d.a.createElement("use",{xlinkHref:"#accents_underline"}),d.a.createElement("noscript",null)),y=d.a.createElement(v,{role:"tablist"},d.a.createElement(_,{isActive:r===s.Signup,onClick:()=>{r!==s.Signup&&(Object(c.a)("auth-modal-tab-click",s.Signup),Object(h.a)("signup-tab-on-login-modal",l.a.actionString,{redir:C}))},role:"tab"},e("global.header.sign_up.button"),r===s.Signup?T:null),d.a.createElement(_,{isActive:r===s.Login,onClick:()=>{r!==s.Login&&(Object(c.a)("auth-modal-tab-click",s.Login),b?b():QWait("Quizlet.loginModal",(()=>l.a.openLoginModal({includeCloseButton:a,preventCloseOnOverlayClick:S,redir:C}))))},role:"tab"},e("global.header.log_in.button"),r===s.Login?T:null));return d.a.createElement(o.a,{className:"SignupPromptModalNew--fullPageExperiment",includeCloseButton:a,isOpen:u,onClose:E,preventCloseOnOverlayClick:S,variant:"xl"},d.a.createElement(p,null,d.a.createElement(g,{isLogin:r===s.Login},d.a.createElement(n.a,{className:"srk79j3"})),d.a.createElement(m,null,d.a.createElement(f,null,y,i))))}!function(e){e.Signup="signup",e.Login="login"}(s||(s={})),i("v0OC")}).call(this,i("nrsj").default)},elj8:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=e=>"flashcards"===e||"diagrams"===e},fs1E:function(e,t,i){"use strict";var s=i("YUt4"),r=i("YJee"),a=i("uSb8"),n={folderSetSyncer:i("L2X5").a,bulkUpdate(e){return s.a.viewAction(r.a.actions.BULK_UPDATE,{luidToProps:e}),this.folderSetSyncer.bulkSave(e)},getUnsyncedFolderSets(e){var t={},i=a.a.getAll();for(var s in i){var r=i[s];r.setId||(t[s]={folderId:r.folderId,setId:e})}return t}};t.a=n},fwul:function(e,t,i){"use strict";i("4mDm"),i("3bBZ");var s=i("MMJ4"),r=i("3YfB"),a=i("nCwC"),n=i("FenW"),o=i("jE4y"),l=i("YUt4"),u=i("qCfx"),d=i("5Vd8"),c=i("h4pu"),h=20*r.g;t.a=new class{constructor(){this.setLuid=null,this.termLuid=null,this.termSide=null,this.setSyncer=d.a,this.termSyncer=c.a,this.customAudioSyncer=u.a}record(e,t,i){return this.setLuid=e,this.termLuid=t,this.termSide=i,l.a.viewAction(o.a.actions.RECORD,{setLuid:this.setLuid,termLuid:this.termLuid,termSide:this.termSide}),this.customAudioSyncer.record()}stop(){return l.a.viewAction(o.a.actions.STOP),this.customAudioSyncer.stop()}cancel(){return l.a.viewAction(o.a.actions.CANCEL),this.customAudioSyncer.cancel()}updatePermissionStatus(e){l.a.viewAction(o.a.actions.PERMISSION_UPDATE,{status:e}),this.customAudioSyncer.permissionGranted=e===s.d.GRANTED}updateRecorderImplementation(e){l.a.viewAction(o.a.actions.IMPLEMENTATION_UPDATE,{implementation:e}),this.customAudioSyncer.recorderImplementation=e}getVolume(){l.a.viewAction(o.a.actions.GET_VOLUME,{volume:this.customAudioSyncer.getVolume()})}needsPermission(){return l.a.viewAction(o.a.actions.NEEDS_PERMISSION),this.customAudioSyncer.needsPermission()}preloadAudio(e,t){return void 0===t&&(t={}),this.customAudioSyncer.preloadAudio(e,t)}playAudio(e,t){return void 0===t&&(t={}),this.customAudioSyncer.playAudio(e,t)}stopAllAudio(){return this.customAudioSyncer.stopAllAudio()}saveError(){this.onError(s.a.SAVE_ERROR,{})}dismissUpsell(){l.a.viewAction(o.a.actions.DISMISS_UPSELL)}onError(e,t){l.a.serverAction(o.a.actions.ERROR,{code:e,data:t})}onSave(e){return this.create(e.api_response,this.setLuid,this.termLuid,this.termSide)}onCancel(){l.a.serverAction(o.a.actions.CANCEL_SUCCESS)}onStop(e){l.a.serverAction(o.a.actions.STOP_SUCCESS,{duration:e})}onUploadFinish(){l.a.serverAction(o.a.actions.UPLOAD_FINISH)}init(){var e=this;return l.a.viewAction(o.a.actions.INIT),this.customAudioSyncer.configureRecorder({onCancel:()=>this.onCancel(),onError:function(t,i){void 0===i&&(i={}),clearTimeout(e.waitingForSaveTimeout),e.customAudioSyncer.endSyncing(),e.onError(t,i)},onIsUsable:e=>this.updateRecorderImplementation(e),onNotUsable:()=>this.updateRecorderImplementation(s.b.NONE),onPermissionDenied:()=>this.updatePermissionStatus(s.d.DENIED),onReady:()=>this.updatePermissionStatus(s.d.GRANTED),onSave:e=>(clearTimeout(this.waitingForSaveTimeout),this.customAudioSyncer.endSyncing(),this.onSave(e)),onStop:e=>(this.waitingForSaveTimeout=window.setTimeout((()=>this.saveError()),h),this.onStop(e)),onUploadFinish:()=>(this.customAudioSyncer.beginSyncing(),this.onUploadFinish())})}create(e,t,i,r){var a=this.customAudioSyncer.add(e),n={},u=this.termSyncer.getModel(i).get(r);u&&(n.text=u);var d=this.setSyncer.getModel(t).get("word"===r?"wordLang":"defLang");d&&(n.language=d);var c=(e,s)=>(l.a.viewAction(o.a.actions.CREATE,{luid:e,model:s,termLuid:i,setLuid:t,termSide:r}),this.updateTermCustomAudio(e,t,i,r));if(Object.keys(n).length)this.customAudioSyncer.save(a,n).then((e=>{var[t,i]=e;return c(t,i)})).catch((e=>{var[t]=e;this.onError(s.a.SAVE_ERROR,t)}));else{var h=this.customAudioSyncer.getModel(a);c(a,h)}return a}updateTermCustomAudio(e,t,i,r){return a.a.maybeCreateSet(t).then((e=>n.a.maybeCreateTerm(i,e))).then((t=>{var s=this.customAudioSyncer.getModel(e).get("id"),a="word"===r?{wordCustomAudioId:s}:"definition"===r?{definitionCustomAudioId:s}:{};this.termSyncer.save(i,a,!0),l.a.serverAction(o.a.actions.CREATE_SUCCESS,{customAudioLuid:e,termLuid:i,termSide:r})})).catch((e=>{this.onError(s.a.SAVE_ERROR,e)})),e}delete(e,t,i){l.a.viewAction(o.a.actions.DELETE,{customAudioLuid:i,termLuid:e,termSide:t});var s="word"===t?"wordCustomAudioId":"definitionCustomAudioId";return this.termSyncer.save(e,{[s]:null})}}},gA6y:function(e,t,i){"use strict";function s(e){return window.document.activeElement===e}i.d(t,"a",(function(){return s}))},gOCb:function(e,t,i){i("dG/n")("replace")},gkHh:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return y}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("ToJy"),i("nXOR")),n=i("FFEN"),o=i("vlgG"),l=i("qiyg"),u=i("hmZ7"),d=i("ifSZ"),c=i("p5lF"),h=i("q1tI"),p=i.n(h),g=i("yG4Z"),m=i.n(g),f=i("T3U7"),v=i("EFuM");function _(e){e.stopPropagation(),e.preventDefault()}var E=Object.keys(l.allLanguages),b=null,S=null,C=null;function T(e,t){if(l.allLanguages[e]){var i=Object(d.a)(e),s=Object(d.a)(t);return Object(c.a)(i,s)}return-1}class y extends p.a.PureComponent{constructor(){super(...arguments),this.onChosenLang=e=>{if(e)return this.selectLang(e.value)},this.onMobileSelectLang=e=>this.selectLang(e.currentTarget.value),this.inputRenderer=t=>(delete t.onBlur,p.a.createElement("div",{className:"LanguageSelect-input"},p.a.createElement(o.a,r()({},t,{disabled:!1,placeholder:e("create_set.language_prompt.search_placeholder"),type:"text"}))))}componentDidUpdate(){this.props.disableAutofocus||this.openSelect()}getPlaceholderKey(){return this.props.side+"-placeholder"}getAllLangKeyPrefix(){return this.props.side+"-all"}getFrequentLangKeyPrefix(){return this.props.side+"-frequent"}getYourLangKeyPrefix(){return this.props.side+"-yours"}renderFrequentLang(e){return S||(S=l.frequentLanguages.slice(0).sort(T).filter((e=>this.props.recentLanguages.indexOf(e)<0&&this.shouldShowLang(e))).map((t=>({label:Object(d.a)(t),value:t,key:e+"-"+t})))),S}renderHtmlOptions(e){return e.map((e=>{var{key:t,label:i,value:s}=e;return p.a.createElement("option",{key:t,value:s},i)}))}renderAllLang(e){return b||(b=E.sort(T).filter((e=>this.props.recentLanguages.indexOf(e)<0&&l.frequentLanguages.indexOf(e)<0&&this.shouldShowLang(e))).map((t=>({label:Object(d.a)(t),value:t,key:e+"-"+t})))),b}renderYourLang(e){return C||(C=this.props.recentLanguages.slice(0).sort(T).filter((e=>this.shouldShowLang(e))).map((t=>({label:Object(d.a)(t),value:t,key:e+"-"+t})))),C}render(){var t=this.getYourLangKeyPrefix(),i=this.getFrequentLangKeyPrefix(),s=this.getAllLangKeyPrefix(),r=this.getPlaceholderKey(),n=this.renderYourLang(t),o=this.renderFrequentLang(i),l=this.renderAllLang(s),u=this.props.lang||"",d=[];return d.push({label:e("create_set.language_prompt.your_languages_title"),type:"header"}),(d=d.concat(n)).push({label:e("create_set.language_prompt.top_quizlet_languages_title"),type:"header"}),(d=d.concat(o)).push({label:e("create_set.language_prompt.all_languages_title"),type:"header"}),d=d.concat(l),p.a.createElement("div",{className:"LanguageSelect"},p.a.createElement(a.a,{above:"m"},(a=>a&&!Object(v.j)()?p.a.createElement("div",{className:"LanguageSelect-reactSelect"},p.a.createElement(m.a,{autofocus:!0,clearable:!1,disabled:this.props.disabled,inputRenderer:this.inputRenderer,noResultsText:e("create_set.language_prompt.no_results_found"),onChange:this.onChosenLang,openAfterFocus:!0,openOnFocus:!0,optionRenderer:this.optionRenderer,options:d,placeholder:p.a.createElement(p.a.Fragment,null),ref:e=>{this.select=e},searchable:!0,value:u,valueRenderer:this.valueRenderer})):p.a.createElement("select",{"aria-label":e("create_set.language_prompt.choose_language"),className:"LanguageSelect-mobileSelect",disabled:this.props.disabled,onChange:this.onMobileSelectLang,onClick:_,tabIndex:-1,value:u},p.a.createElement("option",{key:r,value:""},e("create_set.language_prompt.choose_language")),p.a.createElement("option",{disabled:!0,key:t},e("create_set.language_prompt.your_languages_title")),this.renderHtmlOptions(n),p.a.createElement("option",{disabled:!0,key:i},e("create_set.language_prompt.top_languages_title")),this.renderHtmlOptions(o),p.a.createElement("option",{disabled:!0,key:s},e("create_set.language_prompt.all_languages_title")),this.renderHtmlOptions(l)))))}shouldShowLang(e){return this.props.showInvisibleLangs||l.invisibleLanguages.indexOf(e)<0}valueRenderer(){return null}optionRenderer(e){var{key:t,label:i,type:s}=e;return"header"===s?p.a.createElement("div",{className:"LanguageSelect-optionGroupHeader",key:t},p.a.createElement(n.a,{deprecatedStyle:!0,size:6},i)):p.a.createElement("div",{className:"LanguageSelect-option",key:t},i)}openSelect(){return this.select&&this.select.focus()}selectLang(e){e&&e!==this.props.lang&&(this.props.shouldUpdateStore&&u.a.updateLang(this.props.setLuid,this.props.side,e,this.props.otherSideLang),Object(f.a)("create_set_lang_detect_select",{langCode:e}),this.props.onSelectLang&&this.props.onSelectLang(this.props.side,e)),this.props.onHideLangSelect()}}y.defaultProps={disableAutofocus:!1,shouldUpdateStore:!0,showInvisibleLangs:!1,width:"100%"}}).call(this,i("nrsj").default)},h4pu:function(e,t,i){"use strict";i("zKZe");var s=i("RVJv");class r extends s.a{}r.URL_BASE="terms",r.MODEL_NAME="term",r.PARTITION_COLUMN="setId";var a=i("PYQB"),n=Object.assign({},a.a);n.init(r),n.setShouldSyncDelay(!0);t.a=n},h5WM:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("4mDm"),i("3bBZ"),i("FZtP");var s=i("KkDn");class r{constructor(e){this.mediaConnectionsMap=new Map;var t=null==e?void 0:e.studiableMediaConnections;t&&t.forEach((e=>{var t="connectionModelLuid"in e?e.connectionModelLuid:e.connectionModelId;Object(s.a)(this.mediaConnectionsMap,t,e)}))}getMediaConnectionByMediaOwnerId(e,t){var i=[];return(this.mediaConnectionsMap.get(e)||[]).filter((e=>e.connectionType===t)).forEach((e=>{i.push(e)})),i}}},hAIH:function(e,t,i){"use strict";var s=i("wLt/"),r=i("FRoV"),a=i("q1tI"),n=i.n(a);class o extends n.a.PureComponent{render(){return n.a.createElement(r.a,{hasCreatedSets:!1,hasError:this.props.side===s.b?this.props.hasWordLangError:this.props.hasDefLangError,lang:this.props.side===s.b?this.props.wordLang:this.props.defLang,otherSideLang:this.props.side===s.b?this.props.defLang:this.props.wordLang,recentLanguages:this.props.recentLanguages,setLuid:this.props.setLuid,shouldUpdateStore:!0,side:this.props.side,viewOnly:!1})}}var l=i("xJ/4"),u=i("Vg22"),d=i("FdmV"),c=Object(d.a)("createSet",{defLang:l.D,hasDefLangError:l.r,hasWordLangError:l.t,recentLanguages:l.B,setLuid:l.E,wordLang:l.F});t.a=Object(u.connect)(c)(o)},hmZ7:function(e,t,i){"use strict";var s=i("nCwC"),r=i("FenW"),a=i("1iNE"),n=i.n(a),o={updateLang(e,t,i,a){s.a.updateLang(e,t,i);var n="word"===t?i:a,o="word"===t?a:i;return r.a.transformAllTermsText(e,n,o)},bulkUpdateAndPublish:(e,t,i)=>(s.a.publish(),0===n()(i)?s.a.publishSync(e,t):r.a._saveUpdatesWithoutChain(e,i,!0).then(r.a.bulkUpdateSuccess).then((()=>s.a.publishSync(e,t))).catch(r.a.bulkUpdateFailure))};t.a=o},hzdC:function(e,t,i){(function(t,s){
/*! @vimeo/player v2.10.0 | (c) 2019 Vimeo | MIT License | https://github.com/vimeo/player.js */
var r;i("UxlC"),i("4mDm"),i("3bBZ"),i("JfAA"),i("Ew+T"),i("E9XD"),i("5s+n"),i("FZtP"),r=function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var r=void 0!==t&&"[object global]"==={}.toString.call(t);function a(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function n(e){return Boolean(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}function o(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function l(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,i=e.url,s=t||i;if(!s)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(o(s))return"https://vimeo.com/".concat(s);if(l(s))return s.replace("http:","https:");if(t)throw new TypeError("“".concat(t,"” is not a valid video id."));throw new TypeError("“".concat(s,"” is not a vimeo.com url."))}var d=void 0!==Array.prototype.indexOf,c="undefined"!=typeof window&&void 0!==window.postMessage;if(!(r||d&&c))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var h="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};
/*!
   * weakmap-polyfill v2.0.0 - ECMAScript6 WeakMap polyfill
   * https://github.com/polygonplanet/weakmap-polyfill
   * Copyright (c) 2015-2016 polygon planet <polygon.planet.aqua@gmail.com>
   * @license MIT
   */
!function(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,i=function(e,t,i){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:i}):e[t]=i};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",a("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function r(e,i){if(!s(e)||!t.call(e,"_id"))throw new TypeError(i+" method called on incompatible receiver "+typeof e)}function a(e){return e+"_"+n()+"."+n()}function n(){return Math.random().toString().substring(2)}return i(e.prototype,"delete",(function(e){if(r(this,"delete"),!s(e))return!1;var t=e[this._id];return!(!t||t[0]!==e||(delete e[this._id],0))})),i(e.prototype,"get",(function(e){if(r(this,"get"),s(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}})),i(e.prototype,"has",(function(e){if(r(this,"has"),!s(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)})),i(e.prototype,"set",(function(e,t){if(r(this,"set"),!s(e))throw new TypeError("Invalid value used as weak map key");var a=e[this._id];return a&&a[0]===e?(a[1]=t,this):(i(e,this._id,[e,t]),this)})),i(e,"_polyfill",!0),e}()}function s(e){return Object(e)===e}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:h);var p=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){
/*! Native Promise Only
        v0.8.1 (c) Kyle Simpson
        MIT License: http://getify.mit-license.org
    */
var t,i,r;r=function(){var e,t,i,r=Object.prototype.toString,a=void 0!==s?function(e){return s(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,i,s){return Object.defineProperty(e,t,{value:i,writable:!0,configurable:!1!==s})}}catch(v){e=function(e,t,i){return e[t]=i,e}}function n(e,s){i.add(e,s),t||(t=a(i.drain))}function o(e){var t,i=typeof e;return null==e||"object"!=i&&"function"!=i||(t=e.then),"function"==typeof t&&t}function l(){for(var e=0;e<this.chain.length;e++)u(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function u(e,t,i){var s,r;try{!1===t?i.reject(e.msg):(s=!0===t?e.msg:t.call(void 0,e.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(r=o(s))?r.call(s,i.resolve,i.reject):i.resolve(s)}catch(v){i.reject(v)}}function d(e){var t,i=this;if(!i.triggered){i.triggered=!0,i.def&&(i=i.def);try{(t=o(e))?n((function(){var s=new p(i);try{t.call(e,(function(){d.apply(s,arguments)}),(function(){c.apply(s,arguments)}))}catch(v){c.call(s,v)}})):(i.msg=e,i.state=1,i.chain.length>0&&n(l,i))}catch(v){c.call(new p(i),v)}}}function c(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&n(l,t))}function h(e,t,i,s){for(var r=0;r<t.length;r++)!function(r){e.resolve(t[r]).then((function(e){i(r,e)}),s)}(r)}function p(e){this.def=e,this.triggered=!1}function g(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new g(this);this.then=function(e,i){var s={success:"function"!=typeof e||e,failure:"function"==typeof i&&i};return s.promise=new this.constructor((function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");s.resolve=e,s.reject=t})),t.chain.push(s),0!==t.state&&n(l,t),s.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,(function(e){d.call(t,e)}),(function(e){c.call(t,e)}))}catch(v){c.call(t,v)}}i=function(){var e,i,s;function r(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function(t,a){s=new r(t,a),i?i.next=s:e=s,i=s,s=void 0},drain:function(){var s=e;for(e=i=t=void 0;s;)s.fn.call(s.self),s=s.next}}}();var f=e({},"constructor",m,!1);return m.prototype=f,e(f,"__NPO__",0,!1),e(m,"resolve",(function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this((function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");t(e)}))})),e(m,"reject",(function(e){return new this((function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");i(e)}))})),e(m,"all",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t((function(i,s){if("function"!=typeof i||"function"!=typeof s)throw TypeError("Not a function");var r=e.length,a=Array(r),n=0;h(t,e,(function(e,t){a[e]=t,++n===r&&i(a)}),s)}))})),e(m,"race",(function(e){var t=this;return"[object Array]"!=r.call(e)?t.reject(TypeError("Not an array")):new t((function(i,s){if("function"!=typeof i||"function"!=typeof s)throw TypeError("Not a function");h(t,e,(function(e,t){i(t)}),s)}))})),m},(i=h)[t="Promise"]=i[t]||r(),e.exports&&(e.exports=i[t])})),g=new WeakMap;function m(e,t,i){var s=g.get(e.element)||{};t in s||(s[t]=[]),s[t].push(i),g.set(e.element,s)}function f(e,t){return(g.get(e.element)||{})[t]||[]}function v(e,t,i){var s=g.get(e.element)||{};if(!s[t])return!0;if(!i)return s[t]=[],g.set(e.element,s),!0;var r=s[t].indexOf(i);return-1!==r&&s[t].splice(r,1),g.set(e.element,s),s[t]&&0===s[t].length}function _(e,t){var i=g.get(e);g.set(t,i),g.delete(e)}var E=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return E.reduce((function(t,i){var s=e.getAttribute("data-vimeo-".concat(i));return(s||""===s)&&(t[i]=""===s?1:s),t}),t)}function S(e,t){var i=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var s=document.createElement("div");return s.innerHTML=i,t.appendChild(s.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return new Promise((function(s,r){if(!l(e))throw new TypeError("“".concat(e,"” is not a vimeo.com url."));var a="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var n in t)t.hasOwnProperty(n)&&(a+="&".concat(n,"=").concat(encodeURIComponent(t[n])));var o="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;o.open("GET",a,!0),o.onload=function(){if(404!==o.status)if(403!==o.status)try{var t=JSON.parse(o.responseText);if(403===t.domain_status_code)return S(t,i),void r(new Error("“".concat(e,"” is not embeddable.")));s(t)}catch(a){r(a)}else r(new Error("“".concat(e,"” is not embeddable.")));else r(new Error("“".concat(e,"” was not found.")))},o.onerror=function(){var e=o.status?" (".concat(o.status,")"):"";r(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},o.send()}))}function T(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){return console.warn(t),{}}return e}function y(e,t,i){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var s={method:t};void 0!==i&&(s.value=i);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(s=JSON.stringify(s)),e.element.contentWindow.postMessage(s,e.origin)}}function I(e,t){var i,s=[];if((t=T(t)).event)"error"===t.event&&f(e,t.data.method).forEach((function(i){var s=new Error(t.data.message);s.name=t.data.name,i.reject(s),v(e,t.data.method,i)})),s=f(e,"event:".concat(t.event)),i=t.data;else if(t.method){var r=function(e,t){var i=f(e,t);if(i.length<1)return!1;var s=i.shift();return v(e,t,s),s}(e,t.method);r&&(s.push(r),i=t.value)}s.forEach((function(t){try{if("function"==typeof t)return void t.call(e,i);t.resolve(i)}catch(s){}}))}var A=new WeakMap,O=new WeakMap,w=function(){function t(i){var s=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),window.jQuery&&i instanceof jQuery&&(i.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),i=i[0]),"undefined"!=typeof document&&"string"==typeof i&&(i=document.getElementById(i)),!n(i))throw new TypeError("You must pass either a valid element or a valid id.");var a=i.ownerDocument.defaultView;if("IFRAME"!==i.nodeName){var o=i.querySelector("iframe");o&&(i=o)}if("IFRAME"===i.nodeName&&!l(i.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(A.has(i))return A.get(i);this.element=i,this.origin="*";var d=new p((function(e,t){var n=function(i){if(l(i.origin)&&s.element.contentWindow===i.source){"*"===s.origin&&(s.origin=i.origin);var r=T(i.data);if(r&&"error"===r.event&&r.data&&"ready"===r.data.method){var a=new Error(r.data.message);return a.name=r.data.name,void t(a)}var n=r&&"ready"===r.event,o=r&&"ping"===r.method;if(n||o)return s.element.setAttribute("data-ready","true"),void e();I(s,r)}};if(a.addEventListener?a.addEventListener("message",n,!1):a.attachEvent&&a.attachEvent("onmessage",n),"IFRAME"!==s.element.nodeName){var o=b(i,r);C(u(o),o,i).then((function(e){var t=S(e,i);return s.element=t,s._originalElement=i,_(i,t),A.set(s.element,s),e})).catch(t)}}));return O.set(this,d),A.set(this.element,this),"IFRAME"===this.element.nodeName&&y(this,"ping"),this}var s,r,o;return s=t,(r=[{key:"callMethod",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new p((function(s,r){return t.ready().then((function(){m(t,e,{resolve:s,reject:r}),y(t,e,i)})).catch(r)}))}},{key:"get",value:function(e){var t=this;return new p((function(i,s){return e=a(e,"get"),t.ready().then((function(){m(t,e,{resolve:i,reject:s}),y(t,e)})).catch(s)}))}},{key:"set",value:function(e,t){var i=this;return new p((function(s,r){if(e=a(e,"set"),null==t)throw new TypeError("There must be a value to set.");return i.ready().then((function(){m(i,e,{resolve:s,reject:r}),y(i,e,t)})).catch(r)}))}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===f(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch((function(){})),m(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");v(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch((function(e){}))}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=O.get(this)||new p((function(e,t){t(new Error("Unknown player. Probably unloaded."))}));return p.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new p((function(t){O.delete(e),A.delete(e.element),e._originalElement&&(A.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode&&e.element.parentNode.removeChild(e.element),t()}))}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}])&&i(s.prototype,r),o&&i(s,o),t}();return r||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),i=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};t.forEach((function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=b(e);C(u(t),t,e).then((function(t){return S(t,e)})).catch(i)}catch(s){i(s)}}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var t=function(t){if(l(t.origin)&&t.data&&"spacechange"===t.data.event)for(var i=e.querySelectorAll("iframe"),s=0;s<i.length;s++)if(i[s].contentWindow===t.source){i[s].parentElement.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}}()),w},e.exports=r()}).call(this,i("yLpj"),i("URgk").setImmediate)},iFR9:function(e,t,i){"use strict";i("zKZe");var s=i("og3H"),r=i("dEGm"),a=i("LEyH"),n=i("RsOY"),o=i.n(n),l=i("nmax"),u=i("vL1h"),d=i("GFZu"),c=Object.assign({permissions:{},selectedClassLuids:[],selectedEditableByClassLuids:[],persistedClassSets:{},setup(e,t,i,s,n){var l;this._canEditPermissions=n,this.persistedClassSets=i,this.permissions={viewableBy:this._getViewPermission(e,i),editableBy:this._getEditPermission(e,i)};var u=Object.keys(t),d=[],c=[];for(var h in i){var p=i[h];l=s[h],u.indexOf(l)>-1&&(d.push(l),p.canEdit&&c.push(l))}this.selectedClassLuids=o()(this.selectedClassLuids,{$push:d}),this.selectedEditableByClassLuids=o()(this.selectedEditableByClassLuids,{$push:c}),this.bindActions(a.a.TOGGLE_CLASS,this._toggleClass),this.bindActions(a.a.TOGGLE_CLASS_PERMISSIONS,this._toggleClassPermissions),this.bindActions(a.a.CHANGE_PERMISSION,this._changePermission),this.bindActions(r.a.actions.BULK_DELETE_SUCCESS,this._removeFromPersistedClassSets),this.bindActions(r.a.actions.BULK_UPDATE_SUCCESS,this._updatePersistedClassSets)},getPermissions(){return this.permissions},getSelectedClassLuids(){return this.selectedClassLuids},getSelectedEditableByClassLuids(){return this.selectedEditableByClassLuids},getPersistedClassSets(){return this.persistedClassSets},canEditPermissions(){return this._canEditPermissions},_changePermission(e){var{side:t,newPermission:i}=e,s=Object(d.a)(this._getPermissionKeyForSide(t),i);this.permissions=o()(this.permissions,{$merge:s}),this._ensureEditingMatchesViewing()},_toggleClass(e){var{luid:t}=e,i=this.selectedClassLuids.indexOf(t),s=this.selectedEditableByClassLuids.indexOf(t);-1===i?this.selectedClassLuids=o()(this.selectedClassLuids,{$push:[t]}):(this.selectedClassLuids=o()(this.selectedClassLuids,{$splice:[[i,1]]}),this.selectedEditableByClassLuids=o()(this.selectedEditableByClassLuids,{$splice:[[s,1]]}))},_toggleClassPermissions(e){var{luid:t}=e,i=this.selectedEditableByClassLuids.indexOf(t);-1===i?(this.selectedEditableByClassLuids=o()(this.selectedEditableByClassLuids,{$push:[t]}),this.selectedClassLuids=o()(this.selectedClassLuids,{$push:[t]})):this.selectedEditableByClassLuids=o()(this.selectedEditableByClassLuids,{$splice:[[i,1]]})},_removeFromPersistedClassSets(e){var{models:t}=e,i=Object.keys(t);this.persistedClassSets=Object(u.a)(this.persistedClassSets,i)},_updatePersistedClassSets(e){var{models:t}=e,i={};for(var s in t){var r=t[s];i[s]=r.getProperties()}this.persistedClassSets=o()(this.persistedClassSets,{$merge:i})},_ensureEditingMatchesViewing(){(this.permissions.viewableBy===a.c.JUST_ME||this.permissions.viewableBy===a.c.PASSWORD&&this.permissions.editableBy===a.c.CLASSES)&&(this.permissions=o()(this.permissions,{$merge:{editableBy:a.c.JUST_ME}}))},_getPermissionKeyForSide(e){switch(e){case a.d.VIEWING:return"viewableBy";case a.d.EDITING:return"editableBy";default:return""}},_getViewPermission(e,t){var i=Object.keys(t).length>0;return e.accessType===s.rb.PUBLIC_ACCESS?a.c.EVERYONE:e.passwordUse?a.c.PASSWORD:i?a.c.CLASSES:a.c.JUST_ME},_getEditPermission(e,t){var i=!1;for(var s in t){t[s].canEdit&&(i=!0)}return e.passwordEdit?a.c.PASSWORD:i?a.c.CLASSES:a.c.JUST_ME}},l.a);c.init(),t.a=c},iU5h:function(e,t,i){"use strict";(function(e){i("4mDm"),i("3bBZ");var s=i("mahw"),r=i("Uudg"),a=i("cE6c"),n=i("og3H"),o=i("QimK"),l=i("zK28"),u=i("q1tI"),d=i.n(u),c=i("TtcH"),h=i("T3U7"),p=Object(c.n)("custom_image_upload");t.a=t=>{var i,c,{onSearchForImage:g,onUploadImage:m,onUploadImageClick:f,showUpsell:v}=t,[_,E]=Object(u.useState)(!1),b=v?()=>{Object(h.a)("click_create_set_upload_image_not_upgraded"),window.open(p,"_blank")}:e=>{Object(h.a)("click_create_set_upload_image_when_upgraded"),i&&i.handleOpenFileDialog(),f&&f(),_&&(g(e),E(!1))};return d.a.createElement("div",{className:"CreateSetImageMenuChoices","data-testid":"CreateSetImageMenuChoices"},v?d.a.createElement(s.a,{badgeColor:"indigo",badgeText:(null==(c=l.a.user)?void 0:c.selfIdentifiedTeacherStatus)===n.qb.TEACHER?e("global.user_badges.teacher"):e("global.user_badges.plus"),icon:"system-upload",iconPosition:"left",iconSize:"xlarge",onClick:b,text:d.a.createElement(r.a,{id:"create_set.term_context.image.upload_an_image"})}):d.a.createElement(d.a.Fragment,null,d.a.createElement(s.a,{icon:"system-upload",iconPosition:"left",iconSize:"xlarge",onClick:b,text:d.a.createElement(r.a,{id:"create_set.term_context.image.upload_an_image"})}),d.a.createElement(a.a,{mimeTypes:o.c,onChooseFiles:(e,t)=>{m(e,t)},ref:e=>{i=e}})),d.a.createElement(s.a,{icon:"search",iconPosition:"left",iconSize:"large",onClick:e=>{Object(h.a)("click_create_set_search_image"),g(e),E(!_)},text:d.a.createElement(r.a,{id:"create_set.term_context.image.search_popover_menu"})}))}}).call(this,i("nrsj").default)},ifSZ:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));var s=i("9WHe");function r(e){e?s.a.warning("Unknown language code",{language:e}):s.a.error("Empty language param",{language:e})}function a(t){switch(t){case"??":return e("languages_uppercase.unknown");case"af":return e("languages_uppercase.af");case"ak":return e("languages_uppercase.ak");case"akk":return e("languages_uppercase.akk");case"am":return e("languages_uppercase.am");case"ang":return e("languages_uppercase.ang");case"ar":return e("languages_uppercase.ar");case"ase":return e("languages_uppercase.ase");case"az":return e("languages_uppercase.az");case"be":return e("languages_uppercase.be");case"bg":return e("languages_uppercase.bg");case"bh":return e("languages_uppercase.bh");case"bn":return e("languages_uppercase.bn");case"bo":return e("languages_uppercase.bo");case"br":return e("languages_uppercase.br");case"bs":return e("languages_uppercase.bs");case"ca":return e("languages_uppercase.ca");case"ceb":return e("languages_uppercase.ceb");case"ch":return e("languages_uppercase.ch");case"chem":return e("languages_uppercase.chem");case"cho":return e("languages_uppercase.cho");case"chr":return e("languages_uppercase.chr");case"co":return e("languages_uppercase.co");case"cop":return e("languages_uppercase.cop");case"cs":return e("languages_uppercase.cs");case"cy":return e("languages_uppercase.cy");case"da":return e("languages_uppercase.da");case"de":return e("languages_uppercase.de");case"den":return e("languages_uppercase.den");case"dv":return e("languages_uppercase.dv");case"dyo":return e("languages_uppercase.dyo");case"el":return e("languages_uppercase.el");case"en":return e("languages_uppercase.en");case"eo":return e("languages_uppercase.eo");case"es":return e("languages_uppercase.es");case"et":return e("languages_uppercase.et");case"eu":return e("languages_uppercase.eu");case"fa":return e("languages_uppercase.fa");case"ff":return e("languages_uppercase.ff");case"fi":return e("languages_uppercase.fi");case"fil":return e("languages_uppercase.fil");case"fo":return e("languages_uppercase.fo");case"fr":return e("languages_uppercase.fr");case"fy":return e("languages_uppercase.fy");case"ga":return e("languages_uppercase.ga");case"gd":return e("languages_uppercase.gd");case"gl":return e("languages_uppercase.gl");case"gn":return e("languages_uppercase.gn");case"got":return e("languages_uppercase.got");case"gu":return e("languages_uppercase.gu");case"ha":return e("languages_uppercase.ha");case"hai":return e("languages_uppercase.hai");case"haw":return e("languages_uppercase.haw");case"hi":return e("languages_uppercase.hi");case"hil":return e("languages_uppercase.hil");case"hmv":return e("languages_uppercase.hmv");case"hr":return e("languages_uppercase.hr");case"ht":return e("languages_uppercase.ht");case"hu":return e("languages_uppercase.hu");case"hy":return e("languages_uppercase.hy");case"id":return e("languages_uppercase.id");case"ig":return e("languages_uppercase.ig");case"ipa":return e("languages_uppercase.ipa");case"is":return e("languages_uppercase.is");case"it":return e("languages_uppercase.it");case"iu":return e("languages_uppercase.iu");case"iw":return e("languages_uppercase.iw");case"ja":return e("languages_uppercase.ja");case"ja-ka":return e("languages_uppercase.ja_ka");case"ja-ro":return e("languages_uppercase.ja_ro");case"jv":return e("languages_uppercase.jv");case"ka":return e("languages_uppercase.ka");case"kg":return e("languages_uppercase.kg");case"kin":return e("languages_uppercase.kin");case"kio":return e("languages_uppercase.kio");case"kk":return e("languages_uppercase.kk");case"km":return e("languages_uppercase.km");case"kn":return e("languages_uppercase.kn");case"ko":return e("languages_uppercase.ko");case"ksw":return e("languages_uppercase.ksw");case"ku":return e("languages_uppercase.ku");case"ky":return e("languages_uppercase.ky");case"la":return e("languages_uppercase.la");case"lb":return e("languages_uppercase.lb");case"lkt":return e("languages_uppercase.lkt");case"ln":return e("languages_uppercase.ln");case"lo":return e("languages_uppercase.lo");case"lt":return e("languages_uppercase.lt");case"lua":return e("languages_uppercase.lua");case"luo":return e("languages_uppercase.luo");case"lv":return e("languages_uppercase.lv");case"math":return e("languages_uppercase.math");case"mg":return e("languages_uppercase.mg");case"mh":return e("languages_uppercase.mh");case"mi":return e("languages_uppercase.mi");case"mjd":return e("languages_uppercase.mjd");case"mk":return e("languages_uppercase.mk");case"ml":return e("languages_uppercase.ml");case"mn":return e("languages_uppercase.mn");case"mnk":return e("languages_uppercase.mnk");case"moh":return e("languages_uppercase.moh");case"mr":return e("languages_uppercase.mr");case"ms":return e("languages_uppercase.ms");case"mt":return e("languages_uppercase.mt");case"my":return e("languages_uppercase.my");case"nah":return e("languages_uppercase.nah");case"ne":return e("languages_uppercase.ne");case"nl":return e("languages_uppercase.nl");case"no":return e("languages_uppercase.no");case"nv":return e("languages_uppercase.nv");case"oc":return e("languages_uppercase.oc");case"oj":return e("languages_uppercase.oj");case"om":return e("languages_uppercase.om");case"ood":return e("languages_uppercase.ood");case"or":return e("languages_uppercase.or");case"pa":return e("languages_uppercase.pa");case"photo":return e("languages_uppercase.photo");case"pi":return e("languages_uppercase.pi");case"pl":return e("languages_uppercase.pl");case"ps":return e("languages_uppercase.ps");case"pt":return e("languages_uppercase.pt");case"qu":return e("languages_uppercase.qu");case"rar":return e("languages_uppercase.rar");case"rm":return e("languages_uppercase.rm");case"ro":return e("languages_uppercase.ro");case"ru":return e("languages_uppercase.ru");case"sa":return e("languages_uppercase.sa");case"sd":return e("languages_uppercase.sd");case"see":return e("languages_uppercase.see");case"shn":return e("languages_uppercase.shn");case"si":return e("languages_uppercase.si");case"sk":return e("languages_uppercase.sk");case"sl":return e("languages_uppercase.sl");case"sm":return e("languages_uppercase.sm");case"so":return e("languages_uppercase.so");case"sq":return e("languages_uppercase.sq");case"sr":return e("languages_uppercase.sr");case"su":return e("languages_uppercase.su");case"sv":return e("languages_uppercase.sv");case"sw":return e("languages_uppercase.sw");case"syc":return e("languages_uppercase.syc");case"ta":return e("languages_uppercase.ta");case"te":return e("languages_uppercase.te");case"tet":return e("languages_uppercase.tet");case"tg":return e("languages_uppercase.tg");case"th":return e("languages_uppercase.th");case"ti":return e("languages_uppercase.ti");case"tl":return e("languages_uppercase.tl");case"to":return e("languages_uppercase.to");case"tr":return e("languages_uppercase.tr");case"trc":return e("languages_uppercase.trc");case"tt":return e("languages_uppercase.tt");case"tyv":return e("languages_uppercase.tyv");case"ug":return e("languages_uppercase.ug");case"uk":return e("languages_uppercase.uk");case"unm":return e("languages_uppercase.unm");case"ur":return e("languages_uppercase.ur");case"uz":return e("languages_uppercase.uz");case"vi":return e("languages_uppercase.vi");case"win":return e("languages_uppercase.win");case"wo":return e("languages_uppercase.wo");case"xh":return e("languages_uppercase.xh");case"yi":return e("languages_uppercase.yi");case"yo":return e("languages_uppercase.yo");case"zh-CN":return e("languages_uppercase.zh_cn");case"zh-pi":return e("languages_uppercase.zh_pi");case"zh-TW":return e("languages_uppercase.zh_tw");case"zu":return e("languages_uppercase.zu");default:return r(t),t}}function n(t){switch(t){case"??":return e("languages.unknown");case"af":return e("languages.af");case"ak":return e("languages.ak");case"akk":return e("languages.akk");case"am":return e("languages.am");case"ang":return e("languages.ang");case"ar":return e("languages.ar");case"ase":return e("languages.ase");case"az":return e("languages.az");case"be":return e("languages.be");case"bg":return e("languages.bg");case"bh":return e("languages.bh");case"bn":return e("languages.bn");case"bo":return e("languages.bo");case"br":return e("languages.br");case"bs":return e("languages.bs");case"ca":return e("languages.ca");case"ceb":return e("languages.ceb");case"ch":return e("languages.ch");case"chem":return e("languages.chem");case"cho":return e("languages.cho");case"chr":return e("languages.chr");case"co":return e("languages.co");case"cop":return e("languages.cop");case"cs":return e("languages.cs");case"cy":return e("languages.cy");case"da":return e("languages.da");case"de":return e("languages.de");case"den":return e("languages.den");case"dv":return e("languages.dv");case"dyo":return e("languages.dyo");case"el":return e("languages.el");case"en":return e("languages.en");case"eo":return e("languages.eo");case"es":return e("languages.es");case"et":return e("languages.et");case"eu":return e("languages.eu");case"fa":return e("languages.fa");case"ff":return e("languages.ff");case"fi":return e("languages.fi");case"fil":return e("languages.fil");case"fo":return e("languages.fo");case"fr":return e("languages.fr");case"fy":return e("languages.fy");case"ga":return e("languages.ga");case"gd":return e("languages.gd");case"gl":return e("languages.gl");case"gn":return e("languages.gn");case"got":return e("languages.got");case"gu":return e("languages.gu");case"ha":return e("languages.ha");case"hai":return e("languages.hai");case"haw":return e("languages.haw");case"hi":return e("languages.hi");case"hil":return e("languages.hil");case"hmv":return e("languages.hmv");case"hr":return e("languages.hr");case"ht":return e("languages.ht");case"hu":return e("languages.hu");case"hy":return e("languages.hy");case"id":return e("languages.id");case"ig":return e("languages.ig");case"ipa":return e("languages.ipa");case"is":return e("languages.is");case"it":return e("languages.it");case"iu":return e("languages.iu");case"iw":return e("languages.iw");case"ja":return e("languages.ja");case"ja-ka":return e("languages.ja_ka");case"ja-ro":return e("languages.ja_ro");case"jv":return e("languages.jv");case"ka":return e("languages.ka");case"kg":return e("languages.kg");case"kin":return e("languages.kin");case"kio":return e("languages.kio");case"kk":return e("languages.kk");case"km":return e("languages.km");case"kn":return e("languages.kn");case"ko":return e("languages.ko");case"ksw":return e("languages.ksw");case"ku":return e("languages.ku");case"ky":return e("languages.ky");case"la":return e("languages.la");case"lb":return e("languages.lb");case"lkt":return e("languages.lkt");case"ln":return e("languages.ln");case"lo":return e("languages.lo");case"lt":return e("languages.lt");case"lua":return e("languages.lua");case"luo":return e("languages.luo");case"lv":return e("languages.lv");case"math":return e("languages.math");case"mg":return e("languages.mg");case"mh":return e("languages.mh");case"mi":return e("languages.mi");case"mjd":return e("languages.mjd");case"mk":return e("languages.mk");case"ml":return e("languages.ml");case"mn":return e("languages.mn");case"mnk":return e("languages.mnk");case"moh":return e("languages.moh");case"mr":return e("languages.mr");case"ms":return e("languages.ms");case"mt":return e("languages.mt");case"my":return e("languages.my");case"nah":return e("languages.nah");case"ne":return e("languages.ne");case"nl":return e("languages.nl");case"no":return e("languages.no");case"nv":return e("languages.nv");case"oc":return e("languages.oc");case"oj":return e("languages.oj");case"om":return e("languages.om");case"ood":return e("languages.ood");case"or":return e("languages.or");case"pa":return e("languages.pa");case"photo":return e("languages.photo");case"pi":return e("languages.pi");case"pl":return e("languages.pl");case"ps":return e("languages.ps");case"pt":return e("languages.pt");case"qu":return e("languages.qu");case"rar":return e("languages.rar");case"rm":return e("languages.rm");case"ro":return e("languages.ro");case"ru":return e("languages.ru");case"sa":return e("languages.sa");case"sd":return e("languages.sd");case"see":return e("languages.see");case"shn":return e("languages.shn");case"si":return e("languages.si");case"sk":return e("languages.sk");case"sl":return e("languages.sl");case"sm":return e("languages.sm");case"so":return e("languages.so");case"sq":return e("languages.sq");case"sr":return e("languages.sr");case"su":return e("languages.su");case"sv":return e("languages.sv");case"sw":return e("languages.sw");case"syc":return e("languages.syc");case"ta":return e("languages.ta");case"te":return e("languages.te");case"tet":return e("languages.tet");case"tg":return e("languages.tg");case"th":return e("languages.th");case"ti":return e("languages.ti");case"tl":return e("languages.tl");case"to":return e("languages.to");case"tr":return e("languages.tr");case"trc":return e("languages.trc");case"tt":return e("languages.tt");case"tyv":return e("languages.tyv");case"ug":return e("languages.ug");case"uk":return e("languages.uk");case"unm":return e("languages.unm");case"ur":return e("languages.ur");case"uz":return e("languages.uz");case"vi":return e("languages.vi");case"win":return e("languages.win");case"wo":return e("languages.wo");case"xh":return e("languages.xh");case"yi":return e("languages.yi");case"yo":return e("languages.yo");case"zh-CN":return e("languages.zh_cn");case"zh-pi":return e("languages.zh_pi");case"zh-TW":return e("languages.zh_tw");case"zu":return e("languages.zu");default:return r(t),t}}}).call(this,i("nrsj").default)},ilnZ:function(e,t,i){i("dOgj")("Uint8",(function(e){return function(t,i,s){return e(this,t,i,s)}}),!0)},j8WY:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("RVJv");function r(e,t){if(Array.isArray(t))return t.map((t=>new e(t)));if(t instanceof s.a)return new e(t.properties);if(t instanceof Object){var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=t[r];i[r]=new e(a)}return i}return new e(t)}},jCse:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("5s+n"),i("FZtP");var s=i("9WHe"),r=i("HlzF"),a=i("n29V"),n=!1,o=new a.a;function l(e,t,i){var s=new r.Howl({src:[e]});return s.once("load",(()=>{t&&t(s.duration())})),s.once("loaderror",(()=>{i&&i(e)})),s}function u(e,t){var{onLoad:i,onError:s,onEnd:r,onStop:a}=t,n=o.memoize(e,(()=>l(e,i,s)));return n.once("playerror",(()=>{s&&s(e)})),n.once("end",(()=>{r&&r(e)})),n.once("stop",(()=>{a&&a(e)})),n}class d{constructor(){r.Howler.autoSuspend=!1,r.Howler.autoUnlock=!1}borrowWebAudioContext(){r.Howler.volume(1);var e=r.Howler.usingWebAudio?r.Howler.ctx:null;if(!e)return Promise.reject();switch(e.state){case"suspended":return e.resume().then((()=>e));case"running":return Promise.resolve(e);default:return Promise.reject()}}clearAllFinishListeners(){o.cache.forEach((e=>{e.off("end")}))}preload(e,t){var{onError:i,onLoad:r}=void 0===t?{}:t,a=o.get(e);if(r&&a&&"loaded"===a.state())r(a.duration());else try{o.memoize(e,(()=>l(e,r,i)))}catch(u){if(n)return;s.a.warning("AudioPlayer instance failed to loadClip in preload",u,{url:e}),n=!0}}play(e,t){var{onError:i,onFinish:r,onStop:a}=void 0===t?{}:t;try{u(e,{onError:i,onEnd:r,onStop:a}).play()}catch(n){s.a.error("AudioPlayer prepareClipToPlay failed in play()",n)}}loop(e,t){var{onError:i,onLoop:r,onStop:a}=void 0===t?{}:t;try{var n=u(e,{onError:i,onEnd:r,onStop:a}),o=n.play();n.loop(!0,o)}catch(l){s.a.error("AudioPlayer prepareClipToPlay failed in loop()",l)}}isPlaying(e){var t=o.get(e);return!!t&&t.playing()}destruct(e){var t=o.get(e);t&&(t.unload(),o.delete(e))}stop(e){var t=o.get(e);t&&(t.once("fade",(()=>{t.stop(),t.volume(1)})),t.fade(1,0,300))}stopAll(){o.cache.forEach((e=>e.stop()))}}},jE4y:function(e,t,i){"use strict";var s=i("Wv2R"),r=Object(s.a)("CustomAudioConstants",{actions:{CANCEL:null,CANCEL_SUCCESS:null,CREATE:null,CREATE_FAILURE:null,CREATE_SUCCESS:null,DELETE:null,DISMISS_UPSELL:null,ERROR:null,GET_VOLUME:null,IMPLEMENTATION_UPDATE:null,INIT:null,NEEDS_PERMISSION:null,PERMISSION_UPDATE:null,RECORD:null,SAVE:null,STOP:null,STOP_SUCCESS:null,UPLOAD_FINISH:null}});r.actions;t.a=r},jMYa:function(e,t,i){"use strict";i("zKZe"),i("4Brf"),i("4mDm"),i("3bBZ"),i("EnZy"),i("UxlC"),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),n=v(i("q1tI")),o=v(i("17x9")),l=v(i("i8i4")),u=v(i("FUBA")),d=v(i("TSYQ")),c=v(i("xlfZ")),h=v(i("qioe")),p=v(i("KVmg")),g=v(i("DJCe")),m=v(i("sldm")),f=v(i("c7zP"));function v(e){return e&&e.__esModule?e:{default:e}}function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/react-select
*/
var E=function(e){return"string"==typeof e?e:null!==e&&JSON.stringify(e)||""},b=o.default.oneOfType([o.default.string,o.default.node]),S=1,C=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["clearValue","focusOption","handleInputBlur","handleInputChange","handleInputFocus","handleInputValueChange","handleKeyDown","handleMenuScroll","handleMouseDown","handleMouseDownOnArrow","handleMouseDownOnMenu","handleRequired","handleTouchOutside","handleTouchMove","handleTouchStart","handleTouchEnd","handleTouchEndClearValue","handleValueClick","getOptionLabel","onOptionRef","removeValue","selectValue"].forEach((function(e){return i[e]=i[e].bind(i)})),i.state={inputValue:"",isFocused:!1,isOpen:!1,isPseudoFocused:!1,required:!1},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){this._instancePrefix="react-select-"+(this.props.instanceId||++S)+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:this.handleRequired(e[0],this.props.multi)})}},{key:"componentDidMount",value:function(){this.props.autofocus&&this.focus()}},{key:"componentWillReceiveProps",value:function(e){var t=this.getValueArray(e.value,e);e.required?this.setState({required:this.handleRequired(t[0],e.multi)}):this.props.required&&this.setState({required:!1})}},{key:"componentWillUpdate",value:function(e,t){if(t.isOpen!==this.state.isOpen){this.toggleTouchOutsideEvent(t.isOpen);var i=t.isOpen?e.onOpen:e.onClose;i&&i()}}},{key:"componentDidUpdate",value:function(e,t){if(this.menu&&this.focused&&this.state.isOpen&&!this.hasScrolledToOption){var i=l.default.findDOMNode(this.focused);l.default.findDOMNode(this.menu).scrollTop=i.offsetTop,this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.focused&&this.menu){this._scrollToFocusedOptionOnUpdate=!1;var s=l.default.findDOMNode(this.focused),r=l.default.findDOMNode(this.menu),a=s.getBoundingClientRect(),n=r.getBoundingClientRect();a.bottom>n.bottom?r.scrollTop=s.offsetTop+s.clientHeight-r.offsetHeight:a.top<n.top&&(r.scrollTop=s.offsetTop)}if(this.props.scrollMenuIntoView&&this.menuContainer){var o=this.menuContainer.getBoundingClientRect();window.innerHeight<o.bottom+this.props.menuBuffer&&window.scrollBy(0,o.bottom+this.props.menuBuffer-window.innerHeight)}e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu())}},{key:"componentWillUnmount",value:function(){!document.removeEventListener&&document.detachEvent?document.detachEvent("ontouchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)}},{key:"toggleTouchOutsideEvent",value:function(e){e?!document.addEventListener&&document.attachEvent?document.attachEvent("ontouchstart",this.handleTouchOutside):document.addEventListener("touchstart",this.handleTouchOutside):!document.removeEventListener&&document.detachEvent?document.detachEvent("ontouchstart",this.handleTouchOutside):document.removeEventListener("touchstart",this.handleTouchOutside)}},{key:"handleTouchOutside",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&this.closeMenu()}},{key:"focus",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchEndClearValue",value:function(e){this.dragging||this.clearValue(e)}},{key:"handleMouseDown",value:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button)&&"INPUT"!==e.target.tagName){if(e.stopPropagation(),e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen});if(this.state.isFocused){this.focus();var t=this.input;"function"==typeof t.getInput&&(t=t.getInput()),t.value="",this.setState({isOpen:!0,isPseudoFocused:!1})}else this._openAfterFocus=this.props.openOnClick,this.focus()}}},{key:"handleMouseDownOnArrow",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||this.state.isOpen&&(e.stopPropagation(),e.preventDefault(),this.closeMenu())}},{key:"handleMouseDownOnMenu",value:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())}},{key:"closeMenu",value:function(){this.props.onCloseResetsInput?this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:this.handleInputValueChange("")}):this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi}),this.hasScrolledToOption=!1}},{key:"handleInputFocus",value:function(e){if(!this.props.disabled){var t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:t}),this._openAfterFocus=!1}}},{key:"handleInputBlur",value:function(e){if(!this.menu||this.menu!==document.activeElement&&!this.menu.contains(document.activeElement)){this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=this.handleInputValueChange("")),this.setState(t)}else this.focus()}},{key:"handleInputChange",value:function(e){var t=e.target.value;this.state.inputValue!==e.target.value&&(t=this.handleInputValueChange(t)),this.setState({isOpen:!0,isPseudoFocused:!1,inputValue:t})}},{key:"handleInputValueChange",value:function(e){if(this.props.onInputChange){var t=this.props.onInputChange(e);null!=t&&"object"!==(void 0===t?"undefined":r(t))&&(e=""+t)}return e}},{key:"handleKeyDown",value:function(e){if(!(this.props.disabled||"function"==typeof this.props.onInputKeyDown&&(this.props.onInputKeyDown(e),e.defaultPrevented))){switch(e.keyCode){case 8:return void(!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue()));case 9:if(e.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)return;return void this.selectFocusedOption();case 13:if(!this.state.isOpen)return;e.stopPropagation(),this.selectFocusedOption();break;case 27:this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;case 33:this.focusPageUpOption();break;case 34:this.focusPageDownOption();break;case 35:if(e.shiftKey)return;this.focusEndOption();break;case 36:if(e.shiftKey)return;this.focusStartOption();break;case 46:return void(!this.state.inputValue&&this.props.deleteRemoves&&(e.preventDefault(),this.popValue()));default:return}e.preventDefault()}}},{key:"handleValueClick",value:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)}},{key:"handleMenuScroll",value:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&t.scrollHeight-t.offsetHeight-t.scrollTop<=0&&this.props.onMenuScrollToBottom()}}},{key:"handleRequired",value:function(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)}},{key:"getOptionLabel",value:function(e){return e[this.props.labelKey]}},{key:"getValueArray",value:function(e,t){var i=this,s="object"===(void 0===t?"undefined":r(t))?t:this.props;if(s.multi){if("string"==typeof e&&(e=e.split(s.delimiter)),!Array.isArray(e)){if(null==e)return[];e=[e]}return e.map((function(e){return i.expandValue(e,s)})).filter((function(e){return e}))}var a=this.expandValue(e,s);return a?[a]:[]}},{key:"expandValue",value:function(e,t){var i=void 0===e?"undefined":r(e);if("string"!==i&&"number"!==i&&"boolean"!==i)return e;var s=t.options,a=t.valueKey;if(s)for(var n=0;n<s.length;n++)if(s[n][a]===e)return s[n]}},{key:"setValue",value:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.required){var i=this.handleRequired(e,this.props.multi);this.setState({required:i})}this.props.onChange&&(this.props.simpleValue&&e&&(e=this.props.multi?e.map((function(e){return e[t.props.valueKey]})).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e))}},{key:"selectValue",value:function(e){var t=this;if(this.props.closeOnSelect&&(this.hasScrolledToOption=!1),this.props.multi){var i=this.props.onSelectResetsInput?"":this.state.inputValue;this.setState({focusedIndex:null,inputValue:this.handleInputValueChange(i),isOpen:!this.props.closeOnSelect},(function(){t.addValue(e)}))}else this.setState({inputValue:this.handleInputValueChange(""),isOpen:!this.props.closeOnSelect,isPseudoFocused:this.state.isFocused},(function(){t.setValue(e)}))}},{key:"addValue",value:function(e){var t=this.getValueArray(this.props.value),i=this._visibleOptions.filter((function(e){return!e.disabled})),s=i.indexOf(e);this.setValue(t.concat(e)),i.length-1===s?this.focusOption(i[s-1]):i.length>s&&this.focusOption(i[s+1])}},{key:"popValue",value:function(){var e=this.getValueArray(this.props.value);e.length&&!1!==e[e.length-1].clearableValue&&this.setValue(this.props.multi?e.slice(0,e.length-1):null)}},{key:"removeValue",value:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.filter((function(t){return t!==e}))),this.focus()}},{key:"clearValue",value:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.setValue(this.getResetValue()),this.setState({isOpen:!1,inputValue:this.handleInputValueChange("")},this.focus))}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"focusOption",value:function(e){this.setState({focusedOption:e})}},{key:"focusNextOption",value:function(){this.focusAdjacentOption("next")}},{key:"focusPreviousOption",value:function(){this.focusAdjacentOption("previous")}},{key:"focusPageUpOption",value:function(){this.focusAdjacentOption("page_up")}},{key:"focusPageDownOption",value:function(){this.focusAdjacentOption("page_down")}},{key:"focusStartOption",value:function(){this.focusAdjacentOption("start")}},{key:"focusEndOption",value:function(){this.focusAdjacentOption("end")}},{key:"focusAdjacentOption",value:function(e){var t=this._visibleOptions.map((function(e,t){return{option:e,index:t}})).filter((function(e){return!e.option.disabled}));if(this._scrollToFocusedOptionOnUpdate=!0,this.state.isOpen){if(t.length){for(var i=-1,s=0;s<t.length;s++)if(this._focusedOption===t[s].option){i=s;break}if("next"===e&&-1!==i)i=(i+1)%t.length;else if("previous"===e)i>0?i-=1:i=t.length-1;else if("start"===e)i=0;else if("end"===e)i=t.length-1;else if("page_up"===e){i=(r=i-this.props.pageSize)<0?0:r}else if("page_down"===e){var r;i=(r=i+this.props.pageSize)>t.length-1?t.length-1:r}-1===i&&(i=0),this.setState({focusedIndex:t[i].index,focusedOption:t[i].option})}}else this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||(t.length?t["next"===e?0:t.length-1].option:null)})}},{key:"getFocusedOption",value:function(){return this._focusedOption}},{key:"getInputValue",value:function(){return this.state.inputValue}},{key:"selectFocusedOption",value:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)}},{key:"renderLoading",value:function(){if(this.props.isLoading)return n.default.createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},n.default.createElement("span",{className:"Select-loading"}))}},{key:"renderValue",value:function(e,t){var i=this,s=this.props.valueRenderer||this.getOptionLabel,r=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:n.default.createElement("div",{className:"Select-placeholder"},this.props.placeholder);var a=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map((function(e,t){return n.default.createElement(r,{id:i._instancePrefix+"-value-"+t,instancePrefix:i._instancePrefix,disabled:i.props.disabled||!1===e.clearableValue,key:"value-"+t+"-"+e[i.props.valueKey],onClick:a,onRemove:i.removeValue,value:e},s(e,t),n.default.createElement("span",{className:"Select-aria-only"}," "))})):this.state.inputValue?void 0:(t&&(a=null),n.default.createElement(r,{id:this._instancePrefix+"-value-item",disabled:this.props.disabled,instancePrefix:this._instancePrefix,onClick:a,value:e[0]},s(e[0])))}},{key:"renderInput",value:function(e,t){var i,r=this,a=(0,d.default)("Select-input",this.props.inputProps.className),o=!!this.state.isOpen,l=(0,d.default)((_(i={},this._instancePrefix+"-list",o),_(i,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),i)),c=s({},this.props.inputProps,{role:"combobox","aria-expanded":""+o,"aria-owns":l,"aria-haspopup":""+o,"aria-activedescendant":o?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-describedby":this.props["aria-describedby"],"aria-labelledby":this.props["aria-labelledby"],"aria-label":this.props["aria-label"],className:a,tabIndex:this.props.tabIndex,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},required:this.state.required,value:this.state.inputValue});if(this.props.inputRenderer)return this.props.inputRenderer(c);if(this.props.disabled||!this.props.searchable){var h=this.props.inputProps,p=(h.inputClassName,function(e,t){var i={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=e[s]);return i}(h,["inputClassName"])),g=(0,d.default)(_({},this._instancePrefix+"-list",o));return n.default.createElement("div",s({},p,{role:"combobox","aria-expanded":o,"aria-owns":g,"aria-activedescendant":o?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value",className:a,tabIndex:this.props.tabIndex||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:function(e){return r.input=e},"aria-readonly":""+!!this.props.disabled,style:{border:0,width:1,display:"inline-block"}}))}return this.props.autosize?n.default.createElement(u.default,s({},c,{minWidth:"5"})):n.default.createElement("div",{className:a},n.default.createElement("input",c))}},{key:"renderClear",value:function(){if(!(!this.props.clearable||void 0===this.props.value||null===this.props.value||this.props.multi&&!this.props.value.length||this.props.disabled||this.props.isLoading)){var e=this.props.clearRenderer();return n.default.createElement("span",{className:"Select-clear-zone",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEndClearValue},e)}}},{key:"renderArrow",value:function(){var e=this.handleMouseDownOnArrow,t=this.state.isOpen,i=this.props.arrowRenderer({onMouseDown:e,isOpen:t});return n.default.createElement("span",{className:"Select-arrow-zone",onMouseDown:e},i)}},{key:"filterOptions",value:function(e){var t=this.state.inputValue,i=this.props.options||[];if(this.props.filterOptions){var s="function"==typeof this.props.filterOptions?this.props.filterOptions:h.default;return s(i,t,e,{filterOption:this.props.filterOption,ignoreAccents:this.props.ignoreAccents,ignoreCase:this.props.ignoreCase,labelKey:this.props.labelKey,matchPos:this.props.matchPos,matchProp:this.props.matchProp,valueKey:this.props.valueKey})}return i}},{key:"onOptionRef",value:function(e,t){t&&(this.focused=e)}},{key:"renderMenu",value:function(e,t,i){return e&&e.length?this.props.menuRenderer({focusedOption:i,focusOption:this.focusOption,instancePrefix:this._instancePrefix,labelKey:this.props.labelKey,onFocus:this.focusOption,onSelect:this.selectValue,optionClassName:this.props.optionClassName,optionComponent:this.props.optionComponent,optionRenderer:this.props.optionRenderer||this.getOptionLabel,options:e,selectValue:this.selectValue,valueArray:t,valueKey:this.props.valueKey,onOptionRef:this.onOptionRef}):this.props.noResultsText?n.default.createElement("div",{className:"Select-noresults"},this.props.noResultsText):null}},{key:"renderHiddenField",value:function(e){var t=this;if(this.props.name){if(this.props.joinValues){var i=e.map((function(e){return E(e[t.props.valueKey])})).join(this.props.delimiter);return n.default.createElement("input",{type:"hidden",ref:function(e){return t.value=e},name:this.props.name,value:i,disabled:this.props.disabled})}return e.map((function(e,i){return n.default.createElement("input",{key:"hidden."+i,type:"hidden",ref:"value"+i,name:t.props.name,value:E(e[t.props.valueKey]),disabled:t.props.disabled})}))}}},{key:"getFocusableOptionIndex",value:function(e){var t=this._visibleOptions;if(!t.length)return null;var i=this.props.valueKey,s=this.state.focusedOption||e;if(s&&!s.disabled){var r=-1;if(t.some((function(e,t){var a=e[i]===s[i];return a&&(r=t),a})),-1!==r)return r}for(var a=0;a<t.length;a++)if(!t[a].disabled)return a;return null}},{key:"renderOuter",value:function(e,t,i){var s=this,r=this.renderMenu(e,t,i);return r?n.default.createElement("div",{ref:function(e){return s.menuContainer=e},className:"Select-menu-outer",style:this.props.menuContainerStyle},n.default.createElement("div",{ref:function(e){return s.menu=e},role:"listbox",tabIndex:-1,className:"Select-menu",id:this._instancePrefix+"-list",style:this.props.menuStyle,onScroll:this.handleMenuScroll,onMouseDown:this.handleMouseDownOnMenu},r)):null}},{key:"render",value:function(){var e=this,t=this.getValueArray(this.props.value),i=this._visibleOptions=this.filterOptions(this.props.multi?this.getValueArray(this.props.value):null),s=this.state.isOpen;this.props.multi&&!i.length&&t.length&&!this.state.inputValue&&(s=!1);var r=this.getFocusableOptionIndex(t[0]),a=null;a=this._focusedOption=null!==r?i[r]:null;var o=(0,d.default)("Select",this.props.className,{"Select--multi":this.props.multi,"Select--single":!this.props.multi,"is-clearable":this.props.clearable,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":s,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"has-value":t.length}),l=null;return this.props.multi&&!this.props.disabled&&t.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(l=n.default.createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",t[t.length-1][this.props.labelKey]))),n.default.createElement("div",{ref:function(t){return e.wrapper=t},className:o,style:this.props.wrapperStyle},this.renderHiddenField(t),n.default.createElement("div",{ref:function(t){return e.control=t},className:"Select-control",style:this.props.style,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},n.default.createElement("span",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(t,s),this.renderInput(t,r)),l,this.renderLoading(),this.renderClear(),this.renderArrow()),s?this.renderOuter(i,this.props.multi?null:t,a):null)}}]),t}(n.default.Component);C.propTypes={"aria-describedby":o.default.string,"aria-label":o.default.string,"aria-labelledby":o.default.string,addLabelText:o.default.string,arrowRenderer:o.default.func,autoBlur:o.default.bool,autofocus:o.default.bool,autosize:o.default.bool,backspaceRemoves:o.default.bool,backspaceToRemoveMessage:o.default.string,className:o.default.string,clearAllText:b,clearRenderer:o.default.func,clearValueText:b,clearable:o.default.bool,closeOnSelect:o.default.bool,deleteRemoves:o.default.bool,delimiter:o.default.string,disabled:o.default.bool,escapeClearsValue:o.default.bool,filterOption:o.default.func,filterOptions:o.default.any,ignoreAccents:o.default.bool,ignoreCase:o.default.bool,inputProps:o.default.object,inputRenderer:o.default.func,instanceId:o.default.string,isLoading:o.default.bool,joinValues:o.default.bool,labelKey:o.default.string,matchPos:o.default.string,matchProp:o.default.string,menuBuffer:o.default.number,menuContainerStyle:o.default.object,menuRenderer:o.default.func,menuStyle:o.default.object,multi:o.default.bool,name:o.default.string,noResultsText:b,onBlur:o.default.func,onBlurResetsInput:o.default.bool,onChange:o.default.func,onClose:o.default.func,onCloseResetsInput:o.default.bool,onFocus:o.default.func,onInputChange:o.default.func,onInputKeyDown:o.default.func,onMenuScrollToBottom:o.default.func,onOpen:o.default.func,onSelectResetsInput:o.default.bool,onValueClick:o.default.func,openOnClick:o.default.bool,openOnFocus:o.default.bool,optionClassName:o.default.string,optionComponent:o.default.func,optionRenderer:o.default.func,options:o.default.array,pageSize:o.default.number,placeholder:b,required:o.default.bool,resetValue:o.default.any,scrollMenuIntoView:o.default.bool,searchable:o.default.bool,simpleValue:o.default.bool,style:o.default.object,tabIndex:o.default.string,tabSelectsValue:o.default.bool,value:o.default.any,valueComponent:o.default.func,valueKey:o.default.string,valueRenderer:o.default.func,wrapperStyle:o.default.object},C.defaultProps={addLabelText:'Add "{label}"?',arrowRenderer:c.default,autosize:!0,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearRenderer:g.default,clearValueText:"Clear value",closeOnSelect:!0,deleteRemoves:!0,delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:h.default,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,menuRenderer:p.default,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,onSelectResetsInput:!0,onCloseResetsInput:!0,openOnClick:!0,optionComponent:m.default,pageSize:5,placeholder:"Select...",required:!1,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,valueComponent:f.default,valueKey:"value"},t.default=C},jgNe:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return _}));i("4mDm"),i("3bBZ");var s=i("Uudg"),r=i("Vd5f"),a=i("S41V"),n=i("Ahwr"),o=i("8DN3"),l=i("vlgG"),u=i("a08m"),d=i("OpqZ"),c=i("FAB2"),h=i("LEyH"),p=i("JPcv"),g=i("q1tI"),m=i.n(g);function f(e,t){return t.indexOf(e)>=0}var v={validate:function(e,t){var{editableBy:i,errors:s,password:r,passwordEdit:a,passwordUse:n,selectedClassLuids:o,selectedEditableByClassLuids:l,viewableBy:u}=e;void 0===t&&(t=!1);var d=[];return t&&!f(h.b.PASSWORD_EMPTY_ERROR,s)||this.passwordRequiredButEmpty({viewableBy:u,editableBy:i,passwordUse:n,passwordEdit:a,password:r})&&d.push(h.b.PASSWORD_EMPTY_ERROR),t&&!f(h.b.CLASSES_EMPTY_ERROR,s)||this.classRequiredButEmpty({viewableBy:u,selectedClassLuids:o})&&d.push(h.b.CLASSES_EMPTY_ERROR),t&&!f(h.b.EDITABLE_BY_CLASSES_EMPTY_ERROR,s)||this.editableByClassRequiredButEmpty({editableBy:i,selectedEditableByClassLuids:l})&&d.push(h.b.EDITABLE_BY_CLASSES_EMPTY_ERROR),d},permissionsRequirePassword:function(e){var{viewableBy:t,editableBy:i}=e;return t===h.c.PASSWORD||i===h.c.PASSWORD},setPreviouslyHadPassword:function(e){var{passwordUse:t,passwordEdit:i}=e;return t||i||!1},passwordRequiredButEmpty:function(e){var{viewableBy:t,editableBy:i,passwordUse:s,passwordEdit:r,password:a}=e;return!a&&this.permissionsRequirePassword({viewableBy:t,editableBy:i})&&!this.setPreviouslyHadPassword({passwordUse:s,passwordEdit:r})},classRequiredButEmpty:function(e){var{viewableBy:t,selectedClassLuids:i}=e;return t===h.c.CLASSES&&0===i.length},editableByClassRequiredButEmpty:function(e){var{editableBy:t,selectedEditableByClassLuids:i}=e;return t===h.c.CLASSES&&0===i.length}};class _ extends m.a.PureComponent{constructor(){super(...arguments),this.state={showEditPasswordLink:this.props.setPreviouslyHadPassword&&!this.props.password},this.onClickEditPassword=e=>{e.preventDefault(),this.setState({showEditPasswordLink:!1})}}getCanEdit(){return this.props.permissions.editableBy===h.c.CLASSES}getEditableOptions(){var t=this.isEnrolledInClasses()?m.a.createElement("option",{key:"classes",value:h.c.CLASSES},e("create_set.permissions.groups.certain_classes_edit")):null,i=m.a.createElement("option",{key:"password",value:h.c.PASSWORD},e("create_set.permissions.groups.people_with_password_edit")),s=m.a.createElement("option",{key:"justme",value:h.c.JUST_ME},e("create_set.permissions.groups.set_creator_edit"));switch(this.props.permissions.viewableBy){case h.c.EVERYONE:case h.c.CLASSES:return[t,i,s];case h.c.PASSWORD:return[i,s];case h.c.JUST_ME:return[s];default:return[]}}renderViewableOptionDetails(){switch(this.props.permissions.viewableBy){case h.c.EVERYONE:return m.a.createElement(s.a,{id:"create_set.permissions.groups.everyone_hint"});case h.c.CLASSES:return this.renderCertainClassesOption(h.d.VIEWING);case h.c.PASSWORD:return this.renderPasswordOption(h.d.VIEWING);case h.c.JUST_ME:return m.a.createElement(s.a,{id:"create_set.permissions.groups.set_creator_view_hint"});default:return null}}renderPrivacyLockInfo(){var e,t;return this.isPrivacyLockedForDmca()?(e=m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.reason.copyrighted"}),t=m.a.createElement("a",{href:"https://quizlet.com/help/2444159/why-was-my-content-removed-for-copyright"},m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.learn_more"}))):this.isPrivacyLockedForProprietary()?e=m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.reason.proprietary"}):this.isPrivacyLockedForTestbank()?(e=m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.reason.test_bank"}),t=m.a.createElement("a",{href:"https://quizlet.com/help/2444161/academic-integrity-on-quizlet"},m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.learn_more"}))):e=this.isPrivacyLockedForReview()?m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.reason.review"}):m.a.createElement(s.a,{id:"create_set.permissions.privacy_lock.reason.prohibited"}),m.a.createElement("div",{className:"SetPermissions-privacyLock"},e," ",t)}renderPasswordOption(e){var t=e===h.d.VIEWING?m.a.createElement(s.a,{id:"create_set.permissions.groups.people_with_password_use_hint"}):m.a.createElement(s.a,{id:"create_set.permissions.groups.people_with_password_edit_hint"}),i=this.renderPasswordField();return[m.a.createElement("div",{key:"sublabel"},t),m.a.createElement("div",{className:"SetPermissions-passwordFieldWrap",key:"linkOrField"},i)]}renderPasswordField(){if(this.state.showEditPasswordLink)return m.a.createElement(u.a,{onClick:this.onClickEditPassword},m.a.createElement(s.a,{id:"create_set.permissions.edit_password_link"}));var t=Object(p.List)(this.props.errors).find((e=>e.identifier===h.b.PASSWORD_EMPTY_ERROR.identifier));return m.a.createElement(l.a,{invalid:!!t||void 0,label:t?t.message:m.a.createElement(s.a,{id:"create_set.permissions.password_form_label"}),onChange:this.props.onChangePassword,placeholder:e("create_set.permissions.password_form_placeholder"),type:"password",value:this.props.password||""})}renderCertainClassesOption(t){var i,s,a,n;t===h.d.VIEWING?(s=e("create_set.permissions.groups.certain_classes_use_hint"),i=this.props.selectedClassLuids,a=this.props.onToggleClass,n=Object(p.List)(this.props.errors).find((e=>e.identifier===h.b.CLASSES_EMPTY_ERROR.identifier))):(s=e("create_set.permissions.groups.certain_classes_edit_hint"),i=this.props.selectedEditableByClassLuids,a=this.props.onToggleClassPermissions,n=Object(p.List)(this.props.errors).find((e=>e.identifier===h.b.EDITABLE_BY_CLASSES_EMPTY_ERROR.identifier)));var o=Object.keys(this.props.classes).map((e=>{var t=this.props.classes[e],s=f(e,i);return m.a.createElement("div",{className:"SetPermissions-classCheckbox",key:e},m.a.createElement(r.a,{checked:s,invalid:!!n||void 0,key:e,label:t.title,name:"classes[]",onChange:a,value:e}))}));return[s,o.length>0?o:null,n?m.a.createElement("div",{className:"SetPermissions-error",key:"classesError"},n.message):null]}renderViewableOptions(){return m.a.createElement(n.a,{onChange:this.props.onChangeViewableOption,value:this.props.permissions.viewableBy},m.a.createElement("option",{disabled:this.isPrivacyLocked(),value:h.c.EVERYONE},e("create_set.permissions.groups.everyone_use")),m.a.createElement("option",{disabled:this.isPrivacyLockedForReview()||this.isPrivacyLockedForProprietary()||this.isPrivacyLockedForDmca()||this.isPrivacyLockedForTestbankStrict()||!this.isEnrolledInClasses(),value:h.c.CLASSES},e("create_set.permissions.groups.certain_classes_use")),m.a.createElement("option",{disabled:this.isPrivacyLockedForReview()||this.isPrivacyLockedForProprietary()||this.isPrivacyLockedForDmca()||this.isPrivacyLockedForTestbankStrict(),value:h.c.PASSWORD},e("create_set.permissions.groups.people_with_password_use")),m.a.createElement("option",{value:h.c.JUST_ME},e("create_set.permissions.groups.set_creator_use")))}renderEditableOptionDetails(){switch(this.props.permissions.editableBy){case h.c.CLASSES:return this.renderCertainClassesOption(h.d.EDITING);case h.c.PASSWORD:return this.renderPasswordOption(h.d.EDITING);case h.c.JUST_ME:return m.a.createElement(s.a,{id:"create_set.permissions.groups.set_creator_edit_hint"});default:return null}}renderEditableOptions(){return m.a.createElement(n.a,{onChange:this.props.onChangeEditableOption,value:this.props.permissions.editableBy},this.getEditableOptions())}render(){return m.a.createElement("form",{onSubmit:this.props.onSubmit},m.a.createElement(d.a,null,m.a.createElement(a.a,{width:.5},m.a.createElement(o.a,{legend:m.a.createElement(s.a,{id:"create_set.permissions.view_title"})},this.isPrivacyLocked()?this.renderPrivacyLockInfo():null,this.renderViewableOptions(),m.a.createElement("div",{className:"SetPermissions-viewableDetails"},this.renderViewableOptionDetails()))),m.a.createElement(a.a,{width:.5},m.a.createElement(o.a,{legend:m.a.createElement(s.a,{id:"create_set.permissions.edit_title"})},this.renderEditableOptions(),m.a.createElement("div",{className:"SetPermissions-editableDetails"},this.renderEditableOptionDetails())))),this.props.children)}isEnrolledInClasses(){return Object.keys(this.props.classes).length>0}isPrivacyLockedForDmca(){return this.props.set.privacyLockStatus===c.e.DMCA}blur(){var e=window.document.querySelector(".SetPermissions input:focus");e&&e.blur()}isPrivacyLockedForTestbank(){return this.isPrivacyLockedForTestbankStrict()||this.isPrivacyLockedForTestbankRelaxed()}isPrivacyLockedForTestbankRelaxed(){return this.props.set.privacyLockStatus===c.e.TESTBANK_RELAXED}isPrivacyLockedForTestbankStrict(){return this.props.set.privacyLockStatus===c.e.TESTBANK}isPrivacyLockedForProprietary(){return this.props.set.privacyLockStatus===c.e.PROPRIETARY}isPrivacyLockedForReview(){return this.props.set.privacyLockStatus===c.e.REVIEW}isPrivacyLocked(){return!!this.props.set.privacyLockStatus&&this.props.set.privacyLockStatus!==c.e.UNLOCKED}}}).call(this,i("nrsj").default)},jiwd:function(e,t,i){"use strict";var s;i.d(t,"a",(function(){return s})),function(e){e.WORD_SIDE="word",e.DEFINITION_SIDE="definition"}(s||(s={}))},k36G:function(e,t,i){"use strict";i("zKZe");var s=i("+L51"),r=i("PYQB"),a={};Object.assign(a,r.a),a.init(s.a),t.a=a},k5kW:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("pVnL"),r=i.n(s),a=i("q1tI"),n=i.n(a),o=i("6TEZ"),l=i("Uudg"),u=i("mLAq"),d=i("6rYD");class c extends a.PureComponent{constructor(e){super(e),this.renderRichTextShortcuts=()=>n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.bold_text"})),this.renderShortcut(d.a.richText.bold)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.italicize_text"})),this.renderShortcut(d.a.richText.italicize)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.underline_text"})),this.renderShortcut(d.a.richText.underline))),this.h=new o.a(e.isMac)}renderKey(e,t){return void 0===t&&(t={}),n.a.createElement(u.a,t,e)}renderSymbol(e,t){return void 0===t&&(t={}),n.a.createElement("span",r()({className:"KeyboardShortcuts-symbol"},t),e)}renderShortcut(e){for(var t,i=this.h.getKeys(e),s=[],r=0;r<i.length;r++)t=i[r],s.push(this.renderKey(t,{key:"key-"+r})),r!==i.length-1&&s.push(this.renderSymbol("+",{key:"key-"+r+"-plus"}));return n.a.createElement("span",{className:"KeyboardShortcuts-keyGroup"},s)}render(){var e=this.renderKey(this.h.getKeyDisplayText("alt"));return n.a.createElement("div",{className:"KeyboardShortcuts-content"},n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.add_row"}),n.a.createElement("small",{className:"KeyboardShortcuts-descSubtext"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.add_row_hint"}))),this.renderShortcut(d.a.studiableItem.addItemBelowCurrent)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.next_side"})),this.renderShortcut(d.a.studiableItem.tab)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.move_row_up_down"})),n.a.createElement("span",{className:"KeyboardShortcuts-keyGroup"},e,this.renderSymbol("+"),this.renderKey("↑")," / ",this.renderKey("↓"))),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.open_image_gallery"}),n.a.createElement("small",{className:"KeyboardShortcuts-descSubtext"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.open_image_gallery_hint"}))),this.renderShortcut(d.a.studiableItem.toggleImages)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.upload_image"})),this.renderShortcut(d.a.studiableItem.toggleUpload)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.toggle_autosuggest"})),this.renderShortcut(d.a.studiableItem.toggleAutosuggest)),n.a.createElement("div",{className:"KeyboardShortcuts-shortcut"},n.a.createElement("span",{className:"KeyboardShortcuts-desc"},n.a.createElement(l.a,{id:"create_set.keyboard_shortcuts.open_voice_recording"})),this.renderShortcut(d.a.studiableItem.toggleRecord)),this.props.canEditRichText?this.renderRichTextShortcuts():null)}}},kPvk:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("MMJ4");class r{constructor(e){this.recorderState=e.recorderState}getRecorderState(){return this.recorderState}getVolume(){return this.getRecorderState().volume}isInitialized(){return this.getRecorderState().initialized}isStopped(){return this.getRecorderState().status===s.e.STOPPED}isRecording(){return this.getRecorderState().status===s.e.RECORDING}isSavingRecording(){return this.getRecorderState().status===s.e.SAVING}isUploadingRecording(){return this.getRecorderState().status===s.e.UPLOADING}isWaitingForPlugin(){return null===this.getRecorderState().implementation}isLackingRecordingPlugin(){return this.getRecorderState().implementation===s.b.NONE}isUsingHtml5Plugin(){return this.getRecorderState().implementation===s.b.HTML5}hasRecordingPlugin(){var e=this.getRecorderState().implementation;return null!=e&&!this.isLackingRecordingPlugin()}isPermissionNeeded(){return this.getRecorderState().permissions===s.d.NEEDED&&this.isWaitingForMic()&&!this.isMicMuted()}isPermissionDenied(){return this.getRecorderState().permissions===s.d.DENIED&&this.hasRecordingPlugin()}isPermissionGranted(){return this.getRecorderState().permissions===s.d.GRANTED&&this.hasRecordingPlugin()}isWaitingForMic(){return this.getRecorderState().permissions===s.d.NEEDED&&this.hasRecordingPlugin()}getErrorCode(){return this.getRecorderState().errorCode}hasError(){var e=this.getErrorCode();return this.getRecorderState().status===s.e.ERROR&&null!=e}hasNonUIBlockingError(){return this.hasError()&&!this.hasUIBlockingError()}hasUIBlockingError(){return this.hasError()&&[s.a.NO_MIC_ACCESS,s.a.MIC_MUTED].indexOf(this.getErrorCode())>-1}isMicMuted(){return this.hasError()&&this.getErrorCode()===s.a.MIC_MUTED}hasBlockingUpsellBeenDismissed(){return this.getRecorderState().hasBlockingUpsellBeenDismissed}}},kf70:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=(e,t)=>e&&t?JSON.stringify(e)===JSON.stringify(t):e===t},"lCv/":function(e){e.exports=JSON.parse('{"af":["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],"akk":["ā","â","ē","ê","ī","î","ō","ô","ū","û","ḫ","ṣ","š","ṭ","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉"],"ang":["æ","ð","þ"],"ar":["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","ء","ة","ى"],"bg":["а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ь","ю","я"],"bs":["ć","đ","č","š","ž"],"chem":["←","↑","→","↓","↔","∙","°","⁻","⁺","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","₋","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","⇌","ε","∆","₊","ₙ"],"cs":["á","č","ď","é","ě","í","ň","ó","p","ř","š","ť","ú","ů","ý","ž"],"cy":["â","ä","á","à","ê","ë","é","è","î","ï","í","ì","ô","ö","ó","ò","û","ü","ú","ù","ŵ","ẅ","ẃ","ẁ","ŷ","ÿ","ý","ỳ"],"da":["å","æ","ø"],"de":["ä","ö","ü","ß","⸚"],"dyo":["á","é","í","ó","ñ","ú","Ŋ"],"el":["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","σ","ς","τ","υ","φ","χ","ψ","ω"],"es":["á","é","í","ó","ú","ü","ñ","¿","¡","°"],"fi":["å","ä","ö"],"fr":["à","â","ç","è","é","ê","ë","î","ï","ô","œ","ù","û","ü"],"gd":["à","á","è","é","ì","í","ò","ó","ù","ú"],"ga":["à","á","è","é","ì","í","ò","ó","ù","ú"],"hai":["g̱","ḵ","x̱"],"haw":["ā","ē","ī","ō","ū"],"hr":["ć","đ","č","š","ž"],"hu":["á","é","í","ó","ö","ő","ú","ü","ű"],"is":["á","æ","ð","é","í","ó","ö","ø","þ","ú","ý"],"it":["à","è","é","ì","ò","ó","ù"],"iw":["א","בּ","ב","ג","ד","ה","ו","ז","ח","ט","י","כּ","כ","ך","ל","מ","ם","נ","ן","ס","ע","פּ","פ","ף","צ","ץ","ק","ר","שׁ","שׂ","ש","תּ","ת"],"ku":["ç","é","ê","í","î","ş","ú","û"],"la":["ā","æ","ē","ī","ō","œ","ū","ȳ"],"lkt":["á","ą","ą́","č","é","ǧ","ȟ","í","į","ó","š","ú","ų","ž","ŋ","ʼ"],"math":["+","−","±","×","÷","%","=","≠","≈","≡","<",">","≤","≥","≅","∼","½","¼","¾","√","⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","ⁿ","⁺","⁻","∧","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","π","∞","∆","∑","ƒ","∫","‖","|","⊥","∠","∩","∪","∈","∋","∃","⊂","⊃","⊆","⊇","∉","⊄","°","α","β","γ","δ","ε","η","θ","ι","κ","λ","µ","∨","Ω","ω","ℵ","∅","∀","⊕","⊗","←","↑","→","↓","↔","∴","∵","σ","⌒","₊","ₙ"],"mi":["ā","ē","ī","ō","ū"],"nl":["á","à","â","ä","ç","é","è","ê","ë","í","ì","î","ï","ó","ò","ô","ö","ú","ù","ü","û","ý","ÿ"],"no":["å","æ","ø"],"ood":["ă","ḍ","ĕ","ĭ","ñ","ŋ","ŏ","ṣ","ŭ"],"pl":["ą","ć","ę","ń","ł","ó","ś","ź","ż"],"pt":["à","á","â","ã","ç","é","ê","í","ó","ô","õ","ú","ü"],"rar":["ā","ē","ī","ō","ū","ʻ","ꞌ"],"ro":["ă","â","î","ș","ş","ț","ţ"],"ru":["а","á","б","в","г","д","е","é","ё","ж","з","и","и́","й","к","л","м","н","о","ó","п","р","с","т","у","у́","ф","х","ц","ч","ш","щ","ъ","ы","ы́","ь","э","ю","ю́","я","я́"],"sk":["á","ä","č","é","ě","í","ĺ","ľ","ň","ó","ô","ŕ","š","ť","ú","ý","ž"],"sr":["ć","đ","č","š","ž"],"sv":["å","ä","ö"],"tet":["ñ","á","é","í","ó","ú"],"tr":["ı","ö","ü","ç","ğ","ş"],"tyv":["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","ң","о","ө","п","р","с","т","у","ү","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я"],"vi":["á","ǎ","â","đ","ê","ô","ơ","ư"],"wo":["à","é","ë","ó","ñ","Ŋ"],"zh-pi":["ā","á","ǎ","à","ē","é","ě","è","ī","í","ǐ","ì","ō","ó","ǒ","ò","ū","ú","ǔ","ù","ǖ","ǘ","ǚ","ǜ","ü"]}')},lFws:function(e,t,i){"use strict";(function(e){i("4mDm"),i("3bBZ"),i("FZtP");var s=i("1Pxe"),r=i("Vd5f"),a=i("og3H"),n=i("QimK"),o=i("6y4+"),l=i("W7Oq"),u=i("s78g"),d=i("20bE"),c=i("6rYD"),h=i("TL93"),p=i("N7sa"),g=i("TX86"),m=i.n(g),f=i("X0lI"),v=i.n(f),_=i("q1tI"),E=i.n(_),b=i("uBNa");class S extends E.a.PureComponent{constructor(e){super(e),this.handleToggleHintOrExplanation=()=>{var{selectedMediaConnection:e,item:t}=this.props,{activeContext:i}=this.state;if(e)switch(e.connectionType){case a.Ab.MULTIPLE_CHOICE_PROMPT:this.props.toggleHint(t);break;case a.Ab.MULTIPLE_CHOICE_OPTION:i&&this.props.toggleExplanation(t.options[v()(i.index)])}},this.handleAddVideoClip=()=>{var{item:e}=this.props,{activeContext:t}=this.state,i=e.options[v()(null==t?void 0:t.index)].explanationConnectionMedia.find((e=>e.mediaType===a.C.VIDEO));i&&(i.video=this.generateEmptyVideoModel(),this.props.addOrUpdateStudiableMediaConnectionWithMedia([i]),this.props.onUpdateSelectedMediaConnection(i))},this.handleDelete=()=>{this.props.onDelete(this.props.item)},this.handleDeleteOption=e=>{var{item:t}=this.props;if(this.props.onDeleteOption&&t){var{options:i}=t,s=i.findIndex((t=>t.luid===e.luid)),r=null;i.length>1&&(r=0===s?i[1]:i[s-1]);var a=r?this.getTextConnectionMedia(r.optionConnectionMedia):null;a&&this.props.onUpdateSelectedMediaConnection(a),this.props.onDeleteOption(e,v()(t.luid))}},this.handleDragEnd=e=>{this.setState({isDragged:!1}),this.props.onDragEnd(e)},this.handleDragOver=e=>{this.props.onDragOver({id:e.id,rank:e.rank})},this.handleAddOption=()=>{this.props.onOptionAdded(this.props.item)},this.handleItemActive=()=>{m.a.setScope(this.props.item.luid),m()(c.a.studiableItem.tab,this.props.item.luid,(()=>{var{item:e}=this.props,{activeContext:t}=this.state;if(null!==t){var{type:i,index:s}=t;switch(i){case a.Ab.MULTIPLE_CHOICE_OPTION:if(s&&s===e.options.length-1)return this.handleAddOption(),!1}}}))},this.handleItemInactive=()=>{var{item:e}=this.props;m.a.deleteScope(e.luid),m.a.unbind(c.a.studiableItem.addItemBelowCurrent,e.id)},this.handleFocus=e=>{var{media:t,type:i,index:s}=e;this.props.onUpdateActiveStudiableItem(this.props.item),t&&this.props.onUpdateSelectedMediaConnection(t);var r={type:i};s&&(r.index=s-1),this.setState({activeContext:r})},this.handleDragStart=e=>{this.setState({isDragged:!0}),e.dataTransfer.effectAllowed="move"},this.handleMouseOver=()=>{this.setState({isDraggable:!1})},this.handleMouseOut=()=>{this.setState({isDraggable:!1})},this.handleDeleteText=e=>{var{item:t}=this.props;this.props.onDeleteText(e,t.luid)},this.handleDeleteImage=e=>{var{item:t}=this.props;this.props.onDeleteImage(e,t.luid)},this.handleDeleteVideo=e=>{var{item:t}=this.props;this.props.onDeleteVideo(e,t.luid)},this.handleQuestionTextChange=e=>{var{item:t}=this.props;this.props.onQuestionMediaChange({item:t,type:a.C.TEXT,value:e})},this.handleOptionTextChange=e=>{var{option:t,text:i}=e,{item:s}=this.props;this.props.onOptionMediaChange({item:s,option:t,type:a.C.TEXT,value:i})},this.handleHintTextChange=e=>{var{item:t}=this.props;this.props.onHintMediaChange({item:t,type:a.C.TEXT,value:e})},this.handleExplanationTextChange=(e,t)=>{var{item:i}=this.props;this.props.onExplanationMediaChange({item:i,option:e,type:a.C.TEXT,value:t})},this.handleExplanationVideoChange=(e,t)=>{var{item:i}=this.props;this.props.onExplanationMediaChange({item:i,option:e,type:a.C.VIDEO,value:t})},this.handleSATAQuestionOptionChange=e=>{this.setState({hasMultipleCorrectOptions:e.target.checked})},this.handleOnUpload=(e,t)=>{var i=()=>{t&&t.reset()},{numTotal:s}=Object(b.b)(e,n.c);if(s){if(!(e.length<=0)&&1===e.length&&1===s){var{selectedMediaConnection:r,item:o}=this.props,{activeContext:l}=this.state,u={item:o};r&&l&&(r.connectionType===a.Ab.MULTIPLE_CHOICE_OPTION||r.connectionType===a.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION)&&(u.option=o.options[v()(l.index)]),r&&this.props.onImageUpload({file:e[0],selectedMediaConnection:r,parentStudiables:u}),i()}}else i()},this.handleUpdateRichTextEditorView=e=>{this.setState({editorView:e})},this.handleOptionChecked=e=>{var{item:t}=this.props,{selectedOptions:i,hasMultipleCorrectOptions:s}=this.state,r={isCorrect:e.isCorrect,luid:e.luid},a=[r],n=[];if(s||1!==i.length){n=i.some((t=>t.luid===e.luid))?i.filter((t=>t.luid!==e.luid)):[...i,r]}else{var o={isCorrect:!1,luid:i[0].luid};a.push(o),n.push(r)}this.props.onOptionChange({options:a,studiableItemLuid:v()(t.luid)}),this.setState({selectedOptions:n})},this.onDragEnter=()=>{this.setState({isDraggedOver:!0})},this.onDragLeave=()=>{this.setState({isDraggedOver:!1})},this.onDrop=()=>{this.state.isDraggedOver&&this.setState({isDraggedOver:!1})};var{item:t}=e,i=[];t.options&&t.options.length>0&&t.options.forEach((e=>{e.isCorrect&&i.push(e)})),this.state={activeContext:null,editorView:null,isDraggable:!1,isDragged:!1,isDraggedOver:!1,selectedOptions:i,hasMultipleCorrectOptions:i.length>1}}componentDidUpdate(e){this.props.isActive&&!e.isActive?this.handleItemActive():!this.props.isActive&&e.isActive&&this.handleItemInactive()}getImageMediaConnectionFromConnections(e){return e.find((e=>e.mediaType===a.C.IMAGE))}getTextConnectionMedia(e){return e.map((e=>e)).find((e=>e.mediaType===a.C.TEXT))}renderExplanation(e,t,i){var{imageUploadStatus:s,shouldShowVideoExplanationCreation:r}=this.props,n=this.isFieldFocused(e,a.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION),l=this.isFieldLoadingImage(e,a.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION)?s.image:null;return E.a.createElement(o.a,{isFocused:n,isVideoInputDisabled:!r,key:"explanation-"+e.luid,media:e.explanationConnectionMedia,onBlur:this.handleExplanationTextChange.bind(this,e),onBlurVideo:this.handleExplanationVideoChange.bind(this,e),onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onDeleteVideo:this.handleDeleteVideo,onFocus:this.handleFocus,onUpdatePMEditorView:this.handleUpdateRichTextEditorView,placeholderImage:l,position:t+1,tabIndex:i,type:a.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION})}renderHint(e){var{imageUploadStatus:t}=this.props,i=this.isFieldFocused(e,a.Ab.MULTIPLE_CHOICE_HINT),s=this.isFieldLoadingImage(e,a.Ab.MULTIPLE_CHOICE_HINT)?t.image:null,{tabIndex:r}=this.props;return E.a.createElement(o.a,{isFocused:i,media:e.hintConnectionMedia,onBlur:this.handleHintTextChange,onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onUpdatePMEditorView:this.handleUpdateRichTextEditorView,placeholderImage:s,tabIndex:r+1,type:a.Ab.MULTIPLE_CHOICE_HINT})}renderOptions(){var{imageUploadStatus:e,item:t,tabIndex:i}=this.props,{selectedOptions:s,hasMultipleCorrectOptions:r}=this.state;return t.options.map(((n,o)=>{var{explanationConnectionMedia:u}=n,d=s.length?!!s.find((e=>e.luid===n.luid)):n.isCorrect,c=this.isFieldFocused(n,a.Ab.MULTIPLE_CHOICE_OPTION),h=this.isFieldLoadingImage(n,a.Ab.MULTIPLE_CHOICE_OPTION)?e.image:null,p=i+2+2*o,g=p+1;return E.a.createElement(E.a.Fragment,{key:"group-"+n.luid},E.a.createElement(l.a,{hasMultipleCorrectOptions:t.hasMultipleCorrectOptions||r,isCorrect:d,isFocused:c,isPhantom:!1,key:n.luid,number:o+1,onBlur:this.handleOptionTextChange,onDeleteImage:this.handleDeleteImage,onDeleteOption:this.handleDeleteOption,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onOptionChange:this.handleOptionChecked,onUpdateRichTextEditorView:this.handleUpdateRichTextEditorView,option:n,optionGroupName:"mcqStudiableItem-"+t.luid,placeholderImage:h,tabIndex:p}),u&&u.length>0?this.renderExplanation(n,o,g):null)}))}renderPhantomOption(){var{hasMultipleCorrectOptions:e}=this.state,{item:t,tabIndex:i}=this.props,s=t.options.length,r=i+2*h.a.multipleChoiceOptions.MAX_ITEMS;return E.a.createElement(l.a,{hasMultipleCorrectOptions:t.hasMultipleCorrectOptions||e,isPhantom:!0,number:s+1,onAddOption:this.handleAddOption,onFocus:this.handleFocus,optionGroupName:"mcqStudiableItem-"+t.luid,tabIndex:r})}renderSATAQuestionToggle(){return E.a.createElement("div",{className:"EditableMcqItem-SATAToggle"},E.a.createElement(r.a,{checked:this.state.hasMultipleCorrectOptions,disabled:!(!this.state.hasMultipleCorrectOptions||!this.props.item.hasMultipleCorrectOptions),label:e("create_set.multiple_choice_questions.sata_question_toggle"),onChange:this.handleSATAQuestionOptionChange}))}render(){var{imageUploadStatus:e,isActive:t,isDeleteDisabled:i,item:r,selectedMediaConnection:n,tabIndex:o,shouldShowVideoExplanationCreation:l}=this.props,c=!i,h=(null==n?void 0:n.connectionType)||a.Ab.MULTIPLE_CHOICE_PROMPT,p=this.isFieldFocused(r,a.Ab.MULTIPLE_CHOICE_PROMPT),g=this.isFieldLoadingImage(r,a.Ab.MULTIPLE_CHOICE_PROMPT)?this.props.imageUploadStatus.image:null,m=(null==n?void 0:n.connectionType)===a.Ab.MULTIPLE_CHOICE_OPTION_EXPLANATION;return E.a.createElement("div",{className:"EditableMcqItem-animationWrapper"},E.a.createElement("div",{className:"EditableMcqItem",draggable:this.state.isDraggable,onDragEnd:this.handleDragEnd.bind(this,r.id),onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDragOver:this.handleDragOver.bind(this,r),onDragStart:this.handleDragStart,onDrop:this.onDrop,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver},E.a.createElement(d.a,{areTooltipsEnabled:!0,canEditRichText:!0,editorView:this.state.editorView,enableHint:t,enableImageUpload:t,hintToggleType:h,isDragged:this.state.isDragged,isImageLoading:e.isLoading&&t,isTermActive:!0,onAddVideoClip:this.handleAddVideoClip,onDelete:this.handleDelete,onImageUpload:this.handleOnUpload,onToggleHintOrExplanation:this.handleToggleHintOrExplanation,shouldDisableVideoClipToggle:!m||!t,shouldRenderEditableToggles:!0,shouldShowDeleteToggle:c,shouldShowDragToggle:!1,shouldShowHintToggle:!0,shouldShowImageUploadToggle:!0,shouldShowOrder:!0,shouldShowVideoClipToggle:l}),E.a.createElement("div",{className:"EditableMcqItem-content"},E.a.createElement(u.a,{isFocused:p,onBlur:this.handleQuestionTextChange,onDeleteImage:this.handleDeleteImage,onDeleteText:this.handleDeleteText,onFocus:this.handleFocus,onUpdateRichTextEditorView:this.handleUpdateRichTextEditorView,placeholderImage:g,promptMedia:r.promptConnectionMedia,tabIndex:o}),r.hintConnectionMedia&&r.hintConnectionMedia.length>0?this.renderHint(r):null,E.a.createElement("div",{className:"EditableMcqItem-options"},E.a.createElement(s.CSSTransitionGroup,{component:"div",transitionEnter:!0,transitionLeave:!0,transitionName:"CreateSetPage-multipleChoiceOptions--animateItem"},this.renderOptions()),this.shouldShowPhantomOption()?this.renderPhantomOption():null,this.shouldShowSATAQuestionToggle()?this.renderSATAQuestionToggle():null))))}generateEmptyVideoModel(){return{clipEndSeconds:null,clipStartSeconds:0,code:null,provider:null,providerVideoId:""}}isFieldFocused(e,t){var{selectedMediaConnection:i}=this.props;return!(!i||i.connectionModelLuid!==e.luid||i.connectionType!==t)}isFieldLoadingImage(e,t){var{imageUploadStatus:i}=this.props;return!(e.luid!==i.connectionLuid||i.connectionType!==t)}shouldShowSATAQuestionToggle(){var{item:e}=this.props,t=e.options.some((e=>e.isCorrect));return e.options.length>h.a.multipleChoiceOptions.MIN_ITEMS_PER_QUESTION&&t}shouldShowPhantomOption(){var{item:e}=this.props;return e.options.length<h.a.multipleChoiceOptions.MAX_ITEMS}}t.a=Object(p.a)()(S)}).call(this,i("nrsj").default)},"lG1/":function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var s=i("pVnL"),r=i.n(s),a=i("8OQS"),n=i.n(a),o=(i("4mDm"),i("3bBZ"),i("zKZe"),i("1Pxe")),l=i("TSYQ"),u=i.n(l),d=i("nXOR"),c=i("qn7O"),h=i("V0yB"),p=i("X0lI"),g=i.n(p),m=i("q1tI"),f=i.n(m),v=i("qxWM"),_=i("T1Oo"),E=i("yckm"),b=i("PyIS"),S=i("W6SY");class C extends f.a.Component{constructor(){super(...arguments),this.state={isClicking:!1,isComponentFocused:!1},this.handleBlur=e=>{this.state.isClicking||this.setState({isComponentFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.handleComponentFocus=e=>{this.setState({isComponentFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleMouseUp=e=>{this.setState({isClicking:!1}),this.props.onMouseUp&&this.props.onMouseUp(e)},this.handleMouseDown=e=>{this.setState({isClicking:!0}),this.props.onNativeMouseDown&&this.props.onNativeMouseDown(e)},this.handleAccent=e=>{var t=g()(this.textareaRef.current,"Could not find text area component"),i=this.getSelectionStart(),s=this.getSelectionEnd();if(-1!==s){var r=this.getTextarea();if(r){var a=r.value||"",n=a.slice(0,i)+e+a.slice(s),o=window.document.createEvent("Event");o.initEvent("input",!0,!0);var l=r,u=Object.getOwnPropertyDescriptor(l.constructor.prototype,"value");null!=u&&u.set?u.set.call(l,n):l.value=n,l.dispatchEvent(o),this.setState({},(()=>t.setCaretPosition(i+e.length)))}}},this.wrapperRef=f.a.createRef(),this.textareaRef=f.a.createRef()}componentDidMount(){this.wrapperRef.current&&(this.wrapperMouseDownListener=E.a.listen(this.wrapperRef.current,"mousedown",this.handleMouseDown))}shouldComponentUpdate(e,t){return!Object(S.a)(this.props,e,["languageCodes"])||(!Object(S.a)(this.state,t)||!Object(_.a)(this.props.languageCodes,e.languageCodes))}componentWillUnmount(){this.wrapperMouseDownListener&&(this.wrapperMouseDownListener.remove(),this.wrapperMouseDownListener=null)}getCharactersByLang(){var e=v.a.getCharactersByLangForLangs(this.props.languageCodes);this.props.specificAccents.length>0&&this.props.languageCodes.length>0&&(e[this.props.languageCodes[0]]=this.props.specificAccents);return e}getSelectionStart(){return this.textareaRef.current?this.textareaRef.current.getSelectionStart():-1}getSelectionEnd(){return this.textareaRef.current?this.textareaRef.current.getSelectionEnd():-1}getTextarea(){return this.textareaRef.current?this.textareaRef.current.getTextarea():null}renderAccentsBar(){var e=u()("SpecialCharacterTextarea-accentsBar",{["SpecialCharacterTextarea-accentsBar--"+this.props.textAreaVariant]:this.props.textAreaVariant&&"default"!==this.props.textAreaVariant});return f.a.createElement("div",{className:e},f.a.createElement("div",{className:"SpecialCharacterTextarea-accentsBarInner"},f.a.createElement("div",{className:"SpecialCharacterTextarea-accentBarWrap",style:{marginRight:Object(b.a)()}},f.a.createElement(c.a,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,variant:"small"}))))}renderAccentButtonsInline(){return f.a.createElement(c.a,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleAccent,showUppercaseButtonInline:!0,variant:"small"})}renderAccentsDropdown(){return f.a.createElement(o.CSSTransitionGroup,{transitionEnterTimeout:120,transitionLeaveTimeout:120,transitionName:"SpecialCharacterTextarea-animateAccentsBar"},this.state.isComponentFocused&&this.containsAccentLanguage()?this.renderAccentsBar():null)}render(){var e=this.props,{textAreaVariant:t}=e,i=n()(e,["languageCodes","onFocus","specificAccents","variant","textAreaVariant"]),s=u()("SpecialCharacterTextarea",{"is-focused":this.state.isComponentFocused});return f.a.createElement("div",{className:s,onMouseUp:this.handleMouseUp,ref:this.wrapperRef},f.a.createElement(h.a,r()({},i,{onBlur:this.handleBlur,onFocus:this.handleComponentFocus,ref:this.textareaRef,variant:t})),f.a.createElement(d.a,{above:"s"},"inline"===this.props.variant?this.renderAccentButtonsInline():this.renderAccentsDropdown()))}focus(e){var t=g()(this.textareaRef.current,"Missing textareaRef in focus(number)");this.setState({isComponentFocused:!0}),t.focus(e)}blur(){var e=g()(this.textareaRef.current,"Missing textareaRef in blur()");this.setState({isComponentFocused:!1}),e.blur()}select(){g()(this.textareaRef.current,"Missing textareaRef in select()").select()}setCaretPosition(e){g()(this.textareaRef.current,"Missing textareaRef in setCaretPosition(number)").setCaretPosition(e)}setSelectionRange(e,t){g()(this.textareaRef.current,"Missing textarea in setSelectionRange(start, end)").setSelectionRange(e,t)}containsAccentLanguage(){return v.a.containsAccentLanguage(this.props.languageCodes)}}C.defaultProps=Object.assign({},h.a.defaultProps,{languageCodes:[],specificAccents:[],type:"autoExpand",variant:"dropdown"})},mCkr:function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r=i("FuVJ"),a=i("j8WY");class n extends r.a{isUpgraded(){return this.type&&this.type>0}isSelfIdentifiedTeacher(){return 1===this.selfIdentifiedTeacherStatus}static fromJson(e){return Object(a.a)(n,e)}}var o=i("Wv2R"),l=Object(o.a)("UserConstants",{actions:{UPDATE:null}}),u=i("RsOY"),d=i.n(u),c=Object.assign({user:null,setup(e){e&&(this.user=new n(e)),this.bindActions(l.actions.UPDATE,this._update)},getUser(){return this.user},_update(e){var{props:t}=e;this.user=d()(this.user,{$merge:t})}},s.a);c.init();t.a=c},mLAq:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("TSYQ"),r=i.n(s),a=i("q1tI"),n=i.n(a),o="UIKeyboardInput--large";class l extends n.a.PureComponent{render(){var e=this.props.type?r()("UIKeyboardInput",o):"UIKeyboardInput";return n.a.createElement("kbd",{className:e},this.props.children)}}},mahw:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("8OQS"),r=i.n(s),a=i("AQxD"),n=i("bvRJ"),o=i("ugal"),l=i("q1tI"),u=i.n(l);class d extends u.a.PureComponent{renderBadge(){return"yellow"===this.props.badgeColor?u.a.createElement("div",{className:"MenuItemWithIcon-UIBadge"},u.a.createElement(a.a,{menu:!0,variant:"yellow"},this.props.badgeText)):"indigo"===this.props.badgeColor?u.a.createElement("div",{className:"MenuItemWithIcon-featureBadge"},this.props.badgeText):null}render(){var e=this.props,{icon:t,iconPosition:i,iconSize:s,text:a}=e,l=r()(e,["icon","iconPosition","iconSize","text"]);return u.a.createElement(o.a,l,u.a.createElement("span",{className:"MenuItemWithIcon-inner"},t?u.a.createElement(n.a,{className:"MenuItemWithIcon-"+i,icon:t,size:s}):null,this.props.badgeText?this.renderBadge():null,u.a.createElement("span",{className:"MenuItemWithIcon-text"},a)))}}d.defaultProps={iconPosition:"left",iconSize:"medium"}},mbeC:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return l}));i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s),a=i("TSYQ"),n=i.n(a),o=i("xqF0");class l extends s.PureComponent{constructor(){super(...arguments),this.handleClickAddRow=()=>{this.props.onAddRow(this.props.precedingLuid)}}render(){var t=n()("TermRowSeparator",{"TermRowSeparator--large":this.props.shouldUseLargeSeparator});return r.a.createElement("div",{className:t,"data-term-luid":this.props.precedingLuid},this.props.includeAddRowButton?r.a.createElement("span",{className:"TermRowSeparator-addRowBetweenButton"},r.a.createElement(o.a,{icon:"plus-thin",onClick:this.handleClickAddRow,tabIndex:-1,title:e("create_set.term_context.tooltips.add_row")})):null)}}}).call(this,i("nrsj").default)},mmNe:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("Uudg"),n=i("6rYD"),o=i("TX86"),l=i.n(o),u=i("q1tI"),d=i.n(u),c=i("Vrs+"),h=i("+IfW"),p=i("niBS"),g=Object(p.b)(200);class m extends d.a.PureComponent{constructor(){super(...arguments),this.state={activeResultIndex:0},this.handleClickDefinition=(e,t)=>{t.preventDefault(),this.props.onSelectAutodefineResult(e)},this.handleDefinitionHover=(e,t)=>{t.preventDefault(),this.setActiveResultIndex(e)},this.definitionRefs={},this._hasOverflowingResults=!1}componentDidMount(){this.props.enabled&&this.onOpen()}UNSAFE_componentWillReceiveProps(e){!this.props.enabled&&e.enabled&&this.onOpen(),this.props.enabled&&!e.enabled&&this.onClose()}componentDidUpdate(e,t){if(t.activeResultIndex!==this.state.activeResultIndex){var i=this.definitionRefs["definition-"+this.state.activeResultIndex];i.focus(),i.blur()}e.results!==this.props.results&&(this._hasOverflowingResults=this.resultsContainer.scrollHeight>g)}componentWillUnmount(){this.onClose()}onClose(){l.a.unbind(n.a.autodefine.prevResult,this.props.termLuid),l.a.unbind(n.a.autodefine.nextResult,this.props.termLuid),l.a.unbind(n.a.autodefine.selectResult,this.props.termLuid),this.props.onClose&&this.props.onClose()}onOpen(){this.setState({activeResultIndex:0}),l.a.setScope(this.props.termLuid),l()(n.a.autodefine.prevResult,this.props.termLuid,(()=>{if(this.setActiveResultIndex(this.state.activeResultIndex-1))return!1})),l()(n.a.autodefine.nextResult,this.props.termLuid,(()=>{if(this.setActiveResultIndex(this.state.activeResultIndex+1))return!1})),l()(n.a.autodefine.selectResult,this.props.termLuid,(()=>{var e=this.props.results[this.state.activeResultIndex];if(e)return this.props.onSelectAutodefineResult&&this.props.onSelectAutodefineResult(e),!1}))}renderResults(){if(this.props.isLoading)return d.a.createElement("div",{className:"AutodefineContext-resultWrapper"},d.a.createElement(a.a,{id:"create_set.term_context.autodefine.loading"}));if(!this.props.results.length)return d.a.createElement("div",{className:"AutodefineContext-resultWrapper"},d.a.createElement(a.a,{id:"create_set.term_context.autodefine.no_results"}));var{activeResultIndex:e}=this.state,t=this.props.results.map(((t,i)=>{var s=r()("AutodefineContext-result","lang-"+this.props.resultLang,{"is-active":i===e}),a="definition-"+i;return d.a.createElement("div",{className:"AutodefineContext-resultWrapper",key:a},d.a.createElement("a",{className:s,href:"#",onClick:this.handleClickDefinition.bind(null,t),onMouseOver:this.handleDefinitionHover.bind(null,i)},this.props.resultRenderer(t)),d.a.createElement("input",{"aria-label":t,className:"AutodefineContext-resultCover",readOnly:!0,ref:e=>{this.definitionRefs[a]=e}}))}));return d.a.createElement("div",{className:"AutodefineContext-results"},t)}render(){var e=r()("AutodefineContext",{"has-results":this.props.results.length>0,"is-loading":this.props.isLoading,"has-overflowingResults":this._hasOverflowingResults});return d.a.createElement("div",{className:e},d.a.createElement("div",{className:"AutodefineContext-wrapper"},d.a.createElement("div",{className:"AutodefineContext-resultsContainer",ref:e=>{this.resultsContainer=e}},this.renderResults())))}setActiveResultIndex(e){return!!this.props.results.length&&(this.setState({activeResultIndex:Object(c.a)(e,this.props.results.length)}),!0)}}m.defaultProps={resultRenderer:e=>Object(h.a)(e,300)}},mmUd:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("zK28"),r=()=>!(!s.a.user||s.a.user.isVerified||0!==s.a.user.type&&3!==s.a.user.type)},nCwC:function(e,t,i){"use strict";i("4mDm"),i("3bBZ"),i("zKZe"),i("E9XD"),i("5s+n"),i("4Brf");var s=i("oYtC"),r=i("FAB2"),a=i("mCkr"),n=i("YUt4"),o=i("SQJ4"),l=i("zK28"),u=e=>e[0]&&e[0].data&&e[0].data.suggestions&&e[0].data.suggestions.languages[0],d=e=>Object.assign({},e,{languageCode:e.language_code});class c extends o.a{static detect(e){return c.post({strings:e,clientId:l.a.uid}).then(u).then(d)}}c.URL_BASE="suggestions/language",c.API_VERSION="3.2";class h extends o.a{}h.URL_BASE="detect-profanity",h.API_VERSION="3.1";var p=h,g=i("5Vd8"),m=i("GFZu"),f=i("KD7m"),v=i("sLV1"),_={setSyncer:g.a,update(e,t,i){void 0===i&&(i=!0),i&&(_.maybeDetectProfanity(e,t),this.setSyncer.save(e,t).then(_.updateSuccess).catch(_.updateFailure)),n.a.viewAction(r.a.UPDATE,{luid:e,props:t})},updateLang(e,t,i){var s="word"===t?"wordLang":"defLang",r=Object(m.a)(s,i);return _.update(e,r)},updateSuccess(e){var[t,i]=e;n.a.serverAction(r.a.UPDATE_SUCCESS,{luid:t,model:i})},updateFailure(e){var[t,i,s]=e;n.a.serverAction(r.a.UPDATE_FAILURE,{luid:i,model:s,error:t})},discard(e){return n.a.viewAction(r.a.DISCARD,{luid:e}),this.setSyncer.del(e).then(_.discardSuccess).catch(_.discardFailure)},discardSuccess(e){var[t,i]=e;n.a.serverAction(r.a.DISCARD_SUCCESS,{luid:t,model:i})},discardFailure(e){var[t,i,s]=e;n.a.serverAction(r.a.DISCARD_FAILURE,{luid:i,model:s,error:t})},publish(){n.a.viewAction(r.a.PUBLISH)},publishSync(e,t){void 0===t&&(t={});var i=Math.max(Object(v.a)(),1),r=this.setSyncer.getModel(e).get("publishedTimestamp")||i,a=Object.assign({},t,{publishedTimestamp:r});return this.setSyncer.save(e,a).then((e=>{var[t,i]=e;s.a.persistClassSetsForPermissions(t).then((()=>_.publishSuccess([t,i])))})).catch(_.publishFailure)},publishSuccess(e){var[t,i]=e;n.a.serverAction(r.a.PUBLISH_SUCCESS,{luid:t,model:i})},publishFailure(e){var[t,i,s]=e;n.a.serverAction(r.a.PUBLISH_FAILURE,{luid:i,model:s,error:t})},focusTitle(){n.a.viewAction(r.a.FOCUS_TITLE)},blurTitle(){n.a.viewAction(r.a.BLUR_TITLE)},showTerms(){n.a.viewAction(r.a.SHOW_TERMS)},hideTerms(){n.a.viewAction(r.a.HIDE_TERMS)},detectLanguage(e,t,i){void 0===i&&(i=[]);var s=i.reduce(((e,t)=>{var i=Object(f.a)(t);return i.length>=r.b.MIN_LENGTH&&e.add(i),e}),new Set([])),a=Array.from(s);return 0===a.length?Promise.resolve():(n.a.viewAction(r.a.DETECT_LANGUAGE,{text:a,side:t,luid:e}),c.detect(a).then((i=>{i.confidence>r.b.CONFIDENCE_THRESHOLD&&_.updateLang(e,t,i.languageCode)})).catch((i=>n.a.serverAction(r.a.DETECT_LANGUAGE_FAILURE,{luid:e,side:t,error:i}))))},showLangSelect(e,t,i,s){void 0===s&&(s=!1),n.a.viewAction(r.a.SHOW_LANG_SELECT,{side:t,luid:e,row:i,triggerAutodefine:s})},hideLangSelect(){n.a.viewAction(r.a.HIDE_LANG_SELECT)},maybeDetectProfanity:(e,t)=>!t.title&&!t.description||a.a.getUser().isVerified?Promise.resolve():new Promise((()=>{var i="",s="";return void 0!==t.title?(i="title",s=t.title):void 0!==t.description&&(i="description",s=t.description),p.get({text:s}).then((t=>n.a.serverAction(r.a.DETECT_PROFANITY_SUCCESS,{luid:e,field:i,results:t[0]}))).catch((t=>n.a.serverAction(r.a.DETECT_PROFANITY_FAILURE,{luid:e,error:t})))})),maybeCreateSet(e){return new Promise(((t,i)=>{var s=this.setSyncer.getModel(e);return s.isNewRecord()?(s.clientValidationsHaveRun=!1,this.setSyncer.save(e,{}).then((e=>{var[i,s]=e,r=s.get("id");return t(r),_.updateSuccess([i,s])})).catch((e=>{var[t,s,r]=e;return i(t),_.updateFailure([t,s,r])}))):t(s.get("id"))}))},updateStickyHeaderHeight(e){n.a.viewAction(r.a.UPDATE_STICKY_HEADER_HEIGHT,{heightInPx:e})}};t.a=_},nWxO:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return z}));i("4mDm"),i("3bBZ"),i("FZtP"),i("Rm1S"),i("zKZe"),i("E9XD"),i("ToJy");var s=i("1Pxe"),r=i("6MTt"),a=i("TSYQ"),n=i.n(a),o=i("Uudg"),l=i("DLQF"),u=i("jiwd"),d=i("7n6V"),c=i("FenW"),h=i("FQ3H"),p=i("IpYc"),g=i("mbeC"),m=i("VR72"),f=i("FAB2"),v=i("QMP1"),_=i("bo+9"),E=i("sWWp"),b=i("BOZ9"),S=i("0j+G"),C=i("9WHe"),T=i("QLaP"),y=i.n(T),I=i("sEfC"),A=i.n(I),O=i("WjpJ"),w=i.n(O),D=i("1iNE"),L=i.n(D),R=i("q1tI"),x=i.n(R),P=i("i8i4"),M=i("UCgN"),U=i("yckm"),k=i("SdpW"),N=i("n29V"),F=i("+RhX"),j=i("EFuM"),B=i("dCi4"),V=new N.a,H=new N.a;function W(e){e&&(V.delete(e),H.delete(e))}function G(e,t){e!==t&&(W(e),W(t))}var q=(e,t)=>e.map(t).forEach(W),K=(e,t)=>t.startIndex<=e&&e<=t.endIndex;class z extends R.PureComponent{constructor(e){var t;super(e),t=this,this.fetchCustomAudioStore=()=>({customAudios:_.a.getAll()}),this.fetchRecorderStore=()=>({recorderState:{error:b.a.getError(),errorCode:b.a.getErrorCode(),hasBlockingUpsellBeenDismissed:b.a.hasBlockingUpsellBeenDismissed(),implementation:b.a.getImplementation(),initialized:b.a.isInitialized(),permissions:b.a.getPermissions(),status:b.a.getStatus(),volume:b.a.getVolume()}}),this.fetchTermStore=()=>({activeContext:S.b.getActiveContext(),activeRow:S.b.getActiveRow(),activeSide:S.b.getActiveSide(),autodefineResults:S.b.getAutodefineResults(),definitionSideSuggestions:S.b.getDefinitionSideSuggestions(),distractorSuggestions:S.b.getDistractorSuggestions(),ignoredDuplicateWords:S.b.getIgnoredDuplicateWords(),imageSearchResults:S.b.getImageSearchResults(),phantomRow:S.b.getPhantomRow(),profanityResults:S.b.getProfanityResults(),termImageMap:S.b.getImageMap(),terms:S.b.getAll(),termsOrder:S.b.getOrder(),termDefinitionCustomAudioMap:S.b.getTermDefinitionCustomAudioMap(),termWordCustomAudioMap:S.b.getTermWordCustomAudioMap(),wordSideSuggestions:S.b.getWordSideSuggestions(),wordsToLuids:S.b.getWordsToLuids()}),this.fetchImageStore=()=>({images:E.a.getAll(),imagePlaceholders:E.a.getPlaceholders()}),this.getNextActiveDuplicate=e=>{for(var t,{word:i}=this.state.terms[e],s=this.duplicateLuids.indexOf(e);t!==e;)if(s=(s+1)%this.duplicateLuids.length,t=this.duplicateLuids[s],i===this.state.terms[t].word)return t},this.getHeight=e=>{var t=this.getBoundingClientRect(e);return t?t.height:null},this.getUncachedBoundingClientRect=e=>{var t=this.getTermRowDOMNode(e);return t instanceof HTMLElement?t.getBoundingClientRect():null},this.getDropLocation=()=>this.state.dropLocation&&this.state.draggedOverRow&&this.isPhantom(this.state.draggedOverRow)?v.f.BEFORE:this.state.dropLocation,this.getTopVisibleRowIndex=()=>{var e=window.document.elementFromPoint(Object(B.b)()/2,this.props.stickyHeaderHeight+1),t=Object(k.a)(e,(e=>e.hasAttribute("data-term-luid"))),i=null==t?void 0:t.getAttribute("data-term-luid");return i?this.getIndex(i):0},this.getLastVisibleRowIndex=e=>{for(var t=e;t<this.state.termsOrder.length;t++)if(!this.isLuidInViewport(this.getLuid(t)))return t;return this.state.termsOrder.length},this.getTermRowDOMNode=e=>this.termRefs[e]&&Object(P.findDOMNode)(this.termRefs[e]),this.getImageSearchResults=e=>{if(!this.state.imageSearchResults[e])return null;var t=this.state.imageSearchResults[e],i={};for(var s of t.imageLuids)i[s]=this.state.images[s];return i},this.getAutodefineResults=e=>this.state.autodefineResults&&this.state.autodefineResults[e]?this.state.autodefineResults[e]:null,this.getProfanityResults=e=>this.state.profanityResults&&this.state.profanityResults[e]?this.state.profanityResults[e]:null,this.getDuplicateStatus=e=>{if(-1===this.duplicateLuids.indexOf(e))return null;var{hoverRow:t,activeRow:i}=this.state,s=null;return t&&-1!==this.duplicateLuids.indexOf(t)&&this.state.terms[t]?s=this.state.terms[t].word:i&&-1!==this.duplicateLuids.indexOf(i)&&(s=this.state.terms[i].word),s&&this.state.terms[e].word===s?v.h.ACTIVE_DUPLICATE:v.h.INACTIVE_DUPLICATE},this.getNumTerms=function(e){return void 0===e&&(e=t.state),t.hasPhantomRow(e)?e.termsOrder.length-1:e.termsOrder.length},this.getSiblingRow=(e,t)=>{var i=this.getIndex(e)+t,s=this.getLastIndex(),r=null;return i<=s?r=this.getLuid(i):s>0&&t>0&&(r=this.getLuid(s-1)),r},this.getIndex=e=>this.state.termsOrder.indexOf(e),this.getLastIndex=function(e){return void 0===e&&(e=t.state),t.getNumTerms(e)-1},this.getLuid=e=>this.state.termsOrder[e],this.getBoundingClientRect=e=>this.isActive(e)?this.getUncachedBoundingClientRect(e):function(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];return H.memoize(e,t,...s)}(e,this.getUncachedBoundingClientRect,e),this.getImageLuidToTermLuid=e=>{for(var t=Object.keys(this.state.termImageMap),i=0;i<t.length;i++){var s=t[i],[r,a]=this.state.termImageMap[s];if(e===a)return s}return null},this.onScroll=()=>{this.props.isHidden||window.requestAnimationFrame(this.debouncedUpdateView)},this.onDragEnd=e=>{this.props.onDragEnd();var{draggedOverRow:t}=this.state,i=this.getIndex(e),s=t?this.getIndex(t):-1;i<s&&(s-=1),this.state.dropLocation===v.f.AFTER&&(s+=1);var r=this.getLastIndex();s>r&&(s=r),s<0&&(s=0),i!==s&&c.a.move(this.props.setLuid,e,i,s),this.setState({dropLocation:null,draggedRow:null,draggedOverRow:null})},this.onOpenVoiceRecordingPermissionsModal=()=>{this.state.isVoiceRecordingPermissionsModalOpen||this.setState({isVoiceRecordingPermissionsModalOpen:!0})},this.onMouseLeave=()=>{this.setState({hoverRow:null})},this.onMouseEnter=e=>{Object(j.j)()||this.setState({hoverRow:e})},this.onMoveDown=(e,t)=>{var i=this.getIndex(e);if(c.a.move(this.props.setLuid,e,i,i+1),t.shouldCenter)this.scrollToCenter(e);else{var s=this.getSiblingRow(e,1);if(s){var r=this.getHeight(s);r&&F.a.scrollBy(r)}}},this.onMoveUp=(e,t)=>{var i=this.getIndex(e);if(c.a.move(this.props.setLuid,e,i,i-1),t.shouldCenter)this.scrollToCenter(e);else{var s=this.getSiblingRow(e,-1);if(s){var r=this.getHeight(s);r&&F.a.scrollBy(-1*r)}}},this.onAddRow=e=>{var t=c.a.bulkCreate([this.getIndex(e)+1]);window.setTimeout((()=>{this.termRefs[t]&&this.termRefs[t].focusWord()}),0)},this.onDragStart=(e,t)=>{var i=window.getSelection();if(!i||"Range"!==i.type){var s=this.getBoundingClientRect(e);if(s){t.dataTransfer.setData&&"function"==typeof t.dataTransfer.setData&&t.dataTransfer.setData("text",e),t.dataTransfer.effectAllowed="move";var{top:r,left:a}=s,n=t.clientX-a,o=t.clientY-r;t.dataTransfer.setDragImage&&"function"==typeof t.dataTransfer.setDragImage&&t.dataTransfer.setDragImage(this.getTermRowDOMNode(e),n,o);var l=this.getHeight(e),u={};this.state.draggedHeight!==l&&(u.draggedHeight=l),this.state.draggedRow!==e&&(u.draggedRow=e),L()(u)&&this.setState(u)}}},this.onDragLeave=()=>{},this.onDragEnter=(e,t)=>{this.onDragEnterOrOver(e,t)},this.onDragOver=(e,t)=>{t.preventDefault(),this.state.draggedRow!==e&&this.onDragEnterOrOver(e,t)},this.onBulkImageUpload=(e,t,i)=>{if(!(e.length<=0)){if(1===e.length&&i){var[s,r]=this.state.termImageMap[t]||[null,null];return this.onActive(t),d.a.bulkCreate([{file:e[0],setLuid:this.props.setLuid,termLuid:t,termImageLuid:s}])}var a=S.b.getImagelessTermLuids(this.state.images,t),n=this.createBulkImageData(e,a);return this.onActive(n[0].termLuid),d.a.bulkCreate(n)}},this.onFocusActiveRow=()=>{this.state.activeRow&&this.termRefs[this.state.activeRow]&&this.termRefs[this.state.activeRow].focus()},this.onCloseVoiceRecordingPermissionsModal=()=>{this.state.isVoiceRecordingPermissionsModalOpen&&this.setState({isVoiceRecordingPermissionsModalOpen:!1})},this.handleDeleteRow=e=>{try{c.a.del(e)}catch(t){t.message&&t.message.match("not found")||C.a.error(t)}},this.onActive=e=>{this.isActive(e)||c.a.activateRow(e)},this.onDragEnterOrOver=(e,t)=>{if(e!==v.a){var i=this.getBoundingClientRect(e);if(i){this.props.onDragEnterOrOver(t);var s=0;this.state.dropLocation&&(this.state.dropLocation===v.f.BEFORE?s=16:this.state.dropLocation===v.f.AFTER&&(s=-16));var{top:r}=i,a=t.clientY+s-r,n=this.getHeight(e);y()(n,"Missing termHeight.");var o=a>n/2?v.f.AFTER:v.f.BEFORE;o!==this.state.dropLocation&&this.setState({dropLocation:o}),this.state.draggedOverRow!==e&&this.setState({draggedOverRow:e})}}},this.onScrollToOffset=e=>{if(this.state.activeRow){var t=this.getSiblingRow(this.state.activeRow,e);t&&this.scrollToCenter(t)}},this.renderUncachedTermRow=e=>{var t=this.getNumTerms(),i=this.state.terms[e],[s,r]=this.state.termImageMap[e]||[null,null],a=this.state.images[r]||null,o=this.state.imagePlaceholders[r]||null,l=this.state.imageSearchResults[e],u=this.state.termWordCustomAudioMap[e],d=this.state.customAudios[u],c=this.state.termDefinitionCustomAudioMap[e],p=this.state.customAudios[c],g=this.getIndex(e),m=this.props.hasMinTermsError&&(0===g||1===g)&&!i.id,f=this.getDuplicateStatus(e),v=this.rowToAskLangFor===e,{openLangSelectSide:_}=this.props,E=this.props.hasSyncingError?S.b.getUnsavedTermUpdates(this.props.shouldLogForRichTextDebugging):{},b=n()("TermRows-termRowWrap",{"TermRows-bareRow":this.isInvisible(e)});return x.a.createElement("div",{className:b,"data-term-luid":e,key:e},x.a.createElement(h.a,{activeContext:this.isActive(e)?this.state.activeContext:null,activeSide:this.state.activeSide,autodefineResults:this.getAutodefineResults(e),canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,createSetImageUploadCtaTestVariant:this.state.createSetImageUploadCtaTestVariant,definitionCustomAudio:p,definitionCustomAudioLuid:c,definitionSideSuggestions:this.state.definitionSideSuggestions,defLang:this.props.defLang,distractorSuggestions:this.state.distractorSuggestions,duplicateStatus:f,hasDefLangError:this.props.hasDefLangError&&(0===g||this.isActive(e)),hasMinTermsError:m,hasWordLangError:this.props.hasWordLangError&&(0===g||this.isActive(e)),image:a,imageLuid:r,imageSearchMeta:l,imageSearchResults:this.getImageSearchResults(e),index:g,innerRef:t=>{this.termRefs[e]=t},isActive:this.isActive(e),isAutosuggestionEnabled:this.props.isAutosuggestionEnabled,isChooseLangSelected:v&&null!==_,isDragged:this.isDragged(e),isDraggedActive:this.isDraggedActive(e),isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isNotSynced:this.props.hasSyncingError&&e in E,isPhantom:this.isPhantom(e),isReordering:!!this.state.draggedRow,isReportingFlowBlocked:this.props.isReportingFlowBlocked,isSetContentTypeDiagrams:this.props.isSetContentTypeDiagrams,langPromptSide:v?this.sideToAskLangFor:null,onActive:this.onActive,onAddRow:this.onAddRow,onBulkImageUpload:this.onBulkImageUpload,onCloseVoiceRecordingPermissionsModal:this.onCloseVoiceRecordingPermissionsModal,onDeleteRow:this.handleDeleteRow,onDragEnd:this.onDragEnd,onDragEnterEnd:this.onDragEnter,onDragLeaveEnd:this.onDragLeave,onDragOver:this.onDragOver,onDragStart:this.onDragStart,onFocusActiveRow:this.onFocusActiveRow,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMoveDown:this.onMoveDown,onMoveUp:this.onMoveUp,onOpenVoiceRecordingPermissionsModal:this.onOpenVoiceRecordingPermissionsModal,onScrollToOffset:this.onScrollToOffset,onToggleAutosuggest:this.props.onToggleAutosuggest,onViewDuplicate:this.scrollToNextDuplicate,placeholderImage:o,profanityResults:this.getProfanityResults(e),recentLanguages:this.props.recentLanguages,recorderState:this.state.recorderState,setLuid:this.props.setLuid,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowTeacherCustomDistractorCreation:this.props.shouldShowTeacherCustomDistractorCreation,shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldTriggerAutodefine:!(!v||!_)&&_.triggerAutodefine,shouldUseCleanDesign:this.props.shouldUseCleanDesign,term:i,termImageLuid:s,termLuid:e,terms:this.state.terms,totalCount:t,user:this.props.user,userLocale:this.props.userLocale,viewOnly:this.props.viewOnly,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordCustomAudio:d,wordCustomAudioLuid:u,wordLang:this.props.wordLang,wordSideSuggestions:this.state.wordSideSuggestions}))},this.customAudioLuidToTermLuid=e=>{var{termWordCustomAudioMap:t,termDefinitionCustomAudioMap:i}=this.state;for(var s in t)if(t[s]===e)return s;for(var r in i)if(i[r]===e)return r;return null},this.scrollToCenter=e=>{var t=this.getTermRowDOMNode(e);y()(t instanceof HTMLElement,"Incorrect node.");var i=t&&t.offsetParent.offsetTop,s=(null==t?void 0:t.offsetTop)+i-Object(B.a)()/2,r=Math.max(0,s);F.a.scrollTo(r)},this.updateView=()=>{var e=this.state.termsOrder.length,t=Math.ceil(Object(B.a)()/v.i.TERM_ROW_MIN_HEIGHT),i=this.getTopVisibleRowIndex(),s=Math.min(i+t,e-1),r=this.getLastVisibleRowIndex(s),a=Math.max(50,t,r-i);this.setState({startIndex:Object(M.a)(i-a,0,e-50),endIndex:r+a})},this.disablePartialRendering=()=>{this.scrollListener&&(this.scrollListener.remove(),this.scrollListener=null),this.resizeListener&&(this.resizeListener.remove(),this.resizeListener=null)},this.enablePartialRendering=()=>{this.disablePartialRendering(),this.scrollListener=U.a.listen(window,"scroll",this.onScroll),this.resizeListener=U.a.listen(window,"resize",this.onScroll),this.debouncedUpdateView()},this.scrollToNextDuplicate=e=>{var t=this.getNextActiveDuplicate(e);y()(t,"Missing nextLuid."),c.a.activateRow(t),this.scrollToCenter(t)},this._onRecorderChange=()=>{W(this.state.activeRow),this.setState(this.fetchRecorderStore(),(()=>this.forceUpdate()))},this._onCustomAudiosChange=e=>{q(e,this.customAudioLuidToTermLuid),this.setState(this.fetchCustomAudioStore(),(()=>this.forceUpdate()))},this._onImagesChange=e=>{q(e,this.getImageLuidToTermLuid),this.setState(this.fetchImageStore(),(()=>this.forceUpdate()))},this._onTermsChange=e=>{e&&e.forEach(W),this.setState(this.fetchTermStore(),(()=>this.forceUpdate()))};var i={draggedHeight:null,draggedOverRow:null,draggedRow:null,dropLocation:null,endIndex:200,hoverRow:null,isVoiceRecordingPermissionsModalOpen:!1,startIndex:0};this.state=Object.assign({},i,this.fetchTermStore(),this.fetchImageStore(),this.fetchCustomAudioStore(),this.fetchRecorderStore(),{createSetImageUploadCtaTestVariant:r.b.getVariationAndEnroll("CreateSetImageUploadCtaV2[default,subscriptions]")}),this.duplicateLuids=this.rebuildDuplicateLuids(this.state),this.termRefs={},this.debouncedUpdateView=A()(this.updateView,100)}UNSAFE_componentWillMount(){S.b.addChangeListener(this._onTermsChange),E.a.addChangeListener(this._onImagesChange),_.a.addChangeListener(this._onCustomAudiosChange),b.a.addChangeListener(this._onRecorderChange)}componentDidMount(){this.sideToAskLangFor=null,this.rowToAskLangFor=null,this.scrollToBottomTimer=null,this.isPartialRenderingEnabled()&&this.enablePartialRendering(),(this.props.shouldShowTooltipRichText||this.props.shouldShowTooltipAudio)&&this.giveFocusToFirstTerm()}UNSAFE_componentWillUpdate(e,t){var i=function(e){if(e.openLangSelectSide)return e.openLangSelectSide.side;if(e.wordLang&&e.defLang)return null;var t=e.detectLanguageResults.word;if(!e.wordLang&&t&&t.data&&t.data.length>=0)return u.a.WORD_SIDE;var i=e.detectLanguageResults.definition;return!e.defLang&&i&&i.data&&i.data.length>=0?u.a.DEFINITION_SIDE:null}(e),s=function(e,t,i){if(t.openLangSelectSide)return t.openLangSelectSide.row?t.openLangSelectSide.row:i.termsOrder[0];if(!e)return null;for(var s of i.termsOrder)if(i.terms[s][e])return s;return null}(i,e,t),r=this.duplicateLuids;this.state.wordsToLuids===t.wordsToLuids&&this.state.ignoredDuplicateWords===t.ignoredDuplicateWords||(r=this.rebuildDuplicateLuids(t));var a=this.isPartialRenderingEnabled(),n=this.isPartialRenderingEnabled(t);this.props.wordLang!==e.wordLang||this.props.defLang!==e.defLang||this.props.canUseImageUpload!==e.canUseImageUpload||this.props.canUseVoiceRecording!==e.canUseVoiceRecording||this.props.hasSyncingError!==e.hasSyncingError||this.props.isAutosuggestionEnabled!==e.isAutosuggestionEnabled||a!==n?(V.clear(),H.clear()):this.selectivelyClearTermRowCache(e,t,i,s),this.sideToAskLangFor=i,this.rowToAskLangFor=s,this.duplicateLuids=r,a&&!n?this.disablePartialRendering():!a&&n&&this.enablePartialRendering()}componentDidUpdate(e,t){var i=t.termsOrder.length,s=this.state.termsOrder.length,r=t.termsOrder[i-1],a=this.getLuid(s-1);if(!this.props.isIOS&&!e.viewOnly&&this.hasPhantomRow()&&i>0&&s>i&&a!==r){var n=(window.document.querySelector(".SiteHeader")?window.document.querySelector(".SiteHeader").scrollHeight:0)+window.document.querySelector(".CreateSetPage").scrollHeight-Object(B.a)(),o=n-F.a.getScrollTop();o>0&&o<500&&(this.scrollToBottomTimer&&clearTimeout(this.scrollToBottomTimer),this.scrollToBottomTimer=window.setTimeout((()=>F.a.scrollTo(n)),150))}}componentWillUnmount(){this.scrollToBottomTimer&&clearTimeout(this.scrollToBottomTimer),this.isPartialRenderingEnabled()&&this.disablePartialRendering(),S.b.removeChangeListener(this._onTermsChange),E.a.removeChangeListener(this._onImagesChange),_.a.removeChangeListener(this._onCustomAudiosChange),b.a.removeChangeListener(this._onRecorderChange)}renderMaxTermsWarning(){return x.a.createElement("div",{className:"TermRows-maxTermsWarning"},x.a.createElement(l.a,{boxed:!0,uppercaseDeprecated:!0},x.a.createElement(o.a,{id:"create_set.max_terms_warning",maxNumTerms:f.d.MAX_TERMS})))}renderPlaceholder(e){if(!e||!(e in this.state.terms))return null;var{draggedHeight:t}=this.state;return y()(t,"Missing draggedHeight in renderPlaceholder"),x.a.createElement("div",{className:"TermRows-placeholderWrap",key:"placeholder"},x.a.createElement(p.a,{height:t,onDragEnterEnd:this.onDragEnter,termLuid:v.a}))}renderRowSeparator(e){return x.a.createElement(g.a,{includeAddRowButton:this.canAddRowAfter(e),key:"separator-"+e,onAddRow:this.onAddRow,precedingLuid:e,shouldUseLargeSeparator:this.props.shouldUseCleanDesign})}renderTermRow(e){return function(e,t){for(var i=arguments.length,s=new Array(i>2?i-2:0),r=2;r<i;r++)s[r-2]=arguments[r];return V.memoize(e,t,...s)}(e,this.renderUncachedTermRow,e)}renderTerms(){var e=this.getDropLocation(),t=!Object(j.f)()&&this.getNumTerms()<50;return x.a.createElement(s.CSSTransitionGroup,{component:"div",transitionEnter:t,transitionLeave:t,transitionName:"TermRows--animateRow"},this.state.termsOrder.reduce(((t,i)=>(this.isDraggedOverRow(i)&&e===v.f.BEFORE&&(y()(this.state.draggedRow,"Missing this.state.draggedRow."),t.push(this.renderPlaceholder(this.state.draggedRow))),t.push(this.renderTermRow(i)),this.isPhantom(i)||this.isDraggedActive(i)||t.push(this.renderRowSeparator(i)),this.isDraggedOverRow(i)&&e===v.f.AFTER&&(y()(this.state.draggedRow,"Missing this.state.draggedRow."),t.push(this.renderPlaceholder(this.state.draggedRow))),t)),[]))}render(){var e=n()("TermRows",{"is-hidden":this.props.isHidden});return x.a.createElement("div",{className:e},this.renderTerms(),this.canInsertTerms()?null:this.renderMaxTermsWarning(),x.a.createElement(m.a,{isOpen:this.state.isVoiceRecordingPermissionsModalOpen,onClose:this.onCloseVoiceRecordingPermissionsModal,recorderState:this.state.recorderState}))}isDraggedOverRow(e){return!!this.state.draggedRow&&this.state.draggedOverRow===e}isDraggedActive(e){return!(!this.isDragged(e)||!this.state.draggedOverRow)}canAddRowAfter(e){return!!this.canInsertTerms()&&(!this.props.viewOnly&&(!this.isPhantom(e)&&(this.getIndex(e)!==this.getNumTerms()-1&&(!this.isActive(e)||!this.state.activeContext))))}isDragged(e){return e===this.state.draggedRow}isPhantom(e){return e===this.state.phantomRow&&!this.isActive(e)}isInvisible(e){return this.isPartialRenderingEnabled()&&!K(this.getIndex(e),this.state)&&!this.isPhantom(e)&&!this.isActive(e)&&!this.isDragged(e)}isActive(e){return e===this.state.activeRow}hasPhantomRow(e){return void 0===e&&(e=this.state),null!==e.phantomRow}createBulkImageData(t,i){var s=[],r=Math.max(0,t.length-i.length),a=w()(0,r).map((e=>this.state.termsOrder.length-1+e)),n=c.a.bulkCreate(a),o=0;for(var l of i.concat(n)){if(o>=t.length)break;s.push({file:t[o++],setLuid:this.props.setLuid,termLuid:l})}if(o<t.length){var u=w()(o,t.length).map((e=>t[e]));d.a.bulkUploadFailure({message:e("create_set.bulk_upload_failure",{maxNumTerms:f.d.MAX_TERMS}),files:u})}return s}canInsertTerms(){return this.getNumTerms()<f.d.MAX_TERMS}giveFocusToFirstTerm(){window.setTimeout((()=>{var e=this.termRefs[this.state.termsOrder[this.state.startIndex]];e&&e.focusWord()}),0)}rebuildDuplicateLuids(e){var t=[];return Object.keys(e.wordsToLuids).forEach((i=>{var s=e.wordsToLuids[i];-1===e.ignoredDuplicateWords.indexOf(i)&&L()(s)>1&&t.push(...s)})),t.sort(((t,i)=>e.terms[t].rank-e.terms[i].rank)),t}isLuidInViewport(e){var t=this.getBoundingClientRect(e);if(!t)return!1;var{top:i,left:s,bottom:r,right:a}=t;return i>=0&&s>=0&&r<=Object(B.a)()&&a<=Object(B.b)()}selectivelyClearTermRowCache(e,t,i,s){for(var r=0;r<this.state.termsOrder.length;r++)(K(r,this.state)&&!K(r,t)||!K(r,this.state)&&K(r,t))&&W(this.getLuid(r));(!this.props.hasMinTermsError&&e.hasMinTermsError||!this.props.hasDefLangError&&e.hasDefLangError||!this.props.hasWordLangError&&e.hasWordLangError)&&t.termsOrder.slice(0,f.d.MIN_TERMS).forEach(W);var a=this.getLastIndex(this.state),n=this.getLastIndex(t);G(this.getLuid(0),t.termsOrder[0]),G(this.getLuid(a),t.termsOrder[n]),this.getNumTerms(t)<=f.d.MIN_TERMS&&t.termsOrder.slice(0,f.d.MIN_TERMS+1).forEach(W),this.getNumTerms()<=f.d.MIN_TERMS&&this.state.termsOrder.slice(0,f.d.MIN_TERMS+1).forEach(W),G(this.state.activeRow,t.activeRow),G(this.state.phantomRow,t.phantomRow),G(this.state.hoverRow,t.hoverRow),G(this.state.draggedOverRow,t.draggedOverRow),this.state.draggedOverRow===t.draggedOverRow&&this.state.draggedRow===t.draggedRow||(W(this.state.draggedRow),W(t.draggedRow)),this.state.activeRow===t.activeRow&&this.state.hoverRow===t.hoverRow||this.duplicateLuids.forEach(W),G(this.rowToAskLangFor,i),this.sideToAskLangFor!==s&&(W(this.rowToAskLangFor),W(i)),(this.state.wordSideSuggestions!==t.wordSideSuggestions||this.state.definitionSideSuggestions!==t.definitionSideSuggestions)&&W(this.state.activeRow)}isPartialRenderingEnabled(e){return void 0===e&&(e=this.state),this.getNumTerms(e)>200}}z.defaultProps={detectLanguageResults:{},hasSyncingError:!1,isReportingFlowBlocked:!1,isSetContentTypeDiagrams:!1,shouldUseCleanDesign:!1}}).call(this,i("nrsj").default)},niDJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("pVnL"),r=i.n(s),a=i("8OQS"),n=i.n(a),o=i("Pxp3"),l=i("q1tI"),u=i.n(l),d=i("UaYY");class c extends u.a.PureComponent{render(){var e=this.props,{children:t,value:i}=e,s=n()(e,["children","value"]);return u.a.createElement(d.RadioGroup,r()({},s,{className:"UIRadioGroup",Component:o.a,selectedValue:i}),u.a.Children.map(t,(e=>u.a.isValidElement(e)?u.a.cloneElement(e,{Component:d.Radio}):null)))}}},nmax:function(e,t,i){"use strict";i("FZtP"),i("zKZe");var s=i("YUt4"),r=i("+qE3"),a="change",n={_handlers:null,_waitForTokens:null,dispatchToken:null,addChangeListener(e){this.on(a,e)},removeChangeListener(e){this.removeListener(a,e)},change(e){this.emit(a,e)},init(){this._handlers={},this._waitForTokens={},this.dispatchToken=s.a.register((e=>{s.a.waitFor(Object.keys(this._waitForTokens));var{actionType:t,payload:i}=e;if(!t)throw new Error("Action type unspecified");t in this._handlers&&this.change(this._handlers[t](i))}))},bindActions(e,t){if("string"!=typeof e)throw new Error("Action must be a string");if("function"!=typeof t)throw new Error("Handler must be a function");this._handlers[e]=t.bind(this)},waitFor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Array.from(t).forEach((e=>{this._waitForTokens[e.dispatchToken]=!0}))}};n=Object.assign(n,r.EventEmitter.prototype),t.a=n},nuPN:function(e,t,i){"use strict";i.d(t,"a",(function(){return T}));i("FZtP");var s=i("xqF0"),r=i("pfAI"),a=i("6rYD"),n=i("QMP1"),o=i("TX86"),l=i.n(o),u=i("1iNE"),d=i.n(u),c=i("q1tI"),h=i.n(c),p=i("i8i4"),g=i("Vrs+"),m=i("l6OD"),f=i("srU6"),v=i("gsr0"),_=i("gA6y"),E=i("T3U7"),{MAX_NUM_IMAGES_FREE:b,MAX_NUM_IMAGES_UPGRADED:S}=r.b,{TAB_INDEX:C}=n.g;class T extends c.Component{constructor(e){super(e),this.getLimit=()=>this.props.canUseImageUpload?S:b,this.getFirstIndexOnPage=()=>(this.state.page-1)*this.state.numPerPage,this.getLastIndexOnPage=()=>Math.min(this.state.numImages-1,this.state.page*this.state.numPerPage-1),this.getActiveResultLuid=()=>Object.keys(this.props.images)[this.state.activeResultIndex],this.getNumImagesToShow=e=>Math.min(d()(e),this.getLimit()),this.getArrowSize=()=>this.isInANewCarouselStyleVariant()?"small":void 0,this.getNumImagesPerPage=e=>!this.isInANewCarouselStyleVariant()&&Object(m.c)(e,"s")?1:Object(m.c)(e,"m")?2:4,this.handleError=e=>{var t=e.target,i=this.props.images,s=Object.keys(i),r="";s.forEach((e=>{i[e]._secureLegacyUrlSmall===t.src&&(r=e)})),this.props.onImageError(r)},this.handlePrevPage=()=>{if(this.hasPreviousPage()){var e=(this.state.page-1)*this.state.numPerPage-1;this.transitionToIndexOnNewPage(e,this.state.page-1)}},this.handleNextPage=()=>{var{page:e,numPerPage:t}=this.state;if(this.hasNextPage()){var i=e*t;this.transitionToIndexOnNewPage(i,e+1)}},this.handleLayoutChange=e=>{var t=this.getNumImagesPerPage(e);t!==this.state.numPerPage&&this.setState((e=>{var{numImages:i}=e,{activeResultIndex:s}=e,r=Math.ceil(i/t),a=Math.min(e.page,r);return a<e.page&&(s=i-1),(s<(a-1)*t||s>=a*t)&&(s=(a-1)*t),{activeResultIndex:s,numPerPage:t,page:a}}))},this.onNextImage=()=>(this.nextImage(),!1),this.onPrevImage=()=>(this.prevImage(),!1),this.onNextElement=()=>!(this.hasActiveImage()||Object(_.a)(Object(p.findDOMNode)(this.prevArrow))||0===this.getFirstIndexOnPage()&&this.props.isPrevElementFocused())||this.onNextImage(),this.onPrevElement=()=>{if(this.isFirstImageOnPageActive())this.resetActiveResultIndex();else if(this.hasActiveImage()||Object(_.a)(Object(p.findDOMNode)(this.nextArrow)))return this.onPrevImage();return!0},this.onSelectImage=()=>{if(this.hasActiveImage()){var e=this.getActiveResultLuid();return this.props.onSelectImage(e),!1}return Object(_.a)(Object(p.findDOMNode)(this.nextArrow))?this.handleNextPage():Object(_.a)(Object(p.findDOMNode)(this.prevArrow))&&this.handlePrevPage(),!0},this.onMountPrevArrow=e=>{this.prevArrow=e},this.onMountNextArrow=e=>{this.nextArrow=e},this.renderArrow=e=>{var t="left"===e?this.hasPreviousPage():this.hasNextPage();return h.a.createElement("div",{className:"ImageCarousel-arrowWrap ImageCarousel-arrowWrap--"+e},h.a.createElement(s.a,{disabled:!t,icon:(this.isInANewCarouselStyleVariant()?"system-arrowhead":"wedge")+"-"+e,onClick:"left"===e?this.handlePrevPage:this.handleNextPage,ref:"left"===e?this.onMountPrevArrow:this.onMountNextArrow,size:this.getArrowSize(),tabIndex:this.props.enabled&&t?C:-1}))},this.renderImages=()=>{var{numPerPage:e,numImages:t,page:i}=this.state,s=Math.ceil(t/e),r=this.getImageLuids(this.props.images),a="translateX("+(i-1)/s*-100+"%)",n=(t,i)=>t*e+i;return h.a.createElement("div",{className:"ImageCarousel-content"},h.a.createElement("div",{className:"ImageCarousel-images",style:{transform:a,width:100*s+"%"}},r.map(((t,i)=>h.a.createElement("div",{className:"ImageCarousel-imagePage",key:i},t.map(((t,s)=>h.a.createElement("div",{className:"ImageCarousel-imageWrap",key:t,style:{width:100/e+"%"}},h.a.createElement("a",{className:"ImageCarousel-imageLink",onBlur:this.resetActiveResultIndex,onClick:this.props.onSelectImage.bind(null,t),onFocus:this.setActiveResultIndex.bind(null,n(i,s)),ref:e=>{this.imageRefs[n(i,s)]=e},tabIndex:-1},h.a.createElement("img",{alt:this.props.searchQuery,className:"ImageCarousel-image",onError:this.handleError,src:this.props.images[t].getSmallSecurePath()}))))))))))},this._highestPageReached=1,this.hasPreviousPage=()=>this.state.page>1,this.hasNextPage=()=>this.state.page*this.state.numPerPage<this.state.numImages,this.isInANewCarouselStyleVariant=()=>"swapOrderNewStyle"===this.props.createSetImageUploadCtaTestVariant||"popoverMenu"===this.props.createSetImageUploadCtaTestVariant,this.setActiveResultIndex=e=>(this.setState({activeResultIndex:Object(g.a)(e,this.state.numImages)}),!0),this.focusImage=e=>{this.imageRefs[e].focus()},this.focusActiveImage=()=>{this.hasActiveImage()&&this.focusImage(this.state.activeResultIndex)},this.unbindKeys=()=>{l.a.unbind(a.a.imageCarousel.prevImage,this.props.keyboardScope),l.a.unbind(a.a.imageCarousel.nextImage,this.props.keyboardScope),l.a.unbind(a.a.imageCarousel.nextElement,this.props.keyboardScope),l.a.unbind(a.a.imageCarousel.prevElement,this.props.keyboardScope),l.a.unbind(a.a.imageCarousel.selectImage,this.props.keyboardScope)},this.navigateResults=e=>{var t;t=this.hasActiveImage()?this.state.activeResultIndex+e:1===e?this.getFirstIndexOnPage():this.getLastIndexOnPage(),this.setActiveResultIndex(t);var i=Math.ceil((t+1)/this.state.numPerPage);this.state.page!==i?this.transitionToIndexOnNewPage(t,i):this.focusImage(t)},this.resetActiveResultIndex=()=>{this.setState({activeResultIndex:-1})},this.isFirstImageOnPageActive=()=>this.state.activeResultIndex===this.getFirstIndexOnPage(),this.isLastImageOnPageActive=()=>this.state.activeResultIndex===this.getLastIndexOnPage(),this.hasActiveImage=()=>this.state.activeResultIndex>-1,this.prevImage=()=>{0!==this.state.activeResultIndex&&this.navigateResults(-1)},this.nextImage=()=>{this.state.activeResultIndex!==this.state.numImages-1&&this.navigateResults(1)},this.bindKeys=()=>{l.a.setScope(this.props.keyboardScope),l()(a.a.imageCarousel.nextImage,this.props.keyboardScope,this.onNextImage),l()(a.a.imageCarousel.prevImage,this.props.keyboardScope,this.onPrevImage),l()(a.a.imageCarousel.nextElement,this.props.keyboardScope,this.onNextElement),l()(a.a.imageCarousel.prevElement,this.props.keyboardScope,this.onPrevElement),l()(a.a.imageCarousel.selectImage,this.props.keyboardScope,this.onSelectImage)},this.transitionToIndexOnNewPage=(e,t)=>{this.setState({activeResultIndex:e,page:t}),this.pageTransitionTimeout&&clearTimeout(this.pageTransitionTimeout),this.pageTransitionTimeout=window.setTimeout((()=>this.focusImage(e)),400)},this.breakpointSwitch=Object(f.a)(),this.breakpointSwitch.addListener(this.handleLayoutChange),this.state={activeResultIndex:0,numImages:this.getNumImagesToShow(e.images),numPerPage:this.getNumImagesPerPage(this.breakpointSwitch.breakpoint),page:1}}UNSAFE_componentWillMount(){this.props.enabled&&this.bindKeys(),this.imageRefs={}}componentDidMount(){this.pageTransitionTimeout=null}UNSAFE_componentWillReceiveProps(e){!this.props.enabled&&e.enabled&&this.bindKeys(),this.props.enabled&&!e.enabled&&this.unbindKeys(),this.props.images!==e.images&&this.setState({numImages:this.getNumImagesToShow(e.images)})}UNSAFE_componentWillUpdate(e,t){t.page>this._highestPageReached&&(this._highestPageReached=t.page)}componentWillUnmount(){this.unbindKeys(),this.breakpointSwitch.removeListener(this.handleLayoutChange),this.pageTransitionTimeout&&clearTimeout(this.pageTransitionTimeout),Object(E.a)("new_create_set_image_search_results_page_reached",{page:this._highestPageReached,query:this.props.searchQuery})}getImageLuids(e){return this.state.numImages<0?[]:Object(v.a)(Object.keys(e).slice(0,this.getLimit()),this.state.numPerPage)}render(){return h.a.createElement("div",{className:"ImageCarousel"},this.renderArrow("left"),this.renderImages(),this.renderArrow("right"))}}},nyPF:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return C}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("4Brf"),i("FZtP"),i("zKZe"),i("Uudg")),n=i("JxFz"),o=i("Pxp3"),l=i("dxfC"),u=i("mM5Q"),d=i("V0yB"),c=i("og3H"),h=i("nCwC"),p=i("oYtC"),g=i("jgNe"),m=i("LEyH"),f=i("17x9"),v=i.n(f),_=i("q1tI"),E=i.n(_),b=i("T3U7"),S={classes:v.a.object.isRequired,permissions:v.a.object.isRequired,selectedClassLuids:v.a.array.isRequired,selectedEditableByClassLuids:v.a.array.isRequired,set:v.a.object.isRequired};class C extends _.Component{constructor(){super(...arguments),this.state={description:this.props.description,editableBy:this.props.setPermissionsProps.permissions.editableBy,errors:[],isDirty:!1,password:null,toggledClassLuids:[],toggledEditableByClassLuids:[],viewableBy:this.props.setPermissionsProps.permissions.viewableBy},this.handleCancel=()=>{Object.keys(this.state.toggledClassLuids).forEach((e=>p.a.toggleClass(e))),Object.keys(this.state.toggledEditableByClassLuids).forEach((e=>p.a.toggleClassPermissions(e))),this.props.onClose()},this.handleSave=()=>{var e=g.b.validate(this.getValidationParams());this.setState({errors:e,isDirty:!1}),0===e.length&&(this.updateSetPermissions(),p.a.persistClassSetsForPermissions(this.props.setLuid),h.a.update(this.props.setLuid,{description:this.state.description}),this.props.onClose())},this.handleEditDescription=e=>{this.setState({description:e.target.value,isDirty:!0})},this.handleChangeViewableOption=e=>{Object(b.a)("new_create_set_change_permissions"),this.setState({viewableBy:e.target.value,isDirty:!0})},this.handleChangeEditableOption=e=>{Object(b.a)("new_create_set_change_permissions"),this.setState({editableBy:e.target.value,isDirty:!0})},this.handleChangePassword=e=>{this.setState({password:e.target.value,isDirty:!0})},this.handleToggleClass=e=>{var t=e.target.value,i=this.state.toggledClassLuids[t],s=Object.assign({},this.state.toggledClassLuids,{[t]:!i||void 0});this.setState({toggledClassLuids:s,isDirty:!0}),p.a.toggleClass(t)},this.handleToggleClassPermissions=e=>{var t=e.target.value,i=this.state.toggledEditableByClassLuids[t],s=Object.assign({},this.state.toggledEditableByClassLuids,{[t]:!i||void 0});this.setState({toggledEditableByClassLuids:s,isDirty:!0}),p.a.toggleClassPermissions(t)}}getValidationParams(){return{editableBy:this.state.editableBy,errors:this.state.errors,password:this.state.password,passwordEdit:this.props.setPermissionsProps.set.passwordEdit,passwordUse:this.props.setPermissionsProps.set.passwordUse,selectedClassLuids:this.props.setPermissionsProps.selectedClassLuids,selectedEditableByClassLuids:this.props.setPermissionsProps.selectedEditableByClassLuids,viewableBy:this.state.viewableBy}}renderDescriptionTextarea(){return E.a.createElement(E.a.Fragment,null,E.a.createElement(d.a,{invalid:this.props.hasProfanityError||void 0,label:this.props.hasProfanityError?E.a.createElement(a.a,{id:"create_set.set_description_modal.profanity_error"}):E.a.createElement(a.a,{id:"create_set.set_description_modal.label"}),onChange:this.handleEditDescription,placeholder:e("create_set.set_description_modal.optional"),type:"autoExpand",value:this.state.description}),E.a.createElement(u.a,null))}render(){return E.a.createElement("div",{className:"CreateSetMobileOptions"},E.a.createElement(l.a,{containerClassName:"CreateSetMobileOptions-modal",headerContent:E.a.createElement(a.a,{id:"create_set.mobile_options_modal.title"}),isOpen:!0,onClose:this.handleCancel},E.a.createElement(o.a,{className:"CreateSetMobileOptions-permissions"},E.a.createElement(g.a,r()({},this.props.setPermissionsProps,{errors:this.state.errors,onChangeEditableOption:this.handleChangeEditableOption,onChangePassword:this.handleChangePassword,onChangeViewableOption:this.handleChangeViewableOption,onSubmit:this.handleSave,onToggleClass:this.handleToggleClass,onToggleClassPermissions:this.handleToggleClassPermissions,password:this.state.password,permissions:{editableBy:this.state.editableBy,viewableBy:this.state.viewableBy},setPreviouslyHadPassword:g.b.setPreviouslyHadPassword(this.getValidationParams())}))),E.a.createElement(u.a,null),E.a.createElement(o.a,null,E.a.createElement(n.a,{"aria-label":e("create_set.mobile_options_modal.save_button"),disabled:!this.state.isDirty,hero:!0,onClick:this.handleSave,width:"fill"},E.a.createElement(a.a,{id:"create_set.mobile_options_modal.save_button"})))))}updateSetPermissions(){var e=this.state.viewableBy===m.c.EVERYONE?c.rb.PUBLIC_ACCESS:c.rb.NOT_PUBLIC,t=this.state.viewableBy===m.c.PASSWORD,i=this.state.editableBy===m.c.PASSWORD,{password:s}=this.state,r={accessType:e,passwordUse:t,passwordEdit:i};s&&(r.password=s),h.a.update(this.props.setLuid,r),p.a.changePermission(m.d.VIEWING,this.state.viewableBy),p.a.changePermission(m.d.EDITING,this.state.editableBy)}}C.propTypes={description:v.a.string,hasProfanityError:v.a.bool.isRequired,hasCreatedSets:v.a.bool.isRequired,onClose:v.a.func.isRequired,setLuid:v.a.string.isRequired,viewOnly:v.a.bool.isRequired,setPermissionsProps:v.a.shape(S).isRequired}}).call(this,i("nrsj").default)},"o/00":function(e,t,i){"use strict";var s=i("YUt4"),r=i("7uva"),a={dismiss(){s.a.viewAction(r.a.actions.DISMISS)},create(e,t,i){s.a.viewAction(r.a.actions.CREATE,{title:e,messages:t,fatal:i})}};t.a=a},oYtC:function(e,t,i){"use strict";i("5s+n"),i("4mDm"),i("3bBZ");var s=i("YUt4"),r=i("LEyH"),a=i("5Vd8"),n=i("k36G"),o=i("iFR9"),l=i("sccr"),u=i("0PkO"),d=i("cAhI"),c={setSyncer:a.a,toggleClass(e){s.a.viewAction(r.a.TOGGLE_CLASS,{luid:e})},toggleClassPermissions(e){s.a.viewAction(r.a.TOGGLE_CLASS_PERMISSIONS,{luid:e})},changePermission(e,t){s.a.viewAction(r.a.CHANGE_PERMISSION,{side:e,newPermission:t})},persistClassSetsForPermissions(e){if(!o.a.canEditPermissions())return Promise.resolve();var t=this.setSyncer.getModel(e);if(!t.get("id"))return Promise.resolve();var i=o.a.getPermissions(),s=o.a.getSelectedClassLuids(),r=o.a.getSelectedEditableByClassLuids(),a=u.a.getAll(),n=Object.keys(a),l=Object.keys(o.a.getPersistedClassSets());return this._shouldDeleteAllClassSets(i)&&n.length?d.a.bulkDel(n):this._shouldPersistSelectedClasses(i,s)?this._saveSelectedClasses(e,t,i,s,r).then((()=>{if(this._shouldDeleteNonSelectedClassSets(i))return this._deleteNonSelectedClassSets(s,a)})):this._shouldRemoveAllClassSetsEditPermissions(i)&&l.length?this._removeEditPermissionsOnExistingClassSets(l):Promise.resolve()},_shouldDeleteAllClassSets:e=>e.viewableBy!==r.c.CLASSES&&e.viewableBy!==r.c.EVERYONE,_shouldRemoveAllClassSetsEditPermissions:e=>e.editableBy!==r.c.CLASSES&&e.editableBy!==r.c.EVERYONE,_shouldDeleteNonSelectedClassSets:e=>e.viewableBy!==r.c.EVERYONE,_shouldPersistSelectedClasses(e,t){return!this._shouldDeleteAllClassSets(e)&&(0!==t.length&&(r.c.CLASSES===e.viewableBy||r.c.CLASSES===e.editableBy))},_deleteNonSelectedClassSets(e,t){var i=u.a.getClassMap(),s=Object.keys(t).filter((t=>-1===e.indexOf(i[t])));s.length>0&&d.a.bulkDel(s)},_removeEditPermissionsOnExistingClassSets(e){var t={};for(var i of e)t[i]={canEdit:!1};return d.a.bulkUpdate(t)},_saveSelectedClasses(e,t,i,s,a){var n=l.a.getAll(),o=i.editableBy===r.c.CLASSES,u={};for(var c of s){var h=n[c];u[this._getLuidForClassAndSet(c)]={classId:h.id,setId:t.get("id"),canEdit:o&&a.indexOf(c)>-1}}return d.a.bulkUpdate(u)},_getLuidForClassAndSet(e){var t=u.a.getClassMap(),i=null;for(var s in t){if(t[s]===e){i=s;break}}return i||n.a.add()}};t.a=c},or9x:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return U}));i("4mDm"),i("3bBZ"),i("TWNs"),i("JfAA"),i("B6y2"),i("UxlC"),i("EnZy");var s=i("1Pxe"),r=i("TSYQ"),a=i.n(r),n=i("mpjR"),o=i("Uudg"),l=i("JxFz"),u=i("8WOz"),d=i("FFEN"),c=i("vlgG"),h=i("KHqc"),p=i("47yS"),g=i("wcmh"),m=i("niDJ"),f=i("nCwC"),v=i("p9Hw"),_=i("6rYD"),E=i("FAB2"),b=i("0j+G"),S=i("TX86"),C=i.n(S),T=i("sEfC"),y=i.n(T),I=i("1iNE"),A=i.n(I),O=i("q1tI"),w=i.n(O),D=i("OAKl"),L=i("mEm4"),R=i("vl7F"),x=i("KD7m"),P=Object(L.a)("Delimiter",{TAB:null,COMMA:null,NEWLINE:null,SEMICOLON:null,CUSTOM:null}),M="IMPORT";class U extends O.PureComponent{constructor(){super(...arguments),this.state={convertedTerms:{},convertedTermsOrder:[],customTermDelimiter:"",customWordDelimiter:"",isHidden:!this.props.shouldShow,isImporting:!1,isLoading:!1,maxPreviewRows:E.d.MAX_TERMS,termDelimiter:P.NEWLINE,textareaContent:"",tooManyTerms:!1,wordDelimiter:P.TAB},this.onTransitionInEnd=()=>{this.componentRef&&s.AfterTransition.off(this.componentRef,this.onTransitionInEnd),f.a.hideTerms()},this.onClose=()=>{C.a.popScope(M),C.a.unbind(_.a.modal.exit,M),this.componentRef&&s.AfterTransition.on(this.componentRef,this.onTransitionOutEnd)},this.onTransitionOutEnd=()=>{this.componentRef&&s.AfterTransition.off(this.componentRef,this.onTransitionOutEnd),this.setState({isHidden:!this.props.shouldShow})},this.onKeyDown=e=>{switch(e.key){case"Tab":var t=this.textareaRef?this.textareaRef.getSelectionStart():-1,i=this.textareaRef?this.textareaRef.getSelectionEnd():-1;if(-1!==i){e.preventDefault();var{textareaContent:s}=this.state,r=s.slice(0,t)+"\t"+s.slice(i);this._onChange(r,t+1)}break;case"Enter":e.metaKey&&this.onImportClick(e)}},this.onChange=e=>{var{value:t}=e.target;this._onChange(t)},this.onOpen=()=>{C.a.pushScope(M),C()(_.a.modal.exit,M,(()=>{if(!this.state.isImporting)return this._onCancel(),!1})),this.setState({maxPreviewRows:b.b.getNumFreeTerms(),isHidden:!1}),this.componentRef&&s.AfterTransition.on(this.componentRef,this.onTransitionInEnd)},this.onCancel=e=>{e.preventDefault(),this._onCancel()},this.onImportClick=e=>{e.preventDefault();var{convertedTerms:t,convertedTermsOrder:i}=this.state;this.setState({isImporting:!0}),window.setTimeout((()=>{this.props.onImport(t,i),this.reset()}),300)},this.changeWordDelimiter=e=>{this.setState({wordDelimiter:e},(()=>{e===P.CUSTOM&&""===this.state.customWordDelimiter||this.previewData(),e===P.CUSTOM&&this.customWordDelimiterInput&&this.customWordDelimiterInput.focus()}))},this.changeCustomTermDelimiter=e=>{var t=e.target.value,i=this.state.customTermDelimiter,s=this.state.termDelimiter;this.setState({termDelimiter:P.CUSTOM,customTermDelimiter:t},(()=>{s===P.CUSTOM&&t===i||this.previewData()}))},this.changeCustomWordDelimiter=e=>{var t=e.target.value,i=this.state.customWordDelimiter,s=this.state.wordDelimiter;this.setState({wordDelimiter:P.CUSTOM,customWordDelimiter:t},(()=>{s===P.CUSTOM&&t===i||this.previewData()}))},this._previewDataNow=()=>{var[e,t,i]=this.convertDataToTerms(this.state.textareaContent,this.state.maxPreviewRows);this.setState({tooManyTerms:i,convertedTerms:e,convertedTermsOrder:t},(()=>this.setState({isLoading:!1})))},this.changeTermDelimiter=e=>{this.setState({termDelimiter:e},(()=>{e===P.CUSTOM&&""===this.state.customTermDelimiter||this.previewData(),e===P.CUSTOM&&this.customTermDelimiterInput&&this.customTermDelimiterInput.focus()}))},this._previewDataDebounced=y()(this._previewDataNow,500)}UNSAFE_componentWillReceiveProps(e){e.shouldShow&&this.setState({isLoading:!1,isImporting:!1}),!this.props.shouldShow&&e.shouldShow?this.onOpen():this.props.shouldShow&&!e.shouldShow&&this.onClose()}componentDidUpdate(e){!e.shouldShow&&this.props.shouldShow&&this.didOpen()}getPlaceholderText(){var t=[[e("create_set.import.placeholder.word1"),e("create_set.import.placeholder.definition1")],[e("create_set.import.placeholder.word2"),e("create_set.import.placeholder.definition2")],[e("create_set.import.placeholder.word3"),e("create_set.import.placeholder.definition3")]],i=this.getWordDelimiterString(),s=this.getTermDelimiterString();return t.map((e=>e.join(i))).join(s)}getWordDelimiterRegex(){var e=this.getWordDelimiterString();return this.state.wordDelimiter===P.COMMA?/([,，、，])/:new RegExp("("+Object(D.a)(e)+")")}getLuid(e){return"preview-row-"+e}getWordDelimiterString(){switch(this.state.wordDelimiter){case P.TAB:return"\t";case P.COMMA:return",";case P.CUSTOM:return this.parseDelimiter(this.state.customWordDelimiter||"\t");default:throw new Error("Unrecognized word delimiter in terms import")}}getTermDelimiterString(){switch(this.state.termDelimiter){case P.NEWLINE:return"\n";case P.SEMICOLON:return";";case P.CUSTOM:return this.parseDelimiter(this.state.customTermDelimiter||"\n");default:throw new Error("Unrecognized term delimiter in terms import")}}getTermDelimiterRegex(){var e=new RegExp(Object(D.a)(this.getTermDelimiterString()));return this.state.termDelimiter===P.SEMICOLON&&(e=/[;；]/),e}render(){var t=Object.values(this.state.convertedTerms),i=this.state.isLoading?w.a.createElement("div",{className:"ImportTerms-loadingOverlay",key:"loading"},w.a.createElement("div",{className:"ImportTerms-loadingSpinner"},w.a.createElement(p.a,{size:"large"}))):null,r=this.state.isImporting?w.a.createElement("div",{className:"ImportTerms-importOverlay",key:"import"},w.a.createElement("div",{className:"ImportTerms-importSpinner"},w.a.createElement(p.a,{size:"large"}))):null,f=this.state.tooManyTerms?w.a.createElement("div",{className:"ImportTerms-maxRowsWarning"},w.a.createElement("h3",null,w.a.createElement(o.a,{id:"create_set.import.preview.too_many_terms.title",numTermsLimit:E.d.MAX_TERMS})),w.a.createElement("p",null,w.a.createElement(o.a,{id:"create_set.import.preview.too_many_terms.subtitle",numTerms:this.state.maxPreviewRows}))):null,_=A()(this.state.convertedTerms),b=w.a.createElement(d.a,{deprecatedStyle:!0,size:4},w.a.createElement(o.a,{id:"create_set.import.preview.title"})),S=0===_?b:w.a.createElement(d.a,{deprecatedStyle:!0,size:4},w.a.createElement(o.a,{id:"create_set.import.preview.title"}),w.a.createElement("span",{className:"ImportTerms-numTerms"},w.a.createElement(o.a,{id:"create_set.import.preview.num_terms",numTerms:_}))),C=a()("ImportTerms",{"is-showing":this.props.shouldShow,"is-hidden":this.state.isHidden,"is-loading":this.state.isLoading});return w.a.createElement("div",{className:C,ref:e=>{this.componentRef=e}},w.a.createElement("div",{className:"ImportTerms-import"},w.a.createElement(u.a,null,w.a.createElement("div",{className:"ImportTerms-cancelImportButtonWrap"},w.a.createElement(h.a,{"aria-label":e("create_set.import.cancel_button"),onClick:this.onCancel},w.a.createElement(o.a,{id:"create_set.import.cancel_button"}))),w.a.createElement("span",{className:"ImportTerms-heading"},w.a.createElement(o.a,{id:"create_set.import.title"}))," ",w.a.createElement("span",{className:"ImportTerms-instructions"},w.a.createElement(o.a,{id:"create_set.import.instructions"})),w.a.createElement("form",{className:"ImportTerms-form"},w.a.createElement(n.a,{className:"ImportTerms-textarea",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:this.getPlaceholderText(),ref:e=>{this.textareaRef=e},value:this.state.textareaContent}),w.a.createElement("div",{className:"ImportTerms-importButtonWrap"},w.a.createElement(l.a,{"aria-label":e("create_set.import.import_button"),disabled:0===t.length||this.state.isLoading||this.state.isImporting,hero:!0,onClick:this.onImportClick},w.a.createElement(o.a,{id:"create_set.import.import_button"}))),w.a.createElement("div",{className:"ImportTerms-formGroupWrap"},w.a.createElement("div",{className:"ImportTerms-formGroup"},w.a.createElement("label",{className:"ImportTerms-formLabel"},w.a.createElement(o.a,{id:"create_set.import.settings.column_delimiter.title"})),w.a.createElement(m.a,{onChange:this.changeWordDelimiter,value:this.state.wordDelimiter},w.a.createElement(g.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.column_delimiter.tab"}),value:P.TAB}),w.a.createElement(g.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.column_delimiter.comma"}),value:P.COMMA}),w.a.createElement(g.a,{label:w.a.createElement("span",{className:"ImportTerms-formCustomDelimiter"},w.a.createElement(c.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.column_delimiter.custom"}),onChange:this.changeCustomWordDelimiter,onFocus:this.changeCustomWordDelimiter,placeholder:"-",ref:e=>{this.customWordDelimiterInput=e},type:"text",value:this.state.customWordDelimiter})),value:P.CUSTOM}))),w.a.createElement("div",{className:"ImportTerms-formGroup"},w.a.createElement("label",{className:"ImportTerms-formLabel"},w.a.createElement(o.a,{id:"create_set.import.settings.row_delimiter.title"})),w.a.createElement(m.a,{onChange:this.changeTermDelimiter,value:this.state.termDelimiter},w.a.createElement(g.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.row_delimiter.new_line"}),value:P.NEWLINE}),w.a.createElement(g.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.row_delimiter.semicolon"}),value:P.SEMICOLON}),w.a.createElement(g.a,{label:w.a.createElement("span",{className:"ImportTerms-formCustomDelimiter"},w.a.createElement(c.a,{label:w.a.createElement(o.a,{id:"create_set.import.settings.row_delimiter.custom"}),onChange:this.changeCustomTermDelimiter,onFocus:this.changeCustomTermDelimiter,placeholder:"\\n\\n",ref:e=>{this.customTermDelimiterInput=e},type:"text",value:this.state.customTermDelimiter})),value:P.CUSTOM}))))))),w.a.createElement(s.CSSTransitionGroup,{component:"div",transitionName:"ImportTerms-spinner--animate"},r),w.a.createElement("div",{className:"ImportTerms-preview"},w.a.createElement(s.CSSTransitionGroup,{component:"div",transitionName:"ImportTerms-spinner--animate"},i),w.a.createElement(u.a,null,S,f,w.a.createElement("div",{className:"ImportTerms-previewRows"},w.a.createElement(v.a,{defLang:this.props.defLang,noRowsMessage:this.state.isLoading?e("create_set.import.preview.loading"):e("create_set.import.preview.no_content"),rows:t,wordLang:this.props.wordLang})))))}reset(e){this.setState({convertedTerms:{},convertedTermsOrder:[],textareaContent:"",tooManyTerms:!1,isLoading:!1,isImporting:!1},(()=>{e&&e()}))}previewData(){this.setState({isLoading:!0}),this.state.convertedTermsOrder.length?this._previewDataDebounced():window.setTimeout((()=>this._previewDataNow()),0)}parseDelimiter(e){return e.replace(/\\n/g,"\n").replace(/\\t/g,"\t")}convertDataToTerms(e,t){if(void 0===t&&(t=0),!e)return[{},[],!1];for(var i=this._parseData(e),s=!1,r={},a=[],n=0;n<i.length;n+=2){if(t>=0&&a.length>=t){s=!0;break}var o=this.getLuid(n/2),l=Object(R.a)(i[n],this.props.wordLang,this.props.defLang),u=Object(R.a)(i[n+1],this.props.defLang,this.props.wordLang);(l||u)&&(r[o]={word:l,definition:u},a.push(o))}return[r,a,s]}_parseData(e){var t=this._cleanData(e);if(""===t)return[];var i=this.getTermDelimiterString(),s=this.getWordDelimiterString(),r=this.getWordDelimiterRegex(),a=this.getTermDelimiterRegex(),n=[];for(var o of t.split(a)){var l=o.split(r);if(3===l.length)n.push(l[0],l[2]);else if(1===l.length&&""!==l[0])n.push(l[0]),i!==s&&n.push("");else if(l.length>3){var u=l.shift();l.shift();var d=l.join("");n.push(u,d)}}return n}_onCancel(){this.reset(this.props.onCancel)}_cleanData(e){return Object(x.a)(e.replace(/[ ]{4}/g,"\t").replace(/\r\n/g,"\n"))}focus(){this.textareaRef&&this.textareaRef.focus()}didOpen(){this.focus()}_onChange(e,t){this.setState({textareaContent:e},(()=>{t&&this.textareaRef&&this.textareaRef.setCaretPosition(t),this.previewData()}))}}U.defaultProps={shouldShow:!0}}).call(this,i("nrsj").default)},p9Hw:function(e,t,i){"use strict";(function(e){i("4mDm"),i("3bBZ");var s=i("q1tI"),r=i.n(s),a=i("ifSZ"),n=i("V0yB");class o extends r.a.PureComponent{constructor(){super(...arguments),this.getWordPlaceholder=()=>this.props.wordLang&&this.props.wordLang!==this.props.defLang?Object(a.a)(this.props.wordLang):e("create_set.import.preview.sides.term"),this.getDefinitionPlaceholder=()=>this.props.defLang&&this.props.wordLang!==this.props.defLang?Object(a.a)(this.props.defLang):e("create_set.import.preview.sides.definition")}render(){var e=null;if(this.props.rows.length)e=this.props.rows.map(((e,t)=>{var{word:i,definition:s}=e;return r.a.createElement("div",{className:"TermRowsPreview-row",key:"term-row-preview-"+t},r.a.createElement("div",{className:"TermContent"},r.a.createElement("div",{className:"TermContent-counter"}),r.a.createElement("div",{className:"TermContent-inner"},r.a.createElement("div",{className:"TermContent-sides"},r.a.createElement("div",{className:"TermContent-sideWrap"},r.a.createElement("div",{className:"TermContent-side TermContent-side--word"},r.a.createElement(n.a,{id:i+"-"+t,label:this.getWordPlaceholder(),onChange:()=>{},type:"autoExpand",value:i})),r.a.createElement("div",{className:"TermContent-side TermContent-side--definition"},r.a.createElement(n.a,{id:s+"-"+t,label:this.getDefinitionPlaceholder(),onChange:()=>{},type:"autoExpand",value:s})))))))}));else if(this.props.noRowsMessage)return r.a.createElement("p",null,this.props.noRowsMessage);return r.a.createElement("div",{className:"TermRowsPreview"},e)}}o.defaultProps={rows:[],wordLang:"en",defLang:"en"},t.a=o}).call(this,i("nrsj").default)},pNr3:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return p}));var s,r,a=i("pVnL"),n=i.n(a),o=i("UbNW"),l=i("5sr5"),u=i("nXOR"),d=i("q1tI"),c=i.n(d),h=i("dHOp");function p(t){var i={[s.FACEBOOK]:{labelLong:e("global.social_button.facebook.long"),labelShort:e("global.social_button.facebook.short"),icon:"facebook-round"},[s.GOOGLE]:{labelLong:e("global.social_button.google.long"),labelShort:e("global.social_button.google.short"),icon:"google-multicolor"},[s.APPLE]:{labelLong:e("global.social_button.apple.long"),labelShort:e("global.social_button.apple.short"),icon:"apple"}},a=()=>{null==t.onClick||t.onClick(),t.provider===s.APPLE&&Object(h.e)(t.urlParams)},d=()=>{switch(t.provider){case s.FACEBOOK:return Object(h.b)(t.urlParams);case s.GOOGLE:return Object(h.c)(t.urlParams);case s.APPLE:default:return}};return c.a.createElement(u.a,{below:"s"},(e=>{var s={isFullWidth:!0,linkTo:d(),onClick:a,size:t.size||(e?"large":"xlarge")};return t.variant===r.SMALL?c.a.createElement(l.a,n()({},s,{icon:i[t.provider].icon,text:i[t.provider].labelShort})):c.a.createElement(o.a,n()({},s,{leftIcon:i[t.provider].icon,text:i[t.provider].labelLong}))}))}!function(e){e.FACEBOOK="facebook",e.GOOGLE="google",e.APPLE="apple"}(s||(s={})),function(e){e.DEFAULT="default",e.SMALL="small"}(r||(r={}))}).call(this,i("nrsj").default)},pfAI:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return o}));var s=i("Wv2R"),r=Object(s.a)("ImageConstants",{actions:{BULK_CREATE:null,CREATE_PLACEHOLDER:null,CREATE_RICH_PLACEHOLDER:null,CREATE_SUCCESS:null,CREATE_FAILURE:null,CREATE_PROGRESS:null,MOVE:null,MOVE_SUCCESS:null,MOVE_FAILURE:null,DELETE:null,DELETE_SUCCESS:null,DELETE_FAILURE:null,PRELOAD:null,REPLACE:null,SEARCH:null,SEARCH_SUCCESS:null,SEARCH_FAILURE:null,STORE:null,DROP_FAILURE:null,BULK_UPLOAD_FAILURE:null},placeholders:{PLAIN:null,RICH:null}}),a=r.actions,n=r.placeholders,o={MAX_NUM_IMAGES_FREE:8,MAX_NUM_IMAGES_UPGRADED:40}},pssd:function(e,t,i){"use strict";i("zKZe"),i("E9XD"),Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=u(i("q1tI")),n=u(i("jMYa")),o=u(i("H0AD")),l=u(i("6DYz"));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,i){var s=e[i];return void 0!==s&&(t[i]=s),t}),t)}var p=function(e){function t(){return d(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"focus",value:function(){this.select.focus()}},{key:"render",value:function(){var e=this;return a.default.createElement(o.default,this.props,(function(t){return a.default.createElement(l.default,e.props,(function(i){return a.default.createElement(n.default,s({},h(t,h(i,{})),{onInputChange:function(e){return i.onInputChange(e),t.onInputChange(e)},ref:function(s){e.select=s,i.ref(s),t.ref(s)}}))}))}))}}]),t}(a.default.Component);t.default=p},qCfx:function(e,t,i){"use strict";i("4mDm"),i("3bBZ");var s=i("MMJ4"),r=(i("zKZe"),i("FZtP"),i("rOQg"),i("XMab"),i("s5qe"),i("E9XD"),i("xNjd")),a=i.n(r);class n{constructor(e){this.id=0,this.isRecording=!1,this.isTestingMicrophone=!1,this.mutedAlreadySent=!1,this.callbacks={record:e.onChunk,stop:e.onStop,cancel:e.onCancel,ready:e.onReady,micMuted:e.onMicMuted,testingResult:e=>this._processTest(e)},this.node=e.context.createScriptProcessor(e.bufferLen||4096,1,1),this.node.addEventListener("audioprocess",this._processAudio.bind(this),!1),this.worker=new a.a,this.worker.onmessage=e=>{var{id:t,command:i,data:s}=e.data;this.callbacks[i]&&t===this.id&&this.callbacks[i](s)},this.isTestingMicrophone=!0;var{sampleRate:t}=e.context;this.worker.postMessage({command:"init",config:{sampleRate:t}})}_processTest(e){e?(this.isTestingMicrophone=!1,this.callbacks.ready()):this.mutedAlreadySent||(this.callbacks.micMuted(),this.mutedAlreadySent=!0)}_processAudio(e){this.isRecording?this.worker.postMessage({id:this.id,command:"record",buffer:e.inputBuffer.getChannelData(0)}):this.isTestingMicrophone&&this.worker.postMessage({id:this.id,command:"testing",buffer:e.inputBuffer.getChannelData(0)})}record(){this.id++,this.isRecording=!0}stop(){this.isRecording=!1,this.worker.postMessage({id:this.id,command:"stop"})}cancel(){this.isRecording=!1,this.worker.postMessage({id:this.id,command:"cancel"})}connect(e){this.node.connect(e)}}class o{constructor(e,t){this.socket=e,this.json({sampleRate:t,command:"newfile"})}json(e){this.socket.send(JSON.stringify(e))}write(e){this.socket.send(e)}close(e){void 0===e&&(e={}),this.json(Object.assign(e,{command:"endfile"}))}cancel(){this.json({command:"cancel"})}}var l,u=i("xnxL"),d=i("X0lI"),c=i.n(d);class h extends u.a{static create(e){return void 0===e&&(e={}),l||(l=new h(e)),l}constructor(e){super(e),this.keypressPadding=100,this.audioReady=!1,this.socketReady=!1,this.stream=null,this.streamBuffer=[],this.source=null,this.audioContext=null,this.recorderNode=null,this.soundPlayer?this.soundPlayer.borrowWebAudioContext().then((e=>{window.navigator.mediaDevices.getUserMedia&&WebSocket?(this.audioContext=e,this.onIsUsable("html5",this),this._setupSocket()):this.onIsUsable(!1)})).catch((()=>this.onIsUsable(!1))):this.onIsUsable(!1)}stop(){super.stop(),c()(this.recorderNode,"Falsy recorderNode in Html5Recorder stop").stop(),c()(this.stream,"Falsy stream in Html5Recorder stop").close(this.recordingData)}record(e){super.record(e),this.streamBuffer=[],this.stream=new o(c()(this.socket,"Falsy socket in Html5Recorder"),c()(this.audioContext,"Falsy audioContext in Html5Recorder record").sampleRate),c()(this.recorderNode,"Falsy recorderNode in Html5Recorder record").record()}cancel(){c()(this.recorderNode,"Falsy recorderNode in Html5Recorder cancel").cancel(),this.streamBuffer=[],c()(this.stream,"Falsy stream in Html5Recorder cancel").cancel(),this.stream=null}_setupSocket(){var e=this;this.socketReady||(this.socket=new WebSocket(this.webSocketUrl),this.socket.onmessage=e=>{var t=JSON.parse(e.data);if(!t||!t.command)return null;switch(t.command){case"bad_sample_rate":return this.onError(u.b.BAD_SAMPLE_RATE,t);case"finished_uploading":return this.onUploadFinish();case"done":return this.onSave(t);default:return this}},this.socket.onopen=()=>{this.socketReady=!0,clearInterval(this.heartbeat);var e=JSON.stringify({command:"ping"});this.heartbeat=window.setInterval((()=>this.socket.send(e)),3e4),this._setupAudio()},this.socket.onerror=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];console.log(i),e.onError(u.b.SAVE_ERROR)},this.socket.onclose=()=>{this.socketReady=!1,window.setTimeout((()=>this._setupSocket()),1500)})}_getFreqData(){var e=new Uint8Array(this.analyserNode.frequencyBinCount);return this.analyserNode.getByteFrequencyData(e),Array.apply([],e)}getVolume(){if(!this.analyserNode)return 0;var e=this._getFreqData(),t=e.reduce(((e,t)=>e+Math.pow(t,2)),0),i=Math.max(...e);return(Math.sqrt(t/Math.max(e.length,1))+i)/510}_setupAudio(){if(!this.audioReady){var e=e=>{this.isGranted=!0,this._setupRecording(e)},t=()=>{this.isGranted=!1,this.onPermissionDenied()};try{window.navigator.mediaDevices.getUserMedia?window.navigator.mediaDevices.getUserMedia({audio:!0}).then(e).catch(t):window.navigator.getUserMedia({audio:!0},e,t)}catch(i){this.audioReady=!1,t()}}}_setupRecording(e){var t=c()(this.audioContext,"Falsy audioContext in Html5Recorder setup"),i=new n({context:t,onChunk:e=>{var t=this.elapsedTime();t<this.keypressPadding||(t>this.maxDuration?this.stop():t<this.minDuration?this.streamBuffer.push(e.blob):(this.streamBuffer.length&&this.stream&&(this.streamBuffer.map(this.stream.write,this.stream),this.streamBuffer=[]),this.stream&&this.stream.write(e.blob)))},onStop:()=>{var e=this.elapsedTime();e<this.minDuration?this.onError(u.b.TOO_SHORT,{duration:e}):this.onStop(e)},onCancel:()=>this.onCancel(),onReady:()=>{this.audioReady=!0,this.onReady()},onMicMuted:()=>this.onError(u.b.MIC_MUTED)});this.recorderNode=i;var s=t.createMediaStreamSource(e);this.source=s;var r=t.createGain();r.gain.value=0;var a=t.createChannelSplitter(2),o=t.createChannelMerger(2);this.analyserNode=this._buildAnalyserNode(),s.connect(a),a.connect(o),o.connect(this.analyserNode),this.analyserNode.connect(i.node),i.connect(r),r.connect(t.destination)}_buildAnalyserNode(){var e=c()(this.audioContext,"Falsy audioContext in Html5Recorder _buildAnalyserNode").createAnalyser();return e.smoothingTimeConstant=.6,e.fftSize=1024,e}}class p{constructor(e){var t=this;void 0===e&&(e={}),this.settings=Object.assign({plugins:[h],onIsUsable:()=>{},onNotUsable:()=>{}},e),this.pluginProps=Object.assign({},e),this.methodBuffer=[],this.plugin={init:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["init",i])},stop:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["stop",i])},cancel:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["cancel",i])},record:function(e){void 0===e&&(e={});for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return t.methodBuffer.push(["record",[e].concat(s)])},hasPermission:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["hasPermission",i])},needsPermission:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["needsPermission",i])},getVolume:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return t.methodBuffer.push(["getVolume",i])}},Object.keys(this.plugin).forEach((e=>{Object.defineProperty(this,e,{value:function(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t.plugin[e].apply(t.plugin,s)}})})),this.initUsablePlugin()}initUsablePlugin(){var e=this.settings.plugins.shift();if(!e)return this.settings.onNotUsable&&this.settings.onNotUsable();this.pluginProps.onIsUsable=(e,t)=>{if(e)for(this.plugin=t,this.settings.onIsUsable&&this.settings.onIsUsable(e);this.methodBuffer.length;){var[i,s]=this.methodBuffer.shift();this.plugin[i].apply(this.plugin,s)}else this.initUsablePlugin()},e.create(this.pluginProps)}}var g=i("RVJv");class m extends g.a{}m.URL_BASE="custom-audios",m.MODEL_NAME="customAudio";var f=i("yXPU"),v=i.n(f),_=(i("5s+n"),i("ajH7")),E=i("RR01"),b=i("LwoS"),S=i("+qE3"),C=i("RBan"),T=i.n(C);class y{constructor(e,t,i,s){this.finishedModels={},this.didInvoke=!1,this.errorObj=null,this.type=e,this.expectedNumModels=t,this.successCb=i,this.failureCb=s}isBulkOperation(){return this.type===_.a.BULK_UPDATE||this.type===_.a.BULK_DELETE}fulfill(e,t,i){void 0===i&&(i=null),this.finishedModels[e]=t,this.errorObj=i}isReadyToInvoke(){return!this.didInvoke&&this.hasBeenFulfilled()}wasInvoked(){return this.didInvoke}hasBeenFulfilled(){return this.expectedNumModels===Object.keys(this.finishedModels).length}invokeCallback(){this.isReadyToInvoke()&&(this.errorObj?this.failureCb([this.errorObj,this.finishedModels]):this.successCb(this.finishedModels),this.didInvoke=!0)}}var I=i("T3U7"),A=i("gPdj"),O=i("fihg"),w=i("PqR9"),D=e=>e===_.a.UPDATE||e===_.a.BULK_UPDATE,L=Object(O.a)();class R extends S.EventEmitter{constructor(){super(...arguments),this.BATCH_SIZE=200,this.SYNC_DELAY_MS=1e4,this.shouldSyncDelay=!1,this._isProcessing=!1,this._hasSyncingError=!1,this.models={},this.queues={},this.pendingOps={},this._luidIndex=0,this._seqCounter=0,this._attemptCount=0,this._waitTimeout=0,this._waitInterval=0,this.delayTimer=0,this._requestStartTime=0,this._requestEndTime=0,this._shouldLog=!1}setShouldSyncDelay(e){void 0===e&&(e=!0),this.shouldSyncDelay=e}isSyncing(){return this._isProcessing}getLuid(){return this.MODEL.MODEL_NAME+"-"+this._luidIndex++}getOpSeq(){return"op-seq-"+this._seqCounter++}contains(e){return e in this.models&&e in this.queues}getModel(e){return this._ensureContains(e),this.models[e]}hasQueuedOpsForLuid(e){return this.contains(e)&&this.queues[e].length>0}add(e){void 0===e&&(e={});var t=this.getLuid();return this.models[t]=this.MODEL.fromJson(e),this._resetQueue(t),t}bulkAdd(e){var t={};for(var i of e)t[this.add(i)]=i;return t}save(e,t,i){var s=this;return v()((function*(){void 0===i&&(i={}),s._ensureContains(e);try{var r=yield s._promiseSync(_.a.UPDATE,{[e]:t},Boolean(i.syncNow));return[e,r[e]]}catch(o){var[a,n]=o;throw[a,e,n[e]]}}))()}addAndSave(e,t){void 0===t&&(t={});var i=this.add();return this.save(i,e,t)}bulkAddAndSave(e,t){void 0===t&&(t={});var i=this.bulkAdd(e);return this.bulkSave(i,t)}bulkSave(e,t){var i=this;return v()((function*(){return void 0===t&&(t={}),Object.keys(e).forEach((e=>i._ensureContains(e))),[yield i._promiseSync(_.a.BULK_UPDATE,e,Boolean(t.syncNow))]}))()}del(e){var t=this;return v()((function*(){t._ensureContains(e);try{var i=yield t._promiseSync(_.a.DELETE,{[e]:{}},!0);return[e,i[e]]}catch(a){var[s,r]=a;throw[s,e,r[e]]}}))()}bulkDel(e){var t=this;return v()((function*(){var i={};for(var s of e)t._ensureContains(s),i[s]={};return[yield t._promiseSync(_.a.BULK_DELETE,i,!0)]}))()}reset(){this._luidIndex=0,this._seqCounter=0,this._attemptCount=0,this._waitTimeout=0,this._waitInterval=0,this.models={},this.queues={},this.pendingOps={}}beginSyncing(){var e=this._isProcessing;this._isProcessing=!0,e||this.emit("sync:begin")}endSyncing(){var e=this._isProcessing;this._isProcessing=!1,e&&this.emit("sync:end")}errorSyncing(){this._hasSyncingError=!0,this._attemptCount+=1,this.emit("sync:error")}recoverSyncing(){var e=this._hasSyncingError;this._hasSyncingError=!1,this._attemptCount=0,e&&this.emit("sync:recover")}_promiseSync(e,t,i){return void 0===i&&(i=!1),new Promise(((s,r)=>{this._enqueue(e,t,s,r),this._sync(i)}))}_ensureContains(e){if(!this.contains(e))throw new Error("LUID "+e+" not found in "+this.MODEL.MODEL_NAME+"Syncer")}_isQueuedForDelete(e,t){var i,s;return void 0===t&&(t=this.queues[e]),this._ensureContains(e),t.length>0&&((s=null==(i=T()(t))?void 0:i.type)===_.a.DELETE||s===_.a.BULK_DELETE)}_resetQueue(e){this.queues[e]=[]}_enqueue(e,t,i,s){var r=this.getOpSeq();this.pendingOps[r]=new y(e,Object.keys(t).length,i,s),Object.keys(t).forEach((i=>{var s=t[i];if(this._isQueuedForDelete(i))throw new Error("Cannot queue new changes. LUID "+i+" is queued for deletion");this.queues[i].push({seq:r,type:e,props:s})}))}_flushQueues(){var e={},t=0;for(var i in this.queues){var s=this.queues[i];if(s.length&&(e[i]=s,this._resetQueue(i),(t+=1)>=this.BATCH_SIZE))break}return e}_reinsertQueues(e){Object.keys(e).forEach((t=>{var i=e[t];this.queues[t]=i.concat(this.queues[t])}))}_splitQueues(e){var t=[],i=[],s=[];return Object.keys(e).forEach((r=>{var a=e[r],n=a.map((e=>{var{seq:t}=e;return t}));if(this._isQueuedForDelete(r,a))i.push([r,this.models[r],n]);else{var o=this.models[r];for(var{type:l,props:u}of a){if(!D(l))throw new Error("Unsupported type="+l);o.setAll(u)}o.isClientValid()?t.push([r,o,n]):s.push([r,o,n])}})),[t,i,s]}_addArgToCallback(e,t,i,s){if(void 0===s&&(s=null),!(e in this.pendingOps))throw new Error("Seq "+e+" not found in stored callbacks");this.pendingOps[e].fulfill(t,i,s)}_prepareCallbacks(e,t){if(e instanceof Error){var i=e;for(var[s,r,a]of t)for(var n of a)this._addArgToCallback(n,s,r,i)}else{if(e.length!==t.length)throw new Error("Models and LUIDs lengths do not match");for(var o=0;o<e.length;o++){var l=e[o],[u,,d]=t[o],c=l.isValid()?null:new b.a("Syncer model "+l.self.MODEL_NAME+" invalid ["+JSON.stringify(l.getValidationErrors())+"]");for(var h of d)this._addArgToCallback(h,u,l,c)}}}_invokeAndClearCallbacks(){Object.keys(this.pendingOps).forEach((e=>{var t=this.pendingOps[e];t.isReadyToInvoke()&&t.invokeCallback()})),this._clearInvokedCallbacks()}_clearInvokedCallbacks(){Object.keys(this.pendingOps).forEach((e=>{this.pendingOps[e].wasInvoked()&&delete this.pendingOps[e]}))}_sync(e){if(void 0===e&&(e=!1),!this.isSyncing())if(this.shouldSyncDelay&&!e){if(this.delayTimer)return;this.delayTimer=window.setTimeout((()=>{this.isSyncing()||(this.beginSyncing(),this._syncQueueLoop(),this.delayTimer=0)}),this.SYNC_DELAY_MS)}else this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=0),this.beginSyncing(),this._syncQueueLoop()}_syncQueueLoop(){var e=this._flushQueues();if(0!==Object.keys(e).length){var[t,i,s]=this._splitQueues(e),r=this._syncModels(t).then((()=>this._syncModels(i,!0))).then((()=>this._prepareCallbacks(new b.a("Queue validations failed"),s))).then((()=>this._invokeAndClearCallbacks())).catch((()=>this._reinsertQueues(e)));Object(A.a)(r,(()=>{if(clearInterval(this._waitInterval),clearTimeout(this._waitTimeout),this._hasSyncingError){var e=Math.min(1e4,500*Math.pow(2,this._attemptCount)),t=e/2+Math.floor(Math.random()*e/2),i=Object(O.a)()+t;this._waitInterval=window.setInterval((()=>{var e=Math.round((i-Object(O.a)())/1e3);e>=0&&this.emit("sync:wait",e)}),1e3),this._waitTimeout=window.setTimeout((()=>this._syncQueueLoop()),t),this.emit("sync:start-wait")}else this._syncQueueLoop()}))}else this.endSyncing()}_syncModels(e,t){var i=this;return v()((function*(){void 0===t&&(t=!1);var s=e.map((e=>{var[,t]=e;return t}));if(0!==s.length){var r=i._generateRequestIdFromQueue(e);i._logRequestStartTime();try{var[,a]=t?yield i.MODEL.bulkDelete(s,r):yield i.MODEL.bulkSave(s,r);i._prepareCallbacks(a,e),i.recoverSyncing()}catch(n){if(n instanceof E.a)throw i._enableLoggingRequestTiming(),i.errorSyncing(),n;i._prepareCallbacks(n,e)}finally{i._logRequestEndTime()}}}))()}_generateRequestIdFromQueue(e){var t=[];for(var[,,i]of e)for(var s of i)t.push(s);var r=Object(w.a)(t);return L+":"+this.MODEL.MODEL_NAME+":"+r.join("|")}_enableLoggingRequestTiming(){this._shouldLog=!0}_logRequestStartTime(){this._requestStartTime=Object(O.a)()}_logRequestEndTime(){this._requestEndTime=Object(O.a)(),this._shouldLog&&Object(I.a)("create_set_request_timing",{lengthMs:this._requestEndTime-this._requestStartTime,syncer:this.MODEL.MODEL_NAME})}}var x=i("jCse");t.a=new class extends R{constructor(){super(...arguments),this.MODEL=m,this.connectionPrimed=!1,this.permissionGranted=!1,this.recorderImplementation=null}configure(e){this.config=e}getRecorder(){return this.configureRecorder({})}getAudioPlayer(){return this.audioPlayer||(this.audioPlayer=new x.a),this.audioPlayer}ensureConfig(){if(!this.config)throw new Error("CustomAudioSyncer lacks config");return this.config}configureRecorder(e){var t=this.ensureConfig();return this.recorder||(this.recorder=new p({maxDuration:s.c.MAX_DURATION,minDuration:s.c.MIN_DURATION,onCancel:e.onCancel,onError:e.onError,onIsUsable:e.onIsUsable,onNotUsable:e.onNotUsable,onPermissionDenied:e.onPermissionDenied,onReady:e.onReady,onSave:e.onSave,onStop:e.onStop,onUploadFinish:e.onUploadFinish,plugins:[h],soundPlayer:this.getAudioPlayer(),webSocketUrl:t.webSocketUrl})),this.recorder}primeConnection(){if(!this.connectionPrimed){var e=this.config;null!=e&&e.connectionPrimingUrl&&((new Image).src=e.connectionPrimingUrl),this.connectionPrimed=!0}}record(){this.primeConnection(),this.getRecorder().record({qecookies:this.ensureConfig().qecookies})}stop(){this.getRecorder().stop()}cancel(){this.getRecorder().cancel()}getVolume(){return this.getRecorder().getVolume()}hasPermission(){return this.getRecorder().hasPermission()}needsPermission(){return this.getRecorder().needsPermission()}preloadAudio(e,t){return void 0===t&&(t={}),this.getAudioPlayer().preload(e,t)}playAudio(e,t){return void 0===t&&(t={}),this.getAudioPlayer().play(e,t)}stopAllAudio(){return this.getAudioPlayer().stopAll()}}},qMF9:function(e,t,i){"use strict";i("4mDm"),i("5s+n"),i("3bBZ");var s=i("mr8R");t.a=Object(s.a)((()=>i.e("rich_text_upsell_modal_lazy").then(i.bind(null,"wQNJ"))))},qPyV:function(e,t,i){var s=i("ut/Y"),r=i("LGYb");e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):[]}},qYqR:function(e,t,i){"use strict";var s=i("q1tI"),r=i.n(s),a=i("Vg22"),n=i("FdmV"),o=(i("4mDm"),i("5s+n"),i("3bBZ"),i("mr8R")),l=Object(o.a)((()=>Promise.all([i.e("redux"),i.e("leaflet"),i.e("common"),i.e("diagram_editor_container_lazy")]).then(i.bind(null,"iIFn"))),{withSpinner:!0}),u=i("pn57"),d=i("Xfi1"),c=i("N7sa"),h=i("xJ/4"),p=Object(n.a)("createSet",{isUploading:e=>!(!e.get("diagramImageLuid")||e.get("diagramImage")),setContentType:h.C,shouldShowTooltipDiagram:h.H}),g=Object(u.compose)(Object(a.connect)(p,(e=>({actions:Object(u.bindActionCreators)({uploadImage:h.P},e)}))),Object(c.a)())(d.a),m=i("+leE");l.preload();var f=Object(n.a)("createSet",{container:h.m,setContentType:h.C,shouldShowTooltipDiagram:h.H});t.a=Object(a.connect)(f)((e=>{var{container:t}=e;return t===m.b.EDIT?r.a.createElement(l,null):r.a.createElement(g,null)}))},qaYj:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("JxFz"),r=i("FFEN"),a=i("a08m"),n=i("dxfC"),o=i("q1tI"),l=i.n(o);class u extends l.a.PureComponent{render(){var{size:e,badgeContent:t}=this.props;return l.a.createElement("div",{className:"UIModalBadge"},l.a.createElement(r.a,{deprecatedStyle:!0,size:e},t))}}var d=i("zt8I"),c=i("DNQV");class h extends l.a.PureComponent{render(){var{badgeContent:e,buttonContent:t,buttonLinkTo:i,buttonOnClick:o,headingContent:h,isOpen:p,linkContent:g,linkTo:m,linkOnClick:f,onClose:v,paragraphContent:_,videoId:E}=this.props;return l.a.createElement(n.a,{fullWidthBody:!0,isOpen:p,onClose:v},l.a.createElement(u,{badgeContent:e,size:6}),l.a.createElement("div",{className:"DiscoverModal"},l.a.createElement("div",{className:"DiscoverModal-heading"},l.a.createElement(r.a,{deprecatedStyle:!0,size:2},h)),l.a.createElement("div",{className:"DiscoverModal-paragraph"},l.a.createElement(d.a,null,_)),l.a.createElement("div",{className:"DiscoverModal-vimeoEmbed"},l.a.createElement(c.a,{videoId:E})),l.a.createElement("div",{className:"DiscoverModal-button",onClick:this.props.buttonOnClick},l.a.createElement(s.a,{hero:!0,linkTo:i,onClick:i?void 0:o,width:"fill"},t)),l.a.createElement("div",{className:"DiscoverModal-link"},g?l.a.createElement(a.a,{newTab:!!m,onClick:f,to:m},g):null)))}}},qioe:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=i("YAV2"),a=(s=r)&&s.__esModule?s:{default:s};t.default=function(e,t,i,s){var r=this;return s.ignoreAccents&&(t=(0,a.default)(t)),s.ignoreCase&&(t=t.toLowerCase()),i&&(i=i.map((function(e){return e[s.valueKey]}))),e.filter((function(e){if(i&&i.indexOf(e[s.valueKey])>-1)return!1;if(s.filterOption)return s.filterOption.call(r,e,t);if(!t)return!0;var n=String(e[s.valueKey]),o=String(e[s.labelKey]);return s.ignoreAccents&&("label"!==s.matchProp&&(n=(0,a.default)(n)),"value"!==s.matchProp&&(o=(0,a.default)(o))),s.ignoreCase&&("label"!==s.matchProp&&(n=n.toLowerCase()),"value"!==s.matchProp&&(o=o.toLowerCase())),"start"===s.matchPos?"label"!==s.matchProp&&n.substr(0,t.length)===t||"value"!==s.matchProp&&o.substr(0,t.length)===t:"label"!==s.matchProp&&n.indexOf(t)>=0||"value"!==s.matchProp&&o.indexOf(t)>=0}))}},qn7O:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return p}));i("4mDm"),i("3bBZ"),i("FZtP"),i("ToJy");var s=i("TSYQ"),r=i.n(s),a=i("bvRJ"),n=i("Oyon"),o=i("z0Hl"),l=i("p5lF"),u=i("q1tI"),d=i.n(u),c=i("W6SY");function h(e,t){return Object(l.a)(e.character,t.character)}class p extends d.a.Component{constructor(){super(...arguments),this.state={isUppercase:!1},this.handleToggleUppercase=()=>{this.setState({isUppercase:!this.state.isUppercase})}}shouldComponentUpdate(e,t){if(!Object(c.a)(this.props,e,["charactersByLang"]))return!0;if(!Object(c.a)(this.state,t))return!0;if(Object.keys(this.props.charactersByLang).length!==Object.keys(e.charactersByLang).length)return!0;var i=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{if(!i){var s=this.props.charactersByLang[t],r=e.charactersByLang[t];r?(s.length!==r.length&&(i=!0),s=s.sort(),r=r.sort(),s.forEach(((e,t)=>{i||e!==r[t]&&(i=!0)}))):i=!0}})),i}getCharactersByLangToRender(){var e=[],t=[];return Object.keys(this.props.charactersByLang).forEach((i=>{this.props.charactersByLang[i].forEach((s=>{var r=this.state.isUppercase?s.toUpperCase():s;-1!==e.indexOf(r)||(e.push(r),t.push({character:r,lang:i}))}))})),t.sort(h)}renderAccents(){return this.getCharactersByLangToRender().map(((e,t)=>{var{character:i,lang:s}=e;return d.a.createElement("span",{className:"UISpecialCharacterButtonGroup-button",key:t},d.a.createElement(n.a,{character:i,lang:s,variant:this.props.variant,onClick:this.props.onClickButton}))}))}renderUppercaseToggle(){return this.props.showUppercaseButtonInline?this.renderInlineUppercaseSwitch():this.renderUppercaseIcon()}renderInlineUppercaseSwitch(){return d.a.createElement("div",{className:"UISpecialCharacterButtonGroup-uppercaseSwitch"},d.a.createElement(o.a,{"aria-label":e("global.caps_lock"),checked:this.state.isUppercase,onChange:this.handleToggleUppercase},d.a.createElement(a.a,{alt:e("global.caps_lock"),className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"})))}renderUppercaseIcon(){var e=r()("UISpecialCharacterButtonGroup-button","UISpecialCharacterButtonGroup-uppercaseButton","UISpecialCharacterButtonGroup-uppercaseButton--"+this.props.variant,{"is-enabled":this.state.isUppercase});return d.a.createElement("span",{className:e,onClick:this.handleToggleUppercase},d.a.createElement(a.a,{className:"UISpecialCharacterButton-uppercaseIcon",icon:"chevron-up-underline"}))}render(){return d.a.createElement("div",{className:"UISpecialCharacterButtonGroup"},this.renderAccents(),this.props.allowToggleUppercase&&this.hasDifferentUppercaseCharacters()?this.renderUppercaseToggle():null)}hasDifferentUppercaseCharacters(){var e=!1;return Object.keys(this.props.charactersByLang).forEach((t=>{e||this.props.charactersByLang[t].forEach((t=>{e||t!==t.toUpperCase()&&(e=!0)}))})),e}}p.defaultProps={allowToggleUppercase:!1,showUppercaseButtonInline:!1,variant:"default"}}).call(this,i("nrsj").default)},qxWM:function(e,t,i){"use strict";i("FZtP");var s=i("lCv/"),r=i("qiyg"),a=i("N4t/"),n=i("PqR9"),o={containsAccentLanguage:e=>Object(a.a)(e).some((e=>e in s&&s[e].length>0)),containsHardLanguage:e=>Object(a.a)(e).some((e=>r.hardLanguages.indexOf(e)>-1)),getCharactersByLangForLangs(e){var t={};return Object(n.a)(e).filter((e=>e)).forEach((e=>{t[e]=s[e]||[]})),t}};t.a=o},rCsq:function(e,t,i){"use strict";(function(e){i("4mDm"),i("3bBZ"),i("zKZe"),i("4Brf"),i("wfmh");var s=i("TSYQ"),r=i.n(s),a=i("5OCO"),n=i("UQ0i"),o=i("MZeg"),l=i("Uudg"),u=i("nXOR"),d=i("JxFz"),c=i("8WOz"),h=i("bvRJ"),p=i("47yS"),g=i("jvKz"),m=i("z0Hl"),f=i("vzun"),v=i("og3H"),_=i("qYqR"),E=i("za/w"),b=i("xhj2"),S=i("cAhI"),C=i("fs1E"),T=i("yCw/"),y=i("nCwC"),I=i("hmZ7"),A=i("FenW"),O=i("nyPF"),w=i("I/ry"),D=i("JjXd"),L=i("or9x"),R=i("HjX1"),x=i("aFlI"),P=i("u86x"),M=i("nWxO"),U=i("7uva"),k=i("FAB2"),N=i("LEyH"),F=i("xJ/4"),j=i("0PkO"),B=i("sccr"),V=i("dUl0"),H=i("uSb8"),W=i("iFR9"),G=i("DS/l"),q=i("0j+G"),K=i("mCkr"),z=i("TL93"),Q=i("elj8"),Y=i("zK28"),J=i("9WHe"),Z=i("UtfR"),X=i("a4GN"),$=i("5SfK"),ee=i("qMF9"),te=i("Ilu8"),ie=i("goAZ"),se=i("sr1c"),re=i("q1tI"),ae=i.n(re),ne=i("ttfT"),oe=i("yJYf"),le=i("xvNY"),ue=i("xNal"),de=i("yckm"),ce=i("RL+2"),he=i("T3U7"),pe=i("ApwE"),ge=i("y2oz"),me=i("aNXt"),fe=i("kf70"),ve=i("+RhX"),_e=i("EFuM"),Ee=i("dCi4"),be="e1phsipe";class Se extends ae.a.Component{constructor(t){var i;super(t),i=this,this.fetchSyncerStore=()=>({isImageUploading:oe.a.isSyncing("ImageSyncer"),isSyncing:oe.a.isSyncing(),lastSavedTimestamp:oe.a.getLastSyncedTimestamp(),hasSyncingError:oe.a.hasError()}),this.fetchSetStore=()=>({detectLanguageResults:G.a.getDetectLanguageResults(),isDiscardDisabled:G.a.isDiscardDisabled(),isPublishDisabled:G.a.isPublishDisabled(),isRedirecting:G.a.isRedirecting(),openLangSelectSide:G.a.getOpenLangSelectSide(),set:G.a.get(),setLuid:G.a.getLuid(),setProfanityErrors:G.a.getProfanityErrors(),setValidationErrors:G.a.getValidationErrors(),shouldHideTerms:G.a.shouldHideTerms(),stickyHeaderHeight:G.a.getStickyHeaderHeight()}),this.fetchClassSetStore=()=>({classSets:j.a.getAll(),classSetSetMap:j.a.getSetMap(),classSetClassMap:j.a.getClassMap()}),this.fetchSetPermissionStore=()=>{var{set:e,user:t}=this.state,i=W.a.getPermissions();return this.shouldOverrideViewPermissionForVerifiedCreator(t,e)&&(i.viewableBy=N.c.JUST_ME),{permissions:i,selectedClassLuids:W.a.getSelectedClassLuids(),selectedEditableByClassLuids:W.a.getSelectedEditableByClassLuids()}},this.fetchErrorAlertStore=()=>({activeError:V.a.getActiveError()}),this.fetchClassStore=()=>({classes:B.a.getAll()}),this.fetchUserStore=()=>({user:K.a.getUser()}),this.getPublishButtonText=()=>this.isPublishDisabled()||this.isSyncingOrRedirecting()&&Object(_e.j)()?ae.a.createElement(l.a,{id:"create_set.header.publish_button.saving"}):this.state.set.isPublished()?ae.a.createElement(l.a,{id:"create_set.header.publish_button.done"}):ae.a.createElement(l.a,{id:"create_set.header.publish_button.create"}),this.onToggleAutosuggest=()=>{A.a.autosuggestClear(),this.setState({isAutosuggestionEnabled:!this.state.isAutosuggestionEnabled})},this.onPublishButtonClickFooter=e=>(e.preventDefault(),Object(he.a)("new_create_set_click_bottom_publish_button"),this.publishSetClickSource="publish-set-bottom",this.isSetContentTypePracticeQuestions()?this.onPublishMcqs():this.onPublishTerms()),this.onPublishButtonClickHeader=e=>(e.preventDefault(),Object(he.a)("new_create_set_click_header_publish_button"),this.publishSetClickSource="publish-set-top",this.isSetContentTypePracticeQuestions()?this.onPublishMcqs():this.onPublishTerms()),this.onFlipColumn=()=>{this.setState({areColumnsFlipped:!this.state.areColumnsFlipped});var e=q.b.getAll(),t={};for(var i of Object.keys(e)){var s=e[i];s.word===s.definition&&Object(fe.a)(s.wordRichText,s.definitionRichText)||(t[i]={definition:s.word||"",word:s.definition||"",definitionRichText:s.wordRichText||null,wordRichText:s.definitionRichText||null},s.wordCustomAudioId!==s.definitionCustomAudioId&&(t[i]=Object.assign({},t[i],{definitionCustomAudioId:s.wordCustomAudioId||null,wordCustomAudioId:s.definitionCustomAudioId||null})))}A.a.flipColumns(this.state.setLuid,t);var{wordLang:r,defLang:a}=this.state.set;if((r||a)&&"photo"!==a)return y.a.update(this.state.setLuid,{wordLang:a,defLang:r})},this.onDragOverHeader=()=>{this.startAutoScroll(k.c.UP)},this.onDrop=e=>{e.preventDefault(),this.stopAutoScroll()},this.onOpenImport=e=>(e.preventDefault(),this.toggleImport(!0)),this.onCloseImport=()=>this.toggleImport(!1),this.onImport=(e,t)=>{Object(he.a)("new_create_set_import_terms");var{startIndex:i,luidsToReplace:s}=q.b.getImportInfo(),r=[],a=0;if(s.length>0)for(var n=t.slice(0,Math.min(t.length,s.length)),o=0;o<n.length;o++){var l=n[o];r[s[o]]=Object.assign({},e[l],{rank:i+a}),a+=1}var u=[];if(a<t.length)for(var d=t.slice(a,t.length),c=0;c<d.length;c++){var h=d[c];u.push(Object.assign({},e[h],{rank:i+a})),a+=1}A.a.import({setLuid:this.state.setLuid,luidToPropsToReplace:r,arrayOfPropsToAdd:u,wordLang:this.state.set.wordLang,defLang:this.state.set.defLang});var p=Object.keys(e).map((t=>e[t])),g=p.find((e=>!!e.word)),m=p.find((e=>!!e.definition));return g&&!this.state.set.wordLang&&y.a.detectLanguage(this.state.setLuid,"word",[g.word]),m&&!this.state.set.defLang&&y.a.detectLanguage(this.state.setLuid,"definition",[m.definition]),ve.a.scrollToBottom(),this.onCloseImport()},this.publishTerms=()=>{var t={};q.b.isImagesOnly()&&(t.defLang="photo");var i=b.b.getState().get("createSet"),s=Object(F.n)(i),r=Object(F.y)(i);if(s||!this.isSetContentTypeDiagrams()||this.state.hasShownDiagramImageRequiredError)if(s&&r<k.d.MIN_TERMS&&!this.state.hasShownMinDiagramShapesError)this.setState({hasShownMinDiagramShapesError:!0,setValidationErrors:{min_diagram_shapes:e("errors.model_validation.set.min_diagram_shapes",{numDiagramShapes:k.d.MIN_TERMS-r})}});else{q.b.isBlankDefinitions()&&s&&r>0&&(t.defLang=Object(F.F)(i));var a=q.b.getUnsavedTermUpdates(this.props.shouldLogForRichTextDebugging);this.props.shouldLogForRichTextDebugging&&this.maybeLogDebugForNullRichText(a,"CreateSetPage_publishTerms"),I.a.bulkUpdateAndPublish(this.state.setLuid,t,a)}else this.setState({hasShownDiagramImageRequiredError:!0,setValidationErrors:{requires_diagram_image:e("errors.model_validation.set.requires_diagram_image")}})},this.publishMcqs=()=>{if(!oe.a.isSyncing()){var{set:e,setLuid:t}=this.state,{studiableMultipleChoiceQuestions:i}=this.props,s=T.a.getValidationErrors(e,i);s?this.setState({setValidationErrors:s}):this.setState({setValidationErrors:{}},(()=>{T.a.bulkUpdateAndPublish(t,e,i)}))}},this.onPublishTerms=()=>{window.setTimeout(this.publishTerms,0)},this.onPublishMcqs=()=>{this.publishMcqs()},this.onCloseSetDescription=()=>{this.state.isSetDescriptionOpen&&this.setState({isSetDescriptionOpen:!1})},this.onOpenSetDescription=()=>{Object(he.a)("new_create_set_open_set_description_modal"),this.state.isSetDescriptionOpen||this.setState({isSetDescriptionOpen:!0})},this.onClosePermissions=()=>{this.setState({isSetPermissionsOpen:!1},(()=>{this.props.canEditPermissions&&this.setPermissions&&this.setPermissions.blur()}))},this.onOpenPermissions=e=>{Object(he.a)("new_create_set_open_permissions"),this.setState({isSetPermissionsOpen:!0},(()=>{if(this.props.canEditPermissions&&this.setPermissions)switch(e){case N.d.VIEWING:this.setPermissions.focusViewing();break;case N.d.EDITING:this.setPermissions.focusEditing()}}))},this.onCloseCreateSetTooltipDiagramModal=()=>{this.setState({isCreateSetTooltipDiagramModalOpen:!1})},this.onCloseCreateSetUpsellModal=()=>{if(this.state.isCreateSetUpsellModalOpen&&(this.setState({isCreateSetUpsellModalOpen:!1}),this.shouldShowCreateSetUpsellModal())){this.props.shouldShowOCRCreateSetModal?(Object(he.a)("create_set_upsell_modal_ocr_close"),Object(ge.a)({action:v.Ob.DISMISS,fullActionName:"create_set_upsell_modal_ocr_close"})):(Object(he.a)("create_set_upsell_modal_close"),Object(ge.a)({action:v.Ob.DISMISS,fullActionName:"create_set_upsell_modal_close"})),ue.b.write(v.l.CREATE_SET__UPSELL_MODAL,!0,{duration:7,path:"/"});var e=ue.b.read(v.l.CREATE_SET__NUM_SHOW_UPSELL_MODAL)||0;ue.b.write(v.l.CREATE_SET__NUM_SHOW_UPSELL_MODAL,+e+1,{duration:60})}},this.onBeforeUnload=()=>{if(!this.state.isDiscardDisabled&&!this.state.activeError&&!this.state.isPublishDisabled){var t=q.b.getUnsavedTermUpdates(),i=Object.keys(t).length>0;return i&&A.a.bulkUpdate({setLuid:this.state.setLuid,luidToProps:t,wordLang:this.state.set.wordLang,defLang:this.state.set.defLang,persist:!0,syncDelayOverride:!0}),oe.a.isSyncing()?(Object(he.a)("new_create_set_exit_while_syncing",{syncing:oe.a.getAllSyncing()}),e("create_set.leaving_page_warning.unsaved_changes")):i?(Object(he.a)("new_create_set_exit_with_unsaved_terms"),e("create_set.leaving_page_warning.unsaved_terms")):this.state.shouldShowImport?e("create_set.leaving_page_warning.generic"):void 0}},this.handleTrackPublishEvent=()=>{null!==this.publishSetClickSource&&Object(le.s)(this.publishSetClickSource),this.publishSetClickSource=null},this.handleOpenMobileOptionsModal=()=>{this.setState({isMobileOptionsModalOpen:!0})},this.handleCloseMobileOptionsModal=()=>{this.setState({isMobileOptionsModalOpen:!1})},this.handleOnCloseLogin=()=>{this.setState({isSignupWallModalOpen:!this.props.isSignedIn})},this.handleCloseImageErrorUploadModal=()=>{this.props.toggleShowImageUploadErrorModal&&this.props.toggleShowImageUploadErrorModal(!1)},this.handleOnOpenLogin=()=>{this.setState({isSignupWallModalOpen:!1}),QWait("Quizlet.loginModal",(()=>{Y.a.openLoginModal({excludeFromFullpageExperiment:!0,includeCloseButton:!1,onCloseLogin:this.handleOnCloseLogin,preventCloseOnOverlayClick:!0})}))},this.renderSignupPromptModal=()=>ae.a.createElement(n.default,{actions:{onOpenLogin:this.handleOnOpenLogin},excludeFromFullpageExperiment:!0,header:e("create_set.signup_modal_headline"),includeCloseButton:!1,isOpen:this.state.isSignupWallModalOpen,preventCloseOnOverlayClick:!0,redir:"/create-set",signupOrigin:this.props.signupOrigin}),this.renderMobileOptionsModal=()=>{var{set:e,setProfanityErrors:t}=this.state;return ae.a.createElement(O.a,{description:e.description,hasCreatedSets:this.props.hasCreatedSets,hasProfanityError:!!t.description,onClose:this.handleCloseMobileOptionsModal,setLuid:this.state.setLuid,setPermissionsProps:{classes:this.state.classes,permissions:this.state.permissions,selectedClassLuids:this.state.selectedClassLuids,selectedEditableByClassLuids:this.state.selectedEditableByClassLuids,set:this.state.set},viewOnly:!this.props.isSignedIn})},this.renderSetPermissionsError=()=>{var e=this.props.isUnderAge&&!this.props.isConfirmed?U.a.permissions.UNDER_13:U.a.permissions.NOT_CREATOR;return ae.a.createElement(P.a,{isOpen:this.state.isSetPermissionsOpen,onClose:this.onClosePermissions,type:e})},this.renderSetPermissions=()=>ae.a.createElement(x.a,{classes:this.state.classes,isOpen:this.state.isSetPermissionsOpen,onClose:this.onClosePermissions,permissions:this.state.permissions,ref:e=>{this.setPermissions=e},selectedClassLuids:this.state.selectedClassLuids,selectedEditableByClassLuids:this.state.selectedEditableByClassLuids,set:this.state.set,setLuid:this.state.setLuid}),this.toggleImport=function(e){void 0===e&&(e=!i.state.shouldShowImport),e?Object(he.a)("new_create_set_open_import_modal"):y.a.showTerms(),i.setState({shouldShowImport:e})},this._onFocus=e=>{var t=e.target;"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName||this.setState({hasFocusedInput:!0})},this._onErrorAlert=()=>{this.setState(this.fetchErrorAlertStore())},this.cancelEvent=e=>e.preventDefault(),this._onUserChange=()=>{this.setState(this.fetchUserStore())},this.isAutoScrolling=function(e){return void 0===e&&(e=null),null===e?!!i.autoScrollDirection:i.autoScrollDirection===e},this.startAutoScroll=e=>{this.isAutoScrolling(e)||(this.autoScrollDirection=e,ve.a.continuousScroll(e))},this.scrollIfNearEdges=e=>{var{clientY:t}=e,i=Object(Ee.a)(),s=(e=>e/6)(i),r=i-s;t<s?this.startAutoScroll(k.c.UP):t>r?this.startAutoScroll(k.c.DOWN):this.stopAutoScroll()},this._onSetPermissionsChange=()=>{this.hasChangedPermissions=!0,this.setState(this.fetchSetPermissionStore())},this._onSetChange=()=>{this.setState(this.fetchSetStore())},this._onSyncerChange=()=>{this.setState(this.fetchSyncerStore())},this.addSetToClass=e=>{var t=j.a.getUnsyncedClassSets(e);return S.a.bulkUpdate(t)},this.addSetToFolder=e=>{var t=H.a.getUnsyncedFolderSets(e);return C.a.bulkUpdate(t)},this.hasMinDiagramShapesError=()=>"min_diagram_shapes"in this.state.setValidationErrors,this.hasMinTermsError=()=>"min_terms"in this.state.setValidationErrors,this.hasDefLangError=()=>"requires_def_lang"in this.state.setValidationErrors&&!this.state.set.defLang,this.hasWordLangError=()=>"requires_word_lang"in this.state.setValidationErrors&&!this.state.set.wordLang,this.hasTitleRequiredError=()=>"requires_title"in this.state.setValidationErrors&&!this.state.set.title,this.hasDiagramImageRequiredError=()=>"requires_diagram_image"in this.state.setValidationErrors&&this.isSetContentTypeDiagrams(),this.hasTitleProfanityError=()=>!!this.state.setProfanityErrors.title,this.hasDescriptionProfanityError=()=>!!this.state.setProfanityErrors.description,this.isSyncingOrRedirecting=()=>this.state.isSyncing||this.state.isRedirecting,this.isPublishDisabled=()=>this.state.isPublishDisabled||this.state.isImageUploading,this._onBlur=()=>{this.setState({hasFocusedInput:!1})},this.stopAutoScroll=()=>{this.isAutoScrolling()&&(this.autoScrollDirection=null,ve.a.stopScroll())},this.shouldOverrideViewPermissionForVerifiedCreator=(e,t)=>!(null==e||!e.isVerified||t.id||this.hasChangedPermissions),this.shouldShowTeacherCustomDistractorCreation=()=>this.props.shouldShowTeacherCustomDistractorCreation&&!this.props.diagramImage,this.shouldShowDiagramsContainer=()=>this.props.setContentType?this.isSetContentTypeDiagrams():this.props.isDiagramSet;var s={areColumnsFlipped:!1,hasFocusedInput:!1,hasShownDiagramImageRequiredError:!1,hasShownMinDiagramShapesError:!1,isCreateSetTooltipDiagramModalOpen:!1,isAutosuggestionEnabled:!t.isMobileWebView,isCreateSetUpsellModalOpen:!1,isSetDescriptionOpen:!1,isSetPermissionsOpen:!1,isSignupWallModalOpen:!t.isSignedIn,shouldShowImport:!1};this.state=Object.assign({permissions:{},selectedClassLuids:[],selectedEditableByClassLuids:[]},s,this.fetchUserStore(),this.fetchSetStore(),this.fetchClassSetStore(),this.fetchClassStore(),this.fetchSyncerStore(),this.fetchErrorAlertStore())}UNSAFE_componentWillMount(){if(oe.a.addChangeListener(this._onSyncerChange),G.a.addChangeListener(this._onSetChange),W.a.addChangeListener(this._onSetPermissionsChange),V.a.addChangeListener(this._onErrorAlert),K.a.addChangeListener(this._onUserChange),this.isSetContentTypePracticeQuestions()&&this.props.studiableMultipleChoiceQuestions&&this.props.studiableMultipleChoiceQuestions.length<z.a.studiableItems.MIN_ITEMS_FOR_PUBLISH)for(var e=this.props.studiableMultipleChoiceQuestions.length;e<z.a.studiableItems.MIN_ITEMS_FOR_PUBLISH;e++)this.props.createStudiableItem();this.hasChangedPermissions=!1,this.setState(this.fetchSetPermissionStore())}componentDidMount(){Object(pe.c)(),this.props.isResumingCreate&&!this.props.hideAutosavePrompt&&Object(te.a)({duration:ie.a.LONG,isDismissible:!0,message:e("create_set.autosave.notice"),onClickSecondaryAction:()=>{window.confirm(e("create_set.autosave.confirmation"))&&y.a.discard(this.state.setLuid)},secondaryActionLabel:e("create_set.autosave.discard_link")}),this.shouldShowCreateSetUpsellModal()&&this.setState({isCreateSetUpsellModalOpen:!0}),this.props.shouldShowTooltipDiagram&&this.setState({isCreateSetTooltipDiagramModalOpen:!0}),this.beforeUnloadListener=Object(me.a)(this.onBeforeUnload),this.props.isIOS&&(this.focusInputListener=de.a.capture(window.document,"focus",this._onFocus),this.blurInputListener=de.a.capture(window.document,"blur",this._onBlur)),this.autoScrollDirection=null,this.onPublishTimeout=null,this.hasLoggedUnsyncedTerms=!1,Object(ge.c)()&&Object(ge.b)(v.Pb.CREATE_SET_PAGE)}UNSAFE_componentWillUpdate(t,i){!this.state.hasSyncingError&&i.hasSyncingError?Object(te.a)({duration:ie.a.PERSISTENT,icon:"alert",message:e("create_set.syncing_error_bar.lost_connection"),priority:ie.b.HIGH,type:ie.c.CREATE_SET_SYNC_ERROR}):this.state.hasSyncingError&&!i.hasSyncingError&&Object(se.a)({type:ie.c.CREATE_SET_SYNC_ERROR})}componentDidUpdate(e,t){t.setValidationErrors!==this.state.setValidationErrors&&ve.a.scrollToTop(),this.onPublishTimeout=window.setTimeout((()=>{!t.set.id&&this.state.set.id&&(this.addSetToClass(this.state.set.id),this.addSetToFolder(this.state.set.id))}),0),this.state.isRedirecting&&this.handleTrackPublishEvent()}componentWillUnmount(){oe.a.removeChangeListener(this._onSyncerChange),G.a.removeChangeListener(this._onSetChange),W.a.removeChangeListener(this._onSetPermissionsChange),this.beforeUnloadListener&&this.beforeUnloadListener.remove(),this.focusInputListener&&this.focusInputListener.remove(),this.blurInputListener&&this.blurInputListener.remove(),this.onPublishTimeout&&clearTimeout(this.onPublishTimeout)}isSelfIdentifiedTeacher(){return!!this.state.user&&this.state.user.isSelfIdentifiedTeacher()}getPracticeQuestionValidationErrorMessage(){return"requires_two_items"in this.state.setValidationErrors?ae.a.createElement(l.a,{id:"create_practice_question.validation_errors.requires_two_items"}):"requires_options"in this.state.setValidationErrors?ae.a.createElement(l.a,{id:"create_practice_question.validation_errors.requires_options"}):null}getSetValidationErrorMessage(){if(Object(Q.a)(this.props.setContentType)){if(this.hasTitleProfanityError())return ae.a.createElement(l.a,{id:"create_set.header.set_title_error.profane"});if(this.hasDescriptionProfanityError())return ae.a.createElement(l.a,{id:"create_set.set_description_modal.profanity_error"})}return this.hasDiagramImageRequiredError()?this.state.setValidationErrors.requires_diagram_image:this.hasMinDiagramShapesError()?this.state.setValidationErrors.min_diagram_shapes:this.hasMinTermsError()?this.hasWordLangError()&&this.hasDefLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_languages_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.not_enough_terms_and_languages_error"}):this.hasWordLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_term_language_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.not_enough_terms_and_term_language_error"}):this.hasDefLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.not_enough_terms_and_definition_language_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.not_enough_terms_and_definition_language_error"}):Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.not_enough_terms_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.not_enough_terms_error"}):this.hasWordLangError()&&this.hasDefLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.languages_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.languages_error"}):this.hasWordLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.term_language_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.term_language_error"}):this.hasDefLangError()?Object(Q.a)(this.props.setContentType)?ae.a.createElement(l.a,{id:"create_set.validation_errors.sentence_case.definition_language_error"}):ae.a.createElement(l.a,{id:"create_set.validation_errors.definition_language_error"}):null}renderPublishIconButton(){return this.isPublishDisabled()?ae.a.createElement(p.a,null):ae.a.createElement(a.a,{icon:"system-check",iconProps:{variant:"whiteBorderless",size:"xlarge"},isHigherZIndex:!0,onClick:this.onPublishButtonClickHeader,tooltipText:e("create_set.header.publish_button.create")})}renderPublishButton(t){var i,s=t===k.f.HEADER?this.onPublishButtonClickHeader:this.onPublishButtonClickFooter,a=t===k.f.FOOTER,n=this.props.numDiagramShapes>=k.d.MIN_TERMS,o=k.d.MIN_TERMS-this.props.numDiagramShapes,u=!Object(Q.a)(this.props.setContentType)&&!n&&this.props.diagramImage&&!this.state.set.isPublished()||this.props.isEditingDiagramImage,c=ae.a.createElement(d.a,{disabled:this.isPublishDisabled()||u,hero:a,onClick:s},this.getPublishButtonText());i=this.props.isEditingDiagramImage?ae.a.createElement(l.a,{id:"create_set.finish_editing_error"}):this.props.canUsePremiumDiagramFeatures?ae.a.createElement(l.a,{id:"create_set.need_more_terms_error",numMoreTerms:o}):ae.a.createElement(l.a,{id:"create_set.upgrade_to_add_points_error",productName:this.isSelfIdentifiedTeacher()?e("products.one_year_teacher_recurring.name"):e("products.one_year_plus_recurring.name")});var h=r()({"CreateSetHeader-publishButtonOverlayWrap":t===k.f.HEADER});return u?ae.a.createElement(g.a,{className:h,key:"overlay",overlay:ae.a.createElement(f.a,null,i),position:"left",triggerAction:"hover"},ae.a.createElement("div",null,c)):c}renderMcqs(){var{addOptionsForStudiableItem:e,addOrUpdateStudiableMediaConnectionWithMedia:t,createStudiableItem:i,deleteMultipleChoiceOption:s,deleteStudiableMediaConnection:r,imageUploadStatus:a,moveStudiableItem:n,removeStudiableItem:o,saveMultipleChoiceOption:l,selectedMediaConnection:u,studiableMultipleChoiceQuestions:d,toggleExplanation:c,toggleHint:h,updateExplanationMedia:p,updateHintMedia:g,updateOptionMedia:m,updateQuestionMedia:f,updateSelectedMediaConnection:v,uploadImageMedia:_,shouldShowVideoExplanationCreation:E}=this.props,{setLuid:b}=this.state;return ae.a.createElement(w.a,{addOptionsForStudiableItem:e,addOrUpdateStudiableMediaConnectionWithMedia:t,createStudiableItem:i,deleteMultipleChoiceOption:s,deleteStudiableMediaConnection:r,imageUploadStatus:a,moveStudiableItem:n,removeStudiableItem:o,saveMultipleChoiceOption:l,selectedMediaConnection:u,setLuid:b,shouldShowVideoExplanationCreation:E,studiableContainerLuid:this.state.setLuid,studiableMultipleChoiceQuestions:d,toggleExplanation:c,toggleHint:h,updateExplanationMedia:p,updateHintMedia:g,updateOptionMedia:m,updateQuestionMedia:f,updateSelectedMediaConnection:v,uploadImageMedia:_})}renderLabelsForAccessibility(){return ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("div",{className:be,id:"editor-term-side"},e("create_set.term_context.sides.term")),ae.a.createElement("div",{className:be,id:"editor-definition-side"},e("create_set.term_context.sides.definition")),ae.a.createElement("div",{className:be,id:"editor-question-side"},e("create_set.term_context.sides.question")),ae.a.createElement("div",{className:be,id:"editor-answer-side"},e("create_set.term_context.sides.answer")),ae.a.createElement("div",{className:be,id:"editor-custom-distractor"},e("create_set.term_context.custom_distractors.field_label")))}renderTerms(){var{detectLanguageResults:e,set:t,setLuid:i}=this.state,s=!this.props.isSignedIn;return ae.a.createElement(ae.a.Fragment,null,this.renderLabelsForAccessibility(),ae.a.createElement(M.a,{canEditRichText:this.props.canEditRichText,canUseImageUpload:this.props.canUseImageUpload,canUseVoiceRecording:this.props.canUseVoiceRecording,defLang:t.defLang,detectLanguageResults:e,hasDefLangError:this.hasDefLangError(),hasMinTermsError:this.hasMinTermsError(),hasSyncingError:this.state.hasSyncingError,hasWordLangError:this.hasWordLangError(),isAutosuggestionEnabled:this.state.isAutosuggestionEnabled,isHidden:this.state.shouldHideTerms,isIOS:this.props.isIOS,isMac:this.props.isMac,isMobileWebView:this.props.isMobileWebView,isSetContentTypeDiagrams:this.isSetContentTypeDiagrams(),onDragEnd:this.stopAutoScroll,onDragEnterOrOver:this.scrollIfNearEdges,onToggleAutosuggest:this.onToggleAutosuggest,openLangSelectSide:this.state.openLangSelectSide,recentLanguages:this.props.recentLanguages,setLuid:i,shouldLogForRichTextDebugging:this.props.shouldLogForRichTextDebugging,shouldShowMCQUpsell:this.props.shouldShowMCQUpsell,shouldShowTeacherCustomDistractorCreation:this.shouldShowTeacherCustomDistractorCreation(),shouldShowTooltipAudio:this.props.shouldShowTooltipAudio,shouldShowTooltipImage:this.props.shouldShowTooltipImage,shouldShowTooltipRichText:this.props.shouldShowTooltipRichText,shouldUseCleanDesign:Object(Q.a)(this.props.setContentType),stickyHeaderHeight:this.state.stickyHeaderHeight,user:this.state.user,userLocale:this.getUserLocale(),viewOnly:s,voiceRecordingUpsellImage:this.props.voiceRecordingUpsellImage,wordLang:t.wordLang}))}renderCreateSetUpsellModal(){return this.props.shouldShowOCRCreateSetModal?ae.a.createElement($.a,{isOpen:this.state.isCreateSetUpsellModalOpen,onClose:this.onCloseCreateSetUpsellModal,source:"create_set_modal_ocr",variant:this.isSelfIdentifiedTeacher()?"teacher":"student"}):ae.a.createElement(u.a,{above:"s"},(e=>e?ae.a.createElement(ee.a,{isOpen:this.state.isCreateSetUpsellModalOpen,onClose:this.onCloseCreateSetUpsellModal,source:"create_set"}):null))}render(){var{permissions:e,set:t,setLuid:i}=this.state,s=!this.props.isSignedIn,a=Object(Q.a)(this.props.setContentType)?this.renderPublishIconButton():this.renderPublishButton(k.f.HEADER),n=r()("CreateSetPage",{"has-focusedInput":this.state.hasFocusedInput}),d=r()("CreateSetPage-container",{"CreateSetPage-container--whiteBackground":Object(Q.a)(this.props.setContentType)}),p=r()("CreateSetPage-footer",{"CreateSetPage--footerOverlap":this.isSetContentTypeDiagrams()}),g=this.isSetContentTypePracticeQuestions()?this.onPublishMcqs:this.onPublishTerms;return ae.a.createElement(ne.b,{value:{canEditRichText:this.props.canEditRichText,isSelfIdentifiedTeacher:this.isSelfIdentifiedTeacher(),shouldShowRichText:!0}},ae.a.createElement("div",{className:n,onDragOver:this.cancelEvent,onDrop:this.onDrop},ae.a.createElement(E.a,{canEditRichText:this.props.canEditRichText,canFlipColumns:this.canFlipColumns(),hasFocusedInput:this.state.hasFocusedInput,isAutosuggestionEnabled:this.state.isAutosuggestionEnabled,isDiagramSet:this.props.isDiagramSet,isMac:this.props.isMac,isPublished:this.state.set.isPublished(),isResumingCreate:this.props.isResumingCreate,isSyncing:this.isSyncingOrRedirecting(),lastSavedTimestamp:this.state.lastSavedTimestamp,numTermsSaved:q.b.getNumSyncedTerms(),onDragOver:this.onDragOverHeader,onFlipColumn:this.onFlipColumn,onOpenImport:this.onOpenImport,onOpenMobileOptionsModal:this.handleOpenMobileOptionsModal,onOpenPermissions:this.onOpenPermissions,onOpenSetDescription:this.onOpenSetDescription,onPublish:g,onToggleAutosuggest:this.onToggleAutosuggest,permissions:e,publishButton:a,set:t,setLuid:i,setProfanityErrors:this.state.setProfanityErrors,setValidationBoxedErrors:this.isSetContentTypePracticeQuestions()?this.getPracticeQuestionValidationErrorMessage():this.getSetValidationErrorMessage(),setValidationErrors:this.state.setValidationErrors,shouldShowAd:this.props.shouldShowAd,shouldShowFlipTermsMenu:!this.isSetContentTypePracticeQuestions(),viewOnly:s}),ae.a.createElement("div",{className:d},this.props.shouldShowTooltipDiagram?ae.a.createElement(u.a,{below:"m"},(e=>e?ae.a.createElement(Z.a,{isOpen:this.state.isCreateSetTooltipDiagramModalOpen,onClose:this.onCloseCreateSetTooltipDiagramModal,source:"create_set_tooltip_diagram_modal"}):null)):null,this.shouldShowDiagramsContainer()&&ae.a.createElement(u.a,{above:"s"},ae.a.createElement(_.a,null)),ae.a.createElement(c.a,null,ae.a.createElement("div",{className:"CreateSetPage-list",key:"list"},this.isSetContentTypePracticeQuestions()||Object(Q.a)(this.props.setContentType)?null:ae.a.createElement(u.a,{below:"s"},ae.a.createElement("div",{className:"CreateSetPage-flipColumns"},ae.a.createElement(m.a,{checked:this.state.areColumnsFlipped,disabled:!this.canFlipColumns(),onChange:this.onFlipColumn},ae.a.createElement(h.a,{icon:"switch"})," ",ae.a.createElement(l.a,{id:"create_set.header.flip_columns_tooltip"})))),ae.a.createElement(o.a,null,this.isSetContentTypePracticeQuestions()?this.renderMcqs():this.renderTerms()),ae.a.createElement("div",{className:p},ae.a.createElement("div",{className:"CreateSetPage-publishButton"},this.renderPublishButton(k.f.FOOTER))),this.state.hasSyncingError?ae.a.createElement("div",{className:"CreateSetPage-blockerOverlay"}):null))),ae.a.createElement(L.a,{defLang:t.defLang,onCancel:this.onCloseImport,onImport:this.onImport,shouldShow:this.state.shouldShowImport,wordLang:t.wordLang}),this.state.activeError&&ae.a.createElement(D.a,{activeError:this.state.activeError}),ae.a.createElement(R.a,{defLang:this.state.set.defLang,description:this.state.set.description,hasProfanityError:!!this.state.setProfanityErrors.description,isOpen:this.state.isSetDescriptionOpen,onClose:this.onCloseSetDescription,setLuid:this.state.setLuid,wordLang:this.state.set.wordLang}),this.props.canEditPermissions?this.renderSetPermissions():this.renderSetPermissionsError(),this.props.isSignedIn?null:this.renderSignupPromptModal(),this.state.isMobileOptionsModalOpen?this.renderMobileOptionsModal():null,this.props.showImageUploadErrorModal?ae.a.createElement(X.a,{isOpen:this.props.showImageUploadErrorModal,onClose:this.handleCloseImageErrorUploadModal}):null,this.shouldShowCreateSetUpsellModal()?this.renderCreateSetUpsellModal():null))}shouldShowCreateSetUpsellModal(){var e=ue.b.read("create_set_num_show_upsell_modal")||0;return!!Y.a.user&&(Y.a.user.type===v.fc.NO_UPGRADE||Y.a.user.type===v.fc.GO)&&q.b.getNumFreeTerms()===k.d.MAX_TERMS&&null===ue.b.read(v.l.CREATE_SET__UPSELL_MODAL)&&e<5}canFlipColumns(){var e,t;return!(null==(e=this.state.set)||!e.wordLang||null==(t=this.state.set)||!t.defLang)}getUserLocale(){var{user:e}=this.state;return(null==e?void 0:e.userLocalePreference)||(null==e?void 0:e.webLocale)}isSetContentTypeDiagrams(){return"diagrams"===this.props.setContentType}isSetContentTypePracticeQuestions(){return"practice-questions"===this.props.setContentType}maybeLogDebugForNullRichText(e,t){if(!Object(ce.a)(e)){var i=new Map;for(var s in e)if(e[s]){var r=e[s];null!==r.definitionRichText&&null!==r.wordRichText||i.set(s,r)}i.size>0&&J.a.debug("Rich text saved as null for terms during "+t,Object.fromEntries(i))}}}t.a=Se,i("9nCg")}).call(this,i("nrsj").default)},rKZd:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("pfAI");class r{constructor(e){this.placeholderImage=e.placeholderImage,this.image=e.image}hasImageOrPlaceholder(){return this.hasImagePlaceholder()||this.hasImage()}hasImagePlaceholder(){return this.hasPlainImagePlaceholder()||this.hasRichImagePlaceholder()}hasPlainImagePlaceholder(){return!!this.placeholderImage&&this.placeholderImage.type===s.c.PLAIN}hasRichImagePlaceholder(){return!!this.placeholderImage&&this.placeholderImage.type===s.c.RICH}isUploadProcessing(){var e;return!(this.hasImage()||null==(e=this.placeholderImage)||!e.isProcessing)}isImageUploading(){var e;return!(null==(e=this.placeholderImage)||!e.isUploading)}hasImage(){var e;return!(null==(e=this.image)||null==e.getSecurePath||!e.getSecurePath())}hasOrIsUploadingImage(){return this.hasImagePlaceholder()||this.isUploadProcessing()||this.isImageUploading()||this.hasImage()}}},rTQ9:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("8WOz"),r=i("J+oH"),a=i("q1tI"),n=i.n(a);class o extends n.a.PureComponent{render(){var e=100-50/this.props.rowCount+"%";return n.a.createElement("div",{className:"UIFloatedCardBackdrop"},n.a.createElement("div",{className:"UIFloatedCardBackdrop-content"},this.props.children),n.a.createElement("div",{className:"UIFloatedCardBackdrop-bottom",style:{height:e}}))}}o.defaultProps={rowCount:1};class l extends a.Component{render(){var e=n.a.createElement(s.a,null,n.a.createElement(r.a,null,this.props.children));return this.props.shouldRenderCardBackdrop?n.a.createElement(o,null,e):e}}l.defaultProps={shouldRenderCardBackdrop:!0}},rl72:function(e,t,i){e.exports.Dispatcher=i("RkTr")},s78g:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return u}));i("zKZe");var s=i("og3H"),r=i("PuWd"),a=i("X0lI"),n=i.n(a),o=i("q1tI"),l=i.n(o);class u extends l.a.PureComponent{constructor(e){super(e),this.handleChange=e=>{var t=this.state.textValue,i=n()(t);i.plainText=e.plain,e.rich&&(i.richText=e.rich),this.hasTextChanged=!0,this.setState({textValue:i})},this.handleFocus=()=>{this.props.onFocus({media:this.getPromptMediaConnectionByMediaType(this.props,s.C.TEXT),type:s.Ab.MULTIPLE_CHOICE_PROMPT})},this.handleBlur=()=>{var{textValue:e}=this.state;if(this.hasTextChanged){if(this.props.onDeleteText&&""===e.plainText){var t=this.getPromptMediaConnectionByMediaType(this.props,s.C.TEXT);t&&this.props.onDeleteText(t)}else this.props.onBlur&&this.props.onBlur(e);this.hasTextChanged=!1}},this.handleDeleteImage=()=>{var e=this.getPromptMediaConnectionByMediaType(this.props,s.C.IMAGE);e&&this.props.onDeleteImage&&this.props.onDeleteImage(e)},this.hasTextChanged=!1;var t=this.getPrompt(e);this.state={textValue:t}}getImage(e){var t=this.getPromptMediaConnectionByMediaType(e,s.C.IMAGE);return(null==t?void 0:t.image)||null}getPrompt(e){var t=this.getPromptMediaConnectionByMediaType(e,s.C.TEXT);return null!=t&&t.text?Object.assign({},t.text):{languageCode:s.x.ENGLISH,plainText:"",ttsUrl:null,ttsSlowUrl:null}}getPromptMediaConnectionByMediaType(e,t){var{promptMedia:i}=e;return i.find((e=>e.mediaType===t))||null}render(){var{textValue:t}=this.state,i={onDeleteImage:this.handleDeleteImage},s={onBlur:this.handleBlur,onChange:this.handleChange,onFocus:this.handleFocus,onUpdatePMEditorView:this.props.onUpdateRichTextEditorView},a={autofocus:!!this.props.isFocused,lang:"en",languageCodes:["en"],placeholder:e("create_set.multiple_choice_questions.placeholder.question"),tabIndex:this.props.tabIndex};return l.a.createElement("div",{className:"EditableMcqQuestion"},l.a.createElement(r.a,{image:this.getImage(this.props),imageEvents:i,placeholderImage:this.props.placeholderImage,richTextConfig:a,richTextEvents:s,text:t}))}}}).call(this,i("nrsj").default)},sWWp:function(e,t,i){"use strict";i("zKZe"),i("4mDm"),i("3bBZ");var s=i("pfAI"),r=i("RsOY"),a=i.n(r),n=i("nmax"),o=i("vL1h"),l=i("GFZu"),u=i("e6z1"),d=Object.assign({images:{},placeholders:{},setup(e){this.images={},this.placeholders={},this._setup(e),this.bindActions(s.a.BULK_CREATE,this._bulkCreate),this.bindActions(s.a.CREATE_PLACEHOLDER,this._createPlaceholder),this.bindActions(s.a.CREATE_RICH_PLACEHOLDER,this._createRichPlaceholder),this.bindActions(s.a.CREATE_SUCCESS,this._createSuccess),this.bindActions(s.a.CREATE_FAILURE,this._createFailure),this.bindActions(s.a.CREATE_PROGRESS,this._createProgress),this.bindActions(s.a.DELETE,this._delete),this.bindActions(s.a.PRELOAD,this._preload),this.bindActions(s.a.STORE,this._store)},getAll(){return this.images},getPlaceholders(){return this.placeholders},_bulkCreate(e){var t={},i={};for(var s of e)t[s.imageLuid]=new u.a,i[s.imageLuid]=null;return this.images=a()(this.images,{$merge:t}),this.placeholders=a()(this.placeholders,{$merge:i}),e.map((e=>e.imageLuid))},_createPlaceholder(e){var{luid:t}=e;if(!this._contains(t))return[];var i=Object(l.a)(t);return i[t]={type:s.c.PLAIN,isProcessing:!1,isUploading:!0,percentProgress:null,dataUrl:null},this.placeholders=a()(this.placeholders,{$merge:i}),[t]},_createRichPlaceholder(e){var{luid:t,placeholderUrl:i}=e;if(!this._contains(t))return[];var r=Object(l.a)(t);return r[t]={type:s.c.RICH,isProcessing:!1,isUploading:!0,percentProgress:0,dataUrl:i},this.placeholders=a()(this.placeholders,{$merge:r}),[t]},_createSuccess(e){var{luid:t,model:i}=e;this._ensureContains(t);var r=Object(l.a)(t,{$merge:i.properties});if(this.images=a()(this.images,r),!this.placeholders[t])return[t];var n=Object(l.a)(t,{$merge:{}});return n[t].$merge.isUploading=!1,this.placeholders[t].type===s.c.RICH?n[t].$merge.isProcessing=!1:n[t].$merge.isProcessing=!0,this.placeholders=a()(this.placeholders,n),[t]},_createFailure(e){var{luid:t}=e;return this._delete({luid:t})},_createProgress(e){var{luid:t,progress:i}=e;if(this._ensureContains(t),!this.placeholders[t])return[];var s=Object(l.a)(t,{$merge:{}});return s[t].$merge.percentProgress=i,s[t].$merge.isProcessing=100===i,this.placeholders=a()(this.placeholders,s),[t]},_delete(e){var{luid:t}=e;return this._ensureContains(t),this.images=Object(o.a)(this.images,[t]),this.placeholders=Object(o.a)(this.placeholders,[t]),[t]},_preload(e){var{luid:t}=e;this._ensureContains(t);var i=Object(l.a)(t,null);return this.placeholders=a()(this.placeholders,{$merge:i}),[t]},_store(e){var t={},i={};for(var s in e){var r=e[s];this._contains(s)||(t[s]=new u.a(r),i[s]=null)}return this.images=a()(this.images,{$merge:t}),this.placeholders=a()(this.placeholders,{$merge:i}),Object.keys(e)},_setup(e){return this._store(e)},_ensureContains(e){if(!this._contains(e))throw new Error("Image LUID "+e+" not found")},_contains(e){return e in this.images&&e in this.placeholders}},n.a);d.init(),t.a=d},sccr:function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r={classes:{},setup(e){for(var t in e){var i=e[t];this.classes[t]=i}},getAll(){return this.classes}};(r=Object.assign(r,s.a)).init(),t.a=r},sldm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r=o(i("q1tI")),a=o(i("17x9")),n=o(i("TSYQ"));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.handleMouseDown=i.handleMouseDown.bind(i),i.handleMouseEnter=i.handleMouseEnter.bind(i),i.handleMouseMove=i.handleMouseMove.bind(i),i.handleTouchStart=i.handleTouchStart.bind(i),i.handleTouchEnd=i.handleTouchEnd.bind(i),i.handleTouchMove=i.handleTouchMove.bind(i),i.onFocus=i.onFocus.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"blockEvent",value:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}},{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.onFocus(e)}},{key:"handleMouseMove",value:function(e){this.onFocus(e)}},{key:"handleTouchEnd",value:function(e){this.dragging||this.handleMouseDown(e)}},{key:"handleTouchMove",value:function(e){this.dragging=!0}},{key:"handleTouchStart",value:function(e){this.dragging=!1}},{key:"onFocus",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"render",value:function(){var e=this.props,t=e.option,i=e.instancePrefix,s=e.optionIndex,a=(0,n.default)(this.props.className,t.className);return t.disabled?r.default.createElement("div",{className:a,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.props.children):r.default.createElement("div",{className:a,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:i+"-option-"+s,title:t.title},this.props.children)}}]),t}(r.default.Component);l.propTypes={children:a.default.node,className:a.default.string,instancePrefix:a.default.string.isRequired,isDisabled:a.default.bool,isFocused:a.default.bool,isSelected:a.default.bool,onFocus:a.default.func,onSelect:a.default.func,onUnfocus:a.default.func,option:a.default.object.isRequired,optionIndex:a.default.number},t.default=l},sr1c:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("zK28"),r=i("QLaP"),a=i.n(r);function n(e){QWait("Quizlet.NotificationContainer",(()=>{a()(s.a.NotificationContainer,"Missing Quizlet.NotificationContainer"),s.a.NotificationContainer.removeNotification(e)}))}},tINr:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));i("FZtP");var s=i("JPcv");function r(e,t,i){var r=e;return Object.keys(t).forEach((e=>{var a=t[e],n=Object.keys(a)[0];"$set"===n?r=r.set(e,Object(s.fromJS)(a.$set)):"$merge"===n?r=r.update(e,Object(s.Map)(),(e=>e.merge(a.$merge))):"$delete"===n&&(r=r.delete(e),i&&i(e))})),r}},tYUx:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("q1tI"),n=i.n(a),o=i("bdmA"),l=i("Juyg");class u extends a.PureComponent{constructor(e){super(e),this.handleClick=()=>{this.props.onClick(this.props.suggestion)},this.handleMouseMove=()=>{this.props.onMouseMove(this.props.suggestion)},this._getOriginalCaseSuggestionTextDiff=(e,t)=>{var i=0;return t.map(((t,s)=>{var[r,a]=t,n=i;return i+=a.length,[r,e.substring(n,i)]}))},this.diffMatchPatch=new l.d({ignoreCase:!0})}renderText(){var{suggestion:e,prefix:t}=this.props;if(!(t&&t.length>0))return n.a.createElement("span",null,e.text);var i=this.diffMatchPatch.diff_main(t,e.text,!1).filter((e=>{var[t,i]=e;return t!==l.a}));return this._getOriginalCaseSuggestionTextDiff(e.text,i).map(((e,t)=>{var[i,s]=e,a=r()({"AutosuggestContextItem-match":i===l.b});return n.a.createElement("span",{className:a,key:t},s)}))}render(){var e=r()("AutosuggestContextItem",{"AutosuggestContextItem--selected":this.props.isSelected});return n.a.createElement("div",{className:e,onMouseDown:this.handleClick,onMouseMove:this.handleMouseMove},n.a.createElement(o.a,null,this.renderText()))}}u.defaultProps={isSelected:!1};var d=i("6rYD"),c=i("QLaP"),h=i.n(c),p=i("TX86"),g=i.n(p),m="AutosuggestContext-Scope";class f extends a.PureComponent{constructor(){super(...arguments),this.state={selectedItemIndex:-1},this.handleSuggestionChosen=e=>{null!=e&&e.text&&this.props.onSuggestionChosen(e.text)},this.handleSuggestionMouseMove=e=>{h()(this.props.suggestionsData,"this.props.suggestionsData should not be null");var t=this.props.suggestionsData.suggestions.indexOf(e);t<0||this.setState({selectedItemIndex:t})},this.handleContextMouseOut=()=>{this.setState({selectedItemIndex:-1})}}componentDidMount(){g.a.addOverlappingScope(m),g()(d.a.autosuggestions.nextItem,m,(()=>(this.state.selectedItemIndex<0?this.setState({selectedItemIndex:0}):this.setState({selectedItemIndex:(this.state.selectedItemIndex+1)%this.suggestionsCount}),!1))),g()(d.a.autosuggestions.previousItem,m,(()=>(this.state.selectedItemIndex<=0?this.setState({selectedItemIndex:this.suggestionsCount-1}):this.setState({selectedItemIndex:(this.state.selectedItemIndex-1)%this.suggestionsCount}),!1))),g()(d.a.autosuggestions.selectItem,m,(()=>{var{suggestionsData:e}=this.props;if(!e||-1===this.state.selectedItemIndex)return!0;if(this.state.selectedItemIndex>=0){var t=e.suggestions[this.state.selectedItemIndex];this.handleSuggestionChosen(t)}return!1}))}componentWillUnmount(){g.a.unbind(d.a.autosuggestions.nextItem,m),g.a.unbind(d.a.autosuggestions.previousItem,m),g.a.unbind(d.a.autosuggestions.selectItem,m),g.a.removeOverlappingScope(m)}get suggestionsCount(){return this.props.suggestionsData?this.props.suggestionsData.suggestions.length:0}renderItems(){var{suggestionsData:e}=this.props;return h()(e,"suggestionsData should not be null"),e.suggestions.map(((t,i)=>n.a.createElement(u,{isSelected:i===this.state.selectedItemIndex,key:t.id,onClick:this.handleSuggestionChosen.bind(this,t),onMouseMove:this.handleSuggestionMouseMove,prefix:e.parameters.prefix,suggestion:t})))}render(){var e=r()("AutosuggestContext",{"AutosuggestContext--extraTopPadding":this.props.extraTopPadding});return n.a.createElement("div",{className:e,onMouseOut:this.handleContextMouseOut},n.a.createElement("div",{className:"AutosuggestContext-suggestions"},this.renderItems()))}shouldRenderSide(e){return this.props.suggestionsData&&this.props.termSide===e}}},ttfT:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return n}));var s=i("q1tI"),r=i.n(s),{Provider:a,Consumer:n}=r.a.createContext({canEditRichText:!1,isSelfIdentifiedTeacher:!1,shouldShowRichText:!1})},u86x:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return c}));var s=i("q1tI"),r=i.n(s),a=i("Uudg"),n=i("JxFz"),o=i("Pxp3"),l=i("dxfC"),u=i("chz3"),d=i("7uva");class c extends s.PureComponent{renderNotCreatorMessage(){return r.a.createElement(l.a,{headerContent:r.a.createElement(a.a,{id:"create_set.permissions_error_modal.no_permission_to_change_setting"}),includeCloseButton:!0,isOpen:this.props.isOpen,onClose:this.props.onClose},r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(a.a,{id:"create_set.permissions_error_modal.only_creator_has_permission"})),r.a.createElement(o.a,null,r.a.createElement(n.a,{"aria-label":e("create_set.permissions_error_modal.okay_button"),onClick:this.props.onClose,tabIndex:0},r.a.createElement(a.a,{id:"create_set.permissions_error_modal.okay_button"})))))}render(){return r.a.createElement("div",{className:"SetPermissionsErrorModal"},this.props.type===d.a.permissions.NOT_CREATOR?this.renderNotCreatorMessage():null,this.props.type===d.a.permissions.UNDER_13?r.a.createElement(u.default,{headerContent:r.a.createElement(a.a,{id:"create_set.permissions_error_modal.no_permission_to_change_setting"}),isOpen:this.props.isOpen,isUnderageUser:!0,onClose:this.props.onClose,subheaderContent:r.a.createElement(a.a,{id:"create_set.permissions_error_modal.parent_email_not_confirmed"})}):null)}}}).call(this,i("nrsj").default)},uBNa:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return a}));var s=i("EzPt");function r(e){return Array.from(e)}function a(e,t){return Object(s.a)(r(e),t)}},uSb8:function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r=i("YJee"),a=i("RsOY"),n=i.n(a),o={folderSets:{},setup(e){for(var t in e){var i=e[t];this.folderSets[t]=i}this.bindActions(r.a.actions.BULK_UPDATE,this._updateFolderSets)},getAll(){return this.folderSets},getUnsyncedFolderSets(e){var t={};for(var i in this.folderSets){var s=this.folderSets[i];s.setId||(t[i]={classId:s.classId,setId:e})}return t},_updateFolderSets(e){var{models:t}=e,i={};for(var s in t){var r=t[s];i[s]=r.getProperties()}this.folderSets=n()(this.folderSets,{$merge:i})}};(o=Object.assign(o,s.a)).init(),t.a=o},uSnV:function(e,t,i){"use strict";(function(e){i("E9XD"),i("zKZe");var s=i("baRz"),r=i("TSYQ"),a=i.n(r),n=i("Uudg"),o=i("nXOR"),l=i("JxFz"),u=i("cE6c"),d=i("bvRJ"),c=i("xqF0"),h=i("vlgG"),p=i("a08m"),g=i("og3H"),m=i("QimK"),f=i("nuPN"),v=i("pfAI"),_=i("QMP1"),E=i("rKZd"),b=i("N7sa"),S=i("dwfE"),C=i("1iNE"),T=i.n(C),y=i("q1tI"),I=i.n(y),A=i("FBfK"),O=i("ttfT"),w=i("TtcH"),D=i("+IfW"),L=i("gA6y"),R=i("T3U7"),x=i("y2oz"),P=i("EFuM"),M=Object(w.n)("custom_image_upload"),U=Object(s.styled)("div")({name:"ImageButtonSection",class:"i1f94iwx"});class k extends y.PureComponent{constructor(e){super(e),this.handleOpenImageCarousel=()=>{Object(P.j)()&&this.focusActiveElement()},this.handleUpdateQueryString=e=>{this.setState({queryString:e.target.value})},this.handleRerunSearch=e=>{e.preventDefault(),this.state.queryString&&this.props.onRerunSearch&&this.props.onRerunSearch(this.state.queryString)},this.handleChooseFiles=(e,t)=>{this.props.onUpload(e,t),this.props.onClose()},this.handleFileChooserRef=e=>{this.fileChooser=e},this.handleSearchResult=e=>{if(this.props.searchResults){var t=this.props.searchResults[e];Object(R.a)("new_create_set_select_image_search_result",{message:"imageSearchQuery="+this.retrieveSearchQuery()+" selectedId="+t.id+" selectedCode="+t.code}),this.props.onImageSelect(e),this.props.onClose()}},this.handleSearchButtonRef=e=>{this.searchButton=e},this.handleSearchBoxRef=e=>{this.searchBox=e},this.handleImageCarouselRef=e=>{this.imageCarousel=e},this.handleOpenReportModal=()=>{this.setState({isReportModalOpen:!0}),Object(R.a)("open_report_modal",{modelType:g.D.IMAGE,modelId:0})},this.handleCloseReportModal=()=>{this.setState({isReportModalOpen:!1})},this.handleUpsellButtonClick=e=>{Object(x.a)({action:g.Ob.CLICK,cta:e,fullActionName:"create_set_image_upsell_cta_click"})},this.setImageIdToBeRemoved=e=>{this.setState({imageIdToBeRemoved:e})},this.imageHelper=new E.a({placeholderImage:e.placeholderImage,image:e.image}),this.state={queryString:"",isReportModalOpen:!1,imageIdToBeRemoved:""}}UNSAFE_componentWillMount(){this.setState({queryString:this.retrieveSearchQuery(this.props)})}componentDidMount(){this.props.enabled&&this.handleOpenImageCarousel()}UNSAFE_componentWillReceiveProps(e){this.props.image===e.image&&this.props.placeholderImage===e.placeholderImage||(this.imageHelper=new E.a({placeholderImage:e.placeholderImage,image:e.image})),this.retrieveSearchQuery(e)!==this.retrieveSearchQuery(this.props)&&this.setState({queryString:this.retrieveSearchQuery(e)}),e.dragDropEvent&&this.props.onDropEnd(e.dragDropEvent)}componentDidUpdate(e){!e.enabled&&this.props.enabled&&this.handleOpenImageCarousel(),this.props.onDragEnterEnd&&!e.isDropTarget&&this.props.isDropTarget&&this.props.onDragEnterEnd(),this.props.onDragLeaveEnd&&e.isDropTarget&&!this.props.isDropTarget&&this.props.onDragLeaveEnd()}getImageIds(){if(this.hasSearchResults()&&this.imageCarousel){var e=this.imageCarousel.state.page,t=this.state.imageIdToBeRemoved;this.props.searchResults&&t&&delete this.props.searchResults[t];var i=this.imageCarousel.getImageLuids(this.retrieveSearchResults()),s=this.props.searchResults;if(!s)return[];var r=this.retrieveSearchQuery(),a=e-1;return i.length<a?[]:i[a].map((t=>({id:Number(s[t].id),url:s[t]._legacyUrl,sideText:r,page:e})))}return[]}getTabIndex(){return this.props.enabled?_.g.TAB_INDEX:-1}getMaxNumResults(){return this.props.canUseImageUpload?v.b.MAX_NUM_IMAGES_UPGRADED:v.b.MAX_NUM_IMAGES_FREE}renderUpsellButton(e){return I.a.createElement("div",{className:"ImageUploadContext-upsellButton"},I.a.createElement(o.a,{below:"s"},(t=>I.a.createElement(l.a,{linkTo:M,linkToNewTab:!0,onClick:()=>this.handleUpsellButtonClick(e),width:t?"fill":"auto"},this.isInARoundedCarouselVariant()?I.a.createElement(d.a,{icon:"system-upload",size:"large"}):null,e,this.isInARoundedCarouselVariant()?I.a.createElement(O.a,null,(e=>{var{isSelfIdentifiedTeacher:t}=e;return Object(A.b)(t)})):null))))}renderUploadButton(e){return I.a.createElement(o.a,{below:"s"},(t=>I.a.createElement(u.a,{mimeTypes:this.props.mimeTypes,multiple:this.props.multipleUpload,onChooseFiles:this.handleChooseFiles,ref:this.handleFileChooserRef},I.a.createElement(l.a,{width:t?"fill":"auto"},e))))}renderUploadOrUpsellButton(){var t=this.isInSwapOrderVariant()?e("create_set.term_context.image.upload_link_no_or"):e("create_set.term_context.image.upload_link");return this.props.canUseImageUpload?this.renderUploadButton(t):this.renderUpsellButton(t)}renderReportModal(){return I.a.createElement(S.a,{imageIds:this.getImageIds(),isOpen:this.state.isReportModalOpen,isReportingFlowBlocked:this.props.isReportingFlowBlocked,modelId:0,onClose:this.handleCloseReportModal})}renderReportImageButton(){return this.hasSearchResults()?I.a.createElement(U,null,I.a.createElement(p.a,{onClick:this.handleOpenReportModal},I.a.createElement(n.a,{id:"reporting_flow.image.title"}))):null}renderSearchInput(){return I.a.createElement("form",{className:"ImageUploadContext-headerItem ImageUploadContext-searchForm",onSubmit:this.handleRerunSearch},I.a.createElement(h.a,{addOnContent:I.a.createElement("span",{className:"ImageUploadContext-searchButton"},I.a.createElement(c.a,{disabled:!this.state.queryString,icon:"arrow-right",onClick:this.handleRerunSearch,ref:this.handleSearchButtonRef,tabIndex:this.getTabIndex(),type:"submit",variant:"borderless"})),className:"js-keymaster-allow",onChange:this.handleUpdateQueryString,placeholder:this.isInSwapOrderVariant()?e("create_set.term_context.image.search_quizlet_title_with_or"):e("create_set.term_context.image.search_quizlet_title"),ref:this.handleSearchBoxRef,tabIndex:this.getTabIndex(),value:this.state.queryString}))}renderSearchResultsLoading(){return I.a.createElement("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--loading"},I.a.createElement("p",{className:"ImageUploadContext-resultsText ImageUploadContext-resultsText--loading"},I.a.createElement(n.a,{id:"create_set.term_context.image.loading"})))}renderNoImagesFound(e){var t='<span className="ImageUploadContext-query">'+Object(D.a)(e,25)+"</span>";return I.a.createElement("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--noResults"},I.a.createElement("p",{className:"ImageUploadContext-resultsText ImageUploadContext-resultsText--noneFound"},I.a.createElement(n.a,{id:"create_set.term_context.image.no_results",searchTerm:t})))}renderSearchResultsItems(){return I.a.createElement(f.a,{canUseImageUpload:this.props.canUseImageUpload,createSetImageUploadCtaTestVariant:this.props.createSetImageUploadCtaTestVariant,enabled:this.props.enabled,images:this.retrieveSearchResults(),isPrevElementFocused:this.isSearchButtonFocused,keyboardScope:this.props.keyboardScope,onImageError:this.setImageIdToBeRemoved,onSelectImage:this.handleSearchResult,ref:this.handleImageCarouselRef,searchQuery:this.retrieveSearchQuery()})}renderSearchResults(){var e=this.retrieveSearchQuery();if(this.isLoadingSearchResults())return this.renderSearchResultsLoading();if(this.hasSearchResults()){var t=this.renderSearchResultsItems();return I.a.createElement("div",{className:"ImageUploadContext-searchResults ImageUploadContext-searchResults--hasResults"},t)}return e?this.renderNoImagesFound(e):null}renderHeader(){return I.a.createElement("div",{className:"ImageUploadContext-header"},this.isInSwapOrderVariant()?I.a.createElement("div",{className:"ImageUploadContext-headerItem"},this.renderUploadOrUpsellButton()):null,this.renderSearchInput(),this.isInSwapOrderVariant()?null:I.a.createElement("div",{className:"ImageUploadContext-headerItem"},this.renderUploadOrUpsellButton()))}render(){var e=a()("ImageUploadContext",{"is-open":this.props.enabled,"is-dropTarget":this.props.isDropTarget,"is-inUploadCtaVariant":this.isInUploadCtaVariant(),"is-roundedCarouselVariant":this.isInARoundedCarouselVariant(),"is-waitingForQuery":this.isWaitingForQuery()});return I.a.createElement("div",{className:e,onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop},this.renderReportModal(),this.renderHeader(),I.a.createElement("div",{className:"ImageUploadContext-wrapper"},I.a.createElement("div",{className:"ImageUploadContext-searchWrap"},this.renderSearchResults())),I.a.createElement("div",{className:"ImageUploadContext-header"},this.renderReportImageButton()))}focusActiveElement(){var e=this.imageCarousel;null!=e&&e.hasActiveImage()&&e.focusActiveImage(),this.focusSearchInput()}focusSearchInput(){this.searchBox&&this.searchBox.focus()}isInUploadCtaVariant(){return null!==this.props.createSetImageUploadCtaTestVariant&&"control"!==this.props.createSetImageUploadCtaTestVariant}isInARoundedCarouselVariant(){return"swapOrderNewStyle"===this.props.createSetImageUploadCtaTestVariant||"popoverMenu"===this.props.createSetImageUploadCtaTestVariant}isInSwapOrderVariant(){return"swapOrderOldStyle"===this.props.createSetImageUploadCtaTestVariant||"swapOrderNewStyle"===this.props.createSetImageUploadCtaTestVariant||"popoverMenu"===this.props.createSetImageUploadCtaTestVariant}isInPopoverMenuVariant(){return"popoverMenu"===this.props.createSetImageUploadCtaTestVariant}isWaitingForQuery(){return!this.props.word&&!this.hasExistingQuery()}retrieveSearchQuery(e){void 0===e&&(e=this.props);var{searchMeta:t}=e;return t?t.queryString:""}isSearchButtonFocused(){return Object(L.a)(this.searchButton)}hasSearchResults(){return T()(this.retrieveSearchResults())>0}hasExistingQuery(){return!!this.retrieveSearchQuery()}retrieveSearchResults(){var e=this.getMaxNumResults(),{searchResults:t}=this.props;return t?Object.keys(t||{}).filter((e=>t[e])).slice(0,e).reduce(((e,i)=>Object.assign({},e,{[i]:t[i]})),{}):{}}isLoadingSearchResults(){return!!this.props.searchMeta&&this.props.searchMeta.isLoading}openUploadDialog(){this.fileChooser&&this.fileChooser.handleOpenFileDialog()}}k.defaultProps={createSetImageUploadCtaTestVariant:null,isDropTarget:!1,mimeTypes:m.c,multipleUpload:!0,isReportingFlowBlocked:!1},t.a=Object(b.a)()(k),i("Wldb")}).call(this,i("nrsj").default)},ugal:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("8OQS"),r=i.n(s),a=i("TSYQ"),n=i.n(a),o=i("a08m"),l=i("q1tI"),u=i.n(l);class d extends u.a.PureComponent{render(){var e=this.props,{children:t,variant:i}=e,s=r()(e,["children","variant"]),a=n()("UIMenuItem",{["UIMenuItem--"+i]:i});return u.a.createElement("span",{className:a},u.a.createElement(o.a,s,u.a.createElement("span",{className:"UIMenuItem-inner"},t)))}}},"v+BM":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("zK28"),r=i("QLaP"),a=i.n(r);function n(e,t,i){QWait("Quizlet.signupModal",(()=>{a()(s.a.openSignupModal,"Missing Quizlet.openSignupModal"),s.a.openSignupModal({signupOrigin:e,screenName:t},i)}))}},v0OC:function(e,t,i){"use strict";i.r(t)},vL1h:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));i("zKZe");function s(e,t){for(var i=Object.assign({},e),s=0;s<t.length;s++)delete i[t[s]];return i}},vid3:function(e,t,i){"use strict";i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return g}));var s=i("pVnL"),r=i.n(s),a=i("TSYQ"),n=i.n(a),o=i("xqF0"),l=i("jvKz"),u=i("vzun"),d=i("q1tI"),c=i.n(d),h=i("EFuM");class p extends d.PureComponent{renderToggle(){return"function"==typeof this.props.children?this.props.children(this.props.disabled,this.props.onClick):this.renderDefaultToggle()}renderDefaultToggle(){return c.a.createElement(o.a,r()({"aria-label":this.props.tooltip,disabled:this.props.disabled,icon:this.props.icon,onClick:this.props.onClick,tabIndex:-1},this.props.iconProps,{variant:"borderless"}))}render(){var e=n()("ContextToggle",this.props.className,{"is-active":this.props.isActive});return c.a.createElement("span",{className:e},this.props.tooltip&&!Object(h.j)()?c.a.createElement(l.a,{openDelay:200,overlay:c.a.createElement(u.a,null,this.props.tooltip||null),position:"bottom center",triggerAction:"hover"},this.renderToggle()):this.renderToggle())}}p.defaultProps={isActive:!1,disabled:!1};var g=()=>c.a.createElement("span",{className:"ContextToggleSpacer"}," ")},vl7F:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("jGfb"),r=i("qiyg"),a=(e,t)=>e.indexOf(t)>=0;function n(e,t,i){return e&&function(e,t){return!a(r.notActualLanguages,e)&&(a(r.chineseLanguages,e)||a(r.chineseLanguages,t))}(t,i)?s.PinyinConverter.convert(e):e}},"vm/G":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Q}));i("4mDm"),i("3bBZ");var s=i("1Pxe"),r=i("b/sn"),a=i("q1tI"),n=i.n(a),o=(i("vxnP"),i("E9XD"),i("JTJg"),i("TSYQ")),l=i.n(o),u=i("qiyg"),d=i("cD+i"),c=i("RvVp"),h=i("Mhoe"),p=(i("zKZe"),i("RCw7")),g=i("49oK"),m=i("JhTn"),f="Mod-a",v="Mod-shift-z",_="Mod-z",E="Mod-b",b="Mod-i",S="Mod-u",C="Shift-Enter",T=(e,t)=>(i,s)=>{if(!(e in i.schema.marks))return(e,t)=>{};var r=i.schema.marks[e];return Object(p.toggleMark)(r,t)(i,s)},y=Object(g.keymap)(Object.assign({[f]:(e,t)=>((e,t)=>{var{tr:i,doc:s}=e;return t(i.setSelection(new r.TextSelection(s.resolve(0),s.resolve(s.content.size-1)))),!0})(e,t),[v]:(e,t)=>Object(h.redo)(e,t),[_]:(e,t)=>Object(h.undo)(e,t),[E]:(e,t)=>T(m.f.BOLD)(e,t),[b]:(e,t)=>T(m.f.ITALIC,{level:1})(e,t),[S]:(e,t)=>T(m.f.UNDERLINE,{level:2})(e,t)},p.baseKeymap,{[C]:p.baseKeymap.Enter}));var I=i("aOoi"),A=i("vl7F"),O=(e,t)=>{var i=Object(c.e)(e.doc),s=Object(A.a)(i,t[0],t[1]);if(i!==s){var a=Object(c.a)(s),n=new r.AllSelection(e.doc);return e.tr.setSelection(n).deleteSelection().replaceSelectionWith(a,!0)}},w=e=>new r.Plugin({appendTransaction:(t,i,s)=>O(s,e)}),D=new r.PluginKey(m.h.PLACEHOLDER),L=function(e){return void 0===e&&(e=""),new r.Plugin({key:D,props:{attributes:t=>{var{doc:i}=t;return 1===i.childCount&&i.firstChild.isTextblock&&0===i.firstChild.content.size&&e.length>0?{"pm-placeholder":e,"aria-placeholder":e}:null}}})},R=(i("JfAA"),e=>new r.Plugin({props:{attributes:{tabIndex:e.toString()}}})),x=i("e0KM"),P=e=>e.some((e=>u.chineseLanguages.includes(e))),M=e=>{var{placeholder:t,pmJson:i,schema:s,selectionPosition:a,tabIndex:n,langs:o,labelId:l}=e,{anchor:u,head:d}=a,p=[y,Object(h.history)(),I.a,L(t)];n&&p.push(R(n)),l&&p.push(function(e){return new r.Plugin({props:{attributes:{role:"textbox","aria-multiline":"true","aria-labelledby":"editor-"+e}}})}(l));var g=r.EditorState.fromJSON({schema:s||x.a,plugins:p},{doc:Object(c.f)(i),selection:{type:"text",anchor:u,head:d}});if(P(o)){var m=O(g,o);m&&(g=g.apply(m)),g.plugins.push(w(o))}return g},U=i("niBS"),k=i("kf70"),N=i("EFuM");class F extends n.a.Component{constructor(e){super(e),this.handleChange=()=>{this.pmJson=this.view.state.toJSON().doc,this.plainText=Object(c.e)(this.view.state.doc);var e={plain:this.plainText,rich:this.pmJson};this.props.onChange(e),this.focusEditor()},this.handleBlur=e=>{this.props.onBlur(this.updateEvent(e,this.plainText))},this.handleClick=e=>{if(Object(N.h)()&&!Object(N.e)()){var t=e.target.closest("div.ProseMirror");t||(t=e.target.querySelector("div.ProseMirror")),t.blur(),t.focus()}},this.handleFocus=e=>{this.focusEditor(),this.props.updateView(this.view),this.props.onFocus(this.updateEvent(e,this.plainText))},this.handleKeyDown=(e,t)=>!!this.props.onEditorKeyDown&&this.props.onEditorKeyDown(t),this.handlePaste=(e,t)=>!!this.props.onPaste&&this.props.onPaste(t),this.updateEditorWithPlainText=e=>{var{state:t,dispatch:i}=this.view,s=Object(c.d)(e),a=new r.AllSelection(t.doc);i(s.reduce(((e,t)=>e.replaceSelectionWith(t)),t.tr.setSelection(a).deleteSelection()))},this.updateEvent=(e,t)=>(e.target.value=t,e.currentTarget.value=t,e),this.focusEditor=()=>{document.body.contains(this.view.dom)&&this.view.focus()},this.blurEditor=()=>{document.body.contains(this.view.dom)&&this.view.dom.blur()},this.editorRef=n.a.createRef(),this.pmJson=e.pmJson,this.plainText=e.plainText,this.selectionPosition={anchor:1,head:1}}componentDidMount(){var e=M({placeholder:this.props.placeholder,pmJson:this.pmJson,selectionPosition:this.selectionPosition,schema:this.props.customSchema,tabIndex:this.props.tabIndex,langs:[this.props.lang,this.props.otherLang],labelId:this.props.labelId});this.view=new d.EditorView(this.editorRef.current,{state:e,dispatchTransaction:e=>{((e,t)=>{var i=e.state.apply(t);e.updateState(i)})(this.view,e),this.props.updateView(this.view),e.docChanged&&this.handleChange()},handleKeyDown:this.handleKeyDown,handlePaste:this.handlePaste}),this.props.autofocus&&this.focusEditor(),this.props.updateView(this.view)}componentDidUpdate(e){var t,i,s,r,a=""!==this.props.plainText&&!Object(k.a)(e.pmJson,this.props.pmJson)&&!Object(k.a)(this.props.pmJson,this.pmJson);if(e.plainText!==this.props.plainText&&this.props.plainText!==this.plainText&&Object(k.a)(e.pmJson,this.props.pmJson))this.plainText=this.props.plainText,this.updateEditorWithPlainText(this.plainText),this.focusEditor();else if(a||e.placeholder!==this.props.placeholder){this.plainText=this.props.plainText,this.pmJson=this.props.pmJson;var n=M({placeholder:this.props.placeholder,pmJson:this.pmJson,selectionPosition:this.selectionPosition,tabIndex:this.props.tabIndex,langs:[this.props.lang,this.props.otherLang],labelId:this.props.labelId});this.view.updateState(n),a&&this.focusEditor()}if(e.lang!==this.props.lang||e.otherLang!==this.props.otherLang){var o=(t=this.view,i=[this.props.lang,this.props.otherLang],s=this.props.placeholder,r=[y,Object(h.history)(),I.a,L(s)],P(i)&&r.push(w(i)),t.state.reconfigure({plugins:r}));this.view.updateState(o)}}componentWillUnmount(){this.view.destroy()}render(){var e=this.props.lang&&"lang-"+this.props.lang,t=this.props.lang&&1!==Object(U.d)(this.props.lang)&&"is-scaled-lang",i=l()("PMEditor",e,t,"notranslate",{"is-rtl":u.rightToLeftLanguages.includes(this.props.lang)});return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:i,"data-testid":"PMEditor",onBlur:this.handleBlur,onClick:this.handleClick,onFocus:this.handleFocus,ref:this.editorRef}),n.a.createElement("div",{className:"PMEditor-border"}))}}var j=i("KlxJ"),B=i("qxWM"),V=i("T1Oo"),H=i("PyIS"),W=i("W6SY"),G=i("qn7O"),q=i("yckm");class K extends n.a.Component{constructor(){super(...arguments),this.handleMouseDown=e=>{e.preventDefault()},this.handleClickCharButton=e=>{var{view:t}=this.props.editorView,{state:i,dispatch:s}=t;this.addCharToEditor(e)(i,s),t.focus()},this.toolbarRef=n.a.createRef()}componentDidMount(){this.toolbarRef.current&&(this.toolbarMouseDownListener=q.a.listen(this.toolbarRef.current,"mousedown",this.handleMouseDown))}shouldComponentUpdate(e){return!Object(W.a)(this.props,e,["languageCodes"])||!Object(V.a)(this.props.languageCodes,e.languageCodes)}componentWillUnmount(){this.toolbarMouseDownListener&&(this.toolbarMouseDownListener.remove(),this.toolbarMouseDownListener=null)}getCharactersByLang(){var e=B.a.getCharactersByLangForLangs(this.props.languageCodes);this.props.specificAccents.length>0&&this.props.languageCodes.length>0&&(e[this.props.languageCodes[0]]=this.props.specificAccents);return e}renderSpecialCharacterButtonGroup(){return n.a.createElement("div",{className:"SpecialCharacterToolbar-accentsBar"},n.a.createElement("div",{className:"SpecialCharacterToolbar-accentsBarInner"},n.a.createElement("div",{className:"SpecialCharacterToolbar-accentBarWrap",style:{marginRight:Object(H.a)()}},n.a.createElement(G.a,{allowToggleUppercase:!0,charactersByLang:this.getCharactersByLang(),onClickButton:this.handleClickCharButton,variant:"small"}))))}render(){return n.a.createElement("div",{className:"SpecialCharactersToolbar","data-testid":"SpecialCharactersToolbar",ref:this.toolbarRef},this.shouldRenderSpecialCharacterButtonGroup()?this.renderSpecialCharacterButtonGroup():null)}shouldRenderSpecialCharacterButtonGroup(){return this.getCharactersByLang()&&this.props.languageCodes&&this.props.languageCodes[0]&&this.getCharactersByLang()[this.props.languageCodes[0]].length>0}addCharToEditor(e){return(t,i)=>{i(t.tr.insertText(e))}}}var z=i("FBfK");class Q extends n.a.PureComponent{constructor(){super(...arguments),this.state={editorView:{},isFocused:!1},this.handleEditorValueChange=e=>{this.props.onChange(e)},this.handleFocus=e=>{if(!Object(N.h)()){var t=this.getTextContentSize();this.setEditorCursorPosition(t)}this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},this.handleBlur=e=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.updateView=e=>{this.setState({editorView:{view:e}},(()=>{this.props.onUpdatePMEditorView&&this.props.onUpdatePMEditorView(this.state.editorView)}))},this.editorWrapper=n.a.createRef(),this.pmEditor=n.a.createRef()}getPMJson(){return this.props.pmJson?"string"==typeof this.props.pmJson?JSON.parse(this.props.pmJson):this.props.pmJson:Object(c.c)(this.props.plainText)}getPlainText(){return this.props.plainText||""}getTextContentSize(){var{editorView:e}=this.state;return null!=e&&e.view?e.view.state.doc.content.size:0}renderPMEditor(){return n.a.createElement(F,{autofocus:this.props.autofocus,customSchema:this.props.canEditRichText?void 0:x.b,labelId:this.props.labelId,lang:this.props.lang,onBlur:this.handleBlur,onChange:this.handleEditorValueChange,onEditorKeyDown:this.props.onEditorKeyDown,onFocus:this.handleFocus,onPaste:this.props.onPaste,otherLang:this.props.otherLang,placeholder:this.props.placeholder,plainText:this.getPlainText(),pmJson:this.props.canEditRichText?this.getPMJson():Object(c.c)(this.getPlainText()),ref:this.pmEditor,tabIndex:this.props.tabIndex,updateView:this.updateView})}renderPMToolbar(){return this.props.canEditRichText?n.a.createElement(j.a,{editorView:this.state.editorView,isEmbeddedInline:this.props.isEmbeddedInline}):n.a.createElement(z.a,{isEmbeddedInline:this.props.isEmbeddedInline})}renderLabel(){return n.a.createElement("span",{className:"RichTextEditor-label"},n.a.createElement("div",{className:"RichTextEditor-labelText"},this.props.label),this.props.labelAddOnContent)}renderSpecialCharactersToolbar(){return n.a.createElement(K,{editorView:this.state.editorView,languageCodes:this.props.languageCodes,specificAccents:this.props.specificAccents})}render(){return n.a.createElement("div",{"aria-invalid":this.props.invalid||void 0,className:"RichTextEditor",ref:this.editorWrapper},this.shouldRenderPMToolbar()?this.renderPMToolbar():null,this.renderPMEditor(),n.a.createElement(s.CSSTransitionGroup,{transitionEnterTimeout:120,transitionLeaveTimeout:120,transitionName:"SpecialCharacterToolbar-animateAccentsBar"},this.shouldRenderSpecialCharactersToolbar()&&this.state.isFocused?this.renderSpecialCharactersToolbar():null),this.shouldRenderLabel()?this.renderLabel():null)}focus(){this.pmEditor.current&&this.pmEditor.current.focusEditor()}setEditorCursorPosition(e){var{editorView:t}=this.state;e>0&&t&&t.view&&t.view.dispatch(t.view.state.tr.setSelection(r.TextSelection.near(t.view.state.doc.resolve(e))))}blur(){this.pmEditor.current&&this.pmEditor.current.blurEditor()}shouldRenderPMToolbar(){return(this.state.isFocused||this.props.alwaysShowToolbar)&&!this.props.shouldShowRichTextCombinedToolbar}shouldRenderLabel(){return this.props.label||this.props.labelAddOnContent}shouldRenderSpecialCharactersToolbar(){var e=B.a.containsAccentLanguage(this.props.languageCodes);if(void 0!==this.props.userLocale&&null!==this.props.userLocale){var t,i=(null==(t=this.props.lang)?void 0:t.toLowerCase())===this.props.userLocale.toLowerCase();return e&&!i}return e}}Q.defaultProps={autofocus:!1,languageCodes:[],specificAccents:[]}},"wLt/":function(e,t,i){"use strict";i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return _}));var s=i("pVnL"),r=i.n(s),a=(i("EnZy"),i("4mDm"),i("3bBZ"),i("Rm1S"),i("TSYQ")),n=i.n(a),o=i("jiwd"),l=i("q1tI"),u=i.n(l),d=i("4HzQ"),c=i.n(d),h=i("kNXE"),p=i("+IfW"),g=/\*([^*\n\r]+)\*/g,m=/\*[^*\n\r]+\*/g,f=/(\r\n|\n\r|\r|\n)/,v=o.a.WORD_SIDE,_=o.a.DEFINITION_SIDE;class E extends u.a.PureComponent{constructor(){super(...arguments),this.getJsxFromStr=e=>{var t=e;this.props.maxLength&&(t=Object(p.a)(t,this.props.maxLength));var i=0;return t.split(f).map((e=>e.match(f)?u.a.createElement("br",{key:"key-"+i++}):"math"!==this.props.lang&&"chem"!==this.props.lang?function(e){var t=e.split(m),i=[],s=0;t[s]&&i.push(t[s]),s+=1;for(var r=g.exec(e);r;)i.push(u.a.createElement("b",{key:"md-"+s},r[1])),t[s]&&i.push(t[s]),s++,r=g.exec(e);return i}(e):e))},this.renderRichText=e=>u.a.createElement(h.a,{allowRtl:this.props.allowRtl,lang:this.props.lang,pmJson:e}),this.renderText=()=>{if(this.props.side===v)return this.props.shouldShowRichText&&this.props.term.wordRichText?this.renderRichText(this.props.term.wordRichText):this.getJsxFromStr(this.props.term.word||"...");if(this.props.shouldShowRichText&&this.props.term.definitionRichText)return this.renderRichText(this.props.term.definitionRichText);var{definition:e}=this.props.term;return e||this.props.term._imageUrl||(e="..."),this.getJsxFromStr(e)}}render(){var e=n()("TermText","notranslate",this.props.className,"lang-"+this.props.lang);if(this.props.textfit){var t="boolean"==typeof this.props.textfit?{}:this.props.textfit;return u.a.createElement(c.a,r()({className:e},t),this.renderText())}return u.a.createElement("span",{className:e},this.renderText())}}t.c=E},wi8F:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return v}));i("4mDm"),i("3bBZ"),i("4Brf");var s=i("6grX"),r=i("lG1/"),a=i("Uudg"),n=i("JxFz"),o=i("Pxp3"),l=i("nCwC"),u=i("6rYD"),d=i("TX86"),c=i.n(d),h=i("q1tI"),p=i.n(h),g=i("i8i4"),m=i("gA6y"),f="SetDescriptionModalBody";class v extends p.a.PureComponent{constructor(){super(...arguments),this.state={description:this.props.description},this.getPlaceholder=()=>this.props.description?e("create_set.set_description_modal.optional"):void 0,this.onClickSave=e=>{e.preventDefault(),this.props.onClose()},this.onTextareaClick=e=>{e.stopPropagation()},this.onChange=e=>{this.setState({description:e.target.value})},this.onBlur=e=>{var{value:t}=e.target;if((t||this.props.description)&&t!==this.props.description)return this.updateAction({description:t})},this.updateAction=e=>{l.a.update(this.props.setLuid,e)},this.focus=()=>{this.textarea.focus(s.a)}}componentDidMount(){c.a.pushScope(f),c()(u.a.modal.tab,f,(()=>{if(Object(m.a)(Object(g.findDOMNode)(this.saveButton)))return this.focus(),!1})),this.focus()}componentWillUnmount(){c.a.popScope(f),c.a.unbind(u.a.modal.tab,f)}render(){return p.a.createElement("div",null,p.a.createElement(o.a,{className:"SetDescriptionModal-textarea"},p.a.createElement(r.a,{invalid:this.props.hasProfanityError||void 0,label:this.props.hasProfanityError?p.a.createElement(a.a,{id:"create_set.set_description_modal.profanity_error"}):p.a.createElement(a.a,{id:"create_set.set_description_modal.label"}),languageCodes:[this.props.wordLang,this.props.defLang],onBlur:this.onBlur,onChange:this.onChange,onClick:this.onTextareaClick,placeholder:this.getPlaceholder(),ref:e=>{e&&(this.textarea=e)},tabIndex:6,type:"autoExpand",value:this.state.description})),p.a.createElement(o.a,{className:"SetDescriptionModal-saveButton"},p.a.createElement(n.a,{"aria-label":e("create_set.set_description_modal.save_button"),hero:!0,onClick:this.onClickSave,ref:e=>{this.saveButton=e},tabIndex:6,width:"fill"},p.a.createElement(a.a,{id:"create_set.set_description_modal.save_button"}))))}}}).call(this,i("nrsj").default)},"xJ/4":function(e,t,i){"use strict";(function(e){i.d(t,"K",(function(){return k})),i.d(t,"q",(function(){return N})),i.d(t,"l",(function(){return F})),i.d(t,"G",(function(){return j})),i.d(t,"H",(function(){return B})),i.d(t,"E",(function(){return V})),i.d(t,"D",(function(){return G})),i.d(t,"F",(function(){return q})),i.d(t,"r",(function(){return K})),i.d(t,"t",(function(){return z})),i.d(t,"w",(function(){return Q})),i.d(t,"L",(function(){return Y})),i.d(t,"y",(function(){return J})),i.d(t,"B",(function(){return X})),i.d(t,"I",(function(){return $})),i.d(t,"x",(function(){return ee})),i.d(t,"z",(function(){return te})),i.d(t,"A",(function(){return ie})),i.d(t,"n",(function(){return re})),i.d(t,"p",(function(){return ne})),i.d(t,"J",(function(){return ue})),i.d(t,"m",(function(){return de})),i.d(t,"C",(function(){return ce})),i.d(t,"b",(function(){return ge})),i.d(t,"M",(function(){return ve})),i.d(t,"a",(function(){return _e})),i.d(t,"O",(function(){return Ie})),i.d(t,"N",(function(){return Ae})),i.d(t,"d",(function(){return we})),i.d(t,"e",(function(){return De})),i.d(t,"v",(function(){return Le})),i.d(t,"u",(function(){return Re})),i.d(t,"o",(function(){return Pe})),i.d(t,"s",(function(){return Me})),i.d(t,"k",(function(){return Ue})),i.d(t,"g",(function(){return ke})),i.d(t,"j",(function(){return Ne})),i.d(t,"f",(function(){return je})),i.d(t,"i",(function(){return Ve})),i.d(t,"h",(function(){return Ge})),i.d(t,"P",(function(){return qe}));i("E9XD"),i("zKZe"),i("5s+n"),i("4mDm"),i("3bBZ"),i("vxnP");var s=i("wLt/"),r=i("og3H"),a=i("QimK"),n=i("xhj2"),o=i("nCwC"),l=i("FenW"),u=i("+leE"),d=(i("pfAI"),i("FAB2")),c=i("DS/l"),h=i("0j+G"),p=i("SZKz"),g=(i("YUt4"),i("9WHe")),m=i("JPcv"),f=i("YDJX"),v=i("peh1"),_=i("DQwC"),E=i("Z23Y"),b=i("FX4X"),S=i("KQWO"),C=i("5Vd8"),T=i("h4pu"),y=i("TtcH"),I=i("b5AO"),A=i("uBNa"),O=i("Poz8"),w=i("LwNE"),D=i("tINr"),L=i("T3U7"),R=i("fkdw"),x=i("y2oz"),P=i("3OV/"),M=i("e6z1");var U=e=>e.get("createSet"),k=e=>e.get("terms"),N=e=>e.get("diagramShapes"),F=e=>e.get("canUsePremiumDiagramFeatures"),j=e=>e.get("shouldSeeDiagramBlurTooltip"),B=e=>e.get("shouldShowTooltipDiagram"),V=e=>e.get("setLuid"),H=e=>e.get("setStore"),W=Object(v.createSelector)(H,(e=>e.get("set"))),G=(Object(v.createSelector)(W,(e=>e.id)),Object(v.createSelector)(W,(e=>e.defLang))),q=Object(v.createSelector)(W,(e=>e.wordLang)),K=Object(v.createSelector)([H,G],((e,t)=>e.get("setValidationErrors").has("requires_def_lang")&&!t)),z=Object(v.createSelector)([H,q],((e,t)=>e.get("setValidationErrors").has("requires_word_lang")&&!t)),Q=e=>e.get("isTeacher"),Y=e=>e.get("upsellModalSource"),J=Object(v.createSelector)(N,(e=>e.count())),Z=Object(v.createSelector)([J,e=>e.get("maxAllowedDiagramShapeCount"),F],((e,t,i)=>i||e<t)),X=e=>e.get("recentLanguages").toJS(),$=Object(v.createSelector)([N,k],((e,t)=>e.reduce(((e,i,s)=>{var r=""+i.get("termId"),a=t.findKey((e=>""+e.get("id")===r));return!a&&T.a.contains(r)&&(a=r),e.set(""+s,a)}),Object(m.Map)()))),ee=Object(v.createSelector)([N,$],((e,t)=>e.reduce(((e,i,s)=>{var r=_.a.getModel(s),a=t.get(s),n=T.a.getModel(a);return r.isNewRecord()&&n.isNewRecord()?e.add(s):e}),Object(m.Set)()))),te=Object(v.createSelector)(k,(e=>e.filter((e=>e.get("id"))).count())),ie=Object(v.createSelector)(k,(e=>e.filter((e=>e.get("definition"))).count())),se=Object(v.createSelector)(k,(e=>e.count()<=2)),re=e=>e.get("diagramImage"),ae=e=>e.get("diagramImageRefLuid"),ne=e=>e.get("diagramImageUploadError"),oe=Object(v.createSelector)(re,(e=>e.get("_secureLegacyUrlLarge")||e.get("_secureLegacyUrl"))),le=Object(v.createSelector)([k,$],((e,t)=>e.filter(((e,i)=>!t.contains(i))))),ue=Object(v.createSelector)(le,(e=>t=>e.filter((e=>e.get(s.b)&&0===e.get(s.b).toLowerCase().indexOf(t.toLowerCase()))))),de=e=>re(e)||e.get("isSavingDiagramImage")?u.b.EDIT:u.b.UPLOAD,ce=e=>e.get("setContentType"),he=e=>e.get("shouldSaveDiagramShapeImmediately"),pe=Object(f.createAction)(u.a.UPSELL_MODAL_OPEN),ge=Object(f.createAction)(u.a.UPSELL_MODAL_CLOSE),me=Object(f.createAction)(u.a.NEW_DIAGRAM_SHAPE,(e=>{var t,{termLuid:i,termProps:s}=(t={rank:h.b.getOrder().length-1},{termLuid:T.a.add(t),termProps:Object(m.Map)(t)}),r={shape:JSON.stringify(e.geoJson),termId:i},a=_.a.add(r);return Object(m.Map)({diagramShape:Object(m.fromJS)(r),diagramShapeLuid:a,term:s,termLuid:i})})),fe=(Object(f.createAction)(u.a.SEARCH_DIAGRAMS),Object(f.createAction)(u.a.SEARCH_DIAGRAMS_FAILURE),Object(f.createAction)(u.a.SEARCH_DIAGRAMS_RESET)),ve=(Object(f.createAction)(u.a.SEARCH_DIAGRAMS_SUCCESS),e=>{var{geoJson:t}=e;return(e,i)=>{var s=U(i());return F(s)||Object(w.d)(t)?Z(s)?e(me({geoJson:t})):(Object(x.a)({action:r.Ob.CLICK,fullActionName:"upsell_modal_diagram__max_shapes"}),void window.open(Object(y.n)("diagram_max_shapes"))):(Object(x.a)({action:r.Ob.CLICK,fullActionName:"upsell_modal_diagram__custom_shape"}),void e(pe({source:"diagram_custom_shape"})))}}),_e=Object(f.createAction)(u.a.NEW_DIAGRAM_SHAPE_CANCEL),Ee=Object(f.createAction)(u.a.UPLOAD_IMAGE),be=Object(f.createAction)(u.a.UPLOAD_IMAGE_SUCCESS),Se=Object(f.createAction)(u.a.UPLOAD_IMAGE_FAILURE),Ce=t=>{var i=b.a.getModel(t).getValidationErrors();return 0===i.length?e("errors.generic.request_failed"):"invalid_format"===i[0].identifier?e("create_set.diagrams.file_format_warning"):i[0].message},Te=Object(f.createAction)(u.a.EDIT_DIAGRAM_SHAPE,(e=>{var{diagramShapeLuid:t,diagramShapeUpdates:i}=e;i.shape&&"string"!=typeof i.shape&&(i.shape=JSON.stringify(i.shape));var s=_.a.getModel(t);s.setAll(i);var r=s.toJSON();return Object(m.fromJS)({diagramShape:r,diagramShapeLuid:t})})),ye=Object(f.createAction)(u.a.EDIT_TERM),Ie=e=>{var{termLuid:t,termUpdates:i}=e;return(e,s)=>{var r=U(s()),a=V(r),n=T.a.getModel(t);n.setAll(i||{});var o=n.toJSON();e(ye(Object(m.fromJS)({termLuid:t,term:o})));var u=$(r).findKey((e=>e===t)),d=_.a.getModel(u),c=he(r),h=n.isNewRecord()||d.isNewRecord(),p=l.a.update({luid:t,props:o,setLuid:a,syncDelayOverride:c||h});return h?p.then((()=>{var i=T.a.getModel(t).toJSON();e(ye(Object(m.fromJS)({termLuid:t,term:i}))),e((e=>{var{diagramShapeLuid:t,termLuid:i}=e;return(e,s)=>{var r=T.a.getModel(i),a={termId:r.get("id")};he(U(s()))&&null===r.get("id")&&Object(L.a)("term_id_null_in_link_diagram_shape_to_term"),e(Te({diagramShapeLuid:t,diagramShapeUpdates:a}));var n=_.a.getModel(t);n.setAll(a),_.a.save(t,n.toJSON(),!0).then((i=>{var[s,r]=i;e(Te({diagramShapeLuid:t,diagramShapeUpdates:r.toJSON()}))}))}})({diagramShapeLuid:u,termLuid:t}))})):p}},Ae=e=>{var{diagramShapeLuid:t,diagramShapeUpdates:i}=e;return(e,s)=>{var r=U(s()),a=$(r).get(t),n=T.a.getModel(a),o=F(r),l=he(r);if(!o&&i.shape&&!Object(w.d)(i.shape)){var u=_.a.getModel(t).get("shape");return e(Te({diagramShapeLuid:t,diagramShapeUpdates:i})),e(Te({diagramShapeLuid:t,diagramShapeUpdates:{shape:u}})),Object(L.a)("upsell_modal_diagram__custom_shape"),void e(pe({source:"diagram_custom_shape"}))}return n.isNewRecord()?e(Te({diagramShapeLuid:t,diagramShapeUpdates:i})):new Promise((s=>{e(Te({diagramShapeLuid:t,diagramShapeUpdates:i})),_.a.save(t,i,l).then(s)}))}},Oe=Object(f.createAction)(u.a.DELETE_DIAGRAM_SHAPE_SUCCESS),we=e=>{var{luid:t,termLuid:i}=e;return(e,s)=>{if(!se(U(s()))||!i){var r=i?l.a.del(i):Promise.resolve(),a=U(s()).get("shouldUseStudiableServiceToDeleteDiagramShape")?_.a:S.a;r.then((()=>a.del(t))).then((()=>{e(Oe({luid:t,termLuid:i}))}))}}},De=e=>{var{texts:t,side:i}=e;return(e,s)=>{var r=V(U(s()));o.a.detectLanguage(r,i,t)}},Le=e=>e.get("isSavingDiagramImage"),Re=e=>e.get("isEditingDiagramImage"),xe=e=>e.get("diagramImageEdits",Object(m.List)()),Pe=Object(v.createSelector)(xe,(e=>e.last())),Me=Object(v.createSelector)(xe,(e=>e.count()>0)),Ue=Object(f.createAction)(u.a.DIAGRAM_IMAGE_UNDO,(()=>Object(L.a)("diagram_image_editor__undo"))),ke=Object(f.createAction)(u.a.DIAGRAM_IMAGE_CANCEL_EDIT,(()=>Object(L.a)("diagram_image_editor__cancel"))),Ne=Object(f.createAction)(u.a.DIAGRAM_IMAGE_START_EDIT,(()=>Object(L.a)("diagram_image_editor__start"))),Fe=Object(f.createAction)(u.a.DIAGRAM_IMAGE_EDIT),je=e=>(t,i)=>{Object(L.a)("diagram_image_editor__blur");var s=U(i()),r=Pe(s)||oe(s);((e,t)=>Object(O.c)(t).then((i=>{var s=i.width/p.f,r=Object(O.b)(i),a=e.map((e=>{var t=Math.floor(e.x1*s),i=Math.floor(e.y1*s),a=Math.floor(e.x2*s),n=Math.floor(e.y2*s),o=a-t,l=n-i;return o&&l?Promise.resolve(r.getImageData(t,i,o,l)).then(I.a).then((e=>r.putImageData(e,t,i))):Promise.resolve()}));return Promise.all(a).then((()=>i.toDataURL("image/jpeg",1))).catch((e=>{throw g.a.error(e,{imgUrl:t}),e}))})))([e],r).then((e=>t(Fe(e))))},Be=Object(f.createAction)(u.a.DIAGRAM_IMAGE_SAVE),Ve=()=>(e,t)=>{Object(L.a)("diagram_image_editor__save");var i=Pe(U(t()));if(!i)return e(ke());var s=ae(U(t())),r=b.a.add({});e(Be()),Object(O.a)(i).then((e=>b.a.save(r,e))).then((e=>{var[,t]=e;return E.a.save(s,{imageId:t.get("id")},!0).then((e=>{var[,i]=e;return{image:t,imageRef:i}}))})).then((t=>{var{image:i,imageRef:s}=t;e(ke()),e(be({image:i.toJSON(),imageRef:s.toJSON()}))}))},He=Object(f.createAction)(u.a.DIAGRAM_IMAGE_DELETE),We=Object(f.createAction)(u.a.DIAGRAM_IMAGE_DELETE_SUCCESS),Ge=()=>(e,t)=>{var i=U(t()),s=ae(i),r=N(i).keySeq();e(He()),Object(L.a)("diagram_image_editor__delete"),(r.count()?_.a.bulkDel(r):Promise.resolve()).then((()=>E.a.del(s))).then((()=>{e(We())}))},qe=t=>{var{fileList:i}=t;return(t,s)=>{if(n=s(),!(e=>e.get("isUnderAge"))(U(n))||F(U(n))){var n,{matching:u,nonMatching:c,numTotal:p}=Object(A.b)(i,a.b);if(u.length){Object(R.a)("create_set_page",r.H.CREATE,"diagrams_add_image"),function(){for(var e=T.a.models,t=Object.keys(e),i=0;i<Math.min(t.length,d.d.MIN_TERMS_BLANK_SET);i++){var s=t[i],r=e[s];r.isNewRecord()&&!T.a.hasQueuedOpsForLuid(s)&&h.b.getPhantomRow()!==s&&0===Object.keys(r.getChanges()).length&&l.a.del(s)}}();var m=u[0];Object(O.e)(m).then((i=>{var a={_secureLegacyUrl:i.src,height:i.height,width:i.width},n=b.a.add({}),l=E.a.add({}),u=V(U(s()));t(fe()),t(Ee({diagramImage:a,imageLuid:n,imageRefLuid:l})),o.a.maybeCreateSet(u).then((()=>b.a.save(n,m))).then((()=>t((t=>{var{setLuid:i,imageLuid:s,imageRefLuid:a}=t;return t=>{var n=b.a.getModel(s);E.a.save(a,{imageId:n.get("id"),imageType:r.S.DIAGRAM_BASE_IMAGE,modelId:C.a.getModel(i).get("id"),modelType:r.D.SET}).then((e=>{var[,i]=e;t(be({image:n.toJSON(),imageRef:i.toJSON()}))})).catch((()=>{t(Se({message:e("create_set.diagrams.image_ref_warning")}))}))}})({imageLuid:n,imageRefLuid:l,setLuid:u})))).catch((()=>t((e=>{var{imageLuid:t}=e;return Se({message:Ce(t)})})({imageLuid:n}))))}))}else c.length?t(Se({message:e("create_set.diagrams.file_format_warning")})):p>0&&g.a.error("invalid parseFileList result",{total:p,successes:u,failures:c,fileList:i})}else t(Se({message:e("create_set.diagrams.underage_error")}))}};t.c={[u.a.DELETE_DIAGRAM_SHAPE_SUCCESS]:(e,t)=>{var{payload:i}=t;return e.deleteIn(["terms",i.termLuid]).deleteIn(["diagramShapes",i.luid])},[u.a.DIAGRAM_IMAGE_CANCEL_EDIT]:e=>e.set("isEditingDiagramImage",!1).set("diagramImageEdits",Object(m.List)()),[u.a.DIAGRAM_IMAGE_DELETE]:e=>e.set("isSavingDiagramImage",!0),[u.a.DIAGRAM_IMAGE_DELETE_SUCCESS]:e=>e.set("isEditingDiagramImage",!1).set("isSavingDiagramImage",!1).set("diagramShapes",Object(m.Map)()).delete("diagramImage").delete("diagramImageLuid").delete("diagramImageRefLuid"),[u.a.DIAGRAM_IMAGE_EDIT]:(e,t)=>{var{payload:i}=t;return e.update("diagramImageEdits",(e=>e.push(i)))},[u.a.DIAGRAM_IMAGE_SAVE]:e=>e.set("isSavingDiagramImage",!0),[u.a.DIAGRAM_IMAGE_START_EDIT]:e=>e.set("isEditingDiagramImage",!0).set("diagramImageEdits",Object(m.List)()),[u.a.DIAGRAM_IMAGE_UNDO]:e=>e.update("diagramImageEdits",(e=>e.butLast())),[u.a.EDIT_DIAGRAM_SHAPE]:(e,t)=>{var{payload:i}=t;return e.update("diagramShapes",(e=>e.set(i.get("diagramShapeLuid"),i.get("diagramShape"))))},[u.a.EDIT_TERM]:(e,t)=>{var{payload:i}=t;return e.update("terms",(e=>e.set(i.get("termLuid"),i.get("term"))))},[u.a.LEGACY_SET_STORE_UPDATE]:(e,t)=>{var{payload:i}=t;return e.set("setStore",i)},[u.a.LEGACY_TERM_STORE_UPDATE]:(e,t)=>{var{payload:i}=t,s=[],r=Object(D.a)(e.get("terms"),i,(t=>{var i=$(e).findKey((e=>e===t));s.push(i)}));return s.reduce(((e,t)=>e.deleteIn(["diagramShapes",t])),e.set("terms",r))},[u.a.NEW_DIAGRAM_SHAPE]:(e,t)=>{var{payload:i}=t;return e.update("terms",(e=>e.set(i.get("termLuid"),i.get("term")))).update("diagramShapes",(e=>e.set(i.get("diagramShapeLuid"),i.get("diagramShape"))))},[u.a.NEW_DIAGRAM_SHAPE_CANCEL]:(e,t)=>{var{payload:i}=t,{diagramShapeLuid:s}=i,r=$(e).get(s);return e.deleteIn(["terms",r]).deleteIn(["diagramShapes",s])},[u.a.SEARCH_DIAGRAMS]:(e,t)=>{var{payload:i}=t;return e.set("imageSearchResults",{}).set("imageSearchLangs",i.langs).set("imageSearchQuery",i.query).set("imageSearchLoading",!0).set("imageSearchError",null)},[u.a.SEARCH_DIAGRAMS_FAILURE]:(e,t)=>{var{payload:i}=t;return e.set("imageSearchError",i.error)},[u.a.SEARCH_DIAGRAMS_RESET]:e=>e.set("imageSearchResults",{}).set("imageSearchLangs",null).set("imageSearchQuery","").set("imageSearchLoading",!1).set("imageSearchError",null),[u.a.SEARCH_DIAGRAMS_SUCCESS]:(e,t)=>{var{payload:i}=t;return e.set("imageSearchResults",Object(P.a)(Object.keys(i.results).map((e=>[e,new M.a(i.results[e])])))).set("imageSearchLoading",!1)},[u.a.UPLOAD_IMAGE]:(e,t)=>{var{payload:i}=t;return e.set("diagramImage",Object(m.fromJS)(Object.assign({},i.diagramImage))).set("diagramImageLuid",i.imageLuid).set("diagramImageRefLuid",i.imageRefLuid).set("isSavingDiagramImage",!0)},[u.a.UPLOAD_IMAGE_FAILURE]:(e,t)=>{var{payload:i}=t;return e.set("diagramImageUploadError",i.message).set("isSavingDiagramImage",!1).delete("diagramImage").delete("diagramImageLuid").delete("diagramImageRef").delete("diagramImageRefLuid")},[u.a.UPLOAD_IMAGE_SUCCESS]:(e,t)=>{var{payload:i}=t;return e.delete("diagramImageUploadError").set("diagramImage",Object(m.fromJS)(i.image)).set("diagramImageRef",Object(m.fromJS)(i.imageRef)).set("isSavingDiagramImage",!1)},[u.a.UPSELL_MODAL_CLOSE]:e=>e.delete("upsellModalSource"),[u.a.UPSELL_MODAL_OPEN]:(e,t)=>{var{payload:i}=t;return e.set("upsellModalSource",i.source)}};var Ke=Object(f.createAction)(u.a.LEGACY_SET_STORE_UPDATE),ze=Object(f.createAction)(u.a.LEGACY_TERM_STORE_UPDATE);h.b.on(h.a,(e=>{n.b.dispatch(ze(e))})),c.a.addChangeListener((()=>{n.b.dispatch(Ke(Object(m.fromJS)({set:c.a.get(),setLuid:c.a.getLuid(),detectLanguageResults:c.a.getDetectLanguageResults(),setValidationErrors:c.a.getValidationErrors(),setProfanityErrors:c.a.getProfanityErrors(),isDiscardDisabled:c.a.isDiscardDisabled(),isPublishDisabled:c.a.isPublishDisabled(),isRedirecting:c.a.isRedirecting(),shouldHideTerms:c.a.shouldHideTerms(),openLangSelectSide:c.a.getOpenLangSelectSide()})))}))}).call(this,i("nrsj").default)},xNjd:function(e,t){e.exports=function(){return new Worker("https://quizlet.com/a/j/dist/58bbf0138d1905346221.worker.js")}},xlfZ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var s=a(i("q1tI")),r=a(i("17x9"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=e.onMouseDown;return s.default.createElement("span",{className:"Select-arrow",onMouseDown:t})}n.propTypes={onMouseDown:r.default.func}},xnxL:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));i("zKZe");var s=i("fihg"),r={TOO_SHORT:0,SAVE_ERROR:1,NO_MIC_ACCESS:2,BAD_SAMPLE_RATE:3,MIC_MUTED:5};class a{constructor(e){this.isGranted=!1,this.isRecording=!1,this.recordingData={},this.recordingTimestamp=0,this.maxDuration=1/0,this.minDuration=0,this.saveTimeout=1/0,this.onIsUsable=()=>{},this.onStop=()=>{},this.onSave=()=>{},this.onCancel=()=>{},this.onUploadFinish=()=>{},this.onError=()=>{},this.onReady=()=>{},this.onPermissionDenied=()=>{},Object.assign(this,e)}record(e){this.recordingData=e,this.isRecording=!0,this.recordingTimestamp=Object(s.a)()}stop(){this.isRecording=!1}cancel(){this.onCancel()}elapsedTime(e){return void 0===e&&(e=this.recordingTimestamp),e?Object(s.a)()-e:0}hasPermission(){return this.isGranted}needsPermission(){}getVolume(){return 0}}a.errors=r},xoHW:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return h}));i("4mDm"),i("3bBZ");var s=i("TSYQ"),r=i.n(s),a=i("wLt/"),n=i("QimK"),o=i("hAIH"),l=i("q1tI"),u=i.n(l),d=i("vm/G"),c=i("MwSb");class h extends u.a.PureComponent{constructor(){super(...arguments),this.onFocus=e=>{this.props.onFocus(e,a.b)},this.onBlur=e=>{this.props.onBlur(e,a.b)},this.handleEditorValueChange=e=>{this.props.onChange(e,a.b)},this.handlePaste=e=>{if(this.props.onPaste&&this.props.onPaste(e))return!0;if(!this.props.canUseImageUpload||Object(c.a)(e.clipboardData))return!1;e.preventDefault();var{matching:t,nonMatching:i,numTotal:s}=Object(c.e)(e.clipboardData,n.c);return i.length&&this.props.onImageUploadFailure(i),t.length&&this.props.onImageUploadSuccess(t,1===s),!0},this.richTextEditorRef=u.a.createRef(),this.focus=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.focus()},this.blur=()=>{this.richTextEditorRef&&this.richTextEditorRef.current&&this.richTextEditorRef.current.blur()}}getLabel(){return this.props.isProfane?e("create_set.term_profanity_warning.input_label"):this.props.hasMinTermsError?e("create_set.validation_errors.not_enough_terms_error"):this.props.label}render(){return u.a.createElement("div",{className:r()("WordSide",{"is-active":this.props.termActive})},u.a.createElement(d.default,{canEditRichText:!0,invalid:this.props.isProfane||this.props.hasMinTermsError||this.props.hasWordLangError||void 0,label:this.getLabel(),labelAddOnContent:this.shouldRenderLanguageEditor()?u.a.createElement(o.a,{side:a.b}):null,labelId:this.props.labelId,lang:this.props.lang,languageCodes:this.props.lang?[this.props.lang]:[],onBlur:this.onBlur,onChange:this.handleEditorValueChange,onFocus:this.onFocus,onPaste:this.handlePaste,onUpdatePMEditorView:this.props.onUpdatePMEditorView,otherLang:this.props.otherSideLang,placeholder:this.props.placeholder,plainText:this.props.word,pmJson:this.props.wordRichText,ref:this.richTextEditorRef,shouldShowRichTextCombinedToolbar:!0,tabIndex:this.props.tabIndex,userLocale:this.props.userLocale}))}shouldRenderLanguageEditor(){return this.props.termActive||this.props.hasWordLangError}}}).call(this,i("nrsj").default)},xvNY:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"g",(function(){return l})),i.d(t,"t",(function(){return u})),i.d(t,"q",(function(){return d})),i.d(t,"f",(function(){return c})),i.d(t,"n",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"v",(function(){return g})),i.d(t,"k",(function(){return m})),i.d(t,"j",(function(){return f})),i.d(t,"r",(function(){return v})),i.d(t,"s",(function(){return _})),i.d(t,"o",(function(){return E})),i.d(t,"h",(function(){return b})),i.d(t,"l",(function(){return S})),i.d(t,"m",(function(){return C})),i.d(t,"p",(function(){return T})),i.d(t,"d",(function(){return y})),i.d(t,"b",(function(){return I})),i.d(t,"u",(function(){return A})),i.d(t,"e",(function(){return O})),i.d(t,"c",(function(){return w}));i("toAj"),i("zKZe");var s,r=i("og3H"),a=i("9WHe"),n=i("ctRD");!function(e){e.PRODUCT="product",e.PRODUCT_GROUP="product_group"}(s||(s={}));var o=e=>{var t=window;t.dataLayer&&t.dataLayer.push(e)},l=()=>{o({event:"initiatecheckout"})},u=(e,t,i,s)=>{s?((e,t,i)=>{o({event:"FreeTrial",action:"Start",value:Math.round(e),valueFB:null==e?void 0:e.toFixed(2),product:i,currency:(t||"").toUpperCase(),nonInteraction:!0})})(e,t,i):((e,t,i)=>{var s={action:"Complete",valueFB:null==e?void 0:e.toFixed(2),value:Math.round(e),product:i,currency:(t||"").toUpperCase(),nonInteraction:!0};o(Object.assign({},s,{event:"Purchase"})),o(Object.assign({},s,{event:"Purchase "+i}))})(e,t,i)},d=e=>{o(e)},c=e=>{o(e)},h=e=>{o({event:"Search",search_term:e})},p=e=>{o(Object.assign({},e,{event:"initiatecheckout"}))},g=e=>{o(Object.assign({event:"ViewContent"},e))},m=e=>{var t=(e=>{switch(e){case r.D.PREP_PACK:return"Prep Pack";case r.D.FOLDER:case r.D.SET:return"Supplemental";default:return"Unknown"}})(e.modelType),i={action:"Complete",content_type:e.content_type,product:t,valueFB:(e.priceValue/100).toFixed(2),value:Math.round(e.priceValue/100),content_name:e.title,content_ids:e.content_ids,currency:(e.priceCurrency||"").toUpperCase()};o(Object.assign({},i,{event:"Purchase"})),o(Object.assign({},i,{event:"Purchase "+t}))},f=e=>{o(Object.assign({event:"ViewContent"},e))},v=e=>{o({event:"study-set-create",studySetSource:e})},_=e=>{o({event:"study-set-publish",studySetSource:e})},E=e=>{o({event:"product-impressions",ecommerce:{currencyCode:"USD",impressions:e}})},b=(e,t)=>{o({event:"product-impressions",ecommerce:{currencyCode:t,impressions:e}})},S=e=>{var t={event:"product-impressions",ecommerce:{currencyCode:e.currentCode,impressions:e.impressions}};o(t)},C=e=>{var t={event:"product-click",ecommerce:{currencyCode:e.currentCode,click:{actionField:{list:"categories"},products:e.productClick[0]}}};o(t)},T=e=>{var t={event:"product-click",ecommerce:{currencyCode:e.currentCode,click:{actionField:{list:"search results"},products:[e.productClick[0]]}}};o(t)},y=e=>{var t={event:"add-to-cart",ecommerce:{currencyCode:e.currentCode,add:{actionField:{list:"categories"},products:[e.products[0]]}}};o(t)},I=(e,t)=>t.impressionGo&&t.impressionGo[0]&&e===t.impressionGo[0].id?t.impressionGo[0]:t.impressionPlus&&t.impressionPlus[0]&&e===t.impressionPlus[0].id?t.impressionPlus[0]:void 0,A=e=>{try{var t={name:e.name,id:e.id,price:e.price,brand:e.brand,category:e.category,quantity:"1"};y({products:[t],currentCode:"usd"})}catch(i){a.a.error("Unable to track GA event",{e:i})}},O=()=>{o({event:"after-login"})},w=()=>{n.h()}},"yCw/":function(e,t,i){"use strict";i("FZtP"),i("5s+n");var s=i("og3H"),r=i("nCwC"),a=i("TL93"),n=i("7Q9y"),o=i("fdo3"),l={bulkUpdateAndPublish(e,t,i){var a=this.getEmptyOptionLuids(i);this.maybeBulkDeleteOptions(a).then((()=>{r.a.publish(),r.a.publishSync(e,{wordLang:s.x.ENGLISH,defLang:s.x.ENGLISH}).then((()=>{t._webUrl?Object(o.a)(""+t._webUrl):Object(o.a)("/"+t.id)}))}))},getEmptyOptionLuids(e){var t=[];return e.forEach((e=>{var{options:i}=e;i.forEach((e=>{var{optionConnectionMedia:i}=e;0===i.filter((e=>e.id)).length&&e.luid&&t.push(e.luid)}))})),t},maybeBulkDeleteOptions:e=>e.length>0?n.a.bulkDel(e):Promise.resolve(),setHasTitle:e=>!!(null!=e&&e.title&&e.title.length>0),getValidationErrors(e,t){if(!this.setHasTitle(e))return{requires_title:"requires_title"};var i=t.length>=a.a.studiableItems.MIN_ITEMS_FOR_PUBLISH,s=!0;return t.forEach((e=>{var t=e.options.filter((e=>e.id));if(e.id)if(t.length<a.a.multipleChoiceOptions.MIN_ITEMS_PER_QUESTION)s=!1;else{0===t.filter((e=>e.isCorrect)).length&&(s=!1)}else i=!1})),i?s?null:{requires_options:"requires_options"}:{requires_two_items:"requires_two_items"}}};t.a=l},yG4Z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Value=t.Creatable=t.AsyncCreatable=t.Async=void 0;var s=l(i("jMYa")),r=l(i("H0AD")),a=l(i("pssd")),n=l(i("6DYz")),o=l(i("c7zP"));function l(e){return e&&e.__esModule?e:{default:e}}s.default.Async=r.default,s.default.AsyncCreatable=a.default,s.default.Creatable=n.default,s.default.Value=o.default,t.default=s.default,t.Async=r.default,t.AsyncCreatable=a.default,t.Creatable=n.default,t.Value=o.default},yJYf:function(e,t,i){"use strict";i("zKZe");var s=i("nmax"),r=i("T3U7"),a=i("fihg"),n=Object.assign({syncerFirstFailure:{},syncerHasError:{},syncerLastSynced:{},syncerNextRetry:{},syncerNumRetries:{},syncers:{},syncerStatus:{},setup(e){var t=this;this.syncers=e;var i=function(e){var i,s=t.syncers[e];i=e,s.on("sync:begin",(()=>t._begin(i))),s.on("sync:end",(()=>t._end(i))),s.on("sync:error",(()=>t._error(i))),s.on("sync:recover",(()=>t._recover(i))),s.on("sync:wait",(e=>t._wait(i,e)))};for(var s in this.syncers)i(s)},isSyncing(e){if(e)return!!this.syncerStatus[e];for(var t in this.syncerStatus){if(this.syncerStatus[t])return!0}return!1},getAllSyncing(){return Object.keys(this.syncerStatus).filter((e=>this.syncerStatus[e]))},hasError(){for(var e in this.syncerHasError){if(this.syncerHasError[e])return!0}return!1},getLastSyncedTimestamp(){var e=0;for(var t in this.syncerLastSynced){var i=this.syncerLastSynced[t];i>e&&(e=i)}return 0===e?null:e},getNextRetryInSecs(){for(var e in this.syncerNextRetry){var t=this.syncerNextRetry[e];if(this.syncerHasError[e]&&"number"==typeof t)return t}return-1},_begin(e){return this.syncerStatus[e]=!0,this.syncerNumRetries[e]=0,this.change()},_end(e){return this.syncerHasError[e]||(this.syncerLastSynced[e]=Object(a.a)()),this.syncerStatus[e]=!1,this.change()},_error(e){var t=Object(a.a)();this.syncerNumRetries[e]+=1;var i=this.syncerNumRetries[e];return 1===i&&(Object(r.a)("new_create_set_sync_initial_error",this._getErrorLogData(e)),this.syncerFirstFailure[e]=t),(this.syncerFirstFailure[e]?t-this.syncerFirstFailure[e]>6e4:i>6)&&(this.syncerHasError[e]=!0,i%5==1&&Object(r.a)("new_create_set_connection_error_modal",this._getErrorLogData(e))),this.change()},_recover(e){return Object(r.a)("new_create_set_sync_recover",this._getErrorLogData(e)),this.syncerHasError[e]=!1,this.syncerNumRetries[e]=0,this.syncerFirstFailure[e]=null,this.change()},_wait(e,t){return this.syncerNextRetry[e]=t,this.change()},_getErrorLogData(e){var t={identifier:this.syncers[e].MODEL.MODEL_NAME+" syncer error",retry_count:this.syncerNumRetries[e],failure_duration:void 0};return this.syncerFirstFailure[e]&&(t.failure_duration=Object(a.a)()-this.syncerFirstFailure[e]),t}},s.a);n.init(),t.a=n},yNpj:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("pVnL"),r=i.n(s),a=(i("4mDm"),i("3bBZ"),i("q1tI")),n=i.n(a),o=i("INDh"),l=i("yckm"),u=i("l6OD"),d=i("srU6"),c=i("+RhX");function h(e){return Object(o.a)((function(t){return class extends n.a.Component{constructor(){super(...arguments),this.state={isSticky:!1},this.onScroll=()=>{this.hasScheduledScrollRaf||(this.hasScheduledScrollRaf=!0,this.lastScrollTop=c.a.getScrollTop(),window.requestAnimationFrame(this.updateSticky))},this.updateSticky=()=>{if(e.disableOnDesktop&&!Object(u.f)())this.hasScheduledScrollRaf=!1;else{var t=this.getOffset(),i=this.lastScrollTop>t;i!==this.state.isSticky&&this.setState({isSticky:i}),this.hasScheduledScrollRaf=!1}}}componentDidMount(){this.scrollListener=l.a.listen(window,"scroll",this.onScroll)}componentWillUnmount(){this.scrollListener&&this.scrollListener.remove()}getOffset(){var t=Object(d.b)();return e.headerOffsetTopMobile&&Object(u.h)()?e.headerOffsetTopMobile:void 0!==e.headerOffsetTopTablet&&Object(u.f)()&&t&&Object(u.b)(t,"s")?e.headerOffsetTopTablet:e.headerOffsetTop}render(){return n.a.createElement(t,r()({},this.props,{isSticky:this.state.isSticky}))}}}))}},zO4m:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return v}));i("4mDm"),i("3bBZ");var s=i("baRz"),r=i("pNr3"),a=i("bc/W"),n=i("78K5"),o=i("Nxgj"),l=i("t1Ez"),u=i("mGzj"),d=i("q1tI"),c=i.n(d),h=i("0RqGD"),p=i("T3U7"),g=i("dHOp"),m=Object(s.styled)("div")({name:"Buttons",class:"b1r6bd1m"}),f=Object(s.styled)("div")({name:"Button",class:"bq40tjb"});class v extends c.a.PureComponent{constructor(){super(...arguments),this.onSocialSignupButtonClick=e=>{Object(p.a)("signup_form_"+e+"_button_clicked")}}renderFacebookButton(){return Object(h.b)()?c.a.createElement(r.c,{onClick:()=>this.onSocialSignupButtonClick("facebook"),provider:r.b.FACEBOOK,urlParams:this.props.socialLoginParams}):c.a.createElement(n.a,{facebookLoginUrl:Object(g.b)(this.props.socialLoginParams),label:e("global.sign_up_modal.sign_up_cta.continue_with_facebook"),onClick:()=>this.onSocialSignupButtonClick("facebook"),variant:"small"})}renderGoogleButton(){return Object(h.b)()?c.a.createElement(r.c,{onClick:()=>this.onSocialSignupButtonClick("google"),provider:r.b.GOOGLE,urlParams:this.props.socialLoginParams}):c.a.createElement(o.a,{googleLoginUrl:Object(g.c)(this.props.socialLoginParams),label:e("global.sign_up_modal.sign_up_cta.continue_with_google"),onClick:()=>this.onSocialSignupButtonClick("google"),variant:"small"})}renderDivider(){return Object(h.b)()?c.a.createElement(a.a,null,c.a.createElement(l.a,{id:"global.sign_up_modal.divider_label"})):c.a.createElement(u.a,{key:"divider"},c.a.createElement(l.a,{id:"global.sign_up_modal.email_divider_label"}))}render(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(m,null,c.a.createElement(f,null,this.renderGoogleButton()),this.props.shouldRenderFacebookLoginButton?c.a.createElement(f,null,this.renderFacebookButton()):null),this.renderDivider())}}i("a/yz")}).call(this,i("nrsj").default)},"za/w":function(e,t,i){"use strict";var s=i("Vg22"),r=i("xJ/4"),a=i("2pfH"),n=i("FdmV"),o=Object(n.a)("createSet",{diagramImageUploadError:r.p,setContentType:r.C});t.a=Object(s.connect)(o)(a.a)},zdCk:function(e,t,i){i("FZtP"),i("4mDm"),i("3bBZ");var s=200,r=function(){};r.prototype.append=function(e){return e.length?(e=r.from(e),!this.length&&e||e.length<s&&this.leafAppend(e)||this.length<s&&e.leafPrepend(this)||this.appendInner(e)):this},r.prototype.prepend=function(e){return e.length?r.from(e).append(this):this},r.prototype.appendInner=function(e){return new n(this,e)},r.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?r.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},r.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},r.prototype.forEach=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)},r.prototype.map=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length);var s=[];return this.forEach((function(t,i){return s.push(e(t,i))}),t,i),s},r.from=function(e){return e instanceof r?e:e&&e.length?new a(e):r.empty};var a=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={length:{},depth:{}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,i){return 0==e&&i==this.length?this:new t(this.values.slice(e,i))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,i,s){for(var r=t;r<i;r++)if(!1===e(this.values[r],s+r))return!1},t.prototype.forEachInvertedInner=function(e,t,i,s){for(var r=t-1;r>=i;r--)if(!1===e(this.values[r],s+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=s)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=s)return new t(e.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(t.prototype,i),t}(r);r.empty=new a([]);var n=function(e){function t(t,i){e.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,i,s){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(i,r),s))&&(!(i>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,i)-r,s+r))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,i,s){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(i,r)-r,s+r))&&(!(i<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),i,s))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var i=this.left.length;return t<=i?this.left.slice(e,t):e>=i?this.right.slice(e-i,t-i):this.left.slice(e,i).append(this.right.slice(0,t-i))},t.prototype.leafAppend=function(e){var i=this.right.leafAppend(e);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(e){var i=this.left.leafPrepend(e);if(i)return new t(i,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(r);e.exports=r}},[[45,"main","react","immutable","redux","rich_text_rendering","quizlet_shared_kotlin","pinyin_converter","leaflet","rich_text_editing","common"]]]);